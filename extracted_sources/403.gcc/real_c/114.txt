static void
etoc4x (x, d, mode)
     const UEMUSHORT *x;
     UEMUSHORT *d;
     enum machine_mode mode;
{
  UEMUSHORT xi[NI];
  EMULONG exp;
  int rndsav;

  emovi (x, xi);

  /* Adjust exponent for offsets.  */
  exp = (EMULONG) xi[E] - (EXONE - 0x7f);

  /* Round off to nearest or even.  */
  rndsav = rndprc;
  rndprc = mode == QFmode ? 24 : 32;
  emdnorm (xi, 0, 0, exp, 64);
  rndprc = rndsav;
  toc4x (xi, d, mode);
}
