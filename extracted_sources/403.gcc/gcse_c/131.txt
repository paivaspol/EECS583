static int 
store_killed_before (x, insn, bb)
     rtx x, insn;
     basic_block bb;
{
  rtx first = bb->head;

  if (insn == first)
    return store_killed_in_insn (x, insn);
   
  /* Check if the register operands of the store are OK in this block.
     Note that if registers are changed ANYWHERE in the block, we'll 
     decide we can't move it, regardless of whether it changed above 
     or below the store. This could be improved by checking the register
     operands while lookinng for aliasing in each insn.  */
  if (!store_ops_ok (XEXP (x, 0), bb))
    return 1;

  for ( ; insn && insn != PREV_INSN (first); insn = PREV_INSN (insn))
    if (store_killed_in_insn (x, insn))
      return 1;
   
  return 0;
}
