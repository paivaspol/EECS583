static bool
control_flow_insn_p (insn)
     rtx insn;
{
  rtx note;

  switch (GET_CODE (insn))
    {
      case NOTE:
      case CODE_LABEL:
	return false;

      case JUMP_INSN:
	/* Jump insn always causes control transfer except for tablejumps.  */
	return (GET_CODE (PATTERN (insn)) != ADDR_VEC
		&& GET_CODE (PATTERN (insn)) != ADDR_DIFF_VEC);

      case CALL_INSN:
	/* Call insn may return to the nonlocal goto handler.  */
	return ((nonlocal_goto_handler_labels
		 && (0 == (note = find_reg_note (insn, REG_EH_REGION,
						 NULL_RTX))
		     || INTVAL (XEXP (note, 0)) >= 0))
		/* Or may trap.  */
		|| can_throw_internal (insn));

      case INSN:
	return (flag_non_call_exceptions && can_throw_internal (insn));

      case BARRIER:
	/* It is nonsence to reach barrier when looking for the
	   end of basic block, but before dead code is eliminated
	   this may happen.  */
	return false;

      default:
	abort ();
    }
}
