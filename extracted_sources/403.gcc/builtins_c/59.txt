static int
validate_arglist VPARAMS ((tree arglist, ...))
{
  enum tree_code code;
  int res = 0;

  VA_OPEN (ap, arglist);
  VA_FIXEDARG (ap, tree, arglist);

  do {
    code = va_arg (ap, enum tree_code);
    switch (code)
    {
    case 0:
      /* This signifies an ellipses, any further arguments are all ok.  */
      res = 1;
      goto end;
    case VOID_TYPE:
      /* This signifies an endlink, if no arguments remain, return
         true, otherwise return false.  */
      res = arglist == 0;
      goto end;
    default:
      /* If no parameters remain or the parameter's code does not
         match the specified code, return false.  Otherwise continue
         checking any remaining arguments.  */
      if (arglist == 0 || code != TREE_CODE (TREE_TYPE (TREE_VALUE (arglist))))
	goto end;
      break;
    }
    arglist = TREE_CHAIN (arglist);
  } while (1);

  /* We need gotos here since we can only have one VA_CLOSE in a
     function.  */
 end: ;
  VA_CLOSE (ap);

  return res;
}
