int
address_cost (x, mode)
     rtx x;
     enum machine_mode mode;
{
  /* The ADDRESS_COST macro does not deal with ADDRESSOF nodes.  But,
     during CSE, such nodes are present.  Using an ADDRESSOF node which
     refers to the address of a REG is a good thing because we can then
     turn (MEM (ADDRESSSOF (REG))) into just plain REG.  */

  if (GET_CODE (x) == ADDRESSOF && REG_P (XEXP ((x), 0)))
    return -1;

  /* We may be asked for cost of various unusual addresses, such as operands
     of push instruction.  It is not worthwhile to complicate writing
     of ADDRESS_COST macro by such cases.  */

  if (!memory_address_p (mode, x))
    return 1000;
#ifdef ADDRESS_COST
  return ADDRESS_COST (x);
#else
  return rtx_cost (x, MEM);
#endif
}
