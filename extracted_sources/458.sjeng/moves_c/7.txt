void push_king (int target) {

  /* add king moves to the moves array */

  /* first see if the move will take the king off the board: */
  if (board[target] == frame)
    return;

  /* check to see if we have a non capture when in qsearch: */
  if (board[target] == npiece && captures)
    return;

  /* non-capture, 'normal' king moves: */
  if (board[target] == npiece) {
    add_move(target, 0);
    return;
  }

  /* 'normal' capture moves by the king: */
  else if ((board[target]&1) != (board[gfrom]&1)) {
    add_capture(target, board[target], 0, FALSE);
    return;
  }

  /* no more possible moves for the king, so return: */
  return;
}
