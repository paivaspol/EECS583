static int calc_nmid(int nlevels,real lo,real mid,real hi)
{
  /* Take care that we have at least 1 entry in the low to mid range
   * and at least 1 entry in themid to low range
   */
  return min(max(1,((mid-lo)/(hi-lo))*(nlevels-1)),nlevels-1);
}
