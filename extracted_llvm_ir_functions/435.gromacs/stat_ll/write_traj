define i32 @write_traj(%struct._IO_FILE* %log, %struct.t_commrec* nocapture %cr, i8* %traj, %struct.t_nsborder* %nsb, i32 %step, float %t, float %lambda, %struct.t_nrnb* nocapture %nrnb, i32 %natoms, [3 x float]* %xx, [3 x float]* %vv, [3 x float]* %ff, [3 x float]* %box) #0 {
entry:
  %0 = load i32* @write_traj.fp, align 4, !tbaa !3
  %cmp = icmp eq i32 %0, -1
  br i1 %cmp, label %land.lhs.true, label %if.end

land.lhs.true:                                    ; preds = %entry
  %nodeid = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 0
  %1 = load i32* %nodeid, align 4, !tbaa !3
  %cmp1 = icmp eq i32 %1, 0
  br i1 %cmp1, label %land.lhs.true2, label %if.end

land.lhs.true2:                                   ; preds = %land.lhs.true
  %threadid = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 4
  %2 = load i32* %threadid, align 4, !tbaa !3
  %cmp3 = icmp eq i32 %2, 0
  br i1 %cmp3, label %if.then, label %if.end

if.then:                                          ; preds = %land.lhs.true2
  %call = tail call i32 @open_trn(i8* %traj, i8* getelementptr inbounds ([2 x i8]* @.str2, i64 0, i64 0)) #5
  store i32 %call, i32* @write_traj.fp, align 4, !tbaa !3
  br label %if.end

if.end:                                           ; preds = %if.then, %land.lhs.true2, %land.lhs.true, %entry
  %nnodes = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 1
  %3 = load i32* %nnodes, align 4, !tbaa !3
  %cmp4 = icmp sgt i32 %3, 1
  br i1 %cmp4, label %if.then5, label %if.end10

if.then5:                                         ; preds = %if.end
  %left = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 2
  %4 = load i32* %left, align 4, !tbaa !3
  %right = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 3
  %5 = load i32* %right, align 4, !tbaa !3
  tail call fastcc void @moveit(%struct._IO_FILE* %log, i32 %4, i32 %5, i8* getelementptr inbounds ([3 x i8]* @.str3, i64 0, i64 0), [3 x float]* %xx, %struct.t_nsborder* %nsb) #6
  %6 = load i32* %left, align 4, !tbaa !3
  %7 = load i32* %right, align 4, !tbaa !3
  tail call fastcc void @moveit(%struct._IO_FILE* %log, i32 %6, i32 %7, i8* getelementptr inbounds ([3 x i8]* @.str4, i64 0, i64 0), [3 x float]* %vv, %struct.t_nsborder* %nsb) #6
  %8 = load i32* %left, align 4, !tbaa !3
  %9 = load i32* %right, align 4, !tbaa !3
  tail call fastcc void @moveit(%struct._IO_FILE* %log, i32 %8, i32 %9, i8* getelementptr inbounds ([3 x i8]* @.str5, i64 0, i64 0), [3 x float]* %ff, %struct.t_nsborder* %nsb) #6
  br label %if.end10

if.end10:                                         ; preds = %if.then5, %if.end
  %tobool = icmp eq [3 x float]* %xx, null
  %tobool11 = icmp eq [3 x float]* %vv, null
  %or.cond = and i1 %tobool, %tobool11
  %tobool13 = icmp eq [3 x float]* %ff, null
  %or.cond42 = and i1 %or.cond, %tobool13
  br i1 %or.cond42, label %if.end21, label %land.lhs.true14

land.lhs.true14:                                  ; preds = %if.end10
  %nodeid15 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 0
  %10 = load i32* %nodeid15, align 4, !tbaa !3
  %cmp16 = icmp eq i32 %10, 0
  br i1 %cmp16, label %land.lhs.true17, label %if.end21

land.lhs.true17:                                  ; preds = %land.lhs.true14
  %threadid18 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 4
  %11 = load i32* %threadid18, align 4, !tbaa !3
  %cmp19 = icmp eq i32 %11, 0
  br i1 %cmp19, label %if.then20, label %if.end21

if.then20:                                        ; preds = %land.lhs.true17
  %12 = load i32* @write_traj.fp, align 4, !tbaa !3
  tail call void @fwrite_trn(i32 %12, i32 %step, float %t, float %lambda, [3 x float]* %box, i32 %natoms, [3 x float]* %xx, [3 x float]* %vv, [3 x float]* %ff) #5
  %13 = load i32* @write_traj.fp, align 4, !tbaa !3
  tail call void @gmx_fio_flush(i32 %13) #5
  br label %if.end21

if.end21:                                         ; preds = %land.lhs.true17, %land.lhs.true14, %if.end10, %if.then20
  %14 = load i32* @write_traj.fp, align 4, !tbaa !3
  ret i32 %14
}
