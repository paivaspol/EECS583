define i64 @do_steep(%struct.__sFILE* %log, i32 %nfile, %struct.t_filenm* %fnm, %struct.t_parm* %parm, %struct.t_topology* %top, %struct.t_groups* %grps, %struct.t_nsborder* %nsb, [3 x float]* %x, [3 x float]* nocapture readnone %grad, [3 x float]* %buf, %struct.t_mdatoms* %mdatoms, [3 x float]* nocapture readnone %ekin, float* %ener, %struct.t_fcdata* %fcd, %struct.t_nrnb* %nrnb, i32 %bVerbose, i32 %bDummies, %struct.t_comm_dummies* %dummycomm, %struct.t_commrec* %cr, %struct.t_commrec* %mcr, %struct.t_graph* %graph, %struct.t_forcerec* %fr, float* %box_size) #3 {
  %lambda = alloca float, align 4
  %pos = alloca [2 x [3 x float]*], align 16
  %force = alloca [2 x [3 x float]*], align 16
  %Fmax = alloca [2 x float], align 4
  %Epot = alloca [2 x float], align 4
  %dvdlambda = alloca float, align 4
  %vcm = alloca %struct.t_vcm*, align 8
  %mynrnb = alloca %struct.t_nrnb, align 8
  %bLR = alloca i32, align 4
  %bLJLR = alloca i32, align 4
  %bBHAM = alloca i32, align 4
  %b14 = alloca i32, align 4
  %force_vir = alloca [3 x [3 x float]], align 16
  %shake_vir = alloca [3 x [3 x float]], align 16
  %pme_vir = alloca [3 x [3 x float]], align 16
  %mu_tot = alloca [3 x float], align 4
  %nfmax = alloca i32, align 4
  %start = alloca i32, align 4
  %end = alloca i32, align 4
  %terminate = alloca float, align 4
  %1 = bitcast %struct.t_nrnb* %mynrnb to i8*
  call void @llvm.lifetime.start(i64 1032, i8* %1) #4
  %2 = bitcast [3 x [3 x float]]* %force_vir to i8*
  call void @llvm.lifetime.start(i64 36, i8* %2) #4
  %3 = bitcast [3 x [3 x float]]* %shake_vir to i8*
  call void @llvm.lifetime.start(i64 36, i8* %3) #4
  %4 = bitcast [3 x [3 x float]]* %pme_vir to i8*
  call void @llvm.lifetime.start(i64 36, i8* %4) #4
  store float 0.000000e+00, float* %terminate, align 4, !tbaa !19
  %5 = getelementptr inbounds [3 x float]* %mu_tot, i64 0, i64 0
  call fastcc void @init_em(%struct.__sFILE* %log, i8* getelementptr inbounds ([18 x i8]* @.str18, i64 0, i64 0), %struct.t_parm* %parm, float* %lambda, %struct.t_nrnb* %mynrnb, float* %5, float* %box_size, %struct.t_forcerec* %fr, %struct.t_mdatoms* %mdatoms, %struct.t_topology* %top, %struct.t_nsborder* %nsb, %struct.t_commrec* %cr, %struct.t_vcm** %vcm, i32* %start, i32* %end) #8
  %6 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 0
  %7 = load i32* %6, align 4, !tbaa !20
  %8 = call i64 @print_date_and_time(%struct.__sFILE* %log, i32 %7, i8* getelementptr inbounds ([26 x i8]* @.str19, i64 0, i64 0)) #7
  %9 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 3
  br label %10

; <label>:10                                      ; preds = %10, %0
  %indvars.iv49 = phi i64 [ 0, %0 ], [ %indvars.iv.next50, %10 ]
  %11 = load i32* %9, align 4, !tbaa !22
  %12 = call i8* @save_calloc(i8* getelementptr inbounds ([7 x i8]* @.str20, i64 0, i64 0), i8* getelementptr inbounds ([68 x i8]* @.str3, i64 0, i64 0), i32 571, i32 %11, i32 12) #7
  %13 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %indvars.iv49
  %14 = bitcast [3 x float]** %13 to i8**
  store i8* %12, i8** %14, align 8, !tbaa !33
  %15 = load i32* %9, align 4, !tbaa !22
  %16 = call i8* @save_calloc(i8* getelementptr inbounds ([9 x i8]* @.str21, i64 0, i64 0), i8* getelementptr inbounds ([68 x i8]* @.str3, i64 0, i64 0), i32 572, i32 %15, i32 12) #7
  %17 = getelementptr inbounds [2 x [3 x float]*]* %force, i64 0, i64 %indvars.iv49
  %18 = bitcast [3 x float]** %17 to i8**
  store i8* %16, i8** %18, align 8, !tbaa !33
  %indvars.iv.next50 = add nuw nsw i64 %indvars.iv49, 1
  %exitcond51 = icmp eq i64 %indvars.iv.next50, 2
  br i1 %exitcond51, label %19, label %10

; <label>:19                                      ; preds = %10
  %20 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0
  call void @set_pot_bools(%struct.t_inputrec* %20, %struct.t_topology* %top, i32* %bLR, i32* %bLJLR, i32* %bBHAM, i32* %b14) #7
  %21 = load i32* %6, align 4, !tbaa !20
  %22 = icmp eq i32 %21, 0
  br i1 %22, label %23, label %30

; <label>:23                                      ; preds = %19
  %24 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 4
  %25 = load i32* %24, align 4, !tbaa !24
  %26 = icmp eq i32 %25, 0
  br i1 %26, label %27, label %30

; <label>:27                                      ; preds = %23
  %28 = call i8* @ftp2fn(i32 8, i32 %nfile, %struct.t_filenm* %fnm) #7
  %29 = call i32 @open_enx(i8* %28, i8* getelementptr inbounds ([2 x i8]* @.str6, i64 0, i64 0)) #7
  br label %30

; <label>:30                                      ; preds = %19, %23, %27
  %fp_ene.0 = phi i32 [ %29, %27 ], [ -1, %23 ], [ -1, %19 ]
  %31 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 2
  %32 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 1
  %33 = load i32* %bLR, align 4, !tbaa !25
  %34 = load i32* %bLJLR, align 4, !tbaa !25
  %35 = load i32* %bBHAM, align 4, !tbaa !25
  %36 = load i32* %b14, align 4, !tbaa !25
  %37 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 46
  %38 = load i32* %37, align 4, !tbaa !26
  %39 = icmp ne i32 %38, 0
  %40 = zext i1 %39 to i32
  %41 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 28
  %42 = load i32* %41, align 4, !tbaa !27
  %43 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 43
  %44 = load i32* %43, align 4, !tbaa !28
  %45 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 32, i64 1, i64 0
  %46 = load float* %45, align 4, !tbaa !19
  %fabsf = call float @fabsf(float %46) #6
  %47 = fpext float %fabsf to double
  %48 = fcmp ogt double %47, 1.200000e-38
  br i1 %48, label %59, label %49

; <label>:49                                      ; preds = %30
  %50 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 32, i64 2, i64 0
  %51 = load float* %50, align 4, !tbaa !19
  %fabsf1 = call float @fabsf(float %51) #6
  %52 = fpext float %fabsf1 to double
  %53 = fcmp ogt double %52, 1.200000e-38
  br i1 %53, label %59, label %54

; <label>:54                                      ; preds = %49
  %55 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 32, i64 2, i64 1
  %56 = load float* %55, align 4, !tbaa !19
  %fabsf2 = call float @fabsf(float %56) #6
  %57 = fpext float %fabsf2 to double
  %58 = fcmp ogt double %57, 1.200000e-38
  br label %59

; <label>:59                                      ; preds = %54, %49, %30
  %60 = phi i1 [ true, %49 ], [ true, %30 ], [ %58, %54 ]
  %61 = zext i1 %60 to i32
  %62 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 27
  %63 = load i32* %62, align 4, !tbaa !29
  %64 = icmp eq i32 %63, 2
  %65 = zext i1 %64 to i32
  %66 = call %struct.t_mdebin* @init_mdebin(i32 %fp_ene.0, %struct.t_groups* %grps, %struct.t_atoms* %31, %struct.t_idef* %32, i32 %33, i32 %34, i32 %35, i32 %36, i32 %40, i32 %42, i32 %44, i32 %61, i32 %65, %struct.t_commrec* %cr) #7
  %67 = getelementptr inbounds [3 x [3 x float]]* %force_vir, i64 0, i64 0
  call void @llvm.memset.p0i8.i64(i8* %2, i8 0, i64 36, i32 16, i1 false) #4
  %68 = getelementptr inbounds [3 x [3 x float]]* %shake_vir, i64 0, i64 0
  call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 36, i32 16, i1 false) #4
  %69 = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 0
  %70 = load i32* %69, align 4, !tbaa !30
  %71 = icmp eq i32 %70, 1
  br i1 %71, label %73, label %72

; <label>:72                                      ; preds = %59
  call void @do_pbc_first(%struct.__sFILE* %log, %struct.t_parm* %parm, float* %box_size, %struct.t_forcerec* %fr, %struct.t_graph* %graph, [3 x float]* %x) #7
  br label %73

; <label>:73                                      ; preds = %59, %72
  %74 = load %struct.__sFILE** @stdlog, align 8, !tbaa !33
  %75 = load i32* %start, align 4, !tbaa !25
  %76 = load i32* %end, align 4, !tbaa !25
  %77 = call i32 @init_constraints(%struct.__sFILE* %74, %struct.t_topology* %top, %struct.t_inputrec* %20, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, i32 0, %struct.t_commrec* %cr) #7
  %78 = icmp ne i32 %77, 0
  br i1 %78, label %79, label %83

; <label>:79                                      ; preds = %73
  %80 = load i32* %9, align 4, !tbaa !22
  %81 = call i8* @save_calloc(i8* getelementptr inbounds ([4 x i8]* @.str22, i64 0, i64 0), i8* getelementptr inbounds ([68 x i8]* @.str3, i64 0, i64 0), i32 603, i32 %80, i32 12) #7
  %82 = bitcast i8* %81 to [3 x float]*
  br label %83

; <label>:83                                      ; preds = %79, %73
  %xcf.0 = phi [3 x float]* [ %82, %79 ], [ null, %73 ]
  %84 = load i32* %9, align 4, !tbaa !22
  %85 = icmp sgt i32 %84, 0
  br i1 %85, label %.lr.ph25, label %._crit_edge26

.lr.ph25:                                         ; preds = %83
  %86 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 0
  %87 = load [3 x float]** %86, align 16, !tbaa !33
  %88 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 1
  %89 = load [3 x float]** %88, align 8, !tbaa !33
  %90 = sext i32 %84 to i64
  br label %91

; <label>:91                                      ; preds = %.lr.ph25, %91
  %indvars.iv47 = phi i64 [ 0, %.lr.ph25 ], [ %indvars.iv.next48, %91 ]
  %92 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv47, i64 0
  %93 = getelementptr inbounds [3 x float]* %87, i64 %indvars.iv47, i64 0
  %94 = bitcast float* %92 to i32*
  %95 = load i32* %94, align 4, !tbaa !19
  %96 = bitcast float* %93 to i32*
  store i32 %95, i32* %96, align 4, !tbaa !19
  %97 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv47, i64 1
  %98 = bitcast float* %97 to i32*
  %99 = load i32* %98, align 4, !tbaa !19
  %100 = getelementptr inbounds [3 x float]* %87, i64 %indvars.iv47, i64 1
  %101 = bitcast float* %100 to i32*
  store i32 %99, i32* %101, align 4, !tbaa !19
  %102 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv47, i64 2
  %103 = bitcast float* %102 to i32*
  %104 = load i32* %103, align 4, !tbaa !19
  %105 = getelementptr inbounds [3 x float]* %87, i64 %indvars.iv47, i64 2
  %106 = bitcast float* %105 to i32*
  store i32 %104, i32* %106, align 4, !tbaa !19
  %107 = getelementptr inbounds [3 x float]* %89, i64 %indvars.iv47, i64 0
  %108 = load i32* %94, align 4, !tbaa !19
  %109 = bitcast float* %107 to i32*
  store i32 %108, i32* %109, align 4, !tbaa !19
  %110 = load i32* %98, align 4, !tbaa !19
  %111 = getelementptr inbounds [3 x float]* %89, i64 %indvars.iv47, i64 1
  %112 = bitcast float* %111 to i32*
  store i32 %110, i32* %112, align 4, !tbaa !19
  %113 = load i32* %103, align 4, !tbaa !19
  %114 = getelementptr inbounds [3 x float]* %89, i64 %indvars.iv47, i64 2
  %115 = bitcast float* %114 to i32*
  store i32 %113, i32* %115, align 4, !tbaa !19
  %indvars.iv.next48 = add nuw nsw i64 %indvars.iv47, 1
  %116 = icmp slt i64 %indvars.iv.next48, %90
  br i1 %116, label %91, label %._crit_edge26

._crit_edge26:                                    ; preds = %91, %83
  %117 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 59
  %118 = load float* %117, align 4, !tbaa !44
  %119 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 1
  %120 = load i32* %119, align 4, !tbaa !32
  %121 = load i32* %6, align 4, !tbaa !20
  %122 = icmp eq i32 %121, 0
  %123 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 4
  br i1 %122, label %124, label %._crit_edge58

; <label>:124                                     ; preds = %._crit_edge26
  %125 = load i32* %123, align 4, !tbaa !24
  %126 = icmp eq i32 %125, 0
  br i1 %126, label %127, label %._crit_edge58

; <label>:127                                     ; preds = %124
  %128 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !33
  %129 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 60
  %130 = load float* %129, align 4, !tbaa !34
  call fastcc void @sp_header(%struct.__sFILE* %128, i8* getelementptr inbounds ([18 x i8]* @.str18, i64 0, i64 0), float %130, i32 %120) #8
  br label %._crit_edge58

._crit_edge58:                                    ; preds = %._crit_edge26, %127, %124
  %131 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 60
  %132 = load float* %131, align 4, !tbaa !34
  call fastcc void @sp_header(%struct.__sFILE* %log, i8* getelementptr inbounds ([18 x i8]* @.str18, i64 0, i64 0), float %132, i32 %120) #8
  %133 = icmp sgt i32 %120, 0
  %134 = icmp slt i32 %75, %76
  %135 = getelementptr inbounds %struct.t_mdatoms* %mdatoms, i64 0, i32 17
  %136 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 80, i32 8
  %137 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 1, i64 0
  %138 = load float* %lambda, align 4, !tbaa !19
  %139 = icmp ne i32 %bDummies, 0
  %140 = getelementptr inbounds [3 x [3 x float]]* %pme_vir, i64 0, i64 0
  %141 = icmp ne i32 %bVerbose, 0
  %142 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 1
  %143 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 5
  %144 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 3
  %145 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 80
  %146 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 2
  %147 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 3
  %148 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 1
  %149 = load %struct.t_vcm** %vcm, align 8, !tbaa !33
  %150 = getelementptr inbounds float* %ener, i64 37
  %151 = getelementptr inbounds %struct.t_mdatoms* %mdatoms, i64 0, i32 0
  %152 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 3, i64 0
  %153 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 4, i64 0
  %154 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 54
  %155 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 58
  %156 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 11
  %157 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 9
  %158 = sext i32 %75 to i64
  %159 = add i32 %76, -1
  br label %160

; <label>:160                                     ; preds = %._crit_edge58, %377
  %stepsize.022 = phi float [ 0.000000e+00, %._crit_edge58 ], [ %370, %377 ]
  %steps_accepted.021 = phi i32 [ 0, %._crit_edge58 ], [ %steps_accepted.1, %377 ]
  %Min.020 = phi i32 [ 0, %._crit_edge58 ], [ %Min.1, %377 ]
  %count.019 = phi i32 [ 0, %._crit_edge58 ], [ %378, %377 ]
  %bDone.018 = phi i32 [ 0, %._crit_edge58 ], [ %bDone.1, %377 ]
  %ustep.017 = phi float [ %118, %._crit_edge58 ], [ %ustep.1, %377 ]
  %161 = icmp eq i32 %count.019, %120
  %. = and i1 %133, %161
  %162 = zext i1 %. to i32
  %163 = icmp sgt i32 %count.019, 0
  %brmerge.demorgan = and i1 %163, %134
  br i1 %brmerge.demorgan, label %.lr.ph11, label %.loopexit6

.lr.ph11:                                         ; preds = %160
  %164 = load i16** %135, align 8, !tbaa !41
  %165 = load [3 x i32]** %136, align 8, !tbaa !42
  %166 = sext i32 %Min.020 to i64
  %167 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %166
  %168 = load [3 x float]** %167, align 8, !tbaa !33
  %169 = getelementptr inbounds [2 x [3 x float]*]* %force, i64 0, i64 %166
  %170 = sub nsw i32 1, %Min.020
  %171 = sext i32 %170 to i64
  %172 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %171
  br label %173

; <label>:173                                     ; preds = %195, %.lr.ph11
  %indvars.iv30 = phi i64 [ %158, %.lr.ph11 ], [ %indvars.iv.next31, %195 ]
  %174 = getelementptr inbounds i16* %164, i64 %indvars.iv30
  %175 = load i16* %174, align 2, !tbaa !43
  %176 = zext i16 %175 to i64
  br label %177

; <label>:177                                     ; preds = %194, %173
  %indvars.iv28 = phi i64 [ 0, %173 ], [ %indvars.iv.next29, %194 ]
  %178 = getelementptr inbounds [3 x i32]* %165, i64 %176, i64 %indvars.iv28
  %179 = load i32* %178, align 4, !tbaa !25
  %180 = icmp eq i32 %179, 0
  %181 = getelementptr inbounds [3 x float]* %168, i64 %indvars.iv30, i64 %indvars.iv28
  %182 = load float* %181, align 4, !tbaa !19
  br i1 %180, label %186, label %183

; <label>:183                                     ; preds = %177
  %184 = load [3 x float]** %172, align 8, !tbaa !33
  %185 = getelementptr inbounds [3 x float]* %184, i64 %indvars.iv30, i64 %indvars.iv28
  store float %182, float* %185, align 4, !tbaa !19
  br label %194

; <label>:186                                     ; preds = %177
  %187 = load [3 x float]** %169, align 8, !tbaa !33
  %188 = getelementptr inbounds [3 x float]* %187, i64 %indvars.iv30, i64 %indvars.iv28
  %189 = load float* %188, align 4, !tbaa !19
  %190 = fmul float %stepsize.022, %189
  %191 = fadd float %182, %190
  %192 = load [3 x float]** %172, align 8, !tbaa !33
  %193 = getelementptr inbounds [3 x float]* %192, i64 %indvars.iv30, i64 %indvars.iv28
  store float %191, float* %193, align 4, !tbaa !19
  br label %194

; <label>:194                                     ; preds = %183, %186
  %indvars.iv.next29 = add nuw nsw i64 %indvars.iv28, 1
  %exitcond = icmp eq i64 %indvars.iv.next29, 3
  br i1 %exitcond, label %195, label %177

; <label>:195                                     ; preds = %194
  %indvars.iv.next31 = add nsw i64 %indvars.iv30, 1
  %lftr.wideiv = trunc i64 %indvars.iv30 to i32
  %exitcond32 = icmp eq i32 %lftr.wideiv, %159
  br i1 %exitcond32, label %.loopexit6, label %173

.loopexit6:                                       ; preds = %195, %160
  br i1 %78, label %196, label %206

; <label>:196                                     ; preds = %.loopexit6
  store float 0.000000e+00, float* %dvdlambda, align 4, !tbaa !19
  %197 = load %struct.__sFILE** @stdlog, align 8, !tbaa !33
  %198 = sext i32 %Min.020 to i64
  %199 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %198
  %200 = load [3 x float]** %199, align 8, !tbaa !33
  %201 = sub nsw i32 1, %Min.020
  %202 = sext i32 %201 to i64
  %203 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %202
  %204 = load [3 x float]** %203, align 8, !tbaa !33
  %205 = call i32 @constrain(%struct.__sFILE* %197, %struct.t_topology* %top, %struct.t_inputrec* %20, i32 %count.019, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, [3 x float]* %200, [3 x float]* %204, [3 x float]* null, [3 x float]* %137, float %138, float* %dvdlambda, %struct.t_nrnb* %nrnb, i32 1) #7
  br label %206

; <label>:206                                     ; preds = %196, %.loopexit6
  %207 = sub nsw i32 1, %Min.020
  %208 = sext i32 %207 to i64
  %209 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %208
  br i1 %139, label %210, label %._crit_edge57

; <label>:210                                     ; preds = %206
  %211 = load [3 x float]** %209, align 8, !tbaa !33
  %212 = load i32* %6, align 4, !tbaa !20
  %213 = sext i32 %212 to i64
  %214 = getelementptr inbounds %struct.t_nrnb* %nrnb, i64 %213
  call void @construct_dummies(%struct.__sFILE* %log, [3 x float]* %211, %struct.t_nrnb* %214, float 1.000000e+00, [3 x float]* null, %struct.t_idef* %32, %struct.t_graph* %graph, %struct.t_commrec* %cr, [3 x float]* %137, %struct.t_comm_dummies* %dummycomm) #7
  br label %._crit_edge57

._crit_edge57:                                    ; preds = %206, %210
  %215 = load i32* %6, align 4, !tbaa !20
  %216 = sext i32 %215 to i64
  %217 = getelementptr inbounds %struct.t_nrnb* %nrnb, i64 %216
  %218 = load [3 x float]** %209, align 8, !tbaa !33
  %219 = getelementptr inbounds [2 x [3 x float]*]* %force, i64 0, i64 %208
  %220 = load [3 x float]** %219, align 8, !tbaa !33
  br i1 %141, label %221, label %230

; <label>:221                                     ; preds = %._crit_edge57
  %222 = load i32* %142, align 4, !tbaa !35
  %223 = icmp sgt i32 %222, 1
  br i1 %223, label %227, label %224

; <label>:224                                     ; preds = %221
  %225 = load i32* %143, align 4, !tbaa !36
  %226 = icmp sgt i32 %225, 1
  br label %227

; <label>:227                                     ; preds = %224, %221
  %228 = phi i1 [ true, %221 ], [ %226, %224 ]
  %229 = xor i1 %228, true
  br label %230

; <label>:230                                     ; preds = %227, %._crit_edge57
  %231 = phi i1 [ false, %._crit_edge57 ], [ %229, %227 ]
  %232 = zext i1 %231 to i32
  %233 = load i32* %144, align 4, !tbaa !45
  %234 = icmp sgt i32 %233, 0
  %235 = icmp eq i32 %count.019, 0
  %.3 = or i1 %235, %234
  %236 = zext i1 %.3 to i32
  call void @do_force(%struct.__sFILE* %log, %struct.t_commrec* %cr, %struct.t_commrec* %mcr, %struct.t_parm* %parm, %struct.t_nsborder* %nsb, [3 x float]* %67, [3 x float]* %140, i32 %count.019, %struct.t_nrnb* %217, %struct.t_topology* %top, %struct.t_groups* %grps, [3 x float]* %218, [3 x float]* %buf, [3 x float]* %220, [3 x float]* %buf, %struct.t_mdatoms* %mdatoms, float* %ener, %struct.t_fcdata* %fcd, i32 %232, float %138, %struct.t_graph* %graph, i32 %236, i32 0, %struct.t_forcerec* %fr, float* %5, i32 0) #7
  br i1 %139, label %237, label %241

; <label>:237                                     ; preds = %230
  %238 = load i32* %6, align 4, !tbaa !20
  %239 = sext i32 %238 to i64
  %240 = getelementptr inbounds %struct.t_nrnb* %nrnb, i64 %239
  call void @spread_dummy_f(%struct.__sFILE* %log, [3 x float]* %218, [3 x float]* %220, %struct.t_nrnb* %240, %struct.t_idef* %32, %struct.t_comm_dummies* %dummycomm, %struct.t_commrec* %cr) #7
  br label %241

; <label>:241                                     ; preds = %237, %230
  call void @sum_epot(%struct.t_grpopts* %145, %struct.t_groups* %grps, float* %ener) #7
  %242 = load i32* %6, align 4, !tbaa !20
  %243 = icmp eq i32 %242, 0
  br i1 %243, label %244, label %249

; <label>:244                                     ; preds = %241
  %245 = load i32* %123, align 4, !tbaa !24
  %246 = icmp eq i32 %245, 0
  br i1 %246, label %247, label %249

; <label>:247                                     ; preds = %244
  %248 = sitofp i32 %count.019 to float
  call void @print_ebin_header(%struct.__sFILE* %log, i32 %count.019, float %248, float %138, float 0.000000e+00) #7
  br label %249

; <label>:249                                     ; preds = %247, %244, %241
  br i1 %78, label %250, label %.loopexit

; <label>:250                                     ; preds = %249
  %251 = load i32* %146, align 4, !tbaa !46
  %252 = load i32* %147, align 4, !tbaa !47
  %253 = load i32* %148, align 4, !tbaa !48
  %254 = call fastcc float @f_max(i32 %251, i32 %252, i32 %253, %struct.t_grpopts* %145, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, [3 x float]* %220, i32* %nfmax) #8
  %255 = fdiv float %ustep.017, %254
  br i1 %134, label %.preheader5, label %._crit_edge14.thread

._crit_edge14.thread:                             ; preds = %250
  store float 0.000000e+00, float* %dvdlambda, align 4, !tbaa !19
  %256 = load %struct.__sFILE** @stdlog, align 8, !tbaa !33
  %257 = call i32 @constrain(%struct.__sFILE* %256, %struct.t_topology* %top, %struct.t_inputrec* %20, i32 %count.019, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, [3 x float]* %218, [3 x float]* %xcf.0, [3 x float]* null, [3 x float]* %137, float %138, float* %dvdlambda, %struct.t_nrnb* %nrnb, i32 1) #7
  br label %.loopexit

.preheader5:                                      ; preds = %250, %266
  %indvars.iv36 = phi i64 [ %indvars.iv.next37, %266 ], [ %158, %250 ]
  br label %258

; <label>:258                                     ; preds = %258, %.preheader5
  %indvars.iv33 = phi i64 [ 0, %.preheader5 ], [ %indvars.iv.next34, %258 ]
  %259 = getelementptr inbounds [3 x float]* %218, i64 %indvars.iv36, i64 %indvars.iv33
  %260 = load float* %259, align 4, !tbaa !19
  %261 = getelementptr inbounds [3 x float]* %220, i64 %indvars.iv36, i64 %indvars.iv33
  %262 = load float* %261, align 4, !tbaa !19
  %263 = fmul float %255, %262
  %264 = fadd float %260, %263
  %265 = getelementptr inbounds [3 x float]* %xcf.0, i64 %indvars.iv36, i64 %indvars.iv33
  store float %264, float* %265, align 4, !tbaa !19
  %indvars.iv.next34 = add nuw nsw i64 %indvars.iv33, 1
  %exitcond35 = icmp eq i64 %indvars.iv.next34, 3
  br i1 %exitcond35, label %266, label %258

; <label>:266                                     ; preds = %258
  %indvars.iv.next37 = add nsw i64 %indvars.iv36, 1
  %lftr.wideiv38 = trunc i64 %indvars.iv36 to i32
  %exitcond39 = icmp eq i32 %lftr.wideiv38, %159
  br i1 %exitcond39, label %._crit_edge14, label %.preheader5

._crit_edge14:                                    ; preds = %266
  store float 0.000000e+00, float* %dvdlambda, align 4, !tbaa !19
  %267 = load %struct.__sFILE** @stdlog, align 8, !tbaa !33
  %268 = call i32 @constrain(%struct.__sFILE* %267, %struct.t_topology* %top, %struct.t_inputrec* %20, i32 %count.019, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, [3 x float]* %218, [3 x float]* %xcf.0, [3 x float]* null, [3 x float]* %137, float %138, float* %dvdlambda, %struct.t_nrnb* %nrnb, i32 1) #7
  br i1 %134, label %.preheader4, label %.loopexit

.preheader4:                                      ; preds = %._crit_edge14, %277
  %indvars.iv43 = phi i64 [ %indvars.iv.next44, %277 ], [ %158, %._crit_edge14 ]
  br label %269

; <label>:269                                     ; preds = %269, %.preheader4
  %indvars.iv40 = phi i64 [ 0, %.preheader4 ], [ %indvars.iv.next41, %269 ]
  %270 = getelementptr inbounds [3 x float]* %xcf.0, i64 %indvars.iv43, i64 %indvars.iv40
  %271 = load float* %270, align 4, !tbaa !19
  %272 = getelementptr inbounds [3 x float]* %218, i64 %indvars.iv43, i64 %indvars.iv40
  %273 = load float* %272, align 4, !tbaa !19
  %274 = fsub float %271, %273
  %275 = fdiv float %274, %255
  %276 = getelementptr inbounds [3 x float]* %220, i64 %indvars.iv43, i64 %indvars.iv40
  store float %275, float* %276, align 4, !tbaa !19
  %indvars.iv.next41 = add nuw nsw i64 %indvars.iv40, 1
  %exitcond42 = icmp eq i64 %indvars.iv.next41, 3
  br i1 %exitcond42, label %277, label %269

; <label>:277                                     ; preds = %269
  %indvars.iv.next44 = add nsw i64 %indvars.iv43, 1
  %lftr.wideiv45 = trunc i64 %indvars.iv43 to i32
  %exitcond46 = icmp eq i32 %lftr.wideiv45, %159
  br i1 %exitcond46, label %.loopexit, label %.preheader4

.loopexit:                                        ; preds = %277, %._crit_edge14, %._crit_edge14.thread, %249
  call void @llvm.memset.p0i8.i64(i8* %2, i8 0, i64 36, i32 16, i1 false) #4
  call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 36, i32 16, i1 false) #4
  %278 = load i32* %142, align 4, !tbaa !35
  %279 = icmp sgt i32 %278, 1
  br i1 %279, label %283, label %280

; <label>:280                                     ; preds = %.loopexit
  %281 = load i32* %143, align 4, !tbaa !36
  %282 = icmp sgt i32 %281, 1
  br i1 %282, label %283, label %284

; <label>:283                                     ; preds = %280, %.loopexit
  call void @global_stat(%struct.__sFILE* %log, %struct.t_commrec* %cr, float* %ener, [3 x float]* %67, [3 x float]* %68, %struct.t_grpopts* %145, %struct.t_groups* %grps, %struct.t_nrnb* %mynrnb, %struct.t_nrnb* %nrnb, %struct.t_vcm* %149, float* %terminate) #7
  br label %284

; <label>:284                                     ; preds = %283, %280
  %285 = load i32* %146, align 4, !tbaa !46
  %286 = load i32* %147, align 4, !tbaa !47
  %287 = load i32* %148, align 4, !tbaa !48
  %288 = call fastcc float @f_max(i32 %285, i32 %286, i32 %287, %struct.t_grpopts* %145, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, [3 x float]* %220, i32* %nfmax) #8
  %289 = getelementptr inbounds [2 x float]* %Fmax, i64 0, i64 %208
  store float %288, float* %289, align 4, !tbaa !19
  %290 = load float* %150, align 4, !tbaa !19
  %291 = getelementptr inbounds [2 x float]* %Epot, i64 0, i64 %208
  store float %290, float* %291, align 4, !tbaa !19
  br i1 %235, label %292, label %296

; <label>:292                                     ; preds = %284
  %293 = fadd float %290, 1.000000e+00
  %294 = sext i32 %Min.020 to i64
  %295 = getelementptr inbounds [2 x float]* %Epot, i64 0, i64 %294
  store float %293, float* %295, align 4, !tbaa !19
  br label %296

; <label>:296                                     ; preds = %292, %284
  %297 = load i32* %6, align 4, !tbaa !20
  %298 = icmp eq i32 %297, 0
  br i1 %298, label %299, label %332

; <label>:299                                     ; preds = %296
  %300 = load i32* %123, align 4, !tbaa !24
  %301 = icmp eq i32 %300, 0
  br i1 %301, label %302, label %332

; <label>:302                                     ; preds = %299
  br i1 %141, label %303, label %._crit_edge52

._crit_edge52:                                    ; preds = %302
  %.pre = load float* %291, align 4, !tbaa !19
  %.pre53 = sext i32 %Min.020 to i64
  %.phi.trans.insert = getelementptr inbounds [2 x float]* %Epot, i64 0, i64 %.pre53
  %.pre54 = load float* %.phi.trans.insert, align 4, !tbaa !19
  br label %317

; <label>:303                                     ; preds = %302
  %304 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !33
  %305 = fpext float %ustep.017 to double
  %306 = load float* %291, align 4, !tbaa !19
  %307 = fpext float %306 to double
  %308 = fpext float %288 to double
  %309 = load i32* %nfmax, align 4, !tbaa !25
  %310 = add nsw i32 %309, 1
  %311 = sext i32 %Min.020 to i64
  %312 = getelementptr inbounds [2 x float]* %Epot, i64 0, i64 %311
  %313 = load float* %312, align 4, !tbaa !19
  %314 = fcmp olt float %306, %313
  %315 = select i1 %314, i32 10, i32 13
  %316 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %304, i8* getelementptr inbounds ([64 x i8]* @.str23, i64 0, i64 0), i32 %count.019, double %305, double %307, double %308, i32 %310, i32 %315) #7
  br label %317

; <label>:317                                     ; preds = %._crit_edge52, %303
  %318 = phi float [ %.pre54, %._crit_edge52 ], [ %313, %303 ]
  %319 = phi float [ %.pre, %._crit_edge52 ], [ %306, %303 ]
  %320 = fcmp olt float %319, %318
  br i1 %320, label %321, label %332

; <label>:321                                     ; preds = %317
  %322 = load float* %151, align 4, !tbaa !37
  %323 = sitofp i32 %count.019 to float
  %324 = load i32* %62, align 4, !tbaa !29
  %325 = icmp eq i32 %324, 2
  %326 = zext i1 %325 to i32
  call void @upd_mdebin(%struct.t_mdebin* %66, %struct.__sFILE* null, float %322, i32 %count.019, float %323, float* %ener, [3 x float]* %137, [3 x float]* %68, [3 x float]* %67, [3 x float]* %152, [3 x float]* %153, %struct.t_groups* %grps, float* %5, i32 %326) #7
  %327 = load i32* %154, align 4, !tbaa !60
  %328 = call i32 @do_per_step(i32 %steps_accepted.021, i32 %327) #7
  %329 = load i32* %155, align 4, !tbaa !61
  %330 = call i32 @do_per_step(i32 %steps_accepted.021, i32 %329) #7
  call void @print_ebin(i32 %fp_ene.0, i32 1, i32 %328, i32 %330, %struct.__sFILE* %log, i32 %count.019, float %323, i32 0, i32 1, %struct.t_mdebin* %66, %struct.t_fcdata* %fcd, %struct.t_atoms* %31) #7
  %331 = call i32 @fflush(%struct.__sFILE* %log) #7
  br label %332

; <label>:332                                     ; preds = %317, %321, %299, %296
  br i1 %235, label %339, label %333

; <label>:333                                     ; preds = %332
  %334 = load float* %291, align 4, !tbaa !19
  %335 = sext i32 %Min.020 to i64
  %336 = getelementptr inbounds [2 x float]* %Epot, i64 0, i64 %335
  %337 = load float* %336, align 4, !tbaa !19
  %338 = fcmp olt float %334, %337
  br i1 %338, label %339, label %360

; <label>:339                                     ; preds = %333, %332
  %340 = add nsw i32 %steps_accepted.021, 1
  %341 = load i32* %156, align 4, !tbaa !62
  %342 = call i32 @do_per_step(i32 %340, i32 %341) #7
  %343 = load i32* %157, align 4, !tbaa !63
  %344 = call i32 @do_per_step(i32 %340, i32 %343) #7
  %345 = icmp eq i32 %344, 0
  br i1 %345, label %352, label %346

; <label>:346                                     ; preds = %339
  %347 = icmp eq i32 %342, 0
  %.68 = select i1 %347, [3 x float]* null, [3 x float]* %220
  %348 = call i8* @ftp2fn(i32 3, i32 %nfile, %struct.t_filenm* %fnm) #7
  %349 = sitofp i32 %count.019 to float
  %350 = load i32* %9, align 4, !tbaa !22
  %351 = call i32 @write_traj(%struct.__sFILE* %log, %struct.t_commrec* %cr, i8* %348, %struct.t_nsborder* %nsb, i32 %count.019, float %349, float %138, %struct.t_nrnb* %nrnb, i32 %350, [3 x float]* %218, [3 x float]* null, [3 x float]* %.68, [3 x float]* %137) #7
  br label %352

; <label>:352                                     ; preds = %339, %346
  %353 = load float* %131, align 4, !tbaa !34
  %354 = fcmp olt float %288, %353
  %355 = zext i1 %354 to i32
  br i1 %163, label %356, label %362

; <label>:356                                     ; preds = %352
  %357 = fpext float %ustep.017 to double
  %358 = fmul double %357, 1.200000e+00
  %359 = fptrunc double %358 to float
  br label %362

; <label>:360                                     ; preds = %333
  %361 = fmul float %ustep.017, 5.000000e-01
  %.phi.trans.insert55 = getelementptr inbounds [2 x [3 x float]*]* %force, i64 0, i64 %335
  %.pre56 = load [3 x float]** %.phi.trans.insert55, align 8, !tbaa !33
  br label %362

; <label>:362                                     ; preds = %352, %356, %360
  %363 = phi [3 x float]* [ %220, %356 ], [ %220, %352 ], [ %.pre56, %360 ]
  %ustep.1 = phi float [ %359, %356 ], [ %ustep.017, %352 ], [ %361, %360 ]
  %bDone.1 = phi i32 [ %355, %356 ], [ %355, %352 ], [ %bDone.018, %360 ]
  %Min.1 = phi i32 [ %207, %356 ], [ %207, %352 ], [ %Min.020, %360 ]
  %steps_accepted.1 = phi i32 [ %340, %356 ], [ %340, %352 ], [ %steps_accepted.021, %360 ]
  %364 = load i32* %146, align 4, !tbaa !46
  %365 = load i32* %147, align 4, !tbaa !47
  %366 = load i32* %148, align 4, !tbaa !48
  %367 = sext i32 %Min.1 to i64
  %368 = getelementptr inbounds [2 x [3 x float]*]* %force, i64 0, i64 %367
  %369 = call fastcc float @f_max(i32 %364, i32 %365, i32 %366, %struct.t_grpopts* %145, %struct.t_mdatoms* %mdatoms, i32 %75, i32 %76, [3 x float]* %363, i32* %nfmax) #8
  %370 = fdiv float %ustep.1, %369
  %371 = fpext float %ustep.1 to double
  %372 = fcmp olt double %371, 1.000000e-06
  br i1 %372, label %373, label %377

; <label>:373                                     ; preds = %362
  %374 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !33
  %375 = load float* %131, align 4, !tbaa !34
  call fastcc void @warn_step(%struct.__sFILE* %374, float %ustep.1, float %375, i32 %77) #8
  %376 = load float* %131, align 4, !tbaa !34
  call fastcc void @warn_step(%struct.__sFILE* %log, float %ustep.1, float %376, i32 %77) #8
  br label %377

; <label>:377                                     ; preds = %373, %362
  %bAbort.1 = phi i32 [ 1, %373 ], [ %162, %362 ]
  %378 = add nuw nsw i32 %count.019, 1
  %379 = or i32 %bAbort.1, %bDone.1
  %380 = icmp eq i32 %379, 0
  br i1 %380, label %160, label %.critedge

.critedge:                                        ; preds = %377
  %381 = load i32* %6, align 4, !tbaa !20
  %382 = icmp eq i32 %381, 0
  br i1 %382, label %383, label %389

; <label>:383                                     ; preds = %.critedge
  %384 = load i32* %123, align 4, !tbaa !24
  %385 = icmp eq i32 %384, 0
  br i1 %385, label %386, label %389

; <label>:386                                     ; preds = %383
  %387 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !33
  %388 = call i64 @fwrite(i8* getelementptr inbounds ([37 x i8]* @.str17, i64 0, i64 0), i64 36, i64 1, %struct.__sFILE* %387)
  br label %389

; <label>:389                                     ; preds = %386, %383, %.critedge
  %390 = getelementptr inbounds [2 x [3 x float]*]* %pos, i64 0, i64 %367
  %391 = load [3 x float]** %390, align 8, !tbaa !33
  %392 = load [3 x float]** %368, align 8, !tbaa !33
  %393 = call i8* @ftp2fn(i32 3, i32 %nfile, %struct.t_filenm* %fnm) #7
  %394 = sitofp i32 %378 to float
  %395 = load i32* %9, align 4, !tbaa !22
  %396 = call i32 @write_traj(%struct.__sFILE* %log, %struct.t_commrec* %cr, i8* %393, %struct.t_nsborder* %nsb, i32 %378, float %394, float %138, %struct.t_nrnb* %nrnb, i32 %395, [3 x float]* %391, [3 x float]* null, [3 x float]* %392, [3 x float]* %137) #7
  %397 = load i32* %6, align 4, !tbaa !20
  %398 = icmp eq i32 %397, 0
  br i1 %398, label %399, label %.preheader

; <label>:399                                     ; preds = %389
  %400 = load i32* %123, align 4, !tbaa !24
  %401 = icmp eq i32 %400, 0
  br i1 %401, label %402, label %.preheader

; <label>:402                                     ; preds = %399
  %403 = call i8* @ftp2fn(i32 12, i32 %nfile, %struct.t_filenm* %fnm) #7
  %404 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 0
  %405 = load i8*** %404, align 8, !tbaa !49
  %406 = load i8** %405, align 8, !tbaa !33
  call void @write_sto_conf(i8* %403, i8* %406, %struct.t_atoms* %31, [3 x float]* %391, [3 x float]* null, [3 x float]* %137) #7
  %407 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !33
  %408 = load float* %131, align 4, !tbaa !34
  %409 = getelementptr inbounds [2 x float]* %Epot, i64 0, i64 %367
  %410 = load float* %409, align 4, !tbaa !19
  %411 = getelementptr inbounds [2 x float]* %Fmax, i64 0, i64 %367
  %412 = load float* %411, align 4, !tbaa !19
  call fastcc void @print_converged(%struct.__sFILE* %407, i8* getelementptr inbounds ([18 x i8]* @.str18, i64 0, i64 0), float %408, i32 %378, i32 %bDone.1, i32 %120, float %410, float %412) #8
  %413 = load float* %131, align 4, !tbaa !34
  call fastcc void @print_converged(%struct.__sFILE* %log, i8* getelementptr inbounds ([18 x i8]* @.str18, i64 0, i64 0), float %413, i32 %378, i32 %bDone.1, i32 %120, float %410, float %412) #8
  call void @close_enx(i32 %fp_ene.0) #7
  br label %.preheader

.preheader:                                       ; preds = %402, %399, %389
  %414 = load i32* %9, align 4, !tbaa !22
  %415 = icmp sgt i32 %414, 0
  br i1 %415, label %.lr.ph, label %._crit_edge

.lr.ph:                                           ; preds = %.preheader
  %416 = sext i32 %414 to i64
  br label %417

; <label>:417                                     ; preds = %.lr.ph, %417
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %417 ]
  %418 = getelementptr inbounds [3 x float]* %391, i64 %indvars.iv, i64 0
  %419 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0
  %420 = bitcast float* %418 to i32*
  %421 = load i32* %420, align 4, !tbaa !19
  %422 = bitcast float* %419 to i32*
  store i32 %421, i32* %422, align 4, !tbaa !19
  %423 = getelementptr inbounds [3 x float]* %391, i64 %indvars.iv, i64 1
  %424 = bitcast float* %423 to i32*
  %425 = load i32* %424, align 4, !tbaa !19
  %426 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 1
  %427 = bitcast float* %426 to i32*
  store i32 %425, i32* %427, align 4, !tbaa !19
  %428 = getelementptr inbounds [3 x float]* %391, i64 %indvars.iv, i64 2
  %429 = bitcast float* %428 to i32*
  %430 = load i32* %429, align 4, !tbaa !19
  %431 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 2
  %432 = bitcast float* %431 to i32*
  store i32 %430, i32* %432, align 4, !tbaa !19
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %433 = icmp slt i64 %indvars.iv.next, %416
  br i1 %433, label %417, label %._crit_edge

._crit_edge:                                      ; preds = %417, %.preheader
  store i32 %378, i32* %119, align 4, !tbaa !32
  call void @llvm.lifetime.end(i64 36, i8* %4) #4
  call void @llvm.lifetime.end(i64 36, i8* %3) #4
  call void @llvm.lifetime.end(i64 36, i8* %2) #4
  call void @llvm.lifetime.end(i64 1032, i8* %1) #4
  ret i64 %8
}
