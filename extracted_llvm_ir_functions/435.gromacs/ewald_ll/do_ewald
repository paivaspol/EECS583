define float @do_ewald(%struct._IO_FILE* nocapture %log, i32 %bVerbose, %struct.t_inputrec* nocapture %ir, [3 x float]* nocapture %x, [3 x float]* nocapture %f, float* nocapture %charge, float* nocapture %box, %struct.t_commrec* %cr, %struct.t_nsborder* nocapture %nsb, [3 x float]* nocapture %lrvir, float %ewaldcoeff) #0 {
entry:
  %lll = alloca [3 x float], align 4
  call void @llvm.dbg.value(metadata !{%struct._IO_FILE* %log}, i64 0, metadata !221), !dbg !325
  call void @llvm.dbg.value(metadata !{i32 %bVerbose}, i64 0, metadata !222), !dbg !325
  call void @llvm.dbg.value(metadata !{%struct.t_inputrec* %ir}, i64 0, metadata !223), !dbg !326
  call void @llvm.dbg.value(metadata !{[3 x float]* %x}, i64 0, metadata !224), !dbg !327
  call void @llvm.dbg.value(metadata !{[3 x float]* %f}, i64 0, metadata !225), !dbg !327
  call void @llvm.dbg.value(metadata !{float* %charge}, i64 0, metadata !226), !dbg !328
  call void @llvm.dbg.value(metadata !{float* %box}, i64 0, metadata !227), !dbg !328
  call void @llvm.dbg.value(metadata !{%struct.t_commrec* %cr}, i64 0, metadata !228), !dbg !329
  call void @llvm.dbg.value(metadata !{%struct.t_nsborder* %nsb}, i64 0, metadata !229), !dbg !329
  call void @llvm.dbg.value(metadata !{[3 x float]* %lrvir}, i64 0, metadata !230), !dbg !330
  call void @llvm.dbg.value(metadata !{float %ewaldcoeff}, i64 0, metadata !231), !dbg !330
  %mul = fmul float %ewaldcoeff, 4.000000e+00, !dbg !331
  %mul1 = fmul float %mul, %ewaldcoeff, !dbg !331
  %conv2 = fdiv float -1.000000e+00, %mul1, !dbg !331
  call void @llvm.dbg.value(metadata !{float %conv2}, i64 0, metadata !232), !dbg !331
  call void @llvm.dbg.declare(metadata !{[3 x float]* %lll}, metadata !234), !dbg !332
  %.b = load i1* @do_ewald.bFirst, align 1
  br i1 %.b, label %entry.if.end54_crit_edge, label %if.then, !dbg !333

entry.if.end54_crit_edge:                         ; preds = %entry
  %nodeid55.pre = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 0, !dbg !334
  br label %if.end54, !dbg !333

if.then:                                          ; preds = %entry
  %tobool11 = icmp eq i32 %bVerbose, 0, !dbg !335
  br i1 %tobool11, label %if.end, label %if.then12, !dbg !335

if.then12:                                        ; preds = %if.then
  %0 = call i64 @fwrite(i8* getelementptr inbounds ([46 x i8]* @.str, i64 0, i64 0), i64 45, i64 1, %struct._IO_FILE* %log), !dbg !337
  br label %if.end, !dbg !337

if.end:                                           ; preds = %if.then, %if.then12
  %cmp = icmp eq %struct.t_commrec* %cr, null, !dbg !338
  br i1 %cmp, label %if.end21, label %if.then14, !dbg !338

if.then14:                                        ; preds = %if.end
  %nnodes = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 1, !dbg !339
  %1 = load i32* %nnodes, align 4, !dbg !339, !tbaa !341
  %cmp15 = icmp sgt i32 %1, 1, !dbg !339
  br i1 %cmp15, label %if.then19, label %lor.lhs.false, !dbg !339

lor.lhs.false:                                    ; preds = %if.then14
  %nthreads = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 5, !dbg !339
  %2 = load i32* %nthreads, align 4, !dbg !339, !tbaa !341
  %cmp17 = icmp sgt i32 %2, 1, !dbg !339
  br i1 %cmp17, label %if.then19, label %if.end21, !dbg !339

if.then19:                                        ; preds = %lor.lhs.false, %if.then14
  call void (i32, i8*, ...)* @fatal_error(i32 0, i8* getelementptr inbounds ([37 x i8]* @.str1, i64 0, i64 0)) #6, !dbg !344
  br label %if.end21, !dbg !344

if.end21:                                         ; preds = %if.end, %lor.lhs.false, %if.then19
  %nkx = getelementptr inbounds %struct.t_inputrec* %ir, i64 0, i32 17, !dbg !345
  %3 = load i32* %nkx, align 4, !dbg !345, !tbaa !341
  %add = add nsw i32 %3, 1, !dbg !345
  store i32 %add, i32* @do_ewald.nx, align 4, !dbg !345, !tbaa !341
  %nky = getelementptr inbounds %struct.t_inputrec* %ir, i64 0, i32 18, !dbg !346
  %4 = load i32* %nky, align 4, !dbg !346, !tbaa !341
  %add22 = add nsw i32 %4, 1, !dbg !346
  store i32 %add22, i32* @do_ewald.ny, align 4, !dbg !346, !tbaa !341
  %nkz = getelementptr inbounds %struct.t_inputrec* %ir, i64 0, i32 19, !dbg !347
  %5 = load i32* %nkz, align 4, !dbg !347, !tbaa !341
  %add23 = add nsw i32 %5, 1, !dbg !347
  store i32 %add23, i32* @do_ewald.nz, align 4, !dbg !347, !tbaa !341
  %cmp24 = icmp sgt i32 %add22, %add23, !dbg !348
  %cond = select i1 %cmp24, i32 %add22, i32 %add23, !dbg !348
  %cmp26 = icmp sgt i32 %add, %cond, !dbg !348
  %.cond = select i1 %cmp26, i32 %add, i32 %cond, !dbg !348
  store i32 %.cond, i32* @do_ewald.kmax, align 4, !dbg !348, !tbaa !341
  %call38 = call i8* @save_calloc(i8* getelementptr inbounds ([4 x i8]* @.str2, i64 0, i64 0), i8* getelementptr inbounds ([53 x i8]* @.str3, i64 0, i64 0), i32 124, i32 %.cond, i32 8) #6, !dbg !349
  %6 = bitcast i8* %call38 to [3 x %struct.t_complex]**, !dbg !349
  store [3 x %struct.t_complex]** %6, [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !349, !tbaa !350
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !240), !dbg !351
  %7 = load i32* @do_ewald.kmax, align 4, !dbg !351, !tbaa !341
  %cmp39718 = icmp sgt i32 %7, 0, !dbg !351
  %nodeid = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 0, !dbg !353
  %8 = load i32* %nodeid, align 4, !dbg !353, !tbaa !341
  %idxprom719 = sext i32 %8 to i64, !dbg !353
  %arrayidx720 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom719, !dbg !353
  %9 = load i32* %arrayidx720, align 4, !dbg !353, !tbaa !341
  br i1 %cmp39718, label %for.body, label %for.end, !dbg !351

for.body:                                         ; preds = %if.end21, %for.body
  %indvars.iv753 = phi i64 [ %indvars.iv.next754, %for.body ], [ 0, %if.end21 ]
  %10 = phi i32 [ %16, %for.body ], [ %9, %if.end21 ]
  %call41 = call i8* @save_calloc(i8* getelementptr inbounds ([7 x i8]* @.str4, i64 0, i64 0), i8* getelementptr inbounds ([53 x i8]* @.str3, i64 0, i64 0), i32 126, i32 %10, i32 24) #6, !dbg !353
  %11 = bitcast i8* %call41 to [3 x %struct.t_complex]*, !dbg !353
  %12 = load [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !353, !tbaa !350
  %arrayidx43 = getelementptr inbounds [3 x %struct.t_complex]** %12, i64 %indvars.iv753, !dbg !353
  store [3 x %struct.t_complex]* %11, [3 x %struct.t_complex]** %arrayidx43, align 8, !dbg !353, !tbaa !350
  %indvars.iv.next754 = add i64 %indvars.iv753, 1, !dbg !351
  %13 = load i32* @do_ewald.kmax, align 4, !dbg !351, !tbaa !341
  %14 = trunc i64 %indvars.iv.next754 to i32, !dbg !351
  %cmp39 = icmp slt i32 %14, %13, !dbg !351
  %15 = load i32* %nodeid, align 4, !dbg !353, !tbaa !341
  %idxprom = sext i32 %15 to i64, !dbg !353
  %arrayidx = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom, !dbg !353
  %16 = load i32* %arrayidx, align 4, !dbg !353, !tbaa !341
  br i1 %cmp39, label %for.body, label %for.end, !dbg !351

for.end:                                          ; preds = %for.body, %if.end21
  %.lcssa = phi i32 [ %9, %if.end21 ], [ %16, %for.body ]
  %call48 = call i8* @save_calloc(i8* getelementptr inbounds ([7 x i8]* @.str5, i64 0, i64 0), i8* getelementptr inbounds ([53 x i8]* @.str3, i64 0, i64 0), i32 127, i32 %.lcssa, i32 8) #6, !dbg !354
  %17 = bitcast i8* %call48 to %struct.t_complex*, !dbg !354
  store %struct.t_complex* %17, %struct.t_complex** @do_ewald.tab_xy, align 8, !dbg !354, !tbaa !350
  %18 = load i32* %nodeid, align 4, !dbg !355, !tbaa !341
  %idxprom50 = sext i32 %18 to i64, !dbg !355
  %arrayidx52 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom50, !dbg !355
  %19 = load i32* %arrayidx52, align 4, !dbg !355, !tbaa !341
  %call53 = call i8* @save_calloc(i8* getelementptr inbounds ([9 x i8]* @.str6, i64 0, i64 0), i8* getelementptr inbounds ([53 x i8]* @.str3, i64 0, i64 0), i32 128, i32 %19, i32 8) #6, !dbg !355
  %20 = bitcast i8* %call53 to %struct.t_complex*, !dbg !355
  store %struct.t_complex* %20, %struct.t_complex** @do_ewald.tab_qxyz, align 8, !dbg !355, !tbaa !350
  store i1 true, i1* @do_ewald.bFirst, align 1
  br label %if.end54, !dbg !356

if.end54:                                         ; preds = %entry.if.end54_crit_edge, %for.end
  %nodeid55.pre-phi = phi i32* [ %nodeid55.pre, %entry.if.end54_crit_edge ], [ %nodeid, %for.end ], !dbg !334
  call void @llvm.dbg.value(metadata !{[3 x float]* %lrvir}, i64 0, metadata !357) #5, !dbg !359
  call void @llvm.dbg.value(metadata !360, i64 0, metadata !361) #5, !dbg !362
  %21 = bitcast [3 x float]* %lrvir to i8*, !dbg !363
  call void @llvm.memset.p0i8.i64(i8* %21, i8 0, i64 36, i32 4, i1 false) #5, !dbg !364
  %arraydecay = getelementptr inbounds [3 x float]* %lll, i64 0, i64 0, !dbg !365
  tail call void @llvm.dbg.value(metadata !{float* %box}, i64 0, metadata !366), !dbg !367
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay}, i64 0, metadata !368), !dbg !367
  %22 = load float* %box, align 4, !dbg !369, !tbaa !371
  %conv.i634 = fpext float %22 to double, !dbg !369
  %div.i = fdiv double 0x401921FB54442D18, %conv.i634, !dbg !369
  %conv1.i = fptrunc double %div.i to float, !dbg !369
  store float %conv1.i, float* %arraydecay, align 4, !dbg !369, !tbaa !371
  %arrayidx3.i = getelementptr inbounds float* %box, i64 1, !dbg !372
  %23 = load float* %arrayidx3.i, align 4, !dbg !372, !tbaa !371
  %conv4.i = fpext float %23 to double, !dbg !372
  %div5.i = fdiv double 0x401921FB54442D18, %conv4.i, !dbg !372
  %conv6.i = fptrunc double %div5.i to float, !dbg !372
  %arrayidx7.i = getelementptr inbounds [3 x float]* %lll, i64 0, i64 1, !dbg !372
  store float %conv6.i, float* %arrayidx7.i, align 4, !dbg !372, !tbaa !371
  %arrayidx8.i = getelementptr inbounds float* %box, i64 2, !dbg !373
  %24 = load float* %arrayidx8.i, align 4, !dbg !373, !tbaa !371
  %conv9.i = fpext float %24 to double, !dbg !373
  %div10.i = fdiv double 0x401921FB54442D18, %conv9.i, !dbg !373
  %conv11.i = fptrunc double %div10.i to float, !dbg !373
  %arrayidx12.i = getelementptr inbounds [3 x float]* %lll, i64 0, i64 2, !dbg !373
  store float %conv11.i, float* %arrayidx12.i, align 4, !dbg !373, !tbaa !371
  %25 = load i32* %nodeid55.pre-phi, align 4, !dbg !334, !tbaa !341
  %idxprom56 = sext i32 %25 to i64, !dbg !334
  %arrayidx58 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom56, !dbg !334
  %26 = load i32* %arrayidx58, align 4, !dbg !334, !tbaa !341
  %27 = load i32* @do_ewald.kmax, align 4, !dbg !334, !tbaa !341
  %28 = load [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !334, !tbaa !350
  call void @llvm.dbg.value(metadata !{i32 %26}, i64 0, metadata !374) #5, !dbg !375
  call void @llvm.dbg.value(metadata !{[3 x float]* %x}, i64 0, metadata !376) #5, !dbg !375
  call void @llvm.dbg.value(metadata !{i32 %27}, i64 0, metadata !377) #5, !dbg !375
  call void @llvm.dbg.value(metadata !{[3 x %struct.t_complex]** %28}, i64 0, metadata !378) #5, !dbg !375
  call void @llvm.dbg.value(metadata !{float* %arraydecay}, i64 0, metadata !379) #5, !dbg !375
  %cmp.i = icmp slt i32 %27, 1, !dbg !380
  br i1 %cmp.i, label %if.then.i, label %for.cond.preheader.i, !dbg !380

for.cond.preheader.i:                             ; preds = %if.end54
  %cmp1128.i = icmp sgt i32 %26, 0, !dbg !381
  br i1 %cmp1128.i, label %for.cond2.preheader.lr.ph.i, label %for.cond60.preheader, !dbg !381

for.cond2.preheader.lr.ph.i:                      ; preds = %for.cond.preheader.i
  %arrayidx26.i = getelementptr inbounds [3 x %struct.t_complex]** %28, i64 1, !dbg !383
  %cmp50126.i = icmp sgt i32 %27, 2, !dbg !387
  br label %for.cond2.preheader.i, !dbg !381

if.then.i:                                        ; preds = %if.end54
  %call.i = call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([20 x i8]* @.str7, i64 0, i64 0), i32 %27) #6, !dbg !389
  call void @exit(i32 1) #7, !dbg !391
  unreachable, !dbg !391

for.cond2.preheader.i:                            ; preds = %for.inc81.i, %for.cond2.preheader.lr.ph.i
  %indvars.iv144.i = phi i64 [ 0, %for.cond2.preheader.lr.ph.i ], [ %indvars.iv.next145.i, %for.inc81.i ]
  %29 = load [3 x %struct.t_complex]** %28, align 8, !dbg !392, !tbaa !350
  br label %for.body4.i, !dbg !395

for.body4.i:                                      ; preds = %for.body4.i, %for.cond2.preheader.i
  %indvars.iv.i = phi i64 [ 0, %for.cond2.preheader.i ], [ %indvars.iv.next.i, %for.body4.i ]
  %re.i = getelementptr inbounds [3 x %struct.t_complex]* %29, i64 %indvars.iv144.i, i64 %indvars.iv.i, i32 0, !dbg !392
  store float 1.000000e+00, float* %re.i, align 4, !dbg !392, !tbaa !371
  %im.i = getelementptr inbounds [3 x %struct.t_complex]* %29, i64 %indvars.iv144.i, i64 %indvars.iv.i, i32 1, !dbg !396
  store float 0.000000e+00, float* %im.i, align 4, !dbg !396, !tbaa !371
  %indvars.iv.next.i = add i64 %indvars.iv.i, 1, !dbg !395
  %lftr.wideiv = trunc i64 %indvars.iv.next.i to i32, !dbg !395
  %exitcond = icmp eq i32 %lftr.wideiv, 3, !dbg !395
  br i1 %exitcond, label %for.body15.i, label %for.body4.i, !dbg !395

for.body15.i:                                     ; preds = %for.body15.i, %for.body4.i
  %indvars.iv131.i = phi i64 [ 0, %for.body4.i ], [ %indvars.iv.next132.i, %for.body15.i ]
  %arrayidx19.i = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv144.i, i64 %indvars.iv131.i, !dbg !383
  %30 = load float* %arrayidx19.i, align 4, !dbg !383, !tbaa !371
  %arrayidx21.i = getelementptr inbounds [3 x float]* %lll, i64 0, i64 %indvars.iv131.i, !dbg !383
  %31 = load float* %arrayidx21.i, align 4, !dbg !383, !tbaa !371
  %mul.i633 = fmul float %30, %31, !dbg !383
  %conv.i = fpext float %mul.i633 to double, !dbg !383
  %call22.i = call double @cos(double %conv.i) #6, !dbg !383
  %conv23.i = fptrunc double %call22.i to float, !dbg !383
  %32 = load [3 x %struct.t_complex]** %arrayidx26.i, align 8, !dbg !383, !tbaa !350
  %re29.i = getelementptr inbounds [3 x %struct.t_complex]* %32, i64 %indvars.iv144.i, i64 %indvars.iv131.i, i32 0, !dbg !383
  store float %conv23.i, float* %re29.i, align 4, !dbg !383, !tbaa !371
  %33 = load float* %arrayidx19.i, align 4, !dbg !397, !tbaa !371
  %mul36.i = fmul float %33, %31, !dbg !397
  %conv37.i = fpext float %mul36.i to double, !dbg !397
  %call38.i = call double @sin(double %conv37.i) #6, !dbg !397
  %conv39.i = fptrunc double %call38.i to float, !dbg !397
  %34 = load [3 x %struct.t_complex]** %arrayidx26.i, align 8, !dbg !397, !tbaa !350
  %im45.i = getelementptr inbounds [3 x %struct.t_complex]* %34, i64 %indvars.iv144.i, i64 %indvars.iv131.i, i32 1, !dbg !397
  store float %conv39.i, float* %im45.i, align 4, !dbg !397, !tbaa !371
  %indvars.iv.next132.i = add i64 %indvars.iv131.i, 1, !dbg !398
  %lftr.wideiv744 = trunc i64 %indvars.iv.next132.i to i32, !dbg !398
  %exitcond745 = icmp eq i32 %lftr.wideiv744, 3, !dbg !398
  br i1 %exitcond745, label %for.cond49.loopexit.i, label %for.body15.i, !dbg !398

for.cond49.loopexit.i:                            ; preds = %for.body15.i
  br i1 %cmp50126.i, label %for.cond53.preheader.i, label %for.inc81.i, !dbg !387

for.cond53.preheader.i:                           ; preds = %for.cond49.loopexit.i, %for.inc78.i
  %indvars.iv139.i = phi i64 [ %indvars.iv.next140.i, %for.inc78.i ], [ 2, %for.cond49.loopexit.i ]
  %arrayidx60.i = getelementptr inbounds [3 x %struct.t_complex]** %28, i64 %indvars.iv139.i, !dbg !399
  %35 = add nsw i64 %indvars.iv139.i, -1, !dbg !399
  %arrayidx66.i = getelementptr inbounds [3 x %struct.t_complex]** %28, i64 %35, !dbg !399
  br label %for.body56.i, !dbg !401

for.body56.i:                                     ; preds = %for.body56.i, %for.cond53.preheader.i
  %indvars.iv135.i = phi i64 [ 0, %for.cond53.preheader.i ], [ %indvars.iv.next136.i, %for.body56.i ]
  %36 = load [3 x %struct.t_complex]** %arrayidx60.i, align 8, !dbg !399, !tbaa !350
  %arrayidx62.i = getelementptr inbounds [3 x %struct.t_complex]* %36, i64 %indvars.iv144.i, i64 %indvars.iv135.i, !dbg !399
  %37 = load [3 x %struct.t_complex]** %arrayidx66.i, align 8, !dbg !399, !tbaa !350
  %arrayidx68.i = getelementptr inbounds [3 x %struct.t_complex]* %37, i64 %indvars.iv144.i, i64 %indvars.iv135.i, !dbg !399
  %38 = load [3 x %struct.t_complex]** %arrayidx26.i, align 8, !dbg !399, !tbaa !350
  %arrayidx73.i = getelementptr inbounds [3 x %struct.t_complex]* %38, i64 %indvars.iv144.i, i64 %indvars.iv135.i, !dbg !399
  %39 = bitcast %struct.t_complex* %arrayidx68.i to <2 x float>*, !dbg !399
  %40 = load <2 x float>* %39, align 1, !dbg !399
  %41 = bitcast %struct.t_complex* %arrayidx73.i to <2 x float>*, !dbg !399
  %42 = load <2 x float>* %41, align 1, !dbg !399
  call void @llvm.dbg.declare(metadata !402, metadata !275) #5, !dbg !403
  call void @llvm.dbg.declare(metadata !402, metadata !276) #5, !dbg !403
  call void @llvm.dbg.declare(metadata !402, metadata !277) #5, !dbg !404
  %a.sroa.0.0.vec.extract.i.i = extractelement <2 x float> %40, i32 0, !dbg !405
  %b.sroa.0.0.vec.extract.i.i = extractelement <2 x float> %42, i32 0, !dbg !405
  %mul.i.i = fmul float %a.sroa.0.0.vec.extract.i.i, %b.sroa.0.0.vec.extract.i.i, !dbg !405
  %a.sroa.0.4.vec.extract.i.i = extractelement <2 x float> %40, i32 1, !dbg !405
  %b.sroa.0.4.vec.extract.i.i = extractelement <2 x float> %42, i32 1, !dbg !405
  %mul3.i.i = fmul float %a.sroa.0.4.vec.extract.i.i, %b.sroa.0.4.vec.extract.i.i, !dbg !405
  %sub.i.i = fsub float %mul.i.i, %mul3.i.i, !dbg !405
  %mul7.i.i = fmul float %a.sroa.0.0.vec.extract.i.i, %b.sroa.0.4.vec.extract.i.i, !dbg !406
  %mul10.i.i = fmul float %a.sroa.0.4.vec.extract.i.i, %b.sroa.0.0.vec.extract.i.i, !dbg !406
  %add.i.i = fadd float %mul7.i.i, %mul10.i.i, !dbg !406
  %retval.sroa.0.0.vec.insert.i.i = insertelement <2 x float> undef, float %sub.i.i, i32 0, !dbg !407
  %retval.sroa.0.4.vec.insert.i.i = insertelement <2 x float> %retval.sroa.0.0.vec.insert.i.i, float %add.i.i, i32 1, !dbg !407
  %coerce.sroa.0.0.cast.i = bitcast %struct.t_complex* %arrayidx62.i to <2 x float>*, !dbg !399
  store <2 x float> %retval.sroa.0.4.vec.insert.i.i, <2 x float>* %coerce.sroa.0.0.cast.i, align 4, !dbg !399
  %indvars.iv.next136.i = add i64 %indvars.iv135.i, 1, !dbg !401
  %lftr.wideiv746 = trunc i64 %indvars.iv.next136.i to i32, !dbg !401
  %exitcond747 = icmp eq i32 %lftr.wideiv746, 3, !dbg !401
  br i1 %exitcond747, label %for.inc78.i, label %for.body56.i, !dbg !401

for.inc78.i:                                      ; preds = %for.body56.i
  %indvars.iv.next140.i = add i64 %indvars.iv139.i, 1, !dbg !387
  %lftr.wideiv748 = trunc i64 %indvars.iv.next140.i to i32, !dbg !387
  %exitcond749 = icmp eq i32 %lftr.wideiv748, %27, !dbg !387
  br i1 %exitcond749, label %for.inc81.i, label %for.cond53.preheader.i, !dbg !387

for.inc81.i:                                      ; preds = %for.inc78.i, %for.cond49.loopexit.i
  %indvars.iv.next145.i = add i64 %indvars.iv144.i, 1, !dbg !381
  %lftr.wideiv750 = trunc i64 %indvars.iv.next145.i to i32, !dbg !381
  %exitcond751 = icmp eq i32 %lftr.wideiv750, %26, !dbg !381
  br i1 %exitcond751, label %for.cond60.preheader, label %for.cond2.preheader.i, !dbg !381

for.cond60.preheader:                             ; preds = %for.inc81.i, %for.cond.preheader.i
  %43 = load i32* @do_ewald.nx, align 4, !dbg !408, !tbaa !341
  %cmp61706 = icmp sgt i32 %43, 0, !dbg !408
  br i1 %cmp61706, label %for.body63.lr.ph, label %for.end312, !dbg !408

for.body63.lr.ph:                                 ; preds = %for.cond60.preheader
  %44 = load float* %arraydecay, align 4, !dbg !410, !tbaa !371
  %conv149 = fpext float %conv2 to double, !dbg !412
  %arrayidx239 = getelementptr inbounds [3 x float]* %lrvir, i64 0, i64 0, !dbg !417
  %arrayidx244 = getelementptr inbounds [3 x float]* %lrvir, i64 0, i64 1, !dbg !418
  %arrayidx249 = getelementptr inbounds [3 x float]* %lrvir, i64 0, i64 2, !dbg !419
  %arrayidx254 = getelementptr inbounds [3 x float]* %lrvir, i64 1, i64 1, !dbg !420
  %arrayidx259 = getelementptr inbounds [3 x float]* %lrvir, i64 1, i64 2, !dbg !421
  %arrayidx264 = getelementptr inbounds [3 x float]* %lrvir, i64 2, i64 2, !dbg !422
  %.pre756 = load i32* @do_ewald.ny, align 4, !dbg !423, !tbaa !341
  br label %for.body63, !dbg !408

for.body63:                                       ; preds = %for.inc310, %for.body63.lr.ph
  %45 = phi i32 [ %.pre756, %for.body63.lr.ph ], [ %127, %for.inc310 ], !dbg !410
  %46 = phi i32 [ %43, %for.body63.lr.ph ], [ %128, %for.inc310 ]
  %indvars.iv742 = phi i64 [ 0, %for.body63.lr.ph ], [ %indvars.iv.next743, %for.inc310 ]
  %energy.0710 = phi float [ 0.000000e+00, %for.body63.lr.ph ], [ %energy.1.lcssa, %for.inc310 ]
  %lowiy.0709 = phi i32 [ 0, %for.body63.lr.ph ], [ %lowiy.1.lcssa, %for.inc310 ]
  %lowiz.0708 = phi i32 [ 1, %for.body63.lr.ph ], [ %lowiz.1.lcssa, %for.inc310 ]
  %47 = trunc i64 %indvars.iv742 to i32, !dbg !410
  %conv64 = sitofp i32 %47 to float, !dbg !410
  %mul66 = fmul float %conv64, %44, !dbg !410
  call void @llvm.dbg.value(metadata !{float %mul66}, i64 0, metadata !246), !dbg !410
  call void @llvm.dbg.value(metadata !{i32 %lowiy.0709}, i64 0, metadata !238), !dbg !423
  %cmp68687 = icmp slt i32 %lowiy.0709, %45, !dbg !423
  br i1 %cmp68687, label %for.body70.lr.ph, label %for.inc310, !dbg !423

for.body70.lr.ph:                                 ; preds = %for.body63
  %mul134 = fmul float %mul66, %mul66, !dbg !424
  %48 = sext i32 %lowiy.0709 to i64
  br label %for.body70, !dbg !423

for.body70:                                       ; preds = %for.body70.lr.ph, %for.end305
  %49 = phi i32 [ %45, %for.body70.lr.ph ], [ %125, %for.end305 ]
  %indvars.iv740 = phi i64 [ %48, %for.body70.lr.ph ], [ %indvars.iv.next741, %for.end305 ]
  %energy.1690 = phi float [ %energy.0710, %for.body70.lr.ph ], [ %energy.2.lcssa, %for.end305 ]
  %lowiz.1689 = phi i32 [ %lowiz.0708, %for.body70.lr.ph ], [ %lowiz.2.lcssa, %for.end305 ]
  %50 = trunc i64 %indvars.iv740 to i32, !dbg !425
  %conv71 = sitofp i32 %50 to float, !dbg !425
  %mul73 = fmul float %conv71, %conv6.i, !dbg !425
  call void @llvm.dbg.value(metadata !{float %mul73}, i64 0, metadata !247), !dbg !425
  %cmp74 = icmp sgt i32 %50, -1, !dbg !426
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !240), !dbg !427
  %51 = load i32* %nodeid55.pre-phi, align 4, !dbg !427, !tbaa !341
  %idxprom79644 = sext i32 %51 to i64, !dbg !427
  %arrayidx81645 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom79644, !dbg !427
  %52 = load i32* %arrayidx81645, align 4, !dbg !427, !tbaa !341
  %cmp82646 = icmp sgt i32 %52, 0, !dbg !427
  br i1 %cmp74, label %for.cond77.preheader, label %for.cond101.preheader, !dbg !426

for.cond77.preheader:                             ; preds = %for.body70
  br i1 %cmp82646, label %for.body84, label %if.end126, !dbg !427

for.cond101.preheader:                            ; preds = %for.body70
  br i1 %cmp82646, label %for.body108.lr.ph, label %if.end126, !dbg !429

for.body108.lr.ph:                                ; preds = %for.cond101.preheader
  %sub = sub i64 0, %indvars.iv740, !dbg !431
  %sext757 = shl i64 %sub, 32, !dbg !431
  %idxprom117 = ashr exact i64 %sext757, 32, !dbg !431
  br label %for.body108, !dbg !429

for.body84:                                       ; preds = %for.body84, %for.cond77.preheader
  %indvars.iv726 = phi i64 [ 0, %for.cond77.preheader ], [ %indvars.iv.next727, %for.body84 ]
  %53 = load %struct.t_complex** @do_ewald.tab_xy, align 8, !dbg !432, !tbaa !350
  %arrayidx86 = getelementptr inbounds %struct.t_complex* %53, i64 %indvars.iv726, !dbg !432
  %54 = load [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !432, !tbaa !350
  %arrayidx89 = getelementptr inbounds [3 x %struct.t_complex]** %54, i64 %indvars.iv742, !dbg !432
  %55 = load [3 x %struct.t_complex]** %arrayidx89, align 8, !dbg !432, !tbaa !350
  %arrayidx91 = getelementptr inbounds [3 x %struct.t_complex]* %55, i64 %indvars.iv726, i64 0, !dbg !432
  %arrayidx94 = getelementptr inbounds [3 x %struct.t_complex]** %54, i64 %indvars.iv740, !dbg !432
  %56 = load [3 x %struct.t_complex]** %arrayidx94, align 8, !dbg !432, !tbaa !350
  %arrayidx96 = getelementptr inbounds [3 x %struct.t_complex]* %56, i64 %indvars.iv726, i64 1, !dbg !432
  %57 = bitcast %struct.t_complex* %arrayidx91 to <2 x float>*, !dbg !432
  %58 = load <2 x float>* %57, align 1, !dbg !432
  %59 = bitcast %struct.t_complex* %arrayidx96 to <2 x float>*, !dbg !432
  %60 = load <2 x float>* %59, align 1, !dbg !432
  tail call void @llvm.dbg.declare(metadata !402, metadata !275), !dbg !433
  tail call void @llvm.dbg.declare(metadata !402, metadata !276), !dbg !433
  tail call void @llvm.dbg.declare(metadata !402, metadata !277), !dbg !434
  %a.sroa.0.0.vec.extract.i621 = extractelement <2 x float> %58, i32 0, !dbg !435
  %b.sroa.0.0.vec.extract.i622 = extractelement <2 x float> %60, i32 0, !dbg !435
  %mul.i623 = fmul float %a.sroa.0.0.vec.extract.i621, %b.sroa.0.0.vec.extract.i622, !dbg !435
  %a.sroa.0.4.vec.extract.i624 = extractelement <2 x float> %58, i32 1, !dbg !435
  %b.sroa.0.4.vec.extract.i625 = extractelement <2 x float> %60, i32 1, !dbg !435
  %mul3.i626 = fmul float %a.sroa.0.4.vec.extract.i624, %b.sroa.0.4.vec.extract.i625, !dbg !435
  %sub.i627 = fsub float %mul.i623, %mul3.i626, !dbg !435
  %mul7.i628 = fmul float %a.sroa.0.0.vec.extract.i621, %b.sroa.0.4.vec.extract.i625, !dbg !436
  %mul10.i629 = fmul float %a.sroa.0.4.vec.extract.i624, %b.sroa.0.0.vec.extract.i622, !dbg !436
  %add.i630 = fadd float %mul7.i628, %mul10.i629, !dbg !436
  %retval.sroa.0.0.vec.insert.i631 = insertelement <2 x float> undef, float %sub.i627, i32 0, !dbg !437
  %retval.sroa.0.4.vec.insert.i632 = insertelement <2 x float> %retval.sroa.0.0.vec.insert.i631, float %add.i630, i32 1, !dbg !437
  %coerce.sroa.0.0.cast = bitcast %struct.t_complex* %arrayidx86 to <2 x float>*, !dbg !432
  store <2 x float> %retval.sroa.0.4.vec.insert.i632, <2 x float>* %coerce.sroa.0.0.cast, align 4, !dbg !432
  %indvars.iv.next727 = add i64 %indvars.iv726, 1, !dbg !427
  %61 = load i32* %nodeid55.pre-phi, align 4, !dbg !427, !tbaa !341
  %idxprom79 = sext i32 %61 to i64, !dbg !427
  %arrayidx81 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom79, !dbg !427
  %62 = load i32* %arrayidx81, align 4, !dbg !427, !tbaa !341
  %63 = trunc i64 %indvars.iv.next727 to i32, !dbg !427
  %cmp82 = icmp slt i32 %63, %62, !dbg !427
  br i1 %cmp82, label %for.body84, label %if.end126, !dbg !427

for.body108:                                      ; preds = %for.body108, %for.body108.lr.ph
  %indvars.iv724 = phi i64 [ 0, %for.body108.lr.ph ], [ %indvars.iv.next725, %for.body108 ]
  %64 = load %struct.t_complex** @do_ewald.tab_xy, align 8, !dbg !431, !tbaa !350
  %arrayidx110 = getelementptr inbounds %struct.t_complex* %64, i64 %indvars.iv724, !dbg !431
  %65 = load [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !431, !tbaa !350
  %arrayidx113 = getelementptr inbounds [3 x %struct.t_complex]** %65, i64 %indvars.iv742, !dbg !431
  %66 = load [3 x %struct.t_complex]** %arrayidx113, align 8, !dbg !431, !tbaa !350
  %arrayidx115 = getelementptr inbounds [3 x %struct.t_complex]* %66, i64 %indvars.iv724, i64 0, !dbg !431
  %arrayidx118 = getelementptr inbounds [3 x %struct.t_complex]** %65, i64 %idxprom117, !dbg !431
  %67 = load [3 x %struct.t_complex]** %arrayidx118, align 8, !dbg !431, !tbaa !350
  %arrayidx120 = getelementptr inbounds [3 x %struct.t_complex]* %67, i64 %indvars.iv724, i64 1, !dbg !431
  %68 = bitcast %struct.t_complex* %arrayidx115 to <2 x float>*, !dbg !431
  %69 = load <2 x float>* %68, align 1, !dbg !431
  %70 = bitcast %struct.t_complex* %arrayidx120 to <2 x float>*, !dbg !431
  %71 = load <2 x float>* %70, align 1, !dbg !431
  tail call void @llvm.dbg.declare(metadata !402, metadata !269), !dbg !438
  tail call void @llvm.dbg.declare(metadata !402, metadata !270), !dbg !438
  tail call void @llvm.dbg.declare(metadata !402, metadata !271), !dbg !439
  %a.sroa.0.0.vec.extract.i609 = extractelement <2 x float> %69, i32 0, !dbg !440
  %b.sroa.0.0.vec.extract.i610 = extractelement <2 x float> %71, i32 0, !dbg !440
  %mul.i611 = fmul float %a.sroa.0.0.vec.extract.i609, %b.sroa.0.0.vec.extract.i610, !dbg !440
  %a.sroa.0.4.vec.extract.i612 = extractelement <2 x float> %69, i32 1, !dbg !440
  %b.sroa.0.4.vec.extract.i613 = extractelement <2 x float> %71, i32 1, !dbg !440
  %mul3.i614 = fmul float %a.sroa.0.4.vec.extract.i612, %b.sroa.0.4.vec.extract.i613, !dbg !440
  %add.i615 = fadd float %mul.i611, %mul3.i614, !dbg !440
  %mul7.i616 = fmul float %a.sroa.0.4.vec.extract.i612, %b.sroa.0.0.vec.extract.i610, !dbg !441
  %mul10.i617 = fmul float %a.sroa.0.0.vec.extract.i609, %b.sroa.0.4.vec.extract.i613, !dbg !441
  %sub.i618 = fsub float %mul7.i616, %mul10.i617, !dbg !441
  %retval.sroa.0.0.vec.insert.i619 = insertelement <2 x float> undef, float %add.i615, i32 0, !dbg !442
  %retval.sroa.0.4.vec.insert.i620 = insertelement <2 x float> %retval.sroa.0.0.vec.insert.i619, float %sub.i618, i32 1, !dbg !442
  %coerce122.sroa.0.0.cast = bitcast %struct.t_complex* %arrayidx110 to <2 x float>*, !dbg !431
  store <2 x float> %retval.sroa.0.4.vec.insert.i620, <2 x float>* %coerce122.sroa.0.0.cast, align 4, !dbg !431
  %indvars.iv.next725 = add i64 %indvars.iv724, 1, !dbg !429
  %72 = load i32* %nodeid55.pre-phi, align 4, !dbg !429, !tbaa !341
  %idxprom103 = sext i32 %72 to i64, !dbg !429
  %arrayidx105 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom103, !dbg !429
  %73 = load i32* %arrayidx105, align 4, !dbg !429, !tbaa !341
  %74 = trunc i64 %indvars.iv.next725 to i32, !dbg !429
  %cmp106 = icmp slt i32 %74, %73, !dbg !429
  br i1 %cmp106, label %for.body108, label %if.end126, !dbg !429

if.end126:                                        ; preds = %for.cond77.preheader, %for.body84, %for.cond101.preheader, %for.body108
  call void @llvm.dbg.value(metadata !{i32 %lowiz.1.lcssa}, i64 0, metadata !239), !dbg !443
  %75 = load i32* @do_ewald.nz, align 4, !dbg !443, !tbaa !341
  %cmp128674 = icmp slt i32 %lowiz.1689, %75, !dbg !443
  br i1 %cmp128674, label %for.body130.lr.ph, label %for.end305, !dbg !443

for.body130.lr.ph:                                ; preds = %if.end126
  %mul135 = fmul float %mul73, %mul73, !dbg !424
  %add136 = fadd float %mul134, %mul135, !dbg !424
  %76 = sext i32 %lowiz.1689 to i64
  br label %for.body130, !dbg !443

for.body130:                                      ; preds = %for.body130.lr.ph, %for.end301
  %indvars.iv737 = phi i64 [ %76, %for.body130.lr.ph ], [ %indvars.iv.next738, %for.end301 ]
  %energy.2676 = phi float [ %energy.1690, %for.body130.lr.ph ], [ %add231, %for.end301 ]
  %77 = trunc i64 %indvars.iv737 to i32, !dbg !444
  %conv131 = sitofp i32 %77 to float, !dbg !444
  %mul133 = fmul float %conv131, %conv11.i, !dbg !444
  call void @llvm.dbg.value(metadata !{float %mul133}, i64 0, metadata !248), !dbg !444
  %mul137 = fmul float %mul133, %mul133, !dbg !424
  %add138 = fadd float %add136, %mul137, !dbg !424
  call void @llvm.dbg.value(metadata !{float %add138}, i64 0, metadata !249), !dbg !424
  %mul139 = fmul float %conv2, %add138, !dbg !445
  %conv140 = fpext float %mul139 to double, !dbg !445
  %call141 = call double @exp(double %conv140) #6, !dbg !445
  %conv142 = fpext float %add138 to double, !dbg !445
  %div143 = fdiv double %call141, %conv142, !dbg !445
  %conv144 = fptrunc double %div143 to float, !dbg !445
  call void @llvm.dbg.value(metadata !{float %conv144}, i64 0, metadata !244), !dbg !445
  %conv145 = fpext float %conv144 to double, !dbg !412
  %mul146 = fmul double %conv145, 2.000000e+00, !dbg !412
  %div148 = fdiv double 1.000000e+00, %conv142, !dbg !412
  %sub150 = fsub double %div148, %conv149, !dbg !412
  %mul151 = fmul double %sub150, %mul146, !dbg !412
  %conv152 = fptrunc double %mul151 to float, !dbg !412
  call void @llvm.dbg.value(metadata !{float %conv152}, i64 0, metadata !245), !dbg !412
  %cmp153 = icmp sgt i32 %77, -1, !dbg !446
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !240), !dbg !447
  %78 = load i32* %nodeid55.pre-phi, align 4, !dbg !447, !tbaa !341
  %idxprom158656 = sext i32 %78 to i64, !dbg !447
  %arrayidx160657 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom158656, !dbg !447
  %79 = load i32* %arrayidx160657, align 4, !dbg !447, !tbaa !341
  %cmp161658 = icmp sgt i32 %79, 0, !dbg !447
  br i1 %cmp153, label %for.cond156.preheader, label %for.cond182.preheader, !dbg !446

for.cond156.preheader:                            ; preds = %for.body130
  br i1 %cmp161658, label %for.body163, label %if.end209, !dbg !447

for.cond182.preheader:                            ; preds = %for.body130
  br i1 %cmp161658, label %for.body189.lr.ph, label %if.end209, !dbg !449

for.body189.lr.ph:                                ; preds = %for.cond182.preheader
  %sub198 = sub i64 0, %indvars.iv737, !dbg !451
  %sext = shl i64 %sub198, 32, !dbg !451
  %idxprom199 = ashr exact i64 %sext, 32, !dbg !451
  br label %for.body189, !dbg !449

for.body163:                                      ; preds = %for.cond156.preheader, %for.body163
  %indvars.iv730 = phi i64 [ %indvars.iv.next731, %for.body163 ], [ 0, %for.cond156.preheader ]
  %80 = load %struct.t_complex** @do_ewald.tab_qxyz, align 8, !dbg !452, !tbaa !350
  %arrayidx165 = getelementptr inbounds %struct.t_complex* %80, i64 %indvars.iv730, !dbg !452
  %arrayidx167 = getelementptr inbounds float* %charge, i64 %indvars.iv730, !dbg !452
  %81 = load float* %arrayidx167, align 4, !dbg !452, !tbaa !371
  %82 = load %struct.t_complex** @do_ewald.tab_xy, align 8, !dbg !452, !tbaa !350
  %arrayidx169 = getelementptr inbounds %struct.t_complex* %82, i64 %indvars.iv730, !dbg !452
  %83 = load [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !452, !tbaa !350
  %arrayidx172 = getelementptr inbounds [3 x %struct.t_complex]** %83, i64 %indvars.iv737, !dbg !452
  %84 = load [3 x %struct.t_complex]** %arrayidx172, align 8, !dbg !452, !tbaa !350
  %arrayidx174 = getelementptr inbounds [3 x %struct.t_complex]* %84, i64 %indvars.iv730, i64 2, !dbg !452
  %85 = bitcast %struct.t_complex* %arrayidx169 to <2 x float>*, !dbg !452
  %86 = load <2 x float>* %85, align 1, !dbg !452
  %87 = bitcast %struct.t_complex* %arrayidx174 to <2 x float>*, !dbg !452
  %88 = load <2 x float>* %87, align 1, !dbg !452
  tail call void @llvm.dbg.declare(metadata !402, metadata !275), !dbg !453
  tail call void @llvm.dbg.declare(metadata !402, metadata !276), !dbg !453
  tail call void @llvm.dbg.declare(metadata !402, metadata !277), !dbg !454
  %a.sroa.0.0.vec.extract.i597 = extractelement <2 x float> %86, i32 0, !dbg !455
  %b.sroa.0.0.vec.extract.i598 = extractelement <2 x float> %88, i32 0, !dbg !455
  %mul.i599 = fmul float %a.sroa.0.0.vec.extract.i597, %b.sroa.0.0.vec.extract.i598, !dbg !455
  %a.sroa.0.4.vec.extract.i600 = extractelement <2 x float> %86, i32 1, !dbg !455
  %b.sroa.0.4.vec.extract.i601 = extractelement <2 x float> %88, i32 1, !dbg !455
  %mul3.i602 = fmul float %a.sroa.0.4.vec.extract.i600, %b.sroa.0.4.vec.extract.i601, !dbg !455
  %sub.i603 = fsub float %mul.i599, %mul3.i602, !dbg !455
  %mul7.i604 = fmul float %a.sroa.0.0.vec.extract.i597, %b.sroa.0.4.vec.extract.i601, !dbg !456
  %mul10.i605 = fmul float %a.sroa.0.4.vec.extract.i600, %b.sroa.0.0.vec.extract.i598, !dbg !456
  %add.i606 = fadd float %mul7.i604, %mul10.i605, !dbg !456
  tail call void @llvm.dbg.value(metadata !{float %81}, i64 0, metadata !457), !dbg !458
  tail call void @llvm.dbg.declare(metadata !402, metadata !262), !dbg !458
  tail call void @llvm.dbg.declare(metadata !402, metadata !263), !dbg !459
  %mul.i592 = fmul float %81, %sub.i603, !dbg !460
  %mul2.i594 = fmul float %81, %add.i606, !dbg !461
  %retval.sroa.0.0.vec.insert.i595 = insertelement <2 x float> undef, float %mul.i592, i32 0, !dbg !462
  %retval.sroa.0.4.vec.insert.i596 = insertelement <2 x float> %retval.sroa.0.0.vec.insert.i595, float %mul2.i594, i32 1, !dbg !462
  %coerce177.sroa.0.0.cast = bitcast %struct.t_complex* %arrayidx165 to <2 x float>*, !dbg !452
  store <2 x float> %retval.sroa.0.4.vec.insert.i596, <2 x float>* %coerce177.sroa.0.0.cast, align 4, !dbg !452
  %indvars.iv.next731 = add i64 %indvars.iv730, 1, !dbg !447
  %89 = load i32* %nodeid55.pre-phi, align 4, !dbg !447, !tbaa !341
  %idxprom158 = sext i32 %89 to i64, !dbg !447
  %arrayidx160 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom158, !dbg !447
  %90 = load i32* %arrayidx160, align 4, !dbg !447, !tbaa !341
  %91 = trunc i64 %indvars.iv.next731 to i32, !dbg !447
  %cmp161 = icmp slt i32 %91, %90, !dbg !447
  br i1 %cmp161, label %for.body163, label %if.end209, !dbg !447

for.body189:                                      ; preds = %for.body189.lr.ph, %for.body189
  %indvars.iv728 = phi i64 [ 0, %for.body189.lr.ph ], [ %indvars.iv.next729, %for.body189 ]
  %92 = load %struct.t_complex** @do_ewald.tab_qxyz, align 8, !dbg !451, !tbaa !350
  %arrayidx191 = getelementptr inbounds %struct.t_complex* %92, i64 %indvars.iv728, !dbg !451
  %arrayidx193 = getelementptr inbounds float* %charge, i64 %indvars.iv728, !dbg !451
  %93 = load float* %arrayidx193, align 4, !dbg !451, !tbaa !371
  %94 = load %struct.t_complex** @do_ewald.tab_xy, align 8, !dbg !451, !tbaa !350
  %arrayidx196 = getelementptr inbounds %struct.t_complex* %94, i64 %indvars.iv728, !dbg !451
  %95 = load [3 x %struct.t_complex]*** @do_ewald.eir, align 8, !dbg !451, !tbaa !350
  %arrayidx200 = getelementptr inbounds [3 x %struct.t_complex]** %95, i64 %idxprom199, !dbg !451
  %96 = load [3 x %struct.t_complex]** %arrayidx200, align 8, !dbg !451, !tbaa !350
  %arrayidx202 = getelementptr inbounds [3 x %struct.t_complex]* %96, i64 %indvars.iv728, i64 2, !dbg !451
  %97 = bitcast %struct.t_complex* %arrayidx196 to <2 x float>*, !dbg !451
  %98 = load <2 x float>* %97, align 1, !dbg !451
  %99 = bitcast %struct.t_complex* %arrayidx202 to <2 x float>*, !dbg !451
  %100 = load <2 x float>* %99, align 1, !dbg !451
  tail call void @llvm.dbg.declare(metadata !402, metadata !269), !dbg !463
  tail call void @llvm.dbg.declare(metadata !402, metadata !270), !dbg !463
  tail call void @llvm.dbg.declare(metadata !402, metadata !271), !dbg !464
  %a.sroa.0.0.vec.extract.i = extractelement <2 x float> %98, i32 0, !dbg !465
  %b.sroa.0.0.vec.extract.i = extractelement <2 x float> %100, i32 0, !dbg !465
  %mul.i588 = fmul float %a.sroa.0.0.vec.extract.i, %b.sroa.0.0.vec.extract.i, !dbg !465
  %a.sroa.0.4.vec.extract.i = extractelement <2 x float> %98, i32 1, !dbg !465
  %b.sroa.0.4.vec.extract.i = extractelement <2 x float> %100, i32 1, !dbg !465
  %mul3.i = fmul float %a.sroa.0.4.vec.extract.i, %b.sroa.0.4.vec.extract.i, !dbg !465
  %add.i = fadd float %mul.i588, %mul3.i, !dbg !465
  %mul7.i = fmul float %a.sroa.0.4.vec.extract.i, %b.sroa.0.0.vec.extract.i, !dbg !466
  %mul10.i = fmul float %a.sroa.0.0.vec.extract.i, %b.sroa.0.4.vec.extract.i, !dbg !466
  %sub.i = fsub float %mul7.i, %mul10.i, !dbg !466
  tail call void @llvm.dbg.value(metadata !{float %93}, i64 0, metadata !467), !dbg !468
  tail call void @llvm.dbg.declare(metadata !402, metadata !262), !dbg !468
  tail call void @llvm.dbg.declare(metadata !402, metadata !263), !dbg !469
  %mul.i = fmul float %93, %add.i, !dbg !470
  %mul2.i = fmul float %93, %sub.i, !dbg !471
  %retval.sroa.0.0.vec.insert.i = insertelement <2 x float> undef, float %mul.i, i32 0, !dbg !472
  %retval.sroa.0.4.vec.insert.i = insertelement <2 x float> %retval.sroa.0.0.vec.insert.i, float %mul2.i, i32 1, !dbg !472
  %coerce205.sroa.0.0.cast = bitcast %struct.t_complex* %arrayidx191 to <2 x float>*, !dbg !451
  store <2 x float> %retval.sroa.0.4.vec.insert.i, <2 x float>* %coerce205.sroa.0.0.cast, align 4, !dbg !451
  %indvars.iv.next729 = add i64 %indvars.iv728, 1, !dbg !449
  %101 = load i32* %nodeid55.pre-phi, align 4, !dbg !449, !tbaa !341
  %idxprom184 = sext i32 %101 to i64, !dbg !449
  %arrayidx186 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom184, !dbg !449
  %102 = load i32* %arrayidx186, align 4, !dbg !449, !tbaa !341
  %103 = trunc i64 %indvars.iv.next729 to i32, !dbg !449
  %cmp187 = icmp slt i32 %103, %102, !dbg !449
  br i1 %cmp187, label %for.body189, label %if.end209, !dbg !449

if.end209:                                        ; preds = %for.body163, %for.body189, %for.cond156.preheader, %for.cond182.preheader
  %104 = phi i32 [ %78, %for.cond182.preheader ], [ %78, %for.cond156.preheader ], [ %101, %for.body189 ], [ %89, %for.body163 ]
  call void @llvm.dbg.value(metadata !360, i64 0, metadata !243), !dbg !473
  call void @llvm.dbg.value(metadata !360, i64 0, metadata !242), !dbg !473
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !240), !dbg !474
  %idxprom212662 = sext i32 %104 to i64, !dbg !474
  %arrayidx214663 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom212662, !dbg !474
  %105 = load i32* %arrayidx214663, align 4, !dbg !474, !tbaa !341
  %cmp215664 = icmp sgt i32 %105, 0, !dbg !474
  br i1 %cmp215664, label %for.body217.lr.ph, label %for.end226, !dbg !474

for.body217.lr.ph:                                ; preds = %if.end209
  %106 = load %struct.t_complex** @do_ewald.tab_qxyz, align 8, !dbg !476, !tbaa !350
  br label %for.body217, !dbg !474

for.body217:                                      ; preds = %for.body217.lr.ph, %for.body217
  %indvars.iv732 = phi i64 [ 0, %for.body217.lr.ph ], [ %indvars.iv.next733, %for.body217 ]
  %ss.0667 = phi float [ 0.000000e+00, %for.body217.lr.ph ], [ %add223, %for.body217 ]
  %cs.0666 = phi float [ 0.000000e+00, %for.body217.lr.ph ], [ %add220, %for.body217 ]
  %re = getelementptr inbounds %struct.t_complex* %106, i64 %indvars.iv732, i32 0, !dbg !476
  %107 = load float* %re, align 4, !dbg !476, !tbaa !371
  %add220 = fadd float %cs.0666, %107, !dbg !476
  call void @llvm.dbg.value(metadata !{float %add220}, i64 0, metadata !242), !dbg !476
  %im = getelementptr inbounds %struct.t_complex* %106, i64 %indvars.iv732, i32 1, !dbg !478
  %108 = load float* %im, align 4, !dbg !478, !tbaa !371
  %add223 = fadd float %ss.0667, %108, !dbg !478
  call void @llvm.dbg.value(metadata !{float %add223}, i64 0, metadata !243), !dbg !478
  %indvars.iv.next733 = add i64 %indvars.iv732, 1, !dbg !474
  %109 = trunc i64 %indvars.iv.next733 to i32, !dbg !474
  %cmp215 = icmp slt i32 %109, %105, !dbg !474
  br i1 %cmp215, label %for.body217, label %for.end226, !dbg !474

for.end226:                                       ; preds = %for.body217, %if.end209
  %ss.0.lcssa = phi float [ 0.000000e+00, %if.end209 ], [ %add223, %for.body217 ]
  %cs.0.lcssa = phi float [ 0.000000e+00, %if.end209 ], [ %add220, %for.body217 ]
  %mul227 = fmul float %cs.0.lcssa, %cs.0.lcssa, !dbg !479
  %mul228 = fmul float %ss.0.lcssa, %ss.0.lcssa, !dbg !479
  %add229 = fadd float %mul227, %mul228, !dbg !479
  %mul230 = fmul float %conv144, %add229, !dbg !479
  %add231 = fadd float %energy.2676, %mul230, !dbg !479
  call void @llvm.dbg.value(metadata !{float %add231}, i64 0, metadata !233), !dbg !479
  %mul235 = fmul float %conv152, %add229, !dbg !480
  call void @llvm.dbg.value(metadata !{float %mul235}, i64 0, metadata !241), !dbg !480
  %mul236 = fmul float %mul66, %mul235, !dbg !417
  %mul237 = fmul float %mul66, %mul236, !dbg !417
  %110 = load float* %arrayidx239, align 4, !dbg !417, !tbaa !371
  %sub240 = fsub float %110, %mul237, !dbg !417
  store float %sub240, float* %arrayidx239, align 4, !dbg !417, !tbaa !371
  %mul242 = fmul float %mul73, %mul236, !dbg !418
  %111 = load float* %arrayidx244, align 4, !dbg !418, !tbaa !371
  %sub245 = fsub float %111, %mul242, !dbg !418
  store float %sub245, float* %arrayidx244, align 4, !dbg !418, !tbaa !371
  %mul247 = fmul float %mul133, %mul236, !dbg !419
  %112 = load float* %arrayidx249, align 4, !dbg !419, !tbaa !371
  %sub250 = fsub float %112, %mul247, !dbg !419
  store float %sub250, float* %arrayidx249, align 4, !dbg !419, !tbaa !371
  %mul251 = fmul float %mul73, %mul235, !dbg !420
  %mul252 = fmul float %mul73, %mul251, !dbg !420
  %113 = load float* %arrayidx254, align 4, !dbg !420, !tbaa !371
  %sub255 = fsub float %113, %mul252, !dbg !420
  store float %sub255, float* %arrayidx254, align 4, !dbg !420, !tbaa !371
  %mul257 = fmul float %mul133, %mul251, !dbg !421
  %114 = load float* %arrayidx259, align 4, !dbg !421, !tbaa !371
  %sub260 = fsub float %114, %mul257, !dbg !421
  store float %sub260, float* %arrayidx259, align 4, !dbg !421, !tbaa !371
  %mul261 = fmul float %mul133, %mul235, !dbg !422
  %mul262 = fmul float %mul133, %mul261, !dbg !422
  %115 = load float* %arrayidx264, align 4, !dbg !422, !tbaa !371
  %sub265 = fsub float %115, %mul262, !dbg !422
  store float %sub265, float* %arrayidx264, align 4, !dbg !422, !tbaa !371
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !240), !dbg !481
  br i1 %cmp215664, label %for.body273.lr.ph, label %for.end301, !dbg !481

for.body273.lr.ph:                                ; preds = %for.end226
  %116 = load %struct.t_complex** @do_ewald.tab_qxyz, align 8, !dbg !483, !tbaa !350
  br label %for.body273, !dbg !481

for.body273:                                      ; preds = %for.body273.lr.ph, %for.body273
  %indvars.iv734 = phi i64 [ 0, %for.body273.lr.ph ], [ %indvars.iv.next735, %for.body273 ]
  %im276 = getelementptr inbounds %struct.t_complex* %116, i64 %indvars.iv734, i32 1, !dbg !483
  %117 = load float* %im276, align 4, !dbg !483, !tbaa !371
  %mul277 = fmul float %cs.0.lcssa, %117, !dbg !483
  %re280 = getelementptr inbounds %struct.t_complex* %116, i64 %indvars.iv734, i32 0, !dbg !483
  %118 = load float* %re280, align 4, !dbg !483, !tbaa !371
  %mul281 = fmul float %ss.0.lcssa, %118, !dbg !483
  %sub282 = fsub float %mul277, %mul281, !dbg !483
  %mul283 = fmul float %conv144, %sub282, !dbg !483
  call void @llvm.dbg.value(metadata !{float %mul283}, i64 0, metadata !241), !dbg !483
  %mul284 = fmul float %mul66, %mul283, !dbg !485
  %arrayidx287 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv734, i64 0, !dbg !485
  %119 = load float* %arrayidx287, align 4, !dbg !485, !tbaa !371
  %add288 = fadd float %119, %mul284, !dbg !485
  store float %add288, float* %arrayidx287, align 4, !dbg !485, !tbaa !371
  %mul289 = fmul float %mul73, %mul283, !dbg !486
  %arrayidx292 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv734, i64 1, !dbg !486
  %120 = load float* %arrayidx292, align 4, !dbg !486, !tbaa !371
  %add293 = fadd float %120, %mul289, !dbg !486
  store float %add293, float* %arrayidx292, align 4, !dbg !486, !tbaa !371
  %mul294 = fmul float %mul133, %mul283, !dbg !487
  %arrayidx297 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv734, i64 2, !dbg !487
  %121 = load float* %arrayidx297, align 4, !dbg !487, !tbaa !371
  %add298 = fadd float %121, %mul294, !dbg !487
  store float %add298, float* %arrayidx297, align 4, !dbg !487, !tbaa !371
  %indvars.iv.next735 = add i64 %indvars.iv734, 1, !dbg !481
  %122 = trunc i64 %indvars.iv.next735 to i32, !dbg !481
  %cmp271 = icmp slt i32 %122, %105, !dbg !481
  br i1 %cmp271, label %for.body273, label %for.end301, !dbg !481

for.end301:                                       ; preds = %for.body273, %for.end226
  %123 = load i32* @do_ewald.nz, align 4, !dbg !488, !tbaa !341
  call void @llvm.dbg.value(metadata !{i32 %sub302}, i64 0, metadata !236), !dbg !488
  %indvars.iv.next738 = add i64 %indvars.iv737, 1, !dbg !443
  %124 = trunc i64 %indvars.iv.next738 to i32, !dbg !443
  %cmp128 = icmp slt i32 %124, %123, !dbg !443
  br i1 %cmp128, label %for.body130, label %for.cond127.for.end305_crit_edge, !dbg !443

for.cond127.for.end305_crit_edge:                 ; preds = %for.end301
  %sub302 = sub nsw i32 1, %123, !dbg !488
  %.pre755 = load i32* @do_ewald.ny, align 4, !dbg !489, !tbaa !341
  br label %for.end305, !dbg !443

for.end305:                                       ; preds = %for.cond127.for.end305_crit_edge, %if.end126
  %125 = phi i32 [ %.pre755, %for.cond127.for.end305_crit_edge ], [ %49, %if.end126 ], !dbg !489
  %energy.2.lcssa = phi float [ %add231, %for.cond127.for.end305_crit_edge ], [ %energy.1690, %if.end126 ]
  %lowiz.2.lcssa = phi i32 [ %sub302, %for.cond127.for.end305_crit_edge ], [ %lowiz.1689, %if.end126 ]
  call void @llvm.dbg.value(metadata !{i32 %sub306}, i64 0, metadata !235), !dbg !489
  %indvars.iv.next741 = add i64 %indvars.iv740, 1, !dbg !423
  %126 = trunc i64 %indvars.iv.next741 to i32, !dbg !423
  %cmp68 = icmp slt i32 %126, %125, !dbg !423
  br i1 %cmp68, label %for.body70, label %for.cond67.for.inc310_crit_edge, !dbg !423

for.cond67.for.inc310_crit_edge:                  ; preds = %for.end305
  %sub306 = sub nsw i32 1, %125, !dbg !489
  %.pre = load i32* @do_ewald.nx, align 4, !dbg !408, !tbaa !341
  br label %for.inc310, !dbg !423

for.inc310:                                       ; preds = %for.cond67.for.inc310_crit_edge, %for.body63
  %127 = phi i32 [ %125, %for.cond67.for.inc310_crit_edge ], [ %45, %for.body63 ]
  %128 = phi i32 [ %.pre, %for.cond67.for.inc310_crit_edge ], [ %46, %for.body63 ], !dbg !408
  %energy.1.lcssa = phi float [ %energy.2.lcssa, %for.cond67.for.inc310_crit_edge ], [ %energy.0710, %for.body63 ]
  %lowiy.1.lcssa = phi i32 [ %sub306, %for.cond67.for.inc310_crit_edge ], [ %lowiy.0709, %for.body63 ]
  %lowiz.1.lcssa = phi i32 [ %lowiz.2.lcssa, %for.cond67.for.inc310_crit_edge ], [ %lowiz.0708, %for.body63 ]
  %indvars.iv.next743 = add i64 %indvars.iv742, 1, !dbg !408
  %129 = trunc i64 %indvars.iv.next743 to i32, !dbg !408
  %cmp61 = icmp slt i32 %129, %128, !dbg !408
  br i1 %cmp61, label %for.body63, label %for.end312, !dbg !408

for.end312:                                       ; preds = %for.inc310, %for.cond60.preheader
  %energy.0.lcssa = phi float [ 0.000000e+00, %for.cond60.preheader ], [ %energy.1.lcssa, %for.inc310 ]
  %130 = load float* %box, align 4, !dbg !490, !tbaa !371
  %131 = load float* %arrayidx3.i, align 4, !dbg !490, !tbaa !371
  %mul315 = fmul float %130, %131, !dbg !490
  %132 = load float* %arrayidx8.i, align 4, !dbg !490, !tbaa !371
  %mul317 = fmul float %mul315, %132, !dbg !490
  %conv318 = fpext float %mul317 to double, !dbg !490
  %div319 = fdiv double 0x402921FB54442D18, %conv318, !dbg !490
  %mul320 = fmul double %div319, 3.320636e+02, !dbg !490
  %mul321 = fmul double %mul320, 4.184000e+00, !dbg !490
  %mul322 = fmul double %mul321, 1.000000e-01, !dbg !490
  %conv323 = fptrunc double %mul322 to float, !dbg !490
  call void @llvm.dbg.value(metadata !{float %conv323}, i64 0, metadata !241), !dbg !490
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !240), !dbg !491
  %133 = load i32* %nodeid55.pre-phi, align 4, !dbg !491, !tbaa !341
  %idxprom326635 = sext i32 %133 to i64, !dbg !491
  %arrayidx328636 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom326635, !dbg !491
  %134 = load i32* %arrayidx328636, align 4, !dbg !491, !tbaa !341
  %cmp329637 = icmp sgt i32 %134, 0, !dbg !491
  br i1 %cmp329637, label %for.body331.lr.ph, label %for.end349, !dbg !491

for.body331.lr.ph:                                ; preds = %for.end312
  %mul332 = fmul float %conv323, 2.000000e+00, !dbg !493
  br label %for.body331, !dbg !491

for.body331:                                      ; preds = %for.body331.lr.ph, %for.body331
  %indvars.iv = phi i64 [ 0, %for.body331.lr.ph ], [ %indvars.iv.next, %for.body331 ]
  %arrayidx335 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv, i64 0, !dbg !493
  %135 = load float* %arrayidx335, align 4, !dbg !493, !tbaa !371
  %mul336 = fmul float %mul332, %135, !dbg !493
  store float %mul336, float* %arrayidx335, align 4, !dbg !493, !tbaa !371
  %arrayidx340 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv, i64 1, !dbg !495
  %136 = load float* %arrayidx340, align 4, !dbg !495, !tbaa !371
  %mul341 = fmul float %mul332, %136, !dbg !495
  store float %mul341, float* %arrayidx340, align 4, !dbg !495, !tbaa !371
  %arrayidx345 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv, i64 2, !dbg !496
  %137 = load float* %arrayidx345, align 4, !dbg !496, !tbaa !371
  %mul346 = fmul float %mul332, %137, !dbg !496
  store float %mul346, float* %arrayidx345, align 4, !dbg !496, !tbaa !371
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !491
  %138 = trunc i64 %indvars.iv.next to i32, !dbg !491
  %cmp329 = icmp slt i32 %138, %134, !dbg !491
  br i1 %cmp329, label %for.body331, label %for.end349, !dbg !491

for.end349:                                       ; preds = %for.body331, %for.end312
  %conv350 = fpext float %conv323 to double, !dbg !497
  %mul351 = fmul double %conv350, -5.000000e-01, !dbg !497
  %arrayidx353 = getelementptr inbounds [3 x float]* %lrvir, i64 0, i64 0, !dbg !497
  %139 = load float* %arrayidx353, align 4, !dbg !497, !tbaa !371
  %add354 = fadd float %energy.0.lcssa, %139, !dbg !497
  %conv355 = fpext float %add354 to double, !dbg !497
  %mul356 = fmul double %mul351, %conv355, !dbg !497
  %conv357 = fptrunc double %mul356 to float, !dbg !497
  store float %conv357, float* %arrayidx353, align 4, !dbg !497, !tbaa !371
  %arrayidx363 = getelementptr inbounds [3 x float]* %lrvir, i64 0, i64 1, !dbg !498
  %140 = load float* %arrayidx363, align 4, !dbg !498, !tbaa !371
  %conv364 = fpext float %140 to double, !dbg !498
  %mul365 = fmul double %mul351, %conv364, !dbg !498
  %conv366 = fptrunc double %mul365 to float, !dbg !498
  store float %conv366, float* %arrayidx363, align 4, !dbg !498, !tbaa !371
  %arrayidx372 = getelementptr inbounds [3 x float]* %lrvir, i64 0, i64 2, !dbg !499
  %141 = load float* %arrayidx372, align 4, !dbg !499, !tbaa !371
  %conv373 = fpext float %141 to double, !dbg !499
  %mul374 = fmul double %mul351, %conv373, !dbg !499
  %conv375 = fptrunc double %mul374 to float, !dbg !499
  store float %conv375, float* %arrayidx372, align 4, !dbg !499, !tbaa !371
  %arrayidx381 = getelementptr inbounds [3 x float]* %lrvir, i64 1, i64 1, !dbg !500
  %142 = load float* %arrayidx381, align 4, !dbg !500, !tbaa !371
  %add382 = fadd float %energy.0.lcssa, %142, !dbg !500
  %conv383 = fpext float %add382 to double, !dbg !500
  %mul384 = fmul double %mul351, %conv383, !dbg !500
  %conv385 = fptrunc double %mul384 to float, !dbg !500
  store float %conv385, float* %arrayidx381, align 4, !dbg !500, !tbaa !371
  %arrayidx391 = getelementptr inbounds [3 x float]* %lrvir, i64 1, i64 2, !dbg !501
  %143 = load float* %arrayidx391, align 4, !dbg !501, !tbaa !371
  %conv392 = fpext float %143 to double, !dbg !501
  %mul393 = fmul double %mul351, %conv392, !dbg !501
  %conv394 = fptrunc double %mul393 to float, !dbg !501
  store float %conv394, float* %arrayidx391, align 4, !dbg !501, !tbaa !371
  %arrayidx400 = getelementptr inbounds [3 x float]* %lrvir, i64 2, i64 2, !dbg !502
  %144 = load float* %arrayidx400, align 4, !dbg !502, !tbaa !371
  %add401 = fadd float %energy.0.lcssa, %144, !dbg !502
  %conv402 = fpext float %add401 to double, !dbg !502
  %mul403 = fmul double %mul351, %conv402, !dbg !502
  %conv404 = fptrunc double %mul403 to float, !dbg !502
  store float %conv404, float* %arrayidx400, align 4, !dbg !502, !tbaa !371
  %arrayidx410 = getelementptr inbounds [3 x float]* %lrvir, i64 1, i64 0, !dbg !503
  store float %conv366, float* %arrayidx410, align 4, !dbg !503, !tbaa !371
  %arrayidx414 = getelementptr inbounds [3 x float]* %lrvir, i64 2, i64 0, !dbg !504
  store float %conv375, float* %arrayidx414, align 4, !dbg !504, !tbaa !371
  %arrayidx418 = getelementptr inbounds [3 x float]* %lrvir, i64 2, i64 1, !dbg !505
  store float %conv394, float* %arrayidx418, align 4, !dbg !505, !tbaa !371
  %mul419 = fmul float %energy.0.lcssa, %conv323, !dbg !506
  call void @llvm.dbg.value(metadata !{float %mul419}, i64 0, metadata !233), !dbg !506
  ret float %mul419, !dbg !507
}
