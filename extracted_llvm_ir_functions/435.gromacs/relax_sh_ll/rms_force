define internal fastcc float @rms_force(%struct.t_commrec* %cr, [3 x float]* nocapture readonly %f, i32 %ns, %struct.t_shell* nocapture readonly %s, i32 %ndir, float %sf_dir) #4 {
  %ntot = alloca i32, align 4
  %df2 = alloca float, align 4
  tail call void @llvm.dbg.value(metadata %struct.t_commrec* %cr, i64 0, metadata !1080, metadata !1196), !dbg !2245
  tail call void @llvm.dbg.value(metadata [3 x float]* %f, i64 0, metadata !1081, metadata !1196), !dbg !2246
  tail call void @llvm.dbg.value(metadata i32 %ns, i64 0, metadata !1082, metadata !1196), !dbg !2247
  tail call void @llvm.dbg.value(metadata %struct.t_shell* %s, i64 0, metadata !1083, metadata !1196), !dbg !2248
  tail call void @llvm.dbg.value(metadata i32 %ndir, i64 0, metadata !1084, metadata !1196), !dbg !2249
  tail call void @llvm.dbg.value(metadata float %sf_dir, i64 0, metadata !1085, metadata !1196), !dbg !2250
  %1 = add nsw i32 %ndir, %ns, !dbg !2251
  tail call void @llvm.dbg.value(metadata i32 %1, i64 0, metadata !1088, metadata !1196), !dbg !2252
  store i32 %1, i32* %ntot, align 4, !dbg !2253, !tbaa !1406
  %2 = icmp eq i32 %1, 0, !dbg !2254
  br i1 %2, label %38, label %3, !dbg !2256

; <label>:3                                       ; preds = %0
  tail call void @llvm.dbg.value(metadata float %sf_dir, i64 0, metadata !1089, metadata !1196), !dbg !2257
  store float %sf_dir, float* %df2, align 4, !dbg !2258, !tbaa !1324
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1086, metadata !1196), !dbg !2259
  %4 = icmp sgt i32 %ns, 0, !dbg !2260
  br i1 %4, label %.lr.ph, label %23, !dbg !2263

.lr.ph:                                           ; preds = %3
  %5 = add i32 %ns, -1, !dbg !2263
  br label %6, !dbg !2263

; <label>:6                                       ; preds = %6, %.lr.ph
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %6 ]
  %7 = phi float [ %sf_dir, %.lr.ph ], [ %22, %6 ], !dbg !2264
  %8 = getelementptr inbounds %struct.t_shell* %s, i64 %indvars.iv, i32 1, !dbg !2266
  %9 = load i32* %8, align 4, !dbg !2266, !tbaa !1538
  tail call void @llvm.dbg.value(metadata i32 %9, i64 0, metadata !1087, metadata !1196), !dbg !2267
  %10 = sext i32 %9 to i64, !dbg !2268
  %11 = getelementptr inbounds [3 x float]* %f, i64 %10, i64 0, !dbg !2268
  tail call void @llvm.dbg.value(metadata float* %11, i64 0, metadata !1094, metadata !1196), !dbg !2269
  tail call void @llvm.dbg.value(metadata float* %11, i64 0, metadata !1095, metadata !1196), !dbg !2271
  %12 = load float* %11, align 4, !dbg !2272, !tbaa !1324
  %13 = fmul float %12, %12, !dbg !2273
  %14 = getelementptr inbounds [3 x float]* %f, i64 %10, i64 1, !dbg !2274
  %15 = bitcast float* %14 to <2 x float>*, !dbg !2274
  %16 = load <2 x float>* %15, align 4, !dbg !2274, !tbaa !1324
  %17 = fmul <2 x float> %16, %16, !dbg !2275
  %18 = extractelement <2 x float> %17, i32 0, !dbg !2276
  %19 = fadd float %13, %18, !dbg !2276
  %20 = extractelement <2 x float> %17, i32 1, !dbg !2277
  %21 = fadd float %19, %20, !dbg !2277
  tail call void @llvm.dbg.value(metadata float* %df2, i64 0, metadata !1089, metadata !1196), !dbg !2257
  %22 = fadd float %7, %21, !dbg !2278
  tail call void @llvm.dbg.value(metadata float %22, i64 0, metadata !1089, metadata !1196), !dbg !2257
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1, !dbg !2263
  %lftr.wideiv = trunc i64 %indvars.iv to i32, !dbg !2263
  %exitcond = icmp eq i32 %lftr.wideiv, %5, !dbg !2263
  br i1 %exitcond, label %._crit_edge, label %6, !dbg !2263

._crit_edge:                                      ; preds = %6
  store float %22, float* %df2, align 4, !dbg !2278, !tbaa !1324
  br label %23, !dbg !2263

; <label>:23                                      ; preds = %._crit_edge, %3
  %24 = phi float [ %22, %._crit_edge ], [ %sf_dir, %3 ]
  %25 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 1, !dbg !2279
  %26 = load i32* %25, align 4, !dbg !2279, !tbaa !1631
  %27 = icmp sgt i32 %26, 1, !dbg !2279
  br i1 %27, label %32, label %28, !dbg !2279

; <label>:28                                      ; preds = %23
  %29 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 5, !dbg !2279
  %30 = load i32* %29, align 4, !dbg !2279, !tbaa !1633
  %31 = icmp sgt i32 %30, 1, !dbg !2279
  br i1 %31, label %32, label %33, !dbg !2281

; <label>:32                                      ; preds = %28, %23
  tail call void @llvm.dbg.value(metadata float* %df2, i64 0, metadata !1089, metadata !1196), !dbg !2257
  call void @gmx_sumf(i32 1, float* %df2, %struct.t_commrec* %cr) #8, !dbg !2282
  call void @llvm.dbg.value(metadata i32* %ntot, i64 0, metadata !1088, metadata !1196), !dbg !2252
  call void @gmx_sumi(i32 1, i32* %ntot, %struct.t_commrec* %cr) #8, !dbg !2284
  %.pre = load float* %df2, align 4, !dbg !2285, !tbaa !1324
  %.pre2 = load i32* %ntot, align 4, !dbg !2286, !tbaa !1406
  br label %33, !dbg !2287

; <label>:33                                      ; preds = %32, %28
  %34 = phi i32 [ %.pre2, %32 ], [ %1, %28 ]
  %35 = phi float [ %.pre, %32 ], [ %24, %28 ]
  call void @llvm.dbg.value(metadata float* %df2, i64 0, metadata !1089, metadata !1196), !dbg !2257
  call void @llvm.dbg.value(metadata i32* %ntot, i64 0, metadata !1088, metadata !1196), !dbg !2252
  %36 = sitofp i32 %34 to float, !dbg !2286
  %37 = fdiv float %35, %36, !dbg !2288
  %sqrtf = call float @sqrtf(float %37) #7, !dbg !2289
  br label %38, !dbg !2290

; <label>:38                                      ; preds = %0, %33
  %.0 = phi float [ %sqrtf, %33 ], [ 0.000000e+00, %0 ]
  ret float %.0, !dbg !2291
}
