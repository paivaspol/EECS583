define internal fastcc void @init_adir(%struct.__sFILE* %log, %struct.t_topology* %top, %struct.t_inputrec* %ir, i32 %step, %struct.t_mdatoms* %md, i32 %start, i32 %end, [3 x float]* %x_old, [3 x float]* nocapture readonly %x_init, [3 x float]* %x, [3 x float]* nocapture readonly %f, [3 x float]* %acc_dir, [3 x float]* %box, float %lambda, float* %dvdlambda, %struct.t_nrnb* %nrnb) #4 {
  %1 = load [3 x float]** @init_adir.xnew, align 8, !tbaa !31
  %2 = icmp eq [3 x float]* %1, null
  br i1 %2, label %3, label %8

; <label>:3                                       ; preds = %0
  %4 = sub nsw i32 %end, %start
  %5 = tail call i8* @save_calloc(i8* getelementptr inbounds ([6 x i8]* @.str17, i64 0, i64 0), i8* getelementptr inbounds ([68 x i8]* @.str1, i64 0, i64 0), i32 247, i32 %4, i32 12) #8
  store i8* %5, i8** bitcast ([3 x float]** @init_adir.xnold to i8**), align 8, !tbaa !31
  %6 = tail call i8* @save_calloc(i8* getelementptr inbounds ([5 x i8]* @.str18, i64 0, i64 0), i8* getelementptr inbounds ([68 x i8]* @.str1, i64 0, i64 0), i32 248, i32 %4, i32 12) #8
  store i8* %6, i8** bitcast ([3 x float]** @init_adir.xnew to i8**), align 8, !tbaa !31
  %7 = bitcast i8* %6 to [3 x float]*
  br label %8

; <label>:8                                       ; preds = %3, %0
  %9 = phi [3 x float]* [ %7, %3 ], [ %1, %0 ]
  %10 = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 13
  %11 = load i16** %10, align 8, !tbaa !57
  %12 = getelementptr inbounds %struct.t_inputrec* %ir, i64 0, i32 15
  %13 = load float* %12, align 4, !tbaa !58
  %14 = icmp sgt i32 %end, %start
  br i1 %14, label %.lr.ph, label %._crit_edge18

._crit_edge18:                                    ; preds = %8
  %.pre = load [3 x float]** @init_adir.xnold, align 8, !tbaa !31
  %.pre21 = sext i32 %start to i64
  br label %._crit_edge7

.lr.ph:                                           ; preds = %8
  %15 = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 5
  %16 = load float** %15, align 8, !tbaa !59
  %17 = load [3 x float]** @init_adir.xnold, align 8, !tbaa !31
  %18 = fpext float %13 to double
  %19 = sext i32 %start to i64
  %20 = add i32 %end, -1
  br label %21

; <label>:21                                      ; preds = %63, %.lr.ph
  %indvars.iv14 = phi i64 [ %19, %.lr.ph ], [ %indvars.iv.next15, %63 ]
  %22 = getelementptr inbounds float* %16, i64 %indvars.iv14
  %23 = load float* %22, align 4, !tbaa !14
  %24 = fmul float %13, %23
  %25 = fpext float %24 to double
  %26 = getelementptr inbounds i16* %11, i64 %indvars.iv14
  %27 = load i16* %26, align 2, !tbaa !60
  %28 = add nsw i64 %indvars.iv14, %19
  br label %29

; <label>:29                                      ; preds = %62, %21
  %indvars.iv11 = phi i64 [ 0, %21 ], [ %indvars.iv.next12, %62 ]
  switch i16 %27, label %30 [
    i16 4, label %53
    i16 2, label %53
  ]

; <label>:30                                      ; preds = %29
  %31 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv14, i64 %indvars.iv11
  %32 = load float* %31, align 4, !tbaa !14
  %33 = getelementptr inbounds [3 x float]* %x_init, i64 %indvars.iv14, i64 %indvars.iv11
  %34 = load float* %33, align 4, !tbaa !14
  %35 = getelementptr inbounds [3 x float]* %x_old, i64 %indvars.iv14, i64 %indvars.iv11
  %36 = load float* %35, align 4, !tbaa !14
  %37 = fsub float %34, %36
  %38 = fsub float %32, %37
  %39 = getelementptr inbounds [3 x float]* %17, i64 %28, i64 %indvars.iv11
  store float %38, float* %39, align 4, !tbaa !14
  %40 = load float* %31, align 4, !tbaa !14
  %41 = fmul float %40, 2.000000e+00
  %42 = load float* %35, align 4, !tbaa !14
  %43 = fsub float %41, %42
  %44 = fpext float %43 to double
  %45 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv14, i64 %indvars.iv11
  %46 = load float* %45, align 4, !tbaa !14
  %47 = fpext float %46 to double
  %48 = fmul double %25, %47
  %49 = fmul double %18, %48
  %50 = fadd double %44, %49
  %51 = fptrunc double %50 to float
  %52 = getelementptr inbounds [3 x float]* %9, i64 %28, i64 %indvars.iv11
  store float %51, float* %52, align 4, !tbaa !14
  br label %62

; <label>:53                                      ; preds = %29, %29
  %54 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv14, i64 %indvars.iv11
  %55 = bitcast float* %54 to i32*
  %56 = load i32* %55, align 4, !tbaa !14
  %57 = getelementptr inbounds [3 x float]* %17, i64 %28, i64 %indvars.iv11
  %58 = bitcast float* %57 to i32*
  store i32 %56, i32* %58, align 4, !tbaa !14
  %59 = load i32* %55, align 4, !tbaa !14
  %60 = getelementptr inbounds [3 x float]* %9, i64 %28, i64 %indvars.iv11
  %61 = bitcast float* %60 to i32*
  store i32 %59, i32* %61, align 4, !tbaa !14
  br label %62

; <label>:62                                      ; preds = %30, %53
  %indvars.iv.next12 = add nuw nsw i64 %indvars.iv11, 1
  %exitcond13 = icmp eq i64 %indvars.iv.next12, 3
  br i1 %exitcond13, label %63, label %29

; <label>:63                                      ; preds = %62
  %indvars.iv.next15 = add nsw i64 %indvars.iv14, 1
  %lftr.wideiv16 = trunc i64 %indvars.iv14 to i32
  %exitcond17 = icmp eq i32 %lftr.wideiv16, %20
  br i1 %exitcond17, label %._crit_edge7, label %21

._crit_edge7:                                     ; preds = %63, %._crit_edge18
  %.pre-phi = phi i64 [ %.pre21, %._crit_edge18 ], [ %19, %63 ]
  %64 = phi [3 x float]* [ %.pre, %._crit_edge18 ], [ %17, %63 ]
  %65 = sub nsw i64 0, %.pre-phi
  %66 = getelementptr inbounds [3 x float]* %64, i64 %65
  %67 = tail call i32 @constrain(%struct.__sFILE* %log, %struct.t_topology* %top, %struct.t_inputrec* %ir, i32 %step, %struct.t_mdatoms* %md, i32 %start, i32 %end, [3 x float]* %x, [3 x float]* %66, [3 x float]* null, [3 x float]* %box, float %lambda, float* %dvdlambda, %struct.t_nrnb* %nrnb, i32 1) #8
  %68 = load [3 x float]** @init_adir.xnew, align 8, !tbaa !31
  %69 = getelementptr inbounds [3 x float]* %68, i64 %65
  %70 = tail call i32 @constrain(%struct.__sFILE* %log, %struct.t_topology* %top, %struct.t_inputrec* %ir, i32 %step, %struct.t_mdatoms* %md, i32 %start, i32 %end, [3 x float]* %x, [3 x float]* %69, [3 x float]* null, [3 x float]* %box, float %lambda, float* %dvdlambda, %struct.t_nrnb* %nrnb, i32 1) #8
  br i1 %14, label %.preheader.lr.ph, label %._crit_edge19

._crit_edge19:                                    ; preds = %._crit_edge7
  %.pre20 = load [3 x float]** @init_adir.xnew, align 8, !tbaa !31
  br label %._crit_edge

.preheader.lr.ph:                                 ; preds = %._crit_edge7
  %71 = load [3 x float]** @init_adir.xnold, align 8, !tbaa !31
  %72 = load [3 x float]** @init_adir.xnew, align 8, !tbaa !31
  %73 = fmul float %13, %13
  %74 = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 5
  %75 = load float** %74, align 8, !tbaa !59
  %76 = add i32 %end, -1
  br label %.preheader

.preheader:                                       ; preds = %97, %.preheader.lr.ph
  %indvars.iv8 = phi i64 [ %.pre-phi, %.preheader.lr.ph ], [ %indvars.iv.next9, %97 ]
  %77 = getelementptr inbounds float* %75, i64 %indvars.iv8
  %78 = sub nsw i64 %indvars.iv8, %.pre-phi
  br label %79

; <label>:79                                      ; preds = %79, %.preheader
  %indvars.iv = phi i64 [ 0, %.preheader ], [ %indvars.iv.next, %79 ]
  %80 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv8, i64 %indvars.iv
  %81 = load float* %80, align 4, !tbaa !14
  %82 = fmul float %81, 2.000000e+00
  %83 = getelementptr inbounds [3 x float]* %71, i64 %indvars.iv8, i64 %indvars.iv
  %84 = load float* %83, align 4, !tbaa !14
  %85 = fsub float %82, %84
  %86 = getelementptr inbounds [3 x float]* %72, i64 %indvars.iv8, i64 %indvars.iv
  %87 = load float* %86, align 4, !tbaa !14
  %88 = fsub float %85, %87
  %89 = fsub float -0.000000e+00, %88
  %90 = fdiv float %89, %73
  %91 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv8, i64 %indvars.iv
  %92 = load float* %91, align 4, !tbaa !14
  %93 = load float* %77, align 4, !tbaa !14
  %94 = fmul float %92, %93
  %95 = fsub float %90, %94
  %96 = getelementptr inbounds [3 x float]* %72, i64 %78, i64 %indvars.iv
  store float %95, float* %96, align 4, !tbaa !14
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %exitcond = icmp eq i64 %indvars.iv.next, 3
  br i1 %exitcond, label %97, label %79

; <label>:97                                      ; preds = %79
  %98 = getelementptr inbounds [3 x float]* %acc_dir, i64 %indvars.iv8, i64 0
  store float 0.000000e+00, float* %98, align 4, !tbaa !14
  %99 = getelementptr inbounds [3 x float]* %acc_dir, i64 %indvars.iv8, i64 1
  store float 0.000000e+00, float* %99, align 4, !tbaa !14
  %100 = getelementptr inbounds [3 x float]* %acc_dir, i64 %indvars.iv8, i64 2
  store float 0.000000e+00, float* %100, align 4, !tbaa !14
  %indvars.iv.next9 = add nsw i64 %indvars.iv8, 1
  %lftr.wideiv = trunc i64 %indvars.iv8 to i32
  %exitcond10 = icmp eq i32 %lftr.wideiv, %76
  br i1 %exitcond10, label %._crit_edge, label %.preheader

._crit_edge:                                      ; preds = %97, %._crit_edge19
  %101 = phi [3 x float]* [ %.pre20, %._crit_edge19 ], [ %72, %97 ]
  %102 = tail call i32 @constrain(%struct.__sFILE* %log, %struct.t_topology* %top, %struct.t_inputrec* %ir, i32 %step, %struct.t_mdatoms* %md, i32 %start, i32 %end, [3 x float]* %x_old, [3 x float]* %101, [3 x float]* %acc_dir, [3 x float]* %box, float %lambda, float* %dvdlambda, %struct.t_nrnb* %nrnb, i32 0) #8
  ret void
}
