define float @run_aver(float %old, float %cur, i32 %step, i32 %nmem) #2 {
entry:
  %cmp = icmp slt i32 %nmem, 1
  %cond = select i1 %cmp, i32 1, i32 %nmem
  %sub = add nsw i32 %cond, -1
  %conv = sitofp i32 %sub to float
  %mul = fmul float %conv, %old
  %add = fadd float %mul, %cur
  %conv1 = sitofp i32 %cond to float
  %div = fdiv float %add, %conv1
  ret float %div
}
