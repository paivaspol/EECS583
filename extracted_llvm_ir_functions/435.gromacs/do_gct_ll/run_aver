define float @run_aver(float %old, float %cur, i32 %step, i32 %nmem) #5 {
  %1 = icmp slt i32 %nmem, 1
  %2 = select i1 %1, i32 1, i32 %nmem
  %3 = add nsw i32 %2, -1
  %4 = sitofp i32 %3 to float
  %5 = fmul float %4, %old
  %6 = fadd float %5, %cur
  %7 = sitofp i32 %2 to float
  %8 = fdiv float %6, %7
  ret float %8
}
