define i32 @count_constraints(%struct.t_topology* nocapture %top, %struct.t_commrec* %cr) #0 {
entry:
  %nc = alloca i32, align 4
  %nr = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 1, i32 5, i64 29, i32 0
  %0 = load i32* %nr, align 4, !tbaa !0
  %mul = mul nsw i32 %0, 3
  %div = sdiv i32 %mul, 2
  %nr4 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 1, i32 5, i64 27, i32 0
  %1 = load i32* %nr4, align 4, !tbaa !0
  %div5 = sdiv i32 %1, 3
  %add = add nsw i32 %div5, %div
  store i32 %add, i32* %nc, align 4, !tbaa !0
  %nnodes = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 1
  %2 = load i32* %nnodes, align 4, !tbaa !0
  %cmp = icmp sgt i32 %2, 1
  br i1 %cmp, label %if.then, label %lor.lhs.false

lor.lhs.false:                                    ; preds = %entry
  %nthreads = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 5
  %3 = load i32* %nthreads, align 4, !tbaa !0
  %cmp6 = icmp sgt i32 %3, 1
  br i1 %cmp6, label %if.then, label %if.end

if.then:                                          ; preds = %lor.lhs.false, %entry
  call void @gmx_sumi(i32 1, i32* %nc, %struct.t_commrec* %cr) #6
  %.pre = load i32* %nc, align 4, !tbaa !0
  br label %if.end

if.end:                                           ; preds = %if.then, %lor.lhs.false
  %4 = phi i32 [ %.pre, %if.then ], [ %add, %lor.lhs.false ]
  ret i32 %4
}
