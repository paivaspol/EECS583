define void @calc_ke_part_visc(i32 %bFirstStep, i32 %start, i32 %homenr, [3 x float]* nocapture %box, [3 x float]* nocapture %x, [3 x float]* nocapture %vold, [3 x float]* nocapture %v, [3 x float]* nocapture %vt, %struct.t_grpopts* nocapture %opts, %struct.t_mdatoms* nocapture %md, %struct.t_groups* nocapture %grps, %struct.t_nrnb* nocapture %nrnb, float %lambda, float* %dvdlambda) #0 {
entry:
  %v_corrt = alloca [3 x float], align 4
  %tcstat1 = getelementptr inbounds %struct.t_groups* %grps, i64 0, i32 1
  %0 = load %struct.t_grp_tcstat** %tcstat1, align 8, !tbaa !0
  %ngtc = getelementptr inbounds %struct.t_grpopts* %opts, i64 0, i32 0
  %1 = load i32* %ngtc, align 4, !tbaa !4
  %cmp225 = icmp sgt i32 %1, 0
  br i1 %cmp225, label %for.body, label %for.end

for.body:                                         ; preds = %entry, %for.body.for.body_crit_edge
  %2 = phi %struct.t_grp_tcstat* [ %.pre238, %for.body.for.body_crit_edge ], [ %0, %entry ]
  %indvars.iv235 = phi i64 [ %indvars.iv.next236, %for.body.for.body_crit_edge ], [ 0, %entry ]
  %arraydecay = getelementptr inbounds %struct.t_grp_tcstat* %2, i64 %indvars.iv235, i32 2, i64 0
  %3 = bitcast [3 x float]* %arraydecay to i8*
  call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 36, i32 4, i1 false) #3
  %indvars.iv.next236 = add i64 %indvars.iv235, 1
  %4 = load i32* %ngtc, align 4, !tbaa !4
  %5 = trunc i64 %indvars.iv.next236 to i32
  %cmp = icmp slt i32 %5, %4
  br i1 %cmp, label %for.body.for.body_crit_edge, label %for.end

for.body.for.body_crit_edge:                      ; preds = %for.body
  %.pre238 = load %struct.t_grp_tcstat** %tcstat1, align 8, !tbaa !0
  br label %for.body

for.end:                                          ; preds = %for.body, %entry
  %tobool = icmp eq i32 %bFirstStep, 0
  %add20.pre = add nsw i32 %homenr, %start
  br i1 %tobool, label %if.end, label %for.cond4.preheader

for.cond4.preheader:                              ; preds = %for.end
  %cmp5223 = icmp sgt i32 %homenr, 0
  br i1 %cmp5223, label %for.body6.lr.ph, label %for.end142

for.body6.lr.ph:                                  ; preds = %for.cond4.preheader
  %6 = sext i32 %start to i64
  br label %for.body6

for.body6:                                        ; preds = %for.body6.lr.ph, %for.body6
  %indvars.iv233 = phi i64 [ %6, %for.body6.lr.ph ], [ %indvars.iv.next234, %for.body6 ]
  %arraydecay9 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv233, i64 0
  %arraydecay12 = getelementptr inbounds [3 x float]* %vold, i64 %indvars.iv233, i64 0
  %7 = load float* %arraydecay9, align 4, !tbaa !3
  store float %7, float* %arraydecay12, align 4, !tbaa !3
  %arrayidx2.i213 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv233, i64 1
  %8 = load float* %arrayidx2.i213, align 4, !tbaa !3
  %arrayidx3.i214 = getelementptr inbounds [3 x float]* %vold, i64 %indvars.iv233, i64 1
  store float %8, float* %arrayidx3.i214, align 4, !tbaa !3
  %arrayidx4.i = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv233, i64 2
  %9 = load float* %arrayidx4.i, align 4, !tbaa !3
  %arrayidx5.i215 = getelementptr inbounds [3 x float]* %vold, i64 %indvars.iv233, i64 2
  store float %9, float* %arrayidx5.i215, align 4, !tbaa !3
  %indvars.iv.next234 = add i64 %indvars.iv233, 1
  %10 = trunc i64 %indvars.iv.next234 to i32
  %cmp5 = icmp slt i32 %10, %add20.pre
  br i1 %cmp5, label %for.body6, label %if.end

if.end:                                           ; preds = %for.end, %for.body6
  %arrayidx17 = getelementptr inbounds [3 x float]* %box, i64 2, i64 2
  %11 = load float* %arrayidx17, align 4, !tbaa !3
  %conv = fpext float %11 to double
  %div = fdiv double 0x401921FB54442D18, %conv
  %conv18 = fptrunc double %div to float
  %cmp21218 = icmp sgt i32 %homenr, 0
  br i1 %cmp21218, label %for.body23.lr.ph, label %for.end142

for.body23.lr.ph:                                 ; preds = %if.end
  %cTC = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 14
  %massT = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 4
  %vcos = getelementptr inbounds %struct.t_groups* %grps, i64 0, i32 3, i32 2
  %arrayidx63 = getelementptr inbounds [3 x float]* %v_corrt, i64 0, i64 0
  %arrayidx91 = getelementptr inbounds [3 x float]* %v_corrt, i64 0, i64 1
  %arrayidx103 = getelementptr inbounds [3 x float]* %v_corrt, i64 0, i64 2
  %cmp118 = icmp eq float* %dvdlambda, null
  %bPerturbed = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 9
  %massB = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 3
  %massA = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 2
  %12 = sext i32 %start to i64
  %.pre = load float** %massT, align 8, !tbaa !0
  br label %for.body23

for.body23:                                       ; preds = %for.body23.lr.ph, %for.inc140
  %13 = phi float* [ %.pre, %for.body23.lr.ph ], [ %22, %for.inc140 ]
  %indvars.iv231 = phi i64 [ %12, %for.body23.lr.ph ], [ %indvars.iv.next232, %for.inc140 ]
  %mvcos.0221 = phi double [ 0.000000e+00, %for.body23.lr.ph ], [ %add74, %for.inc140 ]
  %dvdl.0220 = phi float [ 0.000000e+00, %for.body23.lr.ph ], [ %dvdl.1, %for.inc140 ]
  %14 = load i16** %cTC, align 8, !tbaa !0
  %arrayidx25 = getelementptr inbounds i16* %14, i64 %indvars.iv231
  %15 = load i16* %arrayidx25, align 2, !tbaa !5
  %arrayidx28 = getelementptr inbounds float* %13, i64 %indvars.iv231
  %16 = load float* %arrayidx28, align 4, !tbaa !3
  br label %for.body34

for.body34:                                       ; preds = %for.body34, %for.body23
  %indvars.iv = phi i64 [ 0, %for.body23 ], [ %indvars.iv.next, %for.body34 ]
  %arrayidx38 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv231, i64 %indvars.iv
  %17 = load float* %arrayidx38, align 4, !tbaa !3
  %arrayidx42 = getelementptr inbounds [3 x float]* %vold, i64 %indvars.iv231, i64 %indvars.iv
  %18 = load float* %arrayidx42, align 4, !tbaa !3
  %add43 = fadd float %17, %18
  %conv46 = fmul float %add43, 5.000000e-01
  %arrayidx50 = getelementptr inbounds [3 x float]* %vt, i64 %indvars.iv231, i64 %indvars.iv
  store float %conv46, float* %arrayidx50, align 4, !tbaa !3
  %arrayidx52 = getelementptr inbounds [3 x float]* %v_corrt, i64 0, i64 %indvars.iv
  store float %conv46, float* %arrayidx52, align 4, !tbaa !3
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp eq i32 %lftr.wideiv, 3
  br i1 %exitcond, label %for.end55, label %for.body34

for.end55:                                        ; preds = %for.body34
  %conv30 = fmul float %16, 5.000000e-01
  %arrayidx58 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv231, i64 2
  %19 = load float* %arrayidx58, align 4, !tbaa !3
  %mul59 = fmul float %conv18, %19
  %conv60 = fpext float %mul59 to double
  %call = call double @cos(double %conv60) #4
  %conv61 = fptrunc double %call to float
  %20 = load float* %vcos, align 4, !tbaa !3
  %mul62 = fmul float %conv61, %20
  %21 = load float* %arrayidx63, align 4, !tbaa !3
  %sub = fsub float %21, %mul62
  store float %sub, float* %arrayidx63, align 4, !tbaa !3
  %mul64 = fmul float %conv61, 2.000000e+00
  %22 = load float** %massT, align 8, !tbaa !0
  %arrayidx67 = getelementptr inbounds float* %22, i64 %indvars.iv231
  %23 = load float* %arrayidx67, align 4, !tbaa !3
  %mul68 = fmul float %mul64, %23
  %arrayidx71 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv231, i64 0
  %24 = load float* %arrayidx71, align 4, !tbaa !3
  %mul72 = fmul float %mul68, %24
  %conv73 = fpext float %mul72 to double
  %mul80 = fmul float %conv30, %sub
  %idxprom85 = zext i16 %15 to i64
  %25 = load float* %arrayidx91, align 4, !tbaa !3
  %mul92 = fmul float %conv30, %25
  %26 = load float* %arrayidx103, align 4, !tbaa !3
  %mul104 = fmul float %conv30, %26
  br label %for.body78

for.body78:                                       ; preds = %for.body78.for.body78_crit_edge, %for.end55
  %27 = phi float [ %sub, %for.end55 ], [ %.pre237, %for.body78.for.body78_crit_edge ]
  %indvars.iv227 = phi i64 [ 0, %for.end55 ], [ %indvars.iv.next228, %for.body78.for.body78_crit_edge ]
  %mul83 = fmul float %mul80, %27
  %arrayidx89 = getelementptr inbounds %struct.t_grp_tcstat* %0, i64 %idxprom85, i32 2, i64 0, i64 %indvars.iv227
  %28 = load float* %arrayidx89, align 4, !tbaa !3
  %add90 = fadd float %28, %mul83
  store float %add90, float* %arrayidx89, align 4, !tbaa !3
  %mul95 = fmul float %mul92, %27
  %arrayidx101 = getelementptr inbounds %struct.t_grp_tcstat* %0, i64 %idxprom85, i32 2, i64 1, i64 %indvars.iv227
  %29 = load float* %arrayidx101, align 4, !tbaa !3
  %add102 = fadd float %29, %mul95
  store float %add102, float* %arrayidx101, align 4, !tbaa !3
  %mul107 = fmul float %mul104, %27
  %arrayidx113 = getelementptr inbounds %struct.t_grp_tcstat* %0, i64 %idxprom85, i32 2, i64 2, i64 %indvars.iv227
  %30 = load float* %arrayidx113, align 4, !tbaa !3
  %add114 = fadd float %30, %mul107
  store float %add114, float* %arrayidx113, align 4, !tbaa !3
  %indvars.iv.next228 = add i64 %indvars.iv227, 1
  %lftr.wideiv229 = trunc i64 %indvars.iv.next228 to i32
  %exitcond230 = icmp eq i32 %lftr.wideiv229, 3
  br i1 %exitcond230, label %for.end117, label %for.body78.for.body78_crit_edge

for.body78.for.body78_crit_edge:                  ; preds = %for.body78
  %arrayidx82.phi.trans.insert = getelementptr inbounds [3 x float]* %v_corrt, i64 0, i64 %indvars.iv.next228
  %.pre237 = load float* %arrayidx82.phi.trans.insert, align 4, !tbaa !3
  br label %for.body78

for.end117:                                       ; preds = %for.body78
  %add74 = fadd double %mvcos.0221, %conv73
  br i1 %cmp118, label %for.inc140, label %land.lhs.true

land.lhs.true:                                    ; preds = %for.end117
  %31 = load i32** %bPerturbed, align 8, !tbaa !0
  %arrayidx121 = getelementptr inbounds i32* %31, i64 %indvars.iv231
  %32 = load i32* %arrayidx121, align 4, !tbaa !4
  %tobool122 = icmp eq i32 %32, 0
  br i1 %tobool122, label %for.inc140, label %if.then123

if.then123:                                       ; preds = %land.lhs.true
  %33 = load float** %massB, align 8, !tbaa !0
  %arrayidx125 = getelementptr inbounds float* %33, i64 %indvars.iv231
  %34 = load float* %arrayidx125, align 4, !tbaa !3
  %35 = load float** %massA, align 8, !tbaa !0
  %arrayidx127 = getelementptr inbounds float* %35, i64 %indvars.iv231
  %36 = load float* %arrayidx127, align 4, !tbaa !3
  %sub128 = fsub float %34, %36
  %conv129 = fpext float %sub128 to double
  %mul130 = fmul double %conv129, 5.000000e-01
  %mul.i = fmul float %sub, %sub
  %mul4.i = fmul float %25, %25
  %add.i = fadd float %mul.i, %mul4.i
  %mul7.i = fmul float %26, %26
  %add8.i = fadd float %add.i, %mul7.i
  %conv134 = fpext float %add8.i to double
  %mul135 = fmul double %mul130, %conv134
  %conv136 = fpext float %dvdl.0220 to double
  %sub137 = fsub double %conv136, %mul135
  %conv138 = fptrunc double %sub137 to float
  br label %for.inc140

for.inc140:                                       ; preds = %land.lhs.true, %for.end117, %if.then123
  %dvdl.1 = phi float [ %conv138, %if.then123 ], [ %dvdl.0220, %land.lhs.true ], [ %dvdl.0220, %for.end117 ]
  %indvars.iv.next232 = add i64 %indvars.iv231, 1
  %37 = trunc i64 %indvars.iv.next232 to i32
  %cmp21 = icmp slt i32 %37, %add20.pre
  br i1 %cmp21, label %for.body23, label %for.cond19.for.end142_crit_edge

for.cond19.for.end142_crit_edge:                  ; preds = %for.inc140
  %phitmp = fptrunc double %add74 to float
  br label %for.end142

for.end142:                                       ; preds = %for.cond4.preheader, %for.cond19.for.end142_crit_edge, %if.end
  %mvcos.0.lcssa = phi float [ %phitmp, %for.cond19.for.end142_crit_edge ], [ 0.000000e+00, %if.end ], [ 0.000000e+00, %for.cond4.preheader ]
  %dvdl.0.lcssa = phi float [ %dvdl.1, %for.cond19.for.end142_crit_edge ], [ 0.000000e+00, %if.end ], [ 0.000000e+00, %for.cond4.preheader ]
  %cmp143 = icmp eq float* %dvdlambda, null
  br i1 %cmp143, label %if.end147, label %if.then145

if.then145:                                       ; preds = %for.end142
  %38 = load float* %dvdlambda, align 4, !tbaa !3
  %add146 = fadd float %dvdl.0.lcssa, %38
  store float %add146, float* %dvdlambda, align 4, !tbaa !3
  br label %if.end147

if.end147:                                        ; preds = %for.end142, %if.then145
  %mvcos149 = getelementptr inbounds %struct.t_groups* %grps, i64 0, i32 3, i32 1
  store float %mvcos.0.lcssa, float* %mvcos149, align 4, !tbaa !3
  %conv150 = sitofp i32 %homenr to double
  %arrayidx152 = getelementptr inbounds %struct.t_nrnb* %nrnb, i64 0, i32 0, i64 112
  %39 = load double* %arrayidx152, align 8, !tbaa !6
  %add153 = fadd double %conv150, %39
  store double %add153, double* %arrayidx152, align 8, !tbaa !6
  ret void
}
