define void @do_shakefirst(%struct.__sFILE* %log, i32 %bTYZ, float %lambda, float* %ener, %struct.t_parm* %parm, %struct.t_nsborder* nocapture readonly %nsb, %struct.t_mdatoms* %md, [3 x float]* %x, [3 x float]* %vold, [3 x float]* %buf, [3 x float]* %f, [3 x float]* nocapture %v, %struct.t_graph* %graph, %struct.t_commrec* %cr, %struct.t_nrnb* %nrnb, %struct.t_groups* %grps, %struct.t_forcerec* nocapture readnone %fr, %struct.t_topology* %top, %struct.t_edsamyn* %edyn, %struct.t_pull* %pulldata) #4 {
  %shake_vir = alloca [3 x [3 x float]], align 16
  %vcm = alloca [4 x double], align 16
  %vcm25 = bitcast [4 x double]* %vcm to i8*
  tail call void @llvm.dbg.value(metadata %struct.__sFILE* %log, i64 0, metadata !1329, metadata !1624), !dbg !2326
  tail call void @llvm.dbg.value(metadata i32 %bTYZ, i64 0, metadata !1330, metadata !1624), !dbg !2327
  tail call void @llvm.dbg.value(metadata float %lambda, i64 0, metadata !1331, metadata !1624), !dbg !2328
  tail call void @llvm.dbg.value(metadata float* %ener, i64 0, metadata !1332, metadata !1624), !dbg !2329
  tail call void @llvm.dbg.value(metadata %struct.t_parm* %parm, i64 0, metadata !1333, metadata !1624), !dbg !2330
  tail call void @llvm.dbg.value(metadata %struct.t_nsborder* %nsb, i64 0, metadata !1334, metadata !1624), !dbg !2331
  tail call void @llvm.dbg.value(metadata %struct.t_mdatoms* %md, i64 0, metadata !1335, metadata !1624), !dbg !2332
  tail call void @llvm.dbg.value(metadata [3 x float]* %x, i64 0, metadata !1336, metadata !1624), !dbg !2333
  tail call void @llvm.dbg.value(metadata [3 x float]* %vold, i64 0, metadata !1337, metadata !1624), !dbg !2334
  tail call void @llvm.dbg.value(metadata [3 x float]* %buf, i64 0, metadata !1338, metadata !1624), !dbg !2335
  tail call void @llvm.dbg.value(metadata [3 x float]* %f, i64 0, metadata !1339, metadata !1624), !dbg !2336
  tail call void @llvm.dbg.value(metadata [3 x float]* %v, i64 0, metadata !1340, metadata !1624), !dbg !2337
  tail call void @llvm.dbg.value(metadata %struct.t_graph* %graph, i64 0, metadata !1341, metadata !1624), !dbg !2338
  tail call void @llvm.dbg.value(metadata %struct.t_commrec* %cr, i64 0, metadata !1342, metadata !1624), !dbg !2339
  tail call void @llvm.dbg.value(metadata %struct.t_nrnb* %nrnb, i64 0, metadata !1343, metadata !1624), !dbg !2340
  tail call void @llvm.dbg.value(metadata %struct.t_groups* %grps, i64 0, metadata !1344, metadata !1624), !dbg !2341
  tail call void @llvm.dbg.value(metadata %struct.t_forcerec* %fr, i64 0, metadata !1345, metadata !1624), !dbg !2342
  tail call void @llvm.dbg.value(metadata %struct.t_topology* %top, i64 0, metadata !1346, metadata !1624), !dbg !2343
  tail call void @llvm.dbg.value(metadata %struct.t_edsamyn* %edyn, i64 0, metadata !1347, metadata !1624), !dbg !2344
  tail call void @llvm.dbg.value(metadata %struct.t_pull* %pulldata, i64 0, metadata !1348, metadata !1624), !dbg !2345
  %1 = bitcast [3 x [3 x float]]* %shake_vir to i8*, !dbg !2346
  call void @llvm.lifetime.start(i64 36, i8* %1) #5, !dbg !2346
  tail call void @llvm.dbg.declare(metadata [3 x [3 x float]]* %shake_vir, metadata !1355, metadata !1624), !dbg !2347
  tail call void @llvm.dbg.declare(metadata [4 x double]* %vcm, metadata !1358, metadata !1624), !dbg !2348
  %2 = getelementptr inbounds %struct.t_parm* %parm, i64 0, i32 0, i32 15, !dbg !2349
  %3 = load float* %2, align 4, !dbg !2349, !tbaa !2350
  tail call void @llvm.dbg.value(metadata float %3, i64 0, metadata !1362, metadata !1624), !dbg !2351
  %4 = tail call i32 @count_constraints(%struct.t_topology* %top, %struct.t_commrec* %cr) #10, !dbg !2352
  %5 = icmp eq i32 %4, 0, !dbg !2352
  br i1 %5, label %.loopexit, label %6, !dbg !2354

; <label>:6                                       ; preds = %0
  %7 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 0, !dbg !2355
  %8 = load i32* %7, align 4, !dbg !2355, !tbaa !1878
  %9 = sext i32 %8 to i64, !dbg !2355
  %10 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 8, i64 %9, !dbg !2355
  %11 = load i32* %10, align 4, !dbg !2355, !tbaa !1880
  tail call void @llvm.dbg.value(metadata i32 %11, i64 0, metadata !1351, metadata !1624), !dbg !2357
  %12 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %9, !dbg !2358
  %13 = load i32* %12, align 4, !dbg !2358, !tbaa !1880
  tail call void @llvm.dbg.value(metadata i32 %13, i64 0, metadata !1352, metadata !1624), !dbg !2359
  %14 = add nsw i32 %13, %11, !dbg !2360
  tail call void @llvm.dbg.value(metadata i32 %14, i64 0, metadata !1353, metadata !1624), !dbg !2361
  %15 = load %struct.__sFILE** @debug, align 8, !dbg !2362, !tbaa !1945
  %16 = icmp eq %struct.__sFILE* %15, null, !dbg !2362
  br i1 %16, label %19, label %17, !dbg !2364

; <label>:17                                      ; preds = %6
  %18 = tail call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %15, i8* getelementptr inbounds ([34 x i8]* @.str10, i64 0, i64 0), i32 %11, i32 %13, i32 %14) #10, !dbg !2365
  br label %19, !dbg !2365

; <label>:19                                      ; preds = %6, %17
  tail call void @llvm.dbg.value(metadata i32 -2, i64 0, metadata !1354, metadata !1624), !dbg !2366
  %20 = icmp ne %struct.__sFILE* %log, null, !dbg !2367
  br i1 %20, label %21, label %23, !dbg !2369

; <label>:21                                      ; preds = %19
  %22 = tail call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([50 x i8]* @.str11, i64 0, i64 0), i32 -2) #10, !dbg !2370
  br label %23, !dbg !2370

; <label>:23                                      ; preds = %21, %19
  %24 = getelementptr inbounds [3 x [3 x float]]* %shake_vir, i64 0, i64 0, !dbg !2371
  tail call void @llvm.dbg.value(metadata [3 x float]* %24, i64 0, metadata !1557, metadata !1624) #5, !dbg !2372
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1558, metadata !1624) #5, !dbg !2374
  call void @llvm.memset.p0i8.i64(i8* %1, i8 0, i64 36, i32 16, i1 false) #5, !dbg !2375
  %25 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 3, !dbg !2376
  %26 = load i32* %25, align 4, !dbg !2376, !tbaa !2016
  %27 = getelementptr inbounds float* %ener, i64 42, !dbg !2377
  call void @update(i32 %26, i32 %11, i32 %13, i32 -2, float %lambda, float* %27, %struct.t_parm* %parm, float 1.000000e+00, %struct.t_mdatoms* %md, [3 x float]* %x, %struct.t_graph* %graph, [3 x float]* null, [3 x float]* null, [3 x float]* %vold, [3 x float]* null, [3 x float]* %x, %struct.t_topology* %top, %struct.t_groups* %grps, [3 x float]* %24, %struct.t_commrec* %cr, %struct.t_nrnb* %nrnb, i32 %bTYZ, i32 0, %struct.t_edsamyn* %edyn, %struct.t_pull* %pulldata, i32 0) #10, !dbg !2378
  call void @llvm.dbg.value(metadata i32 %11, i64 0, metadata !1349, metadata !1624), !dbg !2379
  %28 = icmp sgt i32 %13, 0, !dbg !2380
  br i1 %28, label %.preheader2.lr.ph, label %._crit_edge11, !dbg !2383

.preheader2.lr.ph:                                ; preds = %23
  %29 = sext i32 %11 to i64
  %30 = sext i32 %14 to i64, !dbg !2383
  br label %.preheader2, !dbg !2383

.preheader2:                                      ; preds = %.preheader2.lr.ph, %43
  %indvars.iv30 = phi i64 [ %29, %.preheader2.lr.ph ], [ %indvars.iv.next31, %43 ]
  br label %31, !dbg !2384

; <label>:31                                      ; preds = %31, %.preheader2
  %indvars.iv26 = phi i64 [ 0, %.preheader2 ], [ %indvars.iv.next27, %31 ]
  %32 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv30, i64 %indvars.iv26, !dbg !2387
  %33 = bitcast float* %32 to i32*, !dbg !2387
  %34 = load i32* %33, align 4, !dbg !2387, !tbaa !1720
  %35 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv30, i64 %indvars.iv26, !dbg !2390
  %36 = bitcast float* %35 to i32*, !dbg !2391
  store i32 %34, i32* %36, align 4, !dbg !2391, !tbaa !1720
  %37 = load float* %32, align 4, !dbg !2392, !tbaa !1720
  %38 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv30, i64 %indvars.iv26, !dbg !2393
  %39 = load float* %38, align 4, !dbg !2393, !tbaa !1720
  %40 = fmul float %3, %39, !dbg !2394
  %41 = fsub float %37, %40, !dbg !2395
  %42 = getelementptr inbounds [3 x float]* %buf, i64 %indvars.iv30, i64 %indvars.iv26, !dbg !2396
  store float %41, float* %42, align 4, !dbg !2397, !tbaa !1720
  %indvars.iv.next27 = add nuw nsw i64 %indvars.iv26, 1, !dbg !2384
  %exitcond28 = icmp eq i64 %indvars.iv.next27, 3, !dbg !2384
  br i1 %exitcond28, label %43, label %31, !dbg !2384

; <label>:43                                      ; preds = %31
  %indvars.iv.next31 = add nsw i64 %indvars.iv30, 1, !dbg !2383
  %44 = icmp slt i64 %indvars.iv.next31, %30, !dbg !2380
  br i1 %44, label %.preheader2, label %._crit_edge11, !dbg !2383

._crit_edge11:                                    ; preds = %43, %23
  call void @llvm.dbg.value(metadata i32 -1, i64 0, metadata !1354, metadata !1624), !dbg !2366
  br i1 %20, label %45, label %47, !dbg !2398

; <label>:45                                      ; preds = %._crit_edge11
  %46 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([50 x i8]* @.str12, i64 0, i64 0), i32 -1) #10, !dbg !2399
  br label %47, !dbg !2399

; <label>:47                                      ; preds = %45, %._crit_edge11
  call void @llvm.dbg.value(metadata [3 x float]* %24, i64 0, metadata !1557, metadata !1624) #5, !dbg !2401
  call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1558, metadata !1624) #5, !dbg !2403
  call void @llvm.memset.p0i8.i64(i8* %1, i8 0, i64 36, i32 16, i1 false) #5, !dbg !2404
  %48 = load i32* %25, align 4, !dbg !2405, !tbaa !2016
  call void @update(i32 %48, i32 %11, i32 %13, i32 -1, float %lambda, float* %27, %struct.t_parm* %parm, float 1.000000e+00, %struct.t_mdatoms* %md, [3 x float]* %f, %struct.t_graph* %graph, [3 x float]* null, [3 x float]* null, [3 x float]* %vold, [3 x float]* null, [3 x float]* %buf, %struct.t_topology* %top, %struct.t_groups* %grps, [3 x float]* %24, %struct.t_commrec* %cr, %struct.t_nrnb* %nrnb, i32 %bTYZ, i32 0, %struct.t_edsamyn* %edyn, %struct.t_pull* %pulldata, i32 0) #10, !dbg !2406
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1350, metadata !1624), !dbg !2407
  call void @llvm.memset.p0i8.i64(i8* %vcm25, i8 0, i64 32, i32 16, i1 false), !dbg !2408
  %49 = fdiv float 1.000000e+00, %3, !dbg !2411
  call void @llvm.dbg.value(metadata float %49, i64 0, metadata !1363, metadata !1624), !dbg !2412
  call void @llvm.dbg.value(metadata i32 %11, i64 0, metadata !1349, metadata !1624), !dbg !2379
  br i1 %28, label %.lr.ph, label %._crit_edge, !dbg !2413

.lr.ph:                                           ; preds = %47
  %50 = getelementptr inbounds %struct.t_mdatoms* %md, i64 0, i32 2, !dbg !2415
  %51 = load float** %50, align 8, !dbg !2415, !tbaa !2418
  %52 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 3, !dbg !2419
  %53 = sext i32 %11 to i64
  %54 = sext i32 %14 to i64, !dbg !2413
  br label %55, !dbg !2413

; <label>:55                                      ; preds = %.lr.ph, %72
  %indvars.iv20 = phi i64 [ %53, %.lr.ph ], [ %indvars.iv.next21, %72 ]
  %56 = getelementptr inbounds float* %51, i64 %indvars.iv20, !dbg !2420
  %57 = load float* %56, align 4, !dbg !2420, !tbaa !1720
  %58 = fpext float %57 to double, !dbg !2420
  call void @llvm.dbg.value(metadata double %58, i64 0, metadata !1356, metadata !1624), !dbg !2421
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1350, metadata !1624), !dbg !2407
  br label %59, !dbg !2422

; <label>:59                                      ; preds = %59, %55
  %indvars.iv17 = phi i64 [ 0, %55 ], [ %indvars.iv.next18, %59 ]
  %60 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv20, i64 %indvars.iv17, !dbg !2424
  %61 = load float* %60, align 4, !dbg !2424, !tbaa !1720
  %62 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv20, i64 %indvars.iv17, !dbg !2427
  %63 = load float* %62, align 4, !dbg !2427, !tbaa !1720
  %64 = fsub float %61, %63, !dbg !2428
  %65 = fmul float %49, %64, !dbg !2429
  %66 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv20, i64 %indvars.iv17, !dbg !2430
  store float %65, float* %66, align 4, !dbg !2431, !tbaa !1720
  %67 = fpext float %65 to double, !dbg !2432
  %68 = fmul double %58, %67, !dbg !2433
  %69 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 %indvars.iv17, !dbg !2434
  %70 = load double* %69, align 8, !dbg !2435, !tbaa !1735
  %71 = fadd double %70, %68, !dbg !2435
  store double %71, double* %69, align 8, !dbg !2435, !tbaa !1735
  %indvars.iv.next18 = add nuw nsw i64 %indvars.iv17, 1, !dbg !2422
  %exitcond19 = icmp eq i64 %indvars.iv.next18, 3, !dbg !2422
  br i1 %exitcond19, label %72, label %59, !dbg !2422

; <label>:72                                      ; preds = %59
  %73 = load double* %52, align 8, !dbg !2436, !tbaa !1735
  %74 = fadd double %58, %73, !dbg !2436
  store double %74, double* %52, align 8, !dbg !2436, !tbaa !1735
  %indvars.iv.next21 = add nsw i64 %indvars.iv20, 1, !dbg !2413
  %75 = icmp slt i64 %indvars.iv.next21, %54, !dbg !2437
  br i1 %75, label %55, label %._crit_edge, !dbg !2413

._crit_edge:                                      ; preds = %72, %47
  %76 = phi double [ 0.000000e+00, %47 ], [ %74, %72 ]
  %77 = load %struct.__sFILE** @debug, align 8, !dbg !2438, !tbaa !1945
  %78 = icmp eq %struct.__sFILE* %77, null, !dbg !2438
  br i1 %78, label %87, label %79, !dbg !2440

; <label>:79                                      ; preds = %._crit_edge
  %80 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 0, !dbg !2441
  %81 = load double* %80, align 16, !dbg !2441, !tbaa !1735
  %82 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 1, !dbg !2442
  %83 = load double* %82, align 8, !dbg !2442, !tbaa !1735
  %84 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 2, !dbg !2443
  %85 = load double* %84, align 16, !dbg !2443, !tbaa !1735
  %86 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %77, i8* getelementptr inbounds ([47 x i8]* @.str13, i64 0, i64 0), double %81, double %83, double %85, double %76) #10, !dbg !2444
  br label %87, !dbg !2444

; <label>:87                                      ; preds = %._crit_edge, %79
  %88 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 1, !dbg !2445
  %89 = load i32* %88, align 4, !dbg !2445, !tbaa !1936
  %90 = icmp sgt i32 %89, 1, !dbg !2445
  br i1 %90, label %95, label %91, !dbg !2445

; <label>:91                                      ; preds = %87
  %92 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 5, !dbg !2445
  %93 = load i32* %92, align 4, !dbg !2445, !tbaa !1938
  %94 = icmp sgt i32 %93, 1, !dbg !2445
  br i1 %94, label %95, label %97, !dbg !2447

; <label>:95                                      ; preds = %91, %87
  %96 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 0, !dbg !2448
  call void @gmx_sumd(i32 4, double* %96, %struct.t_commrec* %cr) #10, !dbg !2449
  br label %97, !dbg !2449

; <label>:97                                      ; preds = %95, %91
  %98 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 3, !dbg !2450
  %99 = load double* %98, align 8, !dbg !2450, !tbaa !1735
  call void @llvm.dbg.value(metadata double %99, i64 0, metadata !1357, metadata !1624), !dbg !2451
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1350, metadata !1624), !dbg !2407
  br label %100, !dbg !2452

; <label>:100                                     ; preds = %100, %97
  %indvars.iv14 = phi i64 [ 0, %97 ], [ %indvars.iv.next15, %100 ]
  %101 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 %indvars.iv14, !dbg !2454
  %102 = load double* %101, align 8, !dbg !2456, !tbaa !1735
  %103 = fdiv double %102, %99, !dbg !2456
  store double %103, double* %101, align 8, !dbg !2456, !tbaa !1735
  %indvars.iv.next15 = add nuw nsw i64 %indvars.iv14, 1, !dbg !2452
  %exitcond16 = icmp eq i64 %indvars.iv.next15, 3, !dbg !2452
  br i1 %exitcond16, label %104, label %100, !dbg !2452

; <label>:104                                     ; preds = %100
  %105 = load %struct.__sFILE** @debug, align 8, !dbg !2457, !tbaa !1945
  %106 = icmp eq %struct.__sFILE* %105, null, !dbg !2457
  br i1 %106, label %.preheader1, label %107, !dbg !2459

; <label>:107                                     ; preds = %104
  %108 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 0, !dbg !2460
  %109 = load double* %108, align 16, !dbg !2460, !tbaa !1735
  %110 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 1, !dbg !2461
  %111 = load double* %110, align 8, !dbg !2461, !tbaa !1735
  %112 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 2, !dbg !2462
  %113 = load double* %112, align 16, !dbg !2462, !tbaa !1735
  %114 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %105, i8* getelementptr inbounds ([47 x i8]* @.str13, i64 0, i64 0), double %109, double %111, double %113, double %99) #10, !dbg !2463
  br label %.preheader1, !dbg !2463

.preheader1:                                      ; preds = %104, %107
  br i1 %28, label %.preheader.lr.ph, label %.loopexit, !dbg !2464

.preheader.lr.ph:                                 ; preds = %.preheader1
  %115 = sext i32 %11 to i64
  %116 = sext i32 %14 to i64, !dbg !2464
  br label %.preheader, !dbg !2464

.preheader:                                       ; preds = %.preheader.lr.ph, %125
  %indvars.iv12 = phi i64 [ %115, %.preheader.lr.ph ], [ %indvars.iv.next13, %125 ]
  br label %117, !dbg !2466

; <label>:117                                     ; preds = %117, %.preheader
  %indvars.iv = phi i64 [ 0, %.preheader ], [ %indvars.iv.next, %117 ]
  %118 = getelementptr inbounds [4 x double]* %vcm, i64 0, i64 %indvars.iv, !dbg !2470
  %119 = load double* %118, align 8, !dbg !2470, !tbaa !1735
  %120 = getelementptr inbounds [3 x float]* %v, i64 %indvars.iv12, i64 %indvars.iv, !dbg !2472
  %121 = load float* %120, align 4, !dbg !2473, !tbaa !1720
  %122 = fpext float %121 to double, !dbg !2473
  %123 = fsub double %122, %119, !dbg !2473
  %124 = fptrunc double %123 to float, !dbg !2473
  store float %124, float* %120, align 4, !dbg !2473, !tbaa !1720
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1, !dbg !2466
  %exitcond = icmp eq i64 %indvars.iv.next, 3, !dbg !2466
  br i1 %exitcond, label %125, label %117, !dbg !2466

; <label>:125                                     ; preds = %117
  %indvars.iv.next13 = add nsw i64 %indvars.iv12, 1, !dbg !2464
  %126 = icmp slt i64 %indvars.iv.next13, %116, !dbg !2474
  br i1 %126, label %.preheader, label %.loopexit, !dbg !2464

.loopexit:                                        ; preds = %125, %.preheader1, %0
  call void @llvm.lifetime.end(i64 36, i8* %1) #5, !dbg !2475
  ret void, !dbg !2475
}
