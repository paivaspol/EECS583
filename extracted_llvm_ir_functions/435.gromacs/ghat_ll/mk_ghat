define void @mk_ghat(%struct.__sFILE* nocapture readnone %fp, i32 %nx, i32 %ny, i32 %nz, float*** nocapture readonly %ghat, float* nocapture readonly %box, float %r1, float %rc, i32 %bSym, i32 %bOld) #4 {
  %k = alloca [3 x float], align 4
  %lll = alloca [3 x float], align 4
  %1 = getelementptr inbounds [3 x float]* %lll, i64 0, i64 0
  %2 = load float* %box, align 4, !tbaa !2
  %3 = fpext float %2 to double
  %4 = fdiv double 0x401921FB54442D18, %3
  %5 = fptrunc double %4 to float
  store float %5, float* %1, align 4, !tbaa !2
  %6 = getelementptr inbounds float* %box, i64 1
  %7 = load float* %6, align 4, !tbaa !2
  %8 = fpext float %7 to double
  %9 = fdiv double 0x401921FB54442D18, %8
  %10 = fptrunc double %9 to float
  %11 = getelementptr inbounds [3 x float]* %lll, i64 0, i64 1
  store float %10, float* %11, align 4, !tbaa !2
  %12 = getelementptr inbounds float* %box, i64 2
  %13 = load float* %12, align 4, !tbaa !2
  %14 = fpext float %13 to double
  %15 = fdiv double 0x401921FB54442D18, %14
  %16 = fptrunc double %15 to float
  %17 = getelementptr inbounds [3 x float]* %lll, i64 0, i64 2
  store float %16, float* %17, align 4, !tbaa !2
  %18 = icmp ne i32 %bSym, 0
  br i1 %18, label %19, label %26

; <label>:19                                      ; preds = %0
  %20 = sdiv i32 %nx, 2
  %21 = add nsw i32 %20, 1
  %22 = sdiv i32 %ny, 2
  %23 = add nsw i32 %22, 1
  %24 = sdiv i32 %nz, 2
  %25 = add nsw i32 %24, 1
  br label %26

; <label>:26                                      ; preds = %0, %19
  %ixmax.0 = phi i32 [ %21, %19 ], [ %nx, %0 ]
  %iymax.0 = phi i32 [ %23, %19 ], [ %ny, %0 ]
  %izmax.0 = phi i32 [ %25, %19 ], [ %nz, %0 ]
  %27 = icmp sgt i32 %ixmax.0, 0
  br i1 %27, label %.preheader4.lr.ph, label %._crit_edge10

.preheader4.lr.ph:                                ; preds = %26
  %28 = icmp sgt i32 %iymax.0, 0
  %29 = icmp sgt i32 %izmax.0, 0
  %30 = getelementptr inbounds [3 x float]* %k, i64 0, i64 0
  %31 = getelementptr inbounds [3 x float]* %k, i64 0, i64 1
  %32 = getelementptr inbounds [3 x float]* %k, i64 0, i64 2
  %33 = icmp eq i32 %bOld, 0
  %34 = add i32 %izmax.0, -1
  %35 = add i32 %iymax.0, -1
  %36 = add i32 %ixmax.0, -1
  br label %.preheader4

.preheader4:                                      ; preds = %._crit_edge7, %.preheader4.lr.ph
  %indvars.iv15 = phi i64 [ 0, %.preheader4.lr.ph ], [ %indvars.iv.next16, %._crit_edge7 ]
  br i1 %28, label %.preheader.lr.ph, label %._crit_edge7

.preheader.lr.ph:                                 ; preds = %.preheader4
  %37 = getelementptr inbounds float*** %ghat, i64 %indvars.iv15
  br label %.preheader

.preheader:                                       ; preds = %._crit_edge, %.preheader.lr.ph
  %indvars.iv11 = phi i64 [ 0, %.preheader.lr.ph ], [ %indvars.iv.next12, %._crit_edge ]
  %38 = trunc i64 %indvars.iv11 to i32
  br i1 %29, label %.lr.ph, label %._crit_edge

.lr.ph:                                           ; preds = %.preheader
  %39 = trunc i64 %indvars.iv15 to i32
  %40 = or i64 %indvars.iv11, %indvars.iv15
  br label %41

; <label>:41                                      ; preds = %68, %.lr.ph
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %68 ]
  %42 = trunc i64 %indvars.iv to i32
  call fastcc void @calc_k(float* %1, i32 %39, i32 %38, i32 %42, i32 %nx, i32 %ny, i32 %nz, float* %30) #10
  %43 = load float* %30, align 4, !tbaa !2
  %44 = fmul float %43, %43
  %45 = load float* %31, align 4, !tbaa !2
  %46 = fmul float %45, %45
  %47 = fadd float %44, %46
  %48 = load float* %32, align 4, !tbaa !2
  %49 = fmul float %48, %48
  %50 = fadd float %47, %49
  %51 = or i64 %40, %indvars.iv
  %52 = trunc i64 %51 to i32
  %53 = icmp eq i32 %52, 0
  br i1 %53, label %68, label %54

; <label>:54                                      ; preds = %41
  %55 = fpext float %50 to double
  %sqrtf = tail call float @sqrtf(float %50) #5
  br i1 %33, label %62, label %56

; <label>:56                                      ; preds = %54
  %57 = tail call float @gk(float %sqrtf, float %rc, float %r1) #9
  %58 = fpext float %57 to double
  %59 = fmul double %55, 5.727650e-04
  %60 = fdiv double %58, %59
  %61 = fptrunc double %60 to float
  br label %68

; <label>:62                                      ; preds = %54
  %63 = tail call float @gknew(float %sqrtf, float %rc, float %r1) #9
  %64 = fpext float %63 to double
  %65 = fmul double %55, 5.727650e-04
  %66 = fdiv double %64, %65
  %67 = fptrunc double %66 to float
  br label %68

; <label>:68                                      ; preds = %41, %56, %62
  %ggg.0 = phi float [ %61, %56 ], [ %67, %62 ], [ 0.000000e+00, %41 ]
  %69 = load float*** %37, align 8, !tbaa !8
  %70 = getelementptr inbounds float** %69, i64 %indvars.iv11
  %71 = load float** %70, align 8, !tbaa !8
  %72 = getelementptr inbounds float* %71, i64 %indvars.iv
  store float %ggg.0, float* %72, align 4, !tbaa !2
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %exitcond = icmp eq i32 %42, %34
  br i1 %exitcond, label %._crit_edge, label %41

._crit_edge:                                      ; preds = %68, %.preheader
  %indvars.iv.next12 = add nuw nsw i64 %indvars.iv11, 1
  %exitcond14 = icmp eq i32 %38, %35
  br i1 %exitcond14, label %._crit_edge7, label %.preheader

._crit_edge7:                                     ; preds = %._crit_edge, %.preheader4
  %indvars.iv.next16 = add nuw nsw i64 %indvars.iv15, 1
  %lftr.wideiv17 = trunc i64 %indvars.iv15 to i32
  %exitcond18 = icmp eq i32 %lftr.wideiv17, %36
  br i1 %exitcond18, label %._crit_edge10, label %.preheader4

._crit_edge10:                                    ; preds = %._crit_edge7, %26
  br i1 %18, label %73, label %74

; <label>:73                                      ; preds = %._crit_edge10
  tail call void @symmetrize_ghat(i32 %nx, i32 %ny, i32 %nz, float*** %ghat) #10
  br label %74

; <label>:74                                      ; preds = %73, %._crit_edge10
  ret void
}
