define void @rm_pbc(%struct.t_idef* %idef, i32 %natoms, [3 x float]* %box, [3 x float]* %x, [3 x float]* %x_s) #0 {
entry:
  %sv = alloca [27 x [3 x float]], align 16
  %box_size = alloca [3 x float], align 4
  call void @llvm.dbg.value(metadata !{%struct.t_idef* %idef}, i64 0, metadata !157), !dbg !210
  call void @llvm.dbg.value(metadata !{i32 %natoms}, i64 0, metadata !158), !dbg !210
  call void @llvm.dbg.value(metadata !{[3 x float]* %box}, i64 0, metadata !159), !dbg !210
  call void @llvm.dbg.value(metadata !{[3 x float]* %x}, i64 0, metadata !160), !dbg !210
  call void @llvm.dbg.value(metadata !{[3 x float]* %x_s}, i64 0, metadata !161), !dbg !210
  %0 = bitcast [27 x [3 x float]]* %sv to i8*, !dbg !211
  call void @llvm.lifetime.start(i64 324, i8* %0) #2, !dbg !211
  call void @llvm.dbg.declare(metadata !{[27 x [3 x float]]* %sv}, metadata !162), !dbg !211
  call void @llvm.dbg.declare(metadata !{[3 x float]* %box_size}, metadata !166), !dbg !211
  %cmp = icmp ne [3 x float]* %x, %x_s, !dbg !212
  %arrayidx1 = getelementptr inbounds [3 x float]* %box, i64 0, i64 0, !dbg !213
  %1 = load float* %arrayidx1, align 4, !dbg !213, !tbaa !214
  %fabsf = call float @fabsf(float %1) #4, !dbg !213
  %2 = fpext float %fabsf to double, !dbg !213
  %cmp3 = fcmp ogt double %2, 1.200000e-38, !dbg !213
  br i1 %cmp3, label %if.then, label %if.end40, !dbg !213

if.then:                                          ; preds = %entry
  %ntypes = getelementptr inbounds %struct.t_idef* %idef, i64 0, i32 0, !dbg !217
  %3 = load i32* %ntypes, align 4, !dbg !217, !tbaa !219
  %cmp5 = icmp eq i32 %3, -1, !dbg !217
  br i1 %cmp5, label %if.else, label %for.cond.preheader, !dbg !217

for.cond.preheader:                               ; preds = %if.then
  %4 = load i32* @rm_pbc.ngraph, align 4, !dbg !220, !tbaa !219
  %cmp883 = icmp sgt i32 %4, 0, !dbg !220
  br i1 %cmp883, label %for.body.lr.ph, label %if.then17, !dbg !220

for.body.lr.ph:                                   ; preds = %for.cond.preheader
  %5 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !dbg !223, !tbaa !224
  br label %for.body, !dbg !220

for.body:                                         ; preds = %for.body.lr.ph, %for.body
  %indvars.iv87 = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next88, %for.body ]
  %n.084 = phi i32 [ -1, %for.body.lr.ph ], [ %i.0.n.0, %for.body ]
  %natoms11 = getelementptr inbounds %struct.multi_graph* %5, i64 %indvars.iv87, i32 0, !dbg !223
  %6 = load i32* %natoms11, align 4, !dbg !223, !tbaa !219
  %cmp12 = icmp eq i32 %6, %natoms, !dbg !223
  call void @llvm.dbg.value(metadata !225, i64 0, metadata !167), !dbg !226
  %7 = trunc i64 %indvars.iv87 to i32, !dbg !223
  %i.0.n.0 = select i1 %cmp12, i32 %7, i32 %n.084, !dbg !223
  %indvars.iv.next88 = add i64 %indvars.iv87, 1, !dbg !220
  %8 = trunc i64 %indvars.iv.next88 to i32, !dbg !220
  %cmp8 = icmp slt i32 %8, %4, !dbg !220
  br i1 %cmp8, label %for.body, label %for.end, !dbg !220

for.end:                                          ; preds = %for.body
  %cmp15 = icmp eq i32 %i.0.n.0, -1, !dbg !227
  br i1 %cmp15, label %if.then17, label %if.end40.thread, !dbg !227

if.then17:                                        ; preds = %for.cond.preheader, %for.end
  call void @llvm.dbg.value(metadata !{i32 %4}, i64 0, metadata !167), !dbg !228
  %inc18 = add nsw i32 %4, 1, !dbg !230
  store i32 %inc18, i32* @rm_pbc.ngraph, align 4, !dbg !230, !tbaa !219
  %9 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !dbg !231, !tbaa !224
  %10 = bitcast %struct.multi_graph* %9 to i8*, !dbg !231
  %mul = shl i32 %inc18, 4, !dbg !231
  %call21 = call i8* @save_realloc(i8* getelementptr inbounds ([7 x i8]* @.str, i64 0, i64 0), i8* getelementptr inbounds ([53 x i8]* @.str1, i64 0, i64 0), i32 68, i8* %10, i32 %mul) #5, !dbg !231
  %11 = bitcast i8* %call21 to %struct.multi_graph*, !dbg !231
  store %struct.multi_graph* %11, %struct.multi_graph** @rm_pbc.mgraph, align 8, !dbg !231, !tbaa !224
  %idxprom22 = sext i32 %4 to i64, !dbg !232
  %natoms24 = getelementptr inbounds %struct.multi_graph* %11, i64 %idxprom22, i32 0, !dbg !232
  store i32 %natoms, i32* %natoms24, align 4, !dbg !232, !tbaa !219
  %call25 = call %struct.t_graph* @mk_graph(%struct.t_idef* %idef, i32 %natoms, i32 0, i32 0) #5, !dbg !233
  %12 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !dbg !233, !tbaa !224
  %gr = getelementptr inbounds %struct.multi_graph* %12, i64 %idxprom22, i32 1, !dbg !233
  store %struct.t_graph* %call25, %struct.t_graph** %gr, align 8, !dbg !233, !tbaa !224
  br label %if.end40.thread, !dbg !234

if.end40.thread:                                  ; preds = %for.end, %if.then17
  %n.2 = phi i32 [ %4, %if.then17 ], [ %i.0.n.0, %for.end ]
  %13 = load %struct._IO_FILE** @stdout, align 8, !dbg !235, !tbaa !224
  %idxprom29 = sext i32 %n.2 to i64, !dbg !235
  %14 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !dbg !235, !tbaa !224
  %gr31 = getelementptr inbounds %struct.multi_graph* %14, i64 %idxprom29, i32 1, !dbg !235
  %15 = load %struct.t_graph** %gr31, align 8, !dbg !235, !tbaa !224
  call void @mk_mshift(%struct._IO_FILE* %13, %struct.t_graph* %15, [3 x float]* %box, [3 x float]* %x) #5, !dbg !235
  %arraydecay = getelementptr inbounds [3 x float]* %box_size, i64 0, i64 0, !dbg !236
  %arraydecay32 = getelementptr inbounds [27 x [3 x float]]* %sv, i64 0, i64 0, !dbg !236
  call void @calc_shifts([3 x float]* %box, float* %arraydecay, [3 x float]* %arraydecay32) #5, !dbg !236
  %16 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !dbg !237, !tbaa !224
  %gr35 = getelementptr inbounds %struct.multi_graph* %16, i64 %idxprom29, i32 1, !dbg !237
  %17 = load %struct.t_graph** %gr35, align 8, !dbg !237, !tbaa !224
  call void @shift_x(%struct.t_graph* %17, [3 x float]* %box, [3 x float]* %x, [3 x float]* %x_s) #5, !dbg !237
  call void @llvm.dbg.value(metadata !2, i64 0, metadata !169), !dbg !238
  br label %if.end56, !dbg !239

if.else:                                          ; preds = %if.then
  %.b = load i1* @rm_pbc.bFirst, align 1
  br i1 %.b, label %if.end40, label %if.then36, !dbg !240

if.then36:                                        ; preds = %if.else
  %18 = load %struct._IO_FILE** @stderr, align 8, !dbg !241, !tbaa !224
  %19 = call i64 @fwrite(i8* getelementptr inbounds ([133 x i8]* @.str2, i64 0, i64 0), i64 132, i64 1, %struct._IO_FILE* %18), !dbg !241
  store i1 true, i1* @rm_pbc.bFirst, align 1
  br label %if.end40, !dbg !243

if.end40:                                         ; preds = %if.else, %if.then36, %entry
  %cmp4481 = icmp sgt i32 %natoms, 0, !dbg !244
  %or.cond = and i1 %cmp, %cmp4481, !dbg !239
  br i1 %or.cond, label %for.body46, label %if.end56, !dbg !239

for.body46:                                       ; preds = %if.end40, %for.body46
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body46 ], [ 0, %if.end40 ]
  %arraydecay49 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0, !dbg !246
  %arraydecay52 = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 0, !dbg !246
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay49}, i64 0, metadata !247), !dbg !248
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay52}, i64 0, metadata !249), !dbg !248
  %20 = load float* %arraydecay49, align 4, !dbg !250, !tbaa !214
  store float %20, float* %arraydecay52, align 4, !dbg !250, !tbaa !214
  %arrayidx2.i = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 1, !dbg !252
  %21 = load float* %arrayidx2.i, align 4, !dbg !252, !tbaa !214
  %arrayidx3.i = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 1, !dbg !252
  store float %21, float* %arrayidx3.i, align 4, !dbg !252, !tbaa !214
  %arrayidx4.i = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 2, !dbg !253
  %22 = load float* %arrayidx4.i, align 4, !dbg !253, !tbaa !214
  %arrayidx5.i = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 2, !dbg !253
  store float %22, float* %arrayidx5.i, align 4, !dbg !253, !tbaa !214
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !244
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !244
  %exitcond = icmp eq i32 %lftr.wideiv, %natoms, !dbg !244
  br i1 %exitcond, label %if.end56, label %for.body46, !dbg !244

if.end56:                                         ; preds = %if.end40, %for.body46, %if.end40.thread
  call void @llvm.lifetime.end(i64 324, i8* %0) #2, !dbg !254
  ret void, !dbg !254
}
