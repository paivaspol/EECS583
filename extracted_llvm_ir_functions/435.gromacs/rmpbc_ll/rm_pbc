define void @rm_pbc(%struct.t_idef* %idef, i32 %natoms, [3 x float]* %box, [3 x float]* %x, [3 x float]* %x_s) #4 {
  %sv = alloca [27 x [3 x float]], align 16
  %box_size = alloca [3 x float], align 4
  %1 = bitcast [27 x [3 x float]]* %sv to i8*
  call void @llvm.lifetime.start(i64 324, i8* %1) #5
  %2 = icmp ne [3 x float]* %x, %x_s
  %3 = getelementptr inbounds [3 x float]* %box, i64 0, i64 0
  %4 = load float* %3, align 4, !tbaa !14
  %fabsf = tail call float @fabsf(float %4) #8
  %5 = fpext float %fabsf to double
  %6 = fcmp ogt double %5, 1.200000e-38
  br i1 %6, label %7, label %46

; <label>:7                                       ; preds = %0
  %8 = getelementptr inbounds %struct.t_idef* %idef, i64 0, i32 0
  %9 = load i32* %8, align 4, !tbaa !18
  %10 = icmp eq i32 %9, -1
  br i1 %10, label %42, label %.preheader1

.preheader1:                                      ; preds = %7
  %11 = load i32* @rm_pbc.ngraph, align 4, !tbaa !20
  %12 = icmp sgt i32 %11, 0
  br i1 %12, label %.lr.ph5, label %._crit_edge.thread

.lr.ph5:                                          ; preds = %.preheader1
  %13 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !21
  %14 = sext i32 %11 to i64
  br label %15

; <label>:15                                      ; preds = %.lr.ph5, %15
  %indvars.iv7 = phi i64 [ 0, %.lr.ph5 ], [ %indvars.iv.next8, %15 ]
  %n.03 = phi i32 [ -1, %.lr.ph5 ], [ %i.0.n.0, %15 ]
  %16 = getelementptr inbounds %struct.multi_graph* %13, i64 %indvars.iv7, i32 0
  %17 = load i32* %16, align 4, !tbaa !22
  %18 = icmp eq i32 %17, %natoms
  %19 = trunc i64 %indvars.iv7 to i32
  %i.0.n.0 = select i1 %18, i32 %19, i32 %n.03
  %indvars.iv.next8 = add nuw nsw i64 %indvars.iv7, 1
  %20 = icmp slt i64 %indvars.iv.next8, %14
  br i1 %20, label %15, label %._crit_edge

._crit_edge:                                      ; preds = %15
  %21 = icmp eq i32 %i.0.n.0, -1
  br i1 %21, label %._crit_edge.thread, label %.thread

._crit_edge.thread:                               ; preds = %.preheader1, %._crit_edge
  %22 = add nsw i32 %11, 1
  store i32 %22, i32* @rm_pbc.ngraph, align 4, !tbaa !20
  %23 = load i8** bitcast (%struct.multi_graph** @rm_pbc.mgraph to i8**), align 8, !tbaa !21
  %24 = shl i32 %22, 4
  %25 = tail call i8* @save_realloc(i8* getelementptr inbounds ([7 x i8]* @.str, i64 0, i64 0), i8* getelementptr inbounds ([65 x i8]* @.str1, i64 0, i64 0), i32 68, i8* %23, i32 %24) #6
  %26 = bitcast i8* %25 to %struct.multi_graph*
  store i8* %25, i8** bitcast (%struct.multi_graph** @rm_pbc.mgraph to i8**), align 8, !tbaa !21
  %27 = sext i32 %11 to i64
  %28 = getelementptr inbounds %struct.multi_graph* %26, i64 %27, i32 0
  store i32 %natoms, i32* %28, align 4, !tbaa !22
  %29 = tail call %struct.t_graph* @mk_graph(%struct.t_idef* %idef, i32 %natoms, i32 0, i32 0) #6
  %30 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !21
  %31 = getelementptr inbounds %struct.multi_graph* %30, i64 %27, i32 1
  store %struct.t_graph* %29, %struct.t_graph** %31, align 8, !tbaa !24
  br label %.thread

.thread:                                          ; preds = %._crit_edge, %._crit_edge.thread
  %n.2 = phi i32 [ %11, %._crit_edge.thread ], [ %i.0.n.0, %._crit_edge ]
  %32 = load %struct.__sFILE** @__stdoutp, align 8, !tbaa !21
  %33 = sext i32 %n.2 to i64
  %34 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !21
  %35 = getelementptr inbounds %struct.multi_graph* %34, i64 %33, i32 1
  %36 = load %struct.t_graph** %35, align 8, !tbaa !24
  tail call void @mk_mshift(%struct.__sFILE* %32, %struct.t_graph* %36, [3 x float]* %box, [3 x float]* %x) #6
  %37 = getelementptr inbounds [3 x float]* %box_size, i64 0, i64 0
  %38 = getelementptr inbounds [27 x [3 x float]]* %sv, i64 0, i64 0
  call void @calc_shifts([3 x float]* %box, float* %37, [3 x float]* %38) #6
  %39 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !21
  %40 = getelementptr inbounds %struct.multi_graph* %39, i64 %33, i32 1
  %41 = load %struct.t_graph** %40, align 8, !tbaa !24
  call void @shift_x(%struct.t_graph* %41, [3 x float]* %box, [3 x float]* %x, [3 x float]* %x_s) #6
  br label %.loopexit

; <label>:42                                      ; preds = %7
  %.b = load i1* @rm_pbc.bFirst, align 1
  br i1 %.b, label %46, label %43

; <label>:43                                      ; preds = %42
  %44 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !21
  %45 = tail call i64 @fwrite(i8* getelementptr inbounds ([133 x i8]* @.str2, i64 0, i64 0), i64 132, i64 1, %struct.__sFILE* %44)
  store i1 true, i1* @rm_pbc.bFirst, align 1
  br label %46

; <label>:46                                      ; preds = %42, %43, %0
  %47 = icmp sgt i32 %natoms, 0
  %or.cond = and i1 %2, %47
  br i1 %or.cond, label %.lr.ph, label %.loopexit

.lr.ph:                                           ; preds = %46
  %48 = add i32 %natoms, -1
  br label %49

; <label>:49                                      ; preds = %49, %.lr.ph
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %49 ]
  %50 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0
  %51 = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 0
  %52 = bitcast float* %50 to i32*
  %53 = load i32* %52, align 4, !tbaa !14
  %54 = bitcast float* %51 to i32*
  store i32 %53, i32* %54, align 4, !tbaa !14
  %55 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 1
  %56 = bitcast float* %55 to i32*
  %57 = load i32* %56, align 4, !tbaa !14
  %58 = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 1
  %59 = bitcast float* %58 to i32*
  store i32 %57, i32* %59, align 4, !tbaa !14
  %60 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 2
  %61 = bitcast float* %60 to i32*
  %62 = load i32* %61, align 4, !tbaa !14
  %63 = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 2
  %64 = bitcast float* %63 to i32*
  store i32 %62, i32* %64, align 4, !tbaa !14
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv to i32
  %exitcond = icmp eq i32 %lftr.wideiv, %48
  br i1 %exitcond, label %.loopexit, label %49

.loopexit:                                        ; preds = %49, %46, %.thread
  call void @llvm.lifetime.end(i64 324, i8* %1) #5
  ret void
}
