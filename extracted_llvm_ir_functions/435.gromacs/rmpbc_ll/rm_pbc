define void @rm_pbc(%struct.t_idef* %idef, i32 %natoms, [3 x float]* %box, [3 x float]* %x, [3 x float]* %x_s) #0 {
entry:
  %sv = alloca [27 x [3 x float]], align 16
  %box_size = alloca [3 x float], align 4
  %0 = bitcast [27 x [3 x float]]* %sv to i8*
  call void @llvm.lifetime.start(i64 324, i8* %0) #1
  %cmp = icmp ne [3 x float]* %x, %x_s
  %arrayidx1 = getelementptr inbounds [3 x float]* %box, i64 0, i64 0
  %1 = load float* %arrayidx1, align 4, !tbaa !0
  %fabsf = call float @fabsf(float %1) #3
  %2 = fpext float %fabsf to double
  %cmp3 = fcmp ogt double %2, 1.200000e-38
  br i1 %cmp3, label %if.then, label %if.end40

if.then:                                          ; preds = %entry
  %ntypes = getelementptr inbounds %struct.t_idef* %idef, i64 0, i32 0
  %3 = load i32* %ntypes, align 4, !tbaa !3
  %cmp5 = icmp eq i32 %3, -1
  br i1 %cmp5, label %if.else, label %for.cond.preheader

for.cond.preheader:                               ; preds = %if.then
  %4 = load i32* @rm_pbc.ngraph, align 4, !tbaa !3
  %cmp883 = icmp sgt i32 %4, 0
  br i1 %cmp883, label %for.body.lr.ph, label %if.then17

for.body.lr.ph:                                   ; preds = %for.cond.preheader
  %5 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !4
  br label %for.body

for.body:                                         ; preds = %for.body.lr.ph, %for.body
  %indvars.iv87 = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next88, %for.body ]
  %n.084 = phi i32 [ -1, %for.body.lr.ph ], [ %i.0.n.0, %for.body ]
  %natoms11 = getelementptr inbounds %struct.multi_graph* %5, i64 %indvars.iv87, i32 0
  %6 = load i32* %natoms11, align 4, !tbaa !3
  %cmp12 = icmp eq i32 %6, %natoms
  %7 = trunc i64 %indvars.iv87 to i32
  %i.0.n.0 = select i1 %cmp12, i32 %7, i32 %n.084
  %indvars.iv.next88 = add i64 %indvars.iv87, 1
  %8 = trunc i64 %indvars.iv.next88 to i32
  %cmp8 = icmp slt i32 %8, %4
  br i1 %cmp8, label %for.body, label %for.end

for.end:                                          ; preds = %for.body
  %cmp15 = icmp eq i32 %i.0.n.0, -1
  br i1 %cmp15, label %if.then17, label %if.end40.thread

if.then17:                                        ; preds = %for.cond.preheader, %for.end
  %inc18 = add nsw i32 %4, 1
  store i32 %inc18, i32* @rm_pbc.ngraph, align 4, !tbaa !3
  %9 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !4
  %10 = bitcast %struct.multi_graph* %9 to i8*
  %mul = shl i32 %inc18, 4
  %call21 = call i8* @save_realloc(i8* getelementptr inbounds ([7 x i8]* @.str, i64 0, i64 0), i8* getelementptr inbounds ([53 x i8]* @.str1, i64 0, i64 0), i32 68, i8* %10, i32 %mul) #4
  %11 = bitcast i8* %call21 to %struct.multi_graph*
  store %struct.multi_graph* %11, %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !4
  %idxprom22 = sext i32 %4 to i64
  %natoms24 = getelementptr inbounds %struct.multi_graph* %11, i64 %idxprom22, i32 0
  store i32 %natoms, i32* %natoms24, align 4, !tbaa !3
  %call25 = call %struct.t_graph* @mk_graph(%struct.t_idef* %idef, i32 %natoms, i32 0, i32 0) #4
  %12 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !4
  %gr = getelementptr inbounds %struct.multi_graph* %12, i64 %idxprom22, i32 1
  store %struct.t_graph* %call25, %struct.t_graph** %gr, align 8, !tbaa !4
  br label %if.end40.thread

if.end40.thread:                                  ; preds = %for.end, %if.then17
  %n.2 = phi i32 [ %4, %if.then17 ], [ %i.0.n.0, %for.end ]
  %13 = load %struct._IO_FILE** @stdout, align 8, !tbaa !4
  %idxprom29 = sext i32 %n.2 to i64
  %14 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !4
  %gr31 = getelementptr inbounds %struct.multi_graph* %14, i64 %idxprom29, i32 1
  %15 = load %struct.t_graph** %gr31, align 8, !tbaa !4
  call void @mk_mshift(%struct._IO_FILE* %13, %struct.t_graph* %15, [3 x float]* %box, [3 x float]* %x) #4
  %arraydecay = getelementptr inbounds [3 x float]* %box_size, i64 0, i64 0
  %arraydecay32 = getelementptr inbounds [27 x [3 x float]]* %sv, i64 0, i64 0
  call void @calc_shifts([3 x float]* %box, float* %arraydecay, [3 x float]* %arraydecay32) #4
  %16 = load %struct.multi_graph** @rm_pbc.mgraph, align 8, !tbaa !4
  %gr35 = getelementptr inbounds %struct.multi_graph* %16, i64 %idxprom29, i32 1
  %17 = load %struct.t_graph** %gr35, align 8, !tbaa !4
  call void @shift_x(%struct.t_graph* %17, [3 x float]* %box, [3 x float]* %x, [3 x float]* %x_s) #4
  br label %if.end56

if.else:                                          ; preds = %if.then
  %.b = load i1* @rm_pbc.bFirst, align 1
  br i1 %.b, label %if.end40, label %if.then36

if.then36:                                        ; preds = %if.else
  %18 = load %struct._IO_FILE** @stderr, align 8, !tbaa !4
  %19 = call i64 @fwrite(i8* getelementptr inbounds ([133 x i8]* @.str2, i64 0, i64 0), i64 132, i64 1, %struct._IO_FILE* %18)
  store i1 true, i1* @rm_pbc.bFirst, align 1
  br label %if.end40

if.end40:                                         ; preds = %if.else, %if.then36, %entry
  %cmp4481 = icmp sgt i32 %natoms, 0
  %or.cond = and i1 %cmp, %cmp4481
  br i1 %or.cond, label %for.body46, label %if.end56

for.body46:                                       ; preds = %if.end40, %for.body46
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body46 ], [ 0, %if.end40 ]
  %arraydecay49 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0
  %arraydecay52 = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 0
  %20 = load float* %arraydecay49, align 4, !tbaa !0
  store float %20, float* %arraydecay52, align 4, !tbaa !0
  %arrayidx2.i = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 1
  %21 = load float* %arrayidx2.i, align 4, !tbaa !0
  %arrayidx3.i = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 1
  store float %21, float* %arrayidx3.i, align 4, !tbaa !0
  %arrayidx4.i = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 2
  %22 = load float* %arrayidx4.i, align 4, !tbaa !0
  %arrayidx5.i = getelementptr inbounds [3 x float]* %x_s, i64 %indvars.iv, i64 2
  store float %22, float* %arrayidx5.i, align 4, !tbaa !0
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp eq i32 %lftr.wideiv, %natoms
  br i1 %exitcond, label %if.end56, label %for.body46

if.end56:                                         ; preds = %if.end40, %for.body46, %if.end40.thread
  call void @llvm.lifetime.end(i64 324, i8* %0) #1
  ret void
}
