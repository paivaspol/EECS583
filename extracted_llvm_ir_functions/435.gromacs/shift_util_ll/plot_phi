define void @plot_phi(i8* %fn, float* nocapture %box, i32 %natoms, [3 x float]* nocapture %x, float* nocapture %phi) #0 {
entry:
  %0 = load float* %phi, align 4, !tbaa !0
  %cmp138 = icmp sgt i32 %natoms, 0
  br i1 %cmp138, label %for.body, label %for.end

for.body:                                         ; preds = %entry, %for.body.for.body_crit_edge
  %1 = phi float [ %.pre, %for.body.for.body_crit_edge ], [ %0, %entry ]
  %indvars.iv141 = phi i64 [ %phitmp145, %for.body.for.body_crit_edge ], [ 1, %entry ]
  %phi_max.0139 = phi float [ %phi_max.0.fabsf112, %for.body.for.body_crit_edge ], [ %0, %entry ]
  %fabsf112 = tail call float @fabsf(float %1) #8
  %cmp3 = fcmp ogt float %phi_max.0139, %fabsf112
  %phi_max.0.fabsf112 = select i1 %cmp3, float %phi_max.0139, float %fabsf112
  %lftr.wideiv143 = trunc i64 %indvars.iv141 to i32
  %exitcond144 = icmp eq i32 %lftr.wideiv143, %natoms
  br i1 %exitcond144, label %for.end, label %for.body.for.body_crit_edge

for.body.for.body_crit_edge:                      ; preds = %for.body
  %arrayidx1.phi.trans.insert = getelementptr inbounds float* %phi, i64 %indvars.iv141
  %.pre = load float* %arrayidx1.phi.trans.insert, align 4, !tbaa !0
  %phitmp145 = add i64 %indvars.iv141, 1
  br label %for.body

for.end:                                          ; preds = %for.body, %entry
  %phi_max.0.lcssa = phi float [ %0, %entry ], [ %phi_max.0.fabsf112, %for.body ]
  %fabsf = tail call float @fabsf(float %phi_max.0.lcssa) #8
  %2 = fpext float %fabsf to double
  %cmp13 = fcmp olt double %2, 1.200000e-38
  br i1 %cmp13, label %if.then, label %if.end

if.then:                                          ; preds = %for.end
  %3 = load %struct._IO_FILE** @stderr, align 8, !tbaa !3
  %4 = tail call i64 @fwrite(i8* getelementptr inbounds ([32 x i8]* @.str20, i64 0, i64 0), i64 31, i64 1, %struct._IO_FILE* %3)
  br label %return

if.end:                                           ; preds = %for.end
  %5 = load float* %box, align 4, !tbaa !0
  %mul = fmul float %5, 1.500000e+01
  %add = fadd float %mul, 4.000000e+01
  %arrayidx18 = getelementptr inbounds float* %box, i64 1
  %6 = load float* %arrayidx18, align 4, !tbaa !0
  %mul19 = fmul float %6, 1.500000e+01
  %add21 = fadd float %mul19, 4.000000e+01
  %call22 = tail call %struct._IO_FILE* @ps_open(i8* %fn, float 0.000000e+00, float 0.000000e+00, float %add, float %add21) #6
  tail call void @ps_translate(%struct._IO_FILE* %call22, float 2.000000e+01, float 2.000000e+01) #6
  tail call void @ps_color(%struct._IO_FILE* %call22, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00) #6
  %7 = load float* %box, align 4, !tbaa !0
  %mul24 = fmul float %7, 1.500000e+01
  %sub = fadd float %mul24, -1.000000e+00
  %8 = load float* %arrayidx18, align 4, !tbaa !0
  %mul26 = fmul float %8, 1.500000e+01
  %sub27 = fadd float %mul26, -1.000000e+00
  tail call void @ps_box(%struct._IO_FILE* %call22, float 1.000000e+00, float 1.000000e+00, float %sub, float %sub27) #6
  br i1 %cmp138, label %for.body34, label %for.end69

for.body34:                                       ; preds = %if.end, %if.end51
  %indvars.iv = phi i64 [ %indvars.iv.next, %if.end51 ], [ 0, %if.end ]
  %arrayidx36 = getelementptr inbounds float* %phi, i64 %indvars.iv
  %9 = load float* %arrayidx36, align 4, !tbaa !0
  %cmp37 = fcmp olt float %9, 0.000000e+00
  %div = fdiv float %9, %phi_max.0.lcssa
  br i1 %cmp37, label %if.then39, label %if.else

if.then39:                                        ; preds = %for.body34
  %conv44 = fadd float %div, 1.000000e+00
  %phitmp130 = fpext float %conv44 to double
  %phitmp131 = fmul double %phitmp130, 3.200000e+01
  %phitmp132 = fptosi double %phitmp131 to i32
  %phitmp133 = sitofp i32 %phitmp132 to double
  %phitmp134 = fmul double %phitmp133, 3.125000e-02
  %phitmp135 = fptrunc double %phitmp134 to float
  br label %if.end51

if.else:                                          ; preds = %for.body34
  %conv50 = fsub float 1.000000e+00, %div
  %phitmp = fpext float %conv50 to double
  %phitmp125 = fmul double %phitmp, 3.200000e+01
  %phitmp126 = fptosi double %phitmp125 to i32
  %phitmp127 = sitofp i32 %phitmp126 to double
  %phitmp128 = fmul double %phitmp127, 3.125000e-02
  %phitmp129 = fptrunc double %phitmp128 to float
  br label %if.end51

if.end51:                                         ; preds = %if.else, %if.then39
  %bb.0 = phi float [ %phitmp135, %if.then39 ], [ 1.000000e+00, %if.else ]
  %gg.0 = phi float [ %conv44, %if.then39 ], [ %conv50, %if.else ]
  %rr.0 = phi float [ 1.000000e+00, %if.then39 ], [ %phitmp129, %if.else ]
  %conv.i119 = fpext float %gg.0 to double
  %mul.i120 = fmul double %conv.i119, 3.200000e+01
  %conv1.i121 = fptosi double %mul.i120 to i32
  %conv2.i122 = sitofp i32 %conv1.i121 to double
  %div.i123 = fmul double %conv2.i122, 3.125000e-02
  %conv3.i124 = fptrunc double %div.i123 to float
  tail call void @ps_color(%struct._IO_FILE* %call22, float %rr.0, float %conv3.i124, float %bb.0) #6
  %arrayidx57 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0
  %10 = load float* %arrayidx57, align 4, !tbaa !0
  %mul58 = fmul float %10, 1.500000e+01
  %arrayidx61 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 1
  %11 = load float* %arrayidx61, align 4, !tbaa !0
  %mul62 = fmul float %11, 1.500000e+01
  %sub63 = fadd float %mul58, -2.250000e+00
  %sub64 = fadd float %mul62, -2.250000e+00
  %add65 = fadd float %mul58, 2.250000e+00
  %add66 = fadd float %mul62, 2.250000e+00
  tail call void @ps_fillbox(%struct._IO_FILE* %call22, float %sub63, float %sub64, float %add65, float %add66) #6
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp eq i32 %lftr.wideiv, %natoms
  br i1 %exitcond, label %for.end69, label %for.body34

for.end69:                                        ; preds = %if.end51, %if.end
  tail call void @ps_close(%struct._IO_FILE* %call22) #6
  br label %return

return:                                           ; preds = %for.end69, %if.then
  ret void
}
