define void @plot_phi(i8* %fn, float* nocapture readonly %box, i32 %natoms, [3 x float]* nocapture readonly %x, float* nocapture readonly %phi) #1 {
  %1 = load float* %phi, align 4, !tbaa !2
  %2 = icmp sgt i32 %natoms, 0
  br i1 %2, label %.lr.ph6, label %._crit_edge7

.lr.ph6:                                          ; preds = %0
  %3 = add i32 %natoms, -1
  %fabsf113 = tail call float @fabsf(float %1) #5
  %4 = fcmp ogt float %1, %fabsf113
  %phi_max.0.fabsf114 = select i1 %4, float %1, float %fabsf113
  %exitcond1115 = icmp eq i32 %3, 0
  br i1 %exitcond1115, label %._crit_edge7, label %._crit_edge12

._crit_edge12:                                    ; preds = %.lr.ph6, %._crit_edge12
  %indvars.iv.next917 = phi i64 [ %indvars.iv.next9, %._crit_edge12 ], [ 1, %.lr.ph6 ]
  %phi_max.0.fabsf116 = phi float [ %phi_max.0.fabsf1, %._crit_edge12 ], [ %phi_max.0.fabsf114, %.lr.ph6 ]
  %.phi.trans.insert = getelementptr inbounds float* %phi, i64 %indvars.iv.next917
  %.pre = load float* %.phi.trans.insert, align 4, !tbaa !2
  %fabsf1 = tail call float @fabsf(float %.pre) #5
  %5 = fcmp ogt float %phi_max.0.fabsf116, %fabsf1
  %phi_max.0.fabsf1 = select i1 %5, float %phi_max.0.fabsf116, float %fabsf1
  %indvars.iv.next9 = add nuw nsw i64 %indvars.iv.next917, 1
  %lftr.wideiv10 = trunc i64 %indvars.iv.next917 to i32
  %exitcond11 = icmp eq i32 %lftr.wideiv10, %3
  br i1 %exitcond11, label %._crit_edge7, label %._crit_edge12

._crit_edge7:                                     ; preds = %.lr.ph6, %._crit_edge12, %0
  %phi_max.0.lcssa = phi float [ %1, %0 ], [ %phi_max.0.fabsf114, %.lr.ph6 ], [ %phi_max.0.fabsf1, %._crit_edge12 ]
  %fabsf = tail call float @fabsf(float %phi_max.0.lcssa) #5
  %6 = fpext float %fabsf to double
  %7 = fcmp olt double %6, 1.200000e-38
  br i1 %7, label %8, label %11

; <label>:8                                       ; preds = %._crit_edge7
  %9 = load %struct.__sFILE** @__stderrp, align 8, !tbaa !6
  %10 = tail call i64 @fwrite(i8* getelementptr inbounds ([32 x i8]* @.str20, i64 0, i64 0), i64 31, i64 1, %struct.__sFILE* %9)
  br label %65

; <label>:11                                      ; preds = %._crit_edge7
  %12 = load float* %box, align 4, !tbaa !2
  %13 = fmul float %12, 1.500000e+01
  %14 = fadd float %13, 4.000000e+01
  %15 = getelementptr inbounds float* %box, i64 1
  %16 = load float* %15, align 4, !tbaa !2
  %17 = fmul float %16, 1.500000e+01
  %18 = fadd float %17, 4.000000e+01
  %19 = tail call %struct.__sFILE* @ps_open(i8* %fn, float 0.000000e+00, float 0.000000e+00, float %14, float %18) #8
  tail call void @ps_translate(%struct.__sFILE* %19, float 2.000000e+01, float 2.000000e+01) #8
  tail call void @ps_color(%struct.__sFILE* %19, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00) #8
  %20 = load float* %box, align 4, !tbaa !2
  %21 = fmul float %20, 1.500000e+01
  %22 = fadd float %21, -1.000000e+00
  %23 = load float* %15, align 4, !tbaa !2
  %24 = fmul float %23, 1.500000e+01
  %25 = fadd float %24, -1.000000e+00
  tail call void @ps_box(%struct.__sFILE* %19, float 1.000000e+00, float 1.000000e+00, float %22, float %25) #8
  br i1 %2, label %.lr.ph, label %._crit_edge

.lr.ph:                                           ; preds = %11
  %26 = add i32 %natoms, -1
  br label %27

; <label>:27                                      ; preds = %36, %.lr.ph
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %36 ]
  %28 = getelementptr inbounds float* %phi, i64 %indvars.iv
  %29 = load float* %28, align 4, !tbaa !2
  %30 = fcmp olt float %29, 0.000000e+00
  %31 = fdiv float %29, %phi_max.0.lcssa
  br i1 %30, label %32, label %34

; <label>:32                                      ; preds = %27
  %33 = fadd float %31, 1.000000e+00
  br label %36

; <label>:34                                      ; preds = %27
  %35 = fsub float 1.000000e+00, %31
  br label %36

; <label>:36                                      ; preds = %34, %32
  %bb.0 = phi float [ %33, %32 ], [ 1.000000e+00, %34 ]
  %gg.0 = phi float [ %33, %32 ], [ %35, %34 ]
  %rr.0 = phi float [ 1.000000e+00, %32 ], [ %35, %34 ]
  %37 = fpext float %rr.0 to double
  %38 = fmul double %37, 3.200000e+01
  %39 = fptosi double %38 to i32
  %40 = sitofp i32 %39 to double
  %41 = fmul double %40, 3.125000e-02
  %42 = fptrunc double %41 to float
  %43 = fpext float %gg.0 to double
  %44 = fmul double %43, 3.200000e+01
  %45 = fptosi double %44 to i32
  %46 = sitofp i32 %45 to double
  %47 = fmul double %46, 3.125000e-02
  %48 = fptrunc double %47 to float
  %49 = fpext float %bb.0 to double
  %50 = fmul double %49, 3.200000e+01
  %51 = fptosi double %50 to i32
  %52 = sitofp i32 %51 to double
  %53 = fmul double %52, 3.125000e-02
  %54 = fptrunc double %53 to float
  tail call void @ps_color(%struct.__sFILE* %19, float %42, float %48, float %54) #8
  %55 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0
  %56 = load float* %55, align 4, !tbaa !2
  %57 = fmul float %56, 1.500000e+01
  %58 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 1
  %59 = load float* %58, align 4, !tbaa !2
  %60 = fmul float %59, 1.500000e+01
  %61 = fadd float %57, -2.250000e+00
  %62 = fadd float %60, -2.250000e+00
  %63 = fadd float %57, 2.250000e+00
  %64 = fadd float %60, 2.250000e+00
  tail call void @ps_fillbox(%struct.__sFILE* %19, float %61, float %62, float %63, float %64) #8
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv to i32
  %exitcond = icmp eq i32 %lftr.wideiv, %26
  br i1 %exitcond, label %._crit_edge, label %27

._crit_edge:                                      ; preds = %36, %11
  tail call void @ps_close(%struct.__sFILE* %19) #8
  br label %65

; <label>:65                                      ; preds = %._crit_edge, %8
  ret void
}
