define internal fastcc float @gather_f(%struct.__sFILE* nocapture %log, i32 %start, i32 %nr, [3 x float]* nocapture readonly %x, [3 x float]* nocapture %f, float* nocapture readonly %charge, float* nocapture readonly %box, float* nocapture %pot, %struct.t_fftgrid* %grid, float* nocapture readonly %beta, %struct.t_nrnb* nocapture %nrnb) #2 {
  %ixyz = alloca [3 x i32], align 4
  %invh = alloca [3 x float], align 4
  %c1 = alloca [3 x float], align 4
  %c2 = alloca [3 x float], align 4
  %WXYZ = alloca [27 x float], align 16
  %ixw = alloca [7 x i32], align 16
  %iyw = alloca [7 x i32], align 16
  %izw = alloca [7 x i32], align 16
  %nx = alloca i32, align 4
  %ny = alloca i32, align 4
  %nz = alloca i32, align 4
  %la2 = alloca i32, align 4
  %la12 = alloca i32, align 4
  %ptr = alloca float*, align 8
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !634, metadata !695), !dbg !1356
  tail call void @llvm.dbg.declare(metadata [3 x i32]* %ixyz, metadata !650, metadata !695), !dbg !1357
  tail call void @llvm.dbg.declare(metadata [3 x float]* %invh, metadata !651, metadata !695), !dbg !1358
  tail call void @llvm.dbg.declare(metadata [3 x float]* %c1, metadata !652, metadata !695), !dbg !1359
  tail call void @llvm.dbg.declare(metadata [3 x float]* %c2, metadata !653, metadata !695), !dbg !1360
  %1 = bitcast [27 x float]* %WXYZ to i8*, !dbg !1361
  call void @llvm.lifetime.start(i64 108, i8* %1) #3, !dbg !1361
  tail call void @llvm.dbg.declare(metadata [27 x float]* %WXYZ, metadata !654, metadata !695), !dbg !1362
  tail call void @llvm.dbg.declare(metadata [7 x i32]* %ixw, metadata !661, metadata !695), !dbg !1363
  tail call void @llvm.dbg.declare(metadata [7 x i32]* %iyw, metadata !665, metadata !695), !dbg !1364
  tail call void @llvm.dbg.declare(metadata [7 x i32]* %izw, metadata !666, metadata !695), !dbg !1365
  tail call void @llvm.dbg.value(metadata i32* %nx, i64 0, metadata !668, metadata !695), !dbg !1366
  tail call void @llvm.dbg.value(metadata i32* %ny, i64 0, metadata !669, metadata !695), !dbg !1367
  tail call void @llvm.dbg.value(metadata i32* %nz, i64 0, metadata !670, metadata !695), !dbg !1368
  tail call void @llvm.dbg.value(metadata i32* %la2, i64 0, metadata !671, metadata !695), !dbg !1369
  tail call void @llvm.dbg.value(metadata i32* %la12, i64 0, metadata !672, metadata !695), !dbg !1370
  tail call void @llvm.dbg.value(metadata float** %ptr, i64 0, metadata !673, metadata !695), !dbg !1371
  call void @unpack_fftgrid(%struct.t_fftgrid* %grid, i32* %nx, i32* %ny, i32* %nz, i32* %la2, i32* %la12, i32 1, float** %ptr) #7, !dbg !1372
  call void @llvm.dbg.value(metadata i32* %nx, i64 0, metadata !668, metadata !695), !dbg !1366
  %2 = load i32* %nx, align 4, !dbg !1373, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %ny, i64 0, metadata !669, metadata !695), !dbg !1367
  %3 = load i32* %ny, align 4, !dbg !1374, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %nz, i64 0, metadata !670, metadata !695), !dbg !1368
  %4 = load i32* %nz, align 4, !dbg !1375, !tbaa !742
  %5 = getelementptr inbounds [3 x float]* %invh, i64 0, i64 0, !dbg !1376
  tail call void @llvm.dbg.value(metadata float* %box, i64 0, metadata !163, metadata !695), !dbg !1377
  tail call void @llvm.dbg.value(metadata i32 %2, i64 0, metadata !164, metadata !695), !dbg !1379
  tail call void @llvm.dbg.value(metadata i32 %3, i64 0, metadata !165, metadata !695), !dbg !1380
  tail call void @llvm.dbg.value(metadata i32 %4, i64 0, metadata !166, metadata !695), !dbg !1381
  tail call void @llvm.dbg.value(metadata float* %5, i64 0, metadata !167, metadata !695), !dbg !1382
  %6 = sitofp i32 %2 to float, !dbg !1383
  %7 = load float* %box, align 4, !dbg !1384, !tbaa !709
  %8 = fdiv float %6, %7, !dbg !1385
  store float %8, float* %5, align 4, !dbg !1386, !tbaa !709
  %9 = sitofp i32 %3 to float, !dbg !1387
  %10 = getelementptr inbounds float* %box, i64 1, !dbg !1388
  %11 = load float* %10, align 4, !dbg !1388, !tbaa !709
  %12 = fdiv float %9, %11, !dbg !1389
  %13 = getelementptr inbounds [3 x float]* %invh, i64 0, i64 1, !dbg !1390
  store float %12, float* %13, align 4, !dbg !1391, !tbaa !709
  %14 = sitofp i32 %4 to float, !dbg !1392
  %15 = getelementptr inbounds float* %box, i64 2, !dbg !1393
  %16 = load float* %15, align 4, !dbg !1393, !tbaa !709
  %17 = fdiv float %14, %16, !dbg !1394
  %18 = getelementptr inbounds [3 x float]* %invh, i64 0, i64 2, !dbg !1395
  store float %17, float* %18, align 4, !dbg !1396, !tbaa !709
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !646, metadata !695), !dbg !1397
  br label %19, !dbg !1398

; <label>:19                                      ; preds = %._crit_edge22, %0
  %20 = phi float [ %8, %0 ], [ %.pre, %._crit_edge22 ]
  %indvars.iv19 = phi i64 [ 0, %0 ], [ %indvars.iv.next20, %._crit_edge22 ]
  %21 = getelementptr inbounds float* %beta, i64 %indvars.iv19, !dbg !1400
  %22 = load float* %21, align 4, !dbg !1400, !tbaa !709
  %23 = fpext float %22 to double, !dbg !1400
  %24 = fmul double %23, 5.000000e-01, !dbg !1403
  %25 = fpext float %20 to double, !dbg !1404
  %26 = fmul double %24, %25, !dbg !1405
  %27 = fptrunc double %26 to float, !dbg !1406
  %28 = getelementptr inbounds [3 x float]* %c1, i64 0, i64 %indvars.iv19, !dbg !1407
  store float %27, float* %28, align 4, !dbg !1408, !tbaa !709
  %29 = fsub double 1.000000e+00, %23, !dbg !1409
  %30 = fmul double %29, 2.500000e-01, !dbg !1410
  %31 = fmul double %25, %30, !dbg !1411
  %32 = fptrunc double %31 to float, !dbg !1412
  %33 = getelementptr inbounds [3 x float]* %c2, i64 0, i64 %indvars.iv19, !dbg !1413
  store float %32, float* %33, align 4, !dbg !1414, !tbaa !709
  %indvars.iv.next20 = add nuw nsw i64 %indvars.iv19, 1, !dbg !1398
  %exitcond21 = icmp eq i64 %indvars.iv.next20, 3, !dbg !1398
  br i1 %exitcond21, label %34, label %._crit_edge22, !dbg !1398

._crit_edge22:                                    ; preds = %19
  %.phi.trans.insert = getelementptr inbounds [3 x float]* %invh, i64 0, i64 %indvars.iv.next20
  %.pre = load float* %.phi.trans.insert, align 4, !dbg !1404, !tbaa !709
  br label %19, !dbg !1398

; <label>:34                                      ; preds = %19
  %ixw6 = bitcast [7 x i32]* %ixw to i8*
  %iyw9 = bitcast [7 x i32]* %iyw to i8*
  %izw13 = bitcast [7 x i32]* %izw to i8*
  %35 = getelementptr inbounds [3 x float]* %c1, i64 0, i64 0, !dbg !1415
  %36 = load float* %35, align 4, !dbg !1415, !tbaa !709
  call void @llvm.dbg.value(metadata float %36, i64 0, metadata !655, metadata !695), !dbg !1416
  %37 = getelementptr inbounds [3 x float]* %c1, i64 0, i64 1, !dbg !1417
  %38 = load float* %37, align 4, !dbg !1417, !tbaa !709
  call void @llvm.dbg.value(metadata float %38, i64 0, metadata !656, metadata !695), !dbg !1418
  %39 = getelementptr inbounds [3 x float]* %c1, i64 0, i64 2, !dbg !1419
  %40 = load float* %39, align 4, !dbg !1419, !tbaa !709
  call void @llvm.dbg.value(metadata float %40, i64 0, metadata !657, metadata !695), !dbg !1420
  %41 = getelementptr inbounds [3 x float]* %c2, i64 0, i64 0, !dbg !1421
  %42 = load float* %41, align 4, !dbg !1421, !tbaa !709
  call void @llvm.dbg.value(metadata float %42, i64 0, metadata !658, metadata !695), !dbg !1422
  %43 = getelementptr inbounds [3 x float]* %c2, i64 0, i64 1, !dbg !1423
  %44 = load float* %43, align 4, !dbg !1423, !tbaa !709
  call void @llvm.dbg.value(metadata float %44, i64 0, metadata !659, metadata !695), !dbg !1424
  %45 = getelementptr inbounds [3 x float]* %c2, i64 0, i64 2, !dbg !1425
  %46 = load float* %45, align 4, !dbg !1425, !tbaa !709
  call void @llvm.dbg.value(metadata float %46, i64 0, metadata !660, metadata !695), !dbg !1426
  %.b = load i1* @gather_f.bFirst, align 1
  br i1 %.b, label %.preheader, label %47, !dbg !1427

; <label>:47                                      ; preds = %34
  call void @llvm.dbg.value(metadata i32* %nx, i64 0, metadata !668, metadata !695), !dbg !1366
  call void @llvm.dbg.value(metadata i32* %ny, i64 0, metadata !669, metadata !695), !dbg !1367
  call void @llvm.dbg.value(metadata i32* %nz, i64 0, metadata !670, metadata !695), !dbg !1368
  %48 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([57 x i8]* @.str24, i64 0, i64 0), i32 %2, i32 %3, i32 %4) #7, !dbg !1428
  %49 = load float* %beta, align 4, !dbg !1431, !tbaa !709
  %50 = fpext float %49 to double, !dbg !1431
  %51 = getelementptr inbounds float* %beta, i64 1, !dbg !1432
  %52 = load float* %51, align 4, !dbg !1432, !tbaa !709
  %53 = fpext float %52 to double, !dbg !1432
  %54 = getelementptr inbounds float* %beta, i64 2, !dbg !1433
  %55 = load float* %54, align 4, !dbg !1433, !tbaa !709
  %56 = fpext float %55 to double, !dbg !1433
  %57 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([23 x i8]* @.str25, i64 0, i64 0), double %50, double %53, double %56) #7, !dbg !1434
  %58 = fpext float %36 to double, !dbg !1435
  %59 = fpext float %38 to double, !dbg !1436
  %60 = fpext float %40 to double, !dbg !1437
  %61 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([23 x i8]* @.str26, i64 0, i64 0), double %58, double %59, double %60) #7, !dbg !1438
  %62 = fpext float %42 to double, !dbg !1439
  %63 = fpext float %44 to double, !dbg !1440
  %64 = fpext float %46 to double, !dbg !1441
  %65 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([23 x i8]* @.str27, i64 0, i64 0), double %62, double %63, double %64) #7, !dbg !1442
  %66 = fpext float %8 to double, !dbg !1443
  %67 = fpext float %12 to double, !dbg !1444
  %68 = fpext float %17 to double, !dbg !1445
  %69 = call i32 (%struct.__sFILE*, i8*, ...)* @fprintf(%struct.__sFILE* %log, i8* getelementptr inbounds ([23 x i8]* @.str2, i64 0, i64 0), double %66, double %67, double %68) #7, !dbg !1446
  call void @llvm.dbg.value(metadata i32* %nx, i64 0, metadata !668, metadata !695), !dbg !1366
  %70 = load i32* %nx, align 4, !dbg !1447, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %ny, i64 0, metadata !669, metadata !695), !dbg !1367
  %71 = load i32* %ny, align 4, !dbg !1448, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %nz, i64 0, metadata !670, metadata !695), !dbg !1368
  %72 = load i32* %nz, align 4, !dbg !1449, !tbaa !742
  call fastcc void @calc_nxyz(i32 %70, i32 %71, i32 %72, i32** @gather_f.nnx, i32** @gather_f.nny, i32** @gather_f.nnz) #8, !dbg !1450
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !645, metadata !695), !dbg !1451
  br label %73, !dbg !1452

; <label>:73                                      ; preds = %73, %47
  %indvars.iv17 = phi i64 [ 0, %47 ], [ %indvars.iv.next18, %73 ]
  %74 = trunc i64 %indvars.iv17 to i32, !dbg !1454
  %75 = sdiv i32 %74, 9, !dbg !1454
  %76 = add nsw i32 %75, 2, !dbg !1457
  %77 = mul nsw i64 %indvars.iv17, 3, !dbg !1458
  %78 = getelementptr inbounds [81 x i32]* @gather_f.JCXYZ, i64 0, i64 %77, !dbg !1459
  store i32 %76, i32* %78, align 4, !dbg !1460, !tbaa !742
  %79 = sdiv i32 %74, 3, !dbg !1461
  %80 = srem i32 %79, 3, !dbg !1462
  %81 = add nsw i32 %80, 2, !dbg !1463
  %82 = add nuw nsw i64 %77, 1, !dbg !1464
  %83 = getelementptr inbounds [81 x i32]* @gather_f.JCXYZ, i64 0, i64 %82, !dbg !1465
  store i32 %81, i32* %83, align 4, !dbg !1466, !tbaa !742
  %84 = srem i32 %74, 3, !dbg !1467
  %85 = add nsw i32 %84, 2, !dbg !1468
  %86 = add nuw nsw i64 %77, 2, !dbg !1469
  %87 = getelementptr inbounds [81 x i32]* @gather_f.JCXYZ, i64 0, i64 %86, !dbg !1470
  store i32 %85, i32* %87, align 4, !dbg !1471, !tbaa !742
  %indvars.iv.next18 = add nuw nsw i64 %indvars.iv17, 1, !dbg !1452
  %exitcond = icmp eq i64 %indvars.iv.next18, 27, !dbg !1452
  br i1 %exitcond, label %88, label %73, !dbg !1452

; <label>:88                                      ; preds = %73
  store i1 true, i1* @gather_f.bFirst, align 1
  br label %.preheader, !dbg !1472

.preheader:                                       ; preds = %34, %88
  %89 = icmp sgt i32 %nr, 0, !dbg !1473
  br i1 %89, label %.lr.ph, label %135, !dbg !1476

.lr.ph:                                           ; preds = %.preheader
  %90 = add nsw i32 %nr, %start, !dbg !1477
  %91 = getelementptr inbounds [3 x i32]* %ixyz, i64 0, i64 0, !dbg !1478
  %92 = getelementptr inbounds [27 x float]* %WXYZ, i64 0, i64 0, !dbg !1480
  %93 = getelementptr inbounds [3 x i32]* %ixyz, i64 0, i64 1, !dbg !1481
  %94 = getelementptr inbounds [3 x i32]* %ixyz, i64 0, i64 2, !dbg !1485
  %95 = getelementptr inbounds [7 x i32]* %ixw, i64 0, i64 0, !dbg !1486
  %96 = getelementptr inbounds [7 x i32]* %iyw, i64 0, i64 0, !dbg !1487
  %97 = getelementptr inbounds [7 x i32]* %izw, i64 0, i64 0, !dbg !1488
  %98 = sext i32 %start to i64
  %99 = sext i32 %90 to i64, !dbg !1476
  br label %100, !dbg !1476

; <label>:100                                     ; preds = %.lr.ph, %100
  %indvars.iv = phi i64 [ %98, %.lr.ph ], [ %indvars.iv.next, %100 ]
  %energy.02 = phi float [ 0.000000e+00, %.lr.ph ], [ %132, %100 ]
  call void @llvm.dbg.value(metadata i32* %nx, i64 0, metadata !668, metadata !695), !dbg !1366
  %101 = load i32* %nx, align 4, !dbg !1489, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %ny, i64 0, metadata !669, metadata !695), !dbg !1367
  %102 = load i32* %ny, align 4, !dbg !1490, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %nz, i64 0, metadata !670, metadata !695), !dbg !1368
  %103 = load i32* %nz, align 4, !dbg !1491, !tbaa !742
  %104 = getelementptr inbounds [3 x float]* %x, i64 %indvars.iv, i64 0, !dbg !1492
  %105 = trunc i64 %indvars.iv to i32, !dbg !1493
  call void @calc_weights(i32 %105, i32 %101, i32 %102, i32 %103, float* %104, float* undef, float* %5, i32* %91, float* %92) #8, !dbg !1493
  call void @llvm.dbg.value(metadata i32 -3, i64 0, metadata !667, metadata !695), !dbg !1494
  %106 = load i32* %91, align 4, !dbg !1495, !tbaa !742
  %107 = load i32* %nx, align 4, !dbg !1496, !tbaa !742
  %108 = load i32** @gather_f.nnx, align 8, !dbg !1497, !tbaa !949
  %109 = load i32* %93, align 4, !dbg !1481, !tbaa !742
  %110 = load i32* %ny, align 4, !dbg !1498, !tbaa !742
  %111 = load i32** @gather_f.nny, align 8, !dbg !1499, !tbaa !949
  %112 = load i32* %94, align 4, !dbg !1485, !tbaa !742
  %113 = load i32* %nz, align 4, !dbg !1500, !tbaa !742
  %114 = load i32** @gather_f.nnz, align 8, !dbg !1501, !tbaa !949
  %115 = sext i32 %106 to i64
  %116 = sext i32 %107 to i64
  %117 = add nsw i64 %115, %116, !dbg !1502
  %scevgep.sum = add nsw i64 %117, -3
  %scevgep7 = getelementptr i32* %108, i64 %scevgep.sum
  %scevgep78 = bitcast i32* %scevgep7 to i8*
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %ixw6, i8* %scevgep78, i64 28, i32 4, i1 false), !dbg !1503
  %118 = sext i32 %109 to i64
  %119 = sext i32 %110 to i64
  %120 = add nsw i64 %118, %119, !dbg !1502
  %scevgep10.sum = add nsw i64 %120, -3
  %scevgep11 = getelementptr i32* %111, i64 %scevgep10.sum
  %scevgep1112 = bitcast i32* %scevgep11 to i8*
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %iyw9, i8* %scevgep1112, i64 28, i32 4, i1 false), !dbg !1504
  %121 = sext i32 %112 to i64
  %122 = sext i32 %113 to i64
  %123 = add nsw i64 %121, %122, !dbg !1502
  %scevgep14.sum = add nsw i64 %123, -3
  %scevgep15 = getelementptr i32* %114, i64 %scevgep14.sum
  %scevgep1516 = bitcast i32* %scevgep15 to i8*
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %izw13, i8* %scevgep1516, i64 28, i32 4, i1 false), !dbg !1505
  %124 = getelementptr inbounds float* %charge, i64 %indvars.iv, !dbg !1506
  %125 = load float* %124, align 4, !dbg !1506, !tbaa !709
  call void @llvm.dbg.value(metadata float %125, i64 0, metadata !648, metadata !695), !dbg !1507
  call void @llvm.dbg.value(metadata i32* %la2, i64 0, metadata !671, metadata !695), !dbg !1369
  %126 = load i32* %la2, align 4, !dbg !1508, !tbaa !742
  call void @llvm.dbg.value(metadata i32* %la12, i64 0, metadata !672, metadata !695), !dbg !1370
  %127 = load i32* %la12, align 4, !dbg !1509, !tbaa !742
  %128 = getelementptr inbounds [3 x float]* %f, i64 %indvars.iv, i64 0, !dbg !1510
  call void @llvm.dbg.value(metadata float** %ptr, i64 0, metadata !673, metadata !695), !dbg !1371
  %129 = load float** %ptr, align 8, !dbg !1511, !tbaa !949
  %130 = call float @gather_inner(i32* getelementptr inbounds ([81 x i32]* @gather_f.JCXYZ, i64 0, i64 0), float* %92, i32* %95, i32* %96, i32* %97, i32 %126, i32 %127, float %36, float %38, float %40, float %42, float %44, float %46, float %125, float* %128, float* %129) #8, !dbg !1512
  call void @llvm.dbg.value(metadata float %130, i64 0, metadata !649, metadata !695), !dbg !1513
  %131 = fmul float %125, %130, !dbg !1514
  %132 = fadd float %energy.02, %131, !dbg !1515
  call void @llvm.dbg.value(metadata float %132, i64 0, metadata !647, metadata !695), !dbg !1516
  %133 = getelementptr inbounds float* %pot, i64 %indvars.iv, !dbg !1517
  store float %130, float* %133, align 4, !dbg !1518, !tbaa !709
  %indvars.iv.next = add nsw i64 %indvars.iv, 1, !dbg !1476
  %134 = icmp slt i64 %indvars.iv.next, %99, !dbg !1473
  br i1 %134, label %100, label %._crit_edge, !dbg !1476

._crit_edge:                                      ; preds = %100
  %phitmp = fmul float %132, 5.000000e-01, !dbg !1476
  br label %135, !dbg !1476

; <label>:135                                     ; preds = %._crit_edge, %.preheader
  %energy.0.lcssa = phi float [ %phitmp, %._crit_edge ], [ 0.000000e+00, %.preheader ]
  %136 = mul nsw i32 %nr, 27, !dbg !1519
  %137 = sitofp i32 %136 to double, !dbg !1519
  %138 = getelementptr inbounds %struct.t_nrnb* %nrnb, i64 0, i32 0, i64 82, !dbg !1519
  %139 = load double* %138, align 8, !dbg !1519, !tbaa !974
  %140 = fadd double %137, %139, !dbg !1519
  store double %140, double* %138, align 8, !dbg !1519, !tbaa !974
  %141 = mul nsw i32 %nr, 3, !dbg !1520
  %142 = sitofp i32 %141 to double, !dbg !1520
  %143 = getelementptr inbounds %struct.t_nrnb* %nrnb, i64 0, i32 0, i64 79, !dbg !1520
  %144 = load double* %143, align 8, !dbg !1520, !tbaa !974
  %145 = fadd double %142, %144, !dbg !1520
  store double %145, double* %143, align 8, !dbg !1520, !tbaa !974
  call void @llvm.lifetime.end(i64 108, i8* %1) #3, !dbg !1521
  ret float %energy.0.lcssa, !dbg !1521
}
