define %struct.t_fftgrid* @spread_on_grid(%struct._IO_FILE* nocapture %logfile, i32 %homenr, i32 %pme_order, [3 x float]* nocapture %x, float* nocapture %charge, [3 x float]* nocapture %box, i32 %bGatherOnly) #0 {
entry:
  %nx = alloca i32, align 4
  %ny = alloca i32, align 4
  %nz = alloca i32, align 4
  %la2 = alloca i32, align 4
  %la12 = alloca i32, align 4
  %ptr = alloca float*, align 8
  call void @llvm.dbg.value(metadata !{%struct._IO_FILE* %logfile}, i64 0, metadata !582), !dbg !1179
  call void @llvm.dbg.value(metadata !{i32 %homenr}, i64 0, metadata !583), !dbg !1179
  call void @llvm.dbg.value(metadata !{i32 %pme_order}, i64 0, metadata !584), !dbg !1180
  call void @llvm.dbg.value(metadata !{[3 x float]* %x}, i64 0, metadata !585), !dbg !1180
  call void @llvm.dbg.value(metadata !{float* %charge}, i64 0, metadata !586), !dbg !1181
  call void @llvm.dbg.value(metadata !{[3 x float]* %box}, i64 0, metadata !587), !dbg !1181
  call void @llvm.dbg.value(metadata !{i32 %bGatherOnly}, i64 0, metadata !588), !dbg !1182
  call void @llvm.dbg.declare(metadata !{i32* %nx}, metadata !589), !dbg !1183
  call void @llvm.dbg.declare(metadata !{i32* %ny}, metadata !590), !dbg !1183
  call void @llvm.dbg.declare(metadata !{i32* %nz}, metadata !591), !dbg !1183
  call void @llvm.dbg.declare(metadata !{i32* %la2}, metadata !592), !dbg !1183
  call void @llvm.dbg.declare(metadata !{i32* %la12}, metadata !593), !dbg !1183
  call void @llvm.dbg.declare(metadata !{float** %ptr}, metadata !594), !dbg !1184
  %0 = load %struct.t_fftgrid** @grid, align 8, !dbg !1185, !tbaa !773
  call void @unpack_fftgrid(%struct.t_fftgrid* %0, i32* %nx, i32* %ny, i32* %nz, i32* %la2, i32* %la12, i32 1, float** %ptr) #5, !dbg !1185
  call void @calc_recipbox([3 x float]* %box, [3 x float]* getelementptr inbounds ([3 x [3 x float]]* @recipbox, i64 0, i64 0)) #7, !dbg !1186
  %tobool = icmp eq i32 %bGatherOnly, 0, !dbg !1187
  br i1 %tobool, label %if.then, label %if.end, !dbg !1187

if.then:                                          ; preds = %entry
  %1 = load [3 x float]** @fractx, align 8, !dbg !1188, !tbaa !773
  %2 = load [3 x i32]** @idx, align 8, !dbg !1188, !tbaa !773
  call void @llvm.dbg.value(metadata !{i32* %nx}, i64 0, metadata !589), !dbg !1188
  %3 = load i32* %nx, align 4, !dbg !1188, !tbaa !815
  call void @llvm.dbg.value(metadata !{i32* %ny}, i64 0, metadata !590), !dbg !1188
  %4 = load i32* %ny, align 4, !dbg !1188, !tbaa !815
  call void @llvm.dbg.value(metadata !{i32* %nz}, i64 0, metadata !591), !dbg !1188
  %5 = load i32* %nz, align 4, !dbg !1188, !tbaa !815
  %6 = load i32** @nnx, align 8, !dbg !1188, !tbaa !773
  %7 = load i32** @nny, align 8, !dbg !1188, !tbaa !773
  %8 = load i32** @nnz, align 8, !dbg !1188, !tbaa !773
  call void @calc_idx(i32 %homenr, [3 x float]* getelementptr inbounds ([3 x [3 x float]]* @recipbox, i64 0, i64 0), [3 x float]* %x, [3 x float]* %1, [3 x i32]* %2, i32 %3, i32 %4, i32 %5, i32* %6, i32* %7, i32* %8) #7, !dbg !1188
  call void @llvm.dbg.value(metadata !{i32* %nx}, i64 0, metadata !589), !dbg !1190
  call void @llvm.dbg.value(metadata !{i32* %ny}, i64 0, metadata !590), !dbg !1190
  call void @llvm.dbg.value(metadata !{i32* %nz}, i64 0, metadata !591), !dbg !1190
  %9 = load [3 x float]** @fractx, align 8, !dbg !1190, !tbaa !773
  call void @make_bsplines(float** getelementptr inbounds ([3 x float*]* @theta, i64 0, i64 0), float** getelementptr inbounds ([3 x float*]* @dtheta, i64 0, i64 0), i32 %pme_order, i32 undef, i32 undef, i32 undef, [3 x float]* %9, [3 x i32]* undef, float* %charge, i32 %homenr) #7, !dbg !1190
  %10 = load %struct.t_fftgrid** @grid, align 8, !dbg !1191, !tbaa !773
  %11 = load [3 x i32]** @idx, align 8, !dbg !1191, !tbaa !773
  %12 = load i32** @nnx, align 8, !dbg !1191, !tbaa !773
  %13 = load i32** @nny, align 8, !dbg !1191, !tbaa !773
  %14 = load i32** @nnz, align 8, !dbg !1191, !tbaa !773
  call void @spread_q_bsplines(%struct.t_fftgrid* %10, [3 x i32]* %11, float* %charge, float** getelementptr inbounds ([3 x float*]* @theta, i64 0, i64 0), i32 %homenr, i32 %pme_order, i32* %12, i32* %13, i32* %14) #7, !dbg !1191
  br label %if.end, !dbg !1192

if.end:                                           ; preds = %entry, %if.then
  %15 = load %struct.t_fftgrid** @grid, align 8, !dbg !1193, !tbaa !773
  ret %struct.t_fftgrid* %15, !dbg !1193
}
