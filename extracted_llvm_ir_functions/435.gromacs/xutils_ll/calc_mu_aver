define float @calc_mu_aver(%struct.t_commrec* nocapture readnone %cr, %struct.t_nsborder* nocapture readnone %nsb, [3 x float]* nocapture readonly %x, float* nocapture readonly %q, float* nocapture readnone %mu, %struct.t_topology* nocapture readonly %top, %struct.t_mdatoms* nocapture readnone %md, i32 %gnx, i32* nocapture readonly %grpindex) #4 {
  tail call void @llvm.dbg.value(metadata %struct.t_commrec* %cr, i64 0, metadata !572, metadata !899), !dbg !1106
  tail call void @llvm.dbg.value(metadata %struct.t_nsborder* %nsb, i64 0, metadata !573, metadata !899), !dbg !1107
  tail call void @llvm.dbg.value(metadata [3 x float]* %x, i64 0, metadata !574, metadata !899), !dbg !1108
  tail call void @llvm.dbg.value(metadata float* %q, i64 0, metadata !575, metadata !899), !dbg !1109
  tail call void @llvm.dbg.value(metadata float* %mu, i64 0, metadata !576, metadata !899), !dbg !1110
  tail call void @llvm.dbg.value(metadata %struct.t_topology* %top, i64 0, metadata !577, metadata !899), !dbg !1111
  tail call void @llvm.dbg.value(metadata %struct.t_mdatoms* %md, i64 0, metadata !578, metadata !899), !dbg !1112
  tail call void @llvm.dbg.value(metadata i32 %gnx, i64 0, metadata !579, metadata !899), !dbg !1113
  tail call void @llvm.dbg.value(metadata i32* %grpindex, i64 0, metadata !580, metadata !899), !dbg !1114
  %1 = icmp sgt i32 %gnx, 0, !dbg !1115
  br i1 %1, label %.lr.ph, label %21, !dbg !1116

.lr.ph:                                           ; preds = %0
  %2 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 3, i64 1, i32 2, !dbg !1117
  %3 = load i32** %2, align 8, !dbg !1117, !tbaa !1118
  %4 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 3, i64 1, i32 4, !dbg !1120
  %5 = load i32** %4, align 8, !dbg !1120, !tbaa !1121
  %6 = add i32 %gnx, -1, !dbg !1122
  br label %7, !dbg !1122

; <label>:7                                       ; preds = %7, %.lr.ph
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %7 ]
  %mu_ave.01 = phi float [ 0.000000e+00, %.lr.ph ], [ %18, %7 ]
  %8 = getelementptr inbounds i32* %grpindex, i64 %indvars.iv, !dbg !1123
  %9 = load i32* %8, align 4, !dbg !1123, !tbaa !1083
  tail call void @llvm.dbg.value(metadata i32 %9, i64 0, metadata !588, metadata !899), !dbg !1124
  %10 = sext i32 %9 to i64, !dbg !1125
  %11 = getelementptr inbounds i32* %3, i64 %10, !dbg !1125
  %12 = load i32* %11, align 4, !dbg !1125, !tbaa !1083
  %13 = add nsw i32 %9, 1, !dbg !1126
  %14 = sext i32 %13 to i64, !dbg !1127
  %15 = getelementptr inbounds i32* %3, i64 %14, !dbg !1127
  %16 = load i32* %15, align 4, !dbg !1127, !tbaa !1083
  %17 = tail call float @mol_dipole(i32 %12, i32 %16, i32* %5, [3 x float]* %x, float* %q) #12, !dbg !1128
  %18 = fadd float %mu_ave.01, %17, !dbg !1129
  tail call void @llvm.dbg.value(metadata float %18, i64 0, metadata !584, metadata !899), !dbg !1130
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1, !dbg !1122
  %lftr.wideiv = trunc i64 %indvars.iv to i32, !dbg !1122
  %exitcond = icmp eq i32 %lftr.wideiv, %6, !dbg !1122
  br i1 %exitcond, label %._crit_edge, label %7, !dbg !1122

._crit_edge:                                      ; preds = %7
  %19 = sitofp i32 %gnx to float, !dbg !1131
  %20 = fdiv float %18, %19, !dbg !1132
  br label %21, !dbg !1133

; <label>:21                                      ; preds = %0, %._crit_edge
  %.0 = phi float [ %20, %._crit_edge ], [ 0.000000e+00, %0 ]
  ret float %.0, !dbg !1134
}
