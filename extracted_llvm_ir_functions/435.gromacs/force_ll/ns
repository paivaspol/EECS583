define void @ns(%struct._IO_FILE* %fp, %struct.t_forcerec* %fr, [3 x float]* %x, [3 x float]* nocapture %f, [3 x float]* %box, %struct.t_groups* %grps, %struct.t_grpopts* nocapture %opts, %struct.t_topology* %top, %struct.t_mdatoms* %md, %struct.t_commrec* %cr, %struct.t_nrnb* %nrnb, %struct.t_nsborder* %nsb, i32 %step, float %lambda, float* %dvdlambda) #0 {
entry:
  %.b = load i1* @ns.bFirst, align 1
  br i1 %.b, label %if.end4, label %if.end

if.end:                                           ; preds = %entry
  %nodeid = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 0
  %0 = load i32* %nodeid, align 4, !tbaa !0
  %idxprom = sext i32 %0 to i64
  %arrayidx = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 7, i64 %idxprom
  %1 = load i32* %arrayidx, align 4, !tbaa !0
  tail call void @init_neighbor_list(%struct._IO_FILE* %fp, %struct.t_forcerec* %fr, i32 %1) #4
  store i1 true, i1* @ns.bFirst, align 1
  br label %if.end4

if.end4:                                          ; preds = %entry, %if.end
  %bTwinRange = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 51
  %2 = load i32* %bTwinRange, align 4, !tbaa !0
  %tobool5 = icmp eq i32 %2, 0
  br i1 %tobool5, label %if.end7, label %if.then6

if.then6:                                         ; preds = %if.end4
  %nlr = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 52
  store i32 0, i32* %nlr, align 4, !tbaa !0
  br label %if.end7

if.end7:                                          ; preds = %if.end4, %if.then6
  %nodeid8 = getelementptr inbounds %struct.t_commrec* %cr, i64 0, i32 0
  %3 = load i32* %nodeid8, align 4, !tbaa !0
  %cmp = icmp eq i32 %3, 0
  br i1 %cmp, label %if.then9, label %if.else10

if.then9:                                         ; preds = %if.end7
  %cg0 = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 35
  store i32 0, i32* %cg0, align 4, !tbaa !0
  br label %if.end15

if.else10:                                        ; preds = %if.end7
  %sub = add nsw i32 %3, -1
  %idxprom12 = sext i32 %sub to i64
  %arrayidx13 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 10, i64 %idxprom12
  %4 = load i32* %arrayidx13, align 4, !tbaa !0
  %cg014 = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 35
  store i32 %4, i32* %cg014, align 4, !tbaa !0
  br label %if.end15

if.end15:                                         ; preds = %if.else10, %if.then9
  %5 = load i32* %nodeid8, align 4, !tbaa !0
  %idxprom17 = sext i32 %5 to i64
  %arrayidx19 = getelementptr inbounds %struct.t_nsborder* %nsb, i64 0, i32 10, i64 %idxprom17
  %6 = load i32* %arrayidx19, align 4, !tbaa !0
  %hcg = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 36
  store i32 %6, i32* %hcg, align 4, !tbaa !0
  %call20 = tail call i32 @search_neighbours(%struct._IO_FILE* %fp, %struct.t_forcerec* %fr, [3 x float]* %x, [3 x float]* %box, %struct.t_topology* %top, %struct.t_groups* %grps, %struct.t_commrec* %cr, %struct.t_nsborder* %nsb, %struct.t_nrnb* %nrnb, %struct.t_mdatoms* %md, float %lambda, float* %dvdlambda) #4
  %7 = load %struct._IO_FILE** @debug, align 8, !tbaa !4
  %tobool21 = icmp eq %struct._IO_FILE* %7, null
  br i1 %tobool21, label %if.end27, label %if.then22

if.then22:                                        ; preds = %if.end15
  %call23 = tail call i32 (%struct._IO_FILE*, i8*, ...)* @fprintf(%struct._IO_FILE* %7, i8* getelementptr inbounds ([14 x i8]* @.str40, i64 0, i64 0), i32 %call20) #4
  br label %if.end27

if.end27:                                         ; preds = %if.then22, %if.end15
  ret void
}
