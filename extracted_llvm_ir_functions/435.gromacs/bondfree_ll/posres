define float @posres(i32 %nbonds, i32* nocapture %forceatoms, %union.t_iparams* %forceparams, [3 x float]* %x, [3 x float]* nocapture %f, %struct.t_forcerec* nocapture %fr, %struct.t_graph* nocapture %g, [3 x float]* nocapture %box, float %lambda, float* nocapture %dvdlambda, %struct.t_mdatoms* nocapture %md, i32 %ngrp, float* nocapture %egnb, float* nocapture %egcoul, %struct.t_fcdata* nocapture %fcd) #0 {
entry:
  %dx = alloca [3 x float], align 4
  %cmp78 = icmp sgt i32 %nbonds, 0
  br i1 %cmp78, label %for.body.lr.ph, label %for.end55

for.body.lr.ph:                                   ; preds = %entry
  %ePBC = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 0
  %arraydecay15 = getelementptr inbounds [3 x float]* %dx, i64 0, i64 0
  %arrayidx9.i = getelementptr inbounds [3 x float]* %dx, i64 0, i64 1
  %arrayidx10.i = getelementptr inbounds [3 x float]* %dx, i64 0, i64 2
  br label %for.body

for.body:                                         ; preds = %for.end, %for.body.lr.ph
  %indvars.iv81 = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next82, %for.end ]
  %vtot.079 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %add54, %for.end ]
  %0 = or i64 %indvars.iv81, 1
  %arrayidx = getelementptr inbounds i32* %forceatoms, i64 %indvars.iv81
  %1 = load i32* %arrayidx, align 4, !tbaa !3
  %indvars.iv.next82 = add i64 %indvars.iv81, 2
  %arrayidx3 = getelementptr inbounds i32* %forceatoms, i64 %0
  %2 = load i32* %arrayidx3, align 4, !tbaa !3
  %idxprom4 = sext i32 %1 to i64
  %fc6 = getelementptr inbounds %union.t_iparams* %forceparams, i64 %idxprom4, i32 0, i32 3
  %3 = load i32* %ePBC, align 4, !tbaa !3
  %cmp7 = icmp eq i32 %3, 1
  %idxprom8 = sext i32 %2 to i64
  %arraydecay10 = getelementptr inbounds [3 x float]* %x, i64 %idxprom8, i64 0
  %arraydecay14 = getelementptr inbounds %union.t_iparams* %forceparams, i64 %idxprom4, i32 0, i32 0
  br i1 %cmp7, label %if.then, label %if.else

if.then:                                          ; preds = %for.body
  %4 = load float* %arraydecay10, align 4, !tbaa !0
  %5 = load float* %arraydecay14, align 4, !tbaa !0
  %sub.i = fsub float %4, %5
  %arrayidx2.i = getelementptr inbounds [3 x float]* %x, i64 %idxprom8, i64 1
  %6 = load float* %arrayidx2.i, align 4, !tbaa !0
  %arrayidx3.i = getelementptr inbounds float* %arraydecay14, i64 1
  %7 = load float* %arrayidx3.i, align 4, !tbaa !0
  %sub4.i = fsub float %6, %7
  %arrayidx5.i = getelementptr inbounds [3 x float]* %x, i64 %idxprom8, i64 2
  %8 = load float* %arrayidx5.i, align 4, !tbaa !0
  %arrayidx6.i = getelementptr inbounds float* %arraydecay14, i64 2
  %9 = load float* %arrayidx6.i, align 4, !tbaa !0
  %sub7.i = fsub float %8, %9
  store float %sub.i, float* %arraydecay15, align 4, !tbaa !0
  store float %sub4.i, float* %arrayidx9.i, align 4, !tbaa !0
  store float %sub7.i, float* %arrayidx10.i, align 4, !tbaa !0
  br label %for.body27

if.else:                                          ; preds = %for.body
  call void @pbc_dx(float* %arraydecay10, float* %arraydecay14, float* %arraydecay15) #5
  br label %for.body27

for.body27:                                       ; preds = %if.then, %if.else, %for.body27.for.body27_crit_edge
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body27.for.body27_crit_edge ], [ 0, %if.else ], [ 0, %if.then ]
  %v.076 = phi double [ %phitmp, %for.body27.for.body27_crit_edge ], [ 0.000000e+00, %if.else ], [ 0.000000e+00, %if.then ]
  %arrayidx31 = getelementptr inbounds [3 x float]* %f, i64 %idxprom8, i64 %indvars.iv
  %10 = load float* %arrayidx31, align 4, !tbaa !0
  %arrayidx33 = getelementptr inbounds float* %fc6, i64 %indvars.iv
  %11 = load float* %arrayidx33, align 4, !tbaa !0
  %arrayidx35 = getelementptr inbounds [3 x float]* %dx, i64 0, i64 %indvars.iv
  %12 = load float* %arrayidx35, align 4, !tbaa !0
  %mul = fmul float %11, %12
  %sub = fsub float %10, %mul
  %conv = fpext float %11 to double
  %mul38 = fmul double %conv, 5.000000e-01
  %conv41 = fpext float %12 to double
  %mul42 = fmul double %mul38, %conv41
  %mul46 = fmul double %conv41, %mul42
  %add = fadd double %v.076, %mul46
  %conv48 = fptrunc double %add to float
  store float %sub, float* %arrayidx31, align 4, !tbaa !0
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp eq i32 %lftr.wideiv, 3
  br i1 %exitcond, label %for.end, label %for.body27.for.body27_crit_edge

for.body27.for.body27_crit_edge:                  ; preds = %for.body27
  %phitmp = fpext float %conv48 to double
  br label %for.body27

for.end:                                          ; preds = %for.body27
  %add54 = fadd float %vtot.079, %conv48
  %13 = trunc i64 %indvars.iv.next82 to i32
  %cmp = icmp slt i32 %13, %nbonds
  br i1 %cmp, label %for.body, label %for.end55

for.end55:                                        ; preds = %for.end, %entry
  %vtot.0.lcssa = phi float [ 0.000000e+00, %entry ], [ %add54, %for.end ]
  ret float %vtot.0.lcssa
}
