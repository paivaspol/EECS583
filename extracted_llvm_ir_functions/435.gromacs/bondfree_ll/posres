define float @posres(i32 %nbonds, i32* nocapture %forceatoms, %union.t_iparams* %forceparams, [3 x float]* %x, [3 x float]* nocapture %f, %struct.t_forcerec* nocapture %fr, %struct.t_graph* nocapture %g, [3 x float]* nocapture %box, float %lambda, float* nocapture %dvdlambda, %struct.t_mdatoms* nocapture %md, i32 %ngrp, float* nocapture %egnb, float* nocapture %egcoul, %struct.t_fcdata* nocapture %fcd) #0 {
entry:
  %dx = alloca [3 x float], align 4
  call void @llvm.dbg.value(metadata !{i32 %nbonds}, i64 0, metadata !917), !dbg !2455
  call void @llvm.dbg.value(metadata !{i32* %forceatoms}, i64 0, metadata !918), !dbg !2456
  call void @llvm.dbg.value(metadata !{%union.t_iparams* %forceparams}, i64 0, metadata !919), !dbg !2456
  call void @llvm.dbg.value(metadata !{[3 x float]* %x}, i64 0, metadata !920), !dbg !2457
  call void @llvm.dbg.value(metadata !{[3 x float]* %f}, i64 0, metadata !921), !dbg !2457
  call void @llvm.dbg.value(metadata !{%struct.t_forcerec* %fr}, i64 0, metadata !922), !dbg !2457
  call void @llvm.dbg.value(metadata !{%struct.t_graph* %g}, i64 0, metadata !923), !dbg !2457
  call void @llvm.dbg.value(metadata !{[3 x float]* %box}, i64 0, metadata !924), !dbg !2458
  call void @llvm.dbg.value(metadata !{float %lambda}, i64 0, metadata !925), !dbg !2458
  call void @llvm.dbg.value(metadata !{float* %dvdlambda}, i64 0, metadata !926), !dbg !2458
  call void @llvm.dbg.value(metadata !{%struct.t_mdatoms* %md}, i64 0, metadata !927), !dbg !2459
  call void @llvm.dbg.value(metadata !{i32 %ngrp}, i64 0, metadata !928), !dbg !2459
  call void @llvm.dbg.value(metadata !{float* %egnb}, i64 0, metadata !929), !dbg !2459
  call void @llvm.dbg.value(metadata !{float* %egcoul}, i64 0, metadata !930), !dbg !2459
  call void @llvm.dbg.value(metadata !{%struct.t_fcdata* %fcd}, i64 0, metadata !931), !dbg !2460
  call void @llvm.dbg.declare(metadata !{[3 x float]* %dx}, metadata !940), !dbg !2461
  call void @llvm.dbg.value(metadata !1354, i64 0, metadata !937), !dbg !2462
  call void @llvm.dbg.value(metadata !57, i64 0, metadata !932), !dbg !2463
  %cmp78 = icmp sgt i32 %nbonds, 0, !dbg !2463
  br i1 %cmp78, label %for.body.lr.ph, label %for.end55, !dbg !2463

for.body.lr.ph:                                   ; preds = %entry
  %ePBC = getelementptr inbounds %struct.t_forcerec* %fr, i64 0, i32 0, !dbg !2465
  %arraydecay15 = getelementptr inbounds [3 x float]* %dx, i64 0, i64 0, !dbg !2467
  %arrayidx9.i = getelementptr inbounds [3 x float]* %dx, i64 0, i64 1, !dbg !2468
  %arrayidx10.i = getelementptr inbounds [3 x float]* %dx, i64 0, i64 2, !dbg !2469
  br label %for.body, !dbg !2463

for.body:                                         ; preds = %for.end, %for.body.lr.ph
  %indvars.iv81 = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next82, %for.end ]
  %vtot.079 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %add54, %for.end ]
  %0 = or i64 %indvars.iv81, 1, !dbg !2470
  %arrayidx = getelementptr inbounds i32* %forceatoms, i64 %indvars.iv81, !dbg !2470
  %1 = load i32* %arrayidx, align 4, !dbg !2470, !tbaa !1334
  call void @llvm.dbg.value(metadata !{i32 %1}, i64 0, metadata !935), !dbg !2470
  %indvars.iv.next82 = add i64 %indvars.iv81, 2, !dbg !2463
  %arrayidx3 = getelementptr inbounds i32* %forceatoms, i64 %0, !dbg !2471
  %2 = load i32* %arrayidx3, align 4, !dbg !2471, !tbaa !1334
  call void @llvm.dbg.value(metadata !{i32 %2}, i64 0, metadata !933), !dbg !2471
  %idxprom4 = sext i32 %1 to i64, !dbg !2472
  %fc6 = getelementptr inbounds %union.t_iparams* %forceparams, i64 %idxprom4, i32 0, i32 3, !dbg !2472
  call void @llvm.dbg.value(metadata !{float* %fc6}, i64 0, metadata !939), !dbg !2472
  %3 = load i32* %ePBC, align 4, !dbg !2465, !tbaa !1334
  %cmp7 = icmp eq i32 %3, 1, !dbg !2465
  %idxprom8 = sext i32 %2 to i64, !dbg !2467
  %arraydecay10 = getelementptr inbounds [3 x float]* %x, i64 %idxprom8, i64 0, !dbg !2467
  %arraydecay14 = getelementptr inbounds %union.t_iparams* %forceparams, i64 %idxprom4, i32 0, i32 0, !dbg !2467
  br i1 %cmp7, label %if.then, label %if.else, !dbg !2465

if.then:                                          ; preds = %for.body
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay10}, i64 0, metadata !2473), !dbg !2474
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay14}, i64 0, metadata !2475), !dbg !2474
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay15}, i64 0, metadata !2476), !dbg !2474
  %4 = load float* %arraydecay10, align 4, !dbg !2477, !tbaa !1309
  %5 = load float* %arraydecay14, align 4, !dbg !2477, !tbaa !1309
  %sub.i = fsub float %4, %5, !dbg !2477
  tail call void @llvm.dbg.value(metadata !{float %sub.i}, i64 0, metadata !2478), !dbg !2477
  %arrayidx2.i = getelementptr inbounds [3 x float]* %x, i64 %idxprom8, i64 1, !dbg !2479
  %6 = load float* %arrayidx2.i, align 4, !dbg !2479, !tbaa !1309
  %arrayidx3.i = getelementptr inbounds float* %arraydecay14, i64 1, !dbg !2479
  %7 = load float* %arrayidx3.i, align 4, !dbg !2479, !tbaa !1309
  %sub4.i = fsub float %6, %7, !dbg !2479
  tail call void @llvm.dbg.value(metadata !{float %sub4.i}, i64 0, metadata !2480), !dbg !2479
  %arrayidx5.i = getelementptr inbounds [3 x float]* %x, i64 %idxprom8, i64 2, !dbg !2481
  %8 = load float* %arrayidx5.i, align 4, !dbg !2481, !tbaa !1309
  %arrayidx6.i = getelementptr inbounds float* %arraydecay14, i64 2, !dbg !2481
  %9 = load float* %arrayidx6.i, align 4, !dbg !2481, !tbaa !1309
  %sub7.i = fsub float %8, %9, !dbg !2481
  tail call void @llvm.dbg.value(metadata !{float %sub7.i}, i64 0, metadata !2482), !dbg !2481
  store float %sub.i, float* %arraydecay15, align 4, !dbg !2483, !tbaa !1309
  store float %sub4.i, float* %arrayidx9.i, align 4, !dbg !2468, !tbaa !1309
  store float %sub7.i, float* %arrayidx10.i, align 4, !dbg !2469, !tbaa !1309
  br label %for.body27, !dbg !2467

if.else:                                          ; preds = %for.body
  call void @pbc_dx(float* %arraydecay10, float* %arraydecay14, float* %arraydecay15) #6, !dbg !2484
  br label %for.body27

for.body27:                                       ; preds = %if.then, %if.else, %for.body27.for.body27_crit_edge
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body27.for.body27_crit_edge ], [ 0, %if.else ], [ 0, %if.then ]
  %v.076 = phi double [ %phitmp, %for.body27.for.body27_crit_edge ], [ 0.000000e+00, %if.else ], [ 0.000000e+00, %if.then ]
  %arrayidx31 = getelementptr inbounds [3 x float]* %f, i64 %idxprom8, i64 %indvars.iv, !dbg !2485
  %10 = load float* %arrayidx31, align 4, !dbg !2485, !tbaa !1309
  %arrayidx33 = getelementptr inbounds float* %fc6, i64 %indvars.iv, !dbg !2485
  %11 = load float* %arrayidx33, align 4, !dbg !2485, !tbaa !1309
  %arrayidx35 = getelementptr inbounds [3 x float]* %dx, i64 0, i64 %indvars.iv, !dbg !2485
  %12 = load float* %arrayidx35, align 4, !dbg !2485, !tbaa !1309
  %mul = fmul float %11, %12, !dbg !2485
  %sub = fsub float %10, %mul, !dbg !2485
  call void @llvm.dbg.value(metadata !{float %sub}, i64 0, metadata !938), !dbg !2485
  %conv = fpext float %11 to double, !dbg !2488
  %mul38 = fmul double %conv, 5.000000e-01, !dbg !2488
  %conv41 = fpext float %12 to double, !dbg !2488
  %mul42 = fmul double %mul38, %conv41, !dbg !2488
  %mul46 = fmul double %conv41, %mul42, !dbg !2488
  %add = fadd double %v.076, %mul46, !dbg !2488
  %conv48 = fptrunc double %add to float, !dbg !2488
  call void @llvm.dbg.value(metadata !{float %conv48}, i64 0, metadata !936), !dbg !2488
  store float %sub, float* %arrayidx31, align 4, !dbg !2489, !tbaa !1309
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !2490
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !2490
  %exitcond = icmp eq i32 %lftr.wideiv, 3, !dbg !2490
  br i1 %exitcond, label %for.end, label %for.body27.for.body27_crit_edge, !dbg !2490

for.body27.for.body27_crit_edge:                  ; preds = %for.body27
  %phitmp = fpext float %conv48 to double, !dbg !2490
  br label %for.body27, !dbg !2490

for.end:                                          ; preds = %for.body27
  %add54 = fadd float %vtot.079, %conv48, !dbg !2491
  call void @llvm.dbg.value(metadata !{float %add54}, i64 0, metadata !937), !dbg !2491
  %13 = trunc i64 %indvars.iv.next82 to i32, !dbg !2463
  %cmp = icmp slt i32 %13, %nbonds, !dbg !2463
  br i1 %cmp, label %for.body, label %for.end55, !dbg !2463

for.end55:                                        ; preds = %for.end, %entry
  %vtot.0.lcssa = phi float [ 0.000000e+00, %entry ], [ %add54, %for.end ]
  ret float %vtot.0.lcssa, !dbg !2492
}
