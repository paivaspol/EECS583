define i32 @read_tps_conf(i8* %infile, i8* %title, %struct.t_topology* %top, [3 x float]** %x, [3 x float]** %v, [3 x float]* %box, i32 %bMass) #4 {
  %header = alloca %struct.t_tpxheader, align 4
  %t = alloca float, align 4
  %lambda = alloca float, align 4
  %natoms = alloca i32, align 4
  %step = alloca i32, align 4
  %1 = bitcast %struct.t_tpxheader* %header to i8*
  call void @llvm.lifetime.start(i64 40, i8* %1) #5
  %2 = tail call i32 @fn2ftp(i8* %infile) #8
  %.off.i = add i32 %2, -26
  %switch.i = icmp ult i32 %.off.i, 3
  %..i = zext i1 %switch.i to i32
  br i1 %switch.i, label %3, label %33

; <label>:3                                       ; preds = %0
  %4 = tail call i32 @gmx_fio_open(i8* %infile, i8* getelementptr inbounds ([2 x i8]* @.str57, i64 0, i64 0)) #8
  call fastcc void @do_tpxheader(i32 %4, i32 1, %struct.t_tpxheader* %header) #8
  call void @gmx_fio_close(i32 %4) #8
  %5 = icmp eq [3 x float]** %x, null
  br i1 %5, label %11, label %6

; <label>:6                                       ; preds = %3
  %7 = getelementptr inbounds %struct.t_tpxheader* %header, i64 0, i32 6
  %8 = load i32* %7, align 4, !tbaa !23
  %9 = call i8* @save_calloc(i8* getelementptr inbounds ([3 x i8]* @.str59, i64 0, i64 0), i8* getelementptr inbounds ([65 x i8]* @.str1, i64 0, i64 0), i32 938, i32 %8, i32 12) #8
  %10 = bitcast [3 x float]** %x to i8**
  store i8* %9, i8** %10, align 8, !tbaa !18
  br label %11

; <label>:11                                      ; preds = %3, %6
  %12 = icmp eq [3 x float]** %v, null
  br i1 %12, label %18, label %13

; <label>:13                                      ; preds = %11
  %14 = getelementptr inbounds %struct.t_tpxheader* %header, i64 0, i32 6
  %15 = load i32* %14, align 4, !tbaa !23
  %16 = call i8* @save_calloc(i8* getelementptr inbounds ([3 x i8]* @.str60, i64 0, i64 0), i8* getelementptr inbounds ([65 x i8]* @.str1, i64 0, i64 0), i32 940, i32 %15, i32 12) #8
  %17 = bitcast [3 x float]** %v to i8**
  store i8* %16, i8** %17, align 8, !tbaa !18
  br label %18

; <label>:18                                      ; preds = %11, %13
  br i1 %5, label %21, label %19

; <label>:19                                      ; preds = %18
  %20 = load [3 x float]** %x, align 8, !tbaa !18
  br label %21

; <label>:21                                      ; preds = %18, %19
  %22 = phi [3 x float]* [ %20, %19 ], [ null, %18 ]
  br i1 %12, label %25, label %23

; <label>:23                                      ; preds = %21
  %24 = load [3 x float]** %v, align 8, !tbaa !18
  br label %25

; <label>:25                                      ; preds = %21, %23
  %26 = phi [3 x float]* [ %24, %23 ], [ null, %21 ]
  %27 = call i32 @gmx_fio_open(i8* %infile, i8* getelementptr inbounds ([2 x i8]* @.str57, i64 0, i64 0)) #8
  call fastcc void @do_tpx(i32 %27, i32 1, i32* %step, float* %t, float* %lambda, %struct.t_inputrec* null, [3 x float]* %box, i32* %natoms, [3 x float]* %22, [3 x float]* %26, [3 x float]* null, %struct.t_topology* %top) #8
  call void @gmx_fio_close(i32 %27) #8
  %28 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 0
  %29 = load i8*** %28, align 8, !tbaa !34
  %30 = load i8** %29, align 8, !tbaa !18
  %31 = call i64 @llvm.objectsize.i64.p0i8(i8* %title, i1 false)
  %32 = call i8* @__strcpy_chk(i8* %title, i8* %30, i64 %31) #8
  br label %73

; <label>:33                                      ; preds = %0
  call void @get_stx_coordnum(i8* %infile, i32* %natoms) #8
  %34 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 2
  %35 = load i32* %natoms, align 4, !tbaa !22
  call void @init_t_atoms(%struct.t_atoms* %34, i32 %35, i32 0) #8
  %36 = load i32* %natoms, align 4, !tbaa !22
  %37 = call i8* @save_calloc(i8* getelementptr inbounds ([3 x i8]* @.str59, i64 0, i64 0), i8* getelementptr inbounds ([65 x i8]* @.str1, i64 0, i64 0), i32 949, i32 %36, i32 12) #8
  %38 = bitcast [3 x float]** %x to i8**
  store i8* %37, i8** %38, align 8, !tbaa !18
  %39 = icmp eq [3 x float]** %v, null
  %40 = bitcast i8* %37 to [3 x float]*
  br i1 %39, label %.thread, label %41

; <label>:41                                      ; preds = %33
  %42 = load i32* %natoms, align 4, !tbaa !22
  %43 = call i8* @save_calloc(i8* getelementptr inbounds ([3 x i8]* @.str60, i64 0, i64 0), i8* getelementptr inbounds ([65 x i8]* @.str1, i64 0, i64 0), i32 951, i32 %42, i32 12) #8
  %44 = bitcast [3 x float]** %v to i8**
  store i8* %43, i8** %44, align 8, !tbaa !18
  %.cast = bitcast i8* %43 to [3 x float]*
  %.pre = load [3 x float]** %x, align 8
  br label %.thread

.thread:                                          ; preds = %33, %41
  %45 = phi [3 x float]* [ %.pre, %41 ], [ %40, %33 ]
  %46 = phi [3 x float]* [ %.cast, %41 ], [ null, %33 ]
  call void @read_stx_conf(i8* %infile, i8* %title, %struct.t_atoms* %34, [3 x float]* %45, [3 x float]* %46, [3 x float]* %box) #8
  %47 = icmp ne i32 %bMass, 0
  %48 = load i32* %natoms, align 4
  %49 = icmp sgt i32 %48, 0
  %or.cond = and i1 %47, %49
  br i1 %or.cond, label %.lr.ph, label %.loopexit

.lr.ph:                                           ; preds = %.thread
  %50 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 2, i32 1
  %51 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 2, i32 6
  %52 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 2, i32 2
  %.pre2 = load %struct.t_atom** %50, align 8, !tbaa !40
  br label %53

; <label>:53                                      ; preds = %.lr.ph, %53
  %54 = phi %struct.t_atom* [ %.pre2, %.lr.ph ], [ %67, %53 ]
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %53 ]
  %55 = getelementptr inbounds %struct.t_atom* %54, i64 %indvars.iv, i32 7
  %56 = load i32* %55, align 4, !tbaa !41
  %57 = sext i32 %56 to i64
  %58 = load i8**** %51, align 8, !tbaa !43
  %59 = getelementptr inbounds i8*** %58, i64 %57
  %60 = load i8*** %59, align 8, !tbaa !18
  %61 = load i8** %60, align 8, !tbaa !18
  %62 = load i8**** %52, align 8, !tbaa !44
  %63 = getelementptr inbounds i8*** %62, i64 %indvars.iv
  %64 = load i8*** %63, align 8, !tbaa !18
  %65 = load i8** %64, align 8, !tbaa !18
  %66 = call float @get_mass(i8* %61, i8* %65) #8
  %67 = load %struct.t_atom** %50, align 8, !tbaa !40
  %68 = getelementptr inbounds %struct.t_atom* %67, i64 %indvars.iv, i32 0
  store float %66, float* %68, align 4, !tbaa !45
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %69 = load i32* %natoms, align 4, !tbaa !22
  %70 = sext i32 %69 to i64
  %71 = icmp slt i64 %indvars.iv.next, %70
  br i1 %71, label %53, label %.loopexit

.loopexit:                                        ; preds = %53, %.thread
  %72 = getelementptr inbounds %struct.t_topology* %top, i64 0, i32 1, i32 0
  store i32 -1, i32* %72, align 4, !tbaa !46
  br label %73

; <label>:73                                      ; preds = %.loopexit, %25
  call void @llvm.lifetime.end(i64 40, i8* %1) #5
  ret i32 %..i
}
