define internal fastcc void @output_one_frame_from_dpb() #1 {
entry:
  %poc = alloca i32, align 4
  %pos = alloca i32, align 4
  %0 = load i32* getelementptr inbounds (%struct.decoded_picture_buffer* @dpb, i64 0, i32 4), align 4, !tbaa !3
  %cmp = icmp eq i32 %0, 0
  br i1 %cmp, label %if.then, label %if.end

if.then:                                          ; preds = %entry
  call void @error(i8* getelementptr inbounds ([32 x i8]* @.str22, i64 0, i64 0), i32 150) #6
  br label %if.end

if.end:                                           ; preds = %if.then, %entry
  call fastcc void @get_smallest_poc(i32* %poc, i32* %pos) #7
  %1 = load i32* %pos, align 4, !tbaa !3
  %cmp1 = icmp eq i32 %1, -1
  br i1 %cmp1, label %if.then2, label %if.end3

if.then2:                                         ; preds = %if.end
  call void @error(i8* getelementptr inbounds ([31 x i8]* @.str23, i64 0, i64 0), i32 150) #6
  br label %if.end3

if.end3:                                          ; preds = %if.then2, %if.end
  %2 = load i32* @p_dec, align 4, !tbaa !3
  %cmp4 = icmp eq i32 %2, -1
  br i1 %cmp4, label %if.end6, label %if.then5

if.then5:                                         ; preds = %if.end3
  %idxprom = sext i32 %1 to i64
  %3 = load %struct.frame_store*** getelementptr inbounds (%struct.decoded_picture_buffer* @dpb, i64 0, i32 0), align 8, !tbaa !0
  %arrayidx = getelementptr inbounds %struct.frame_store** %3, i64 %idxprom
  %4 = load %struct.frame_store** %arrayidx, align 8, !tbaa !0
  call void @write_stored_frame(%struct.frame_store* %4, i32 %2) #6
  br label %if.end6

if.end6:                                          ; preds = %if.end3, %if.then5
  %5 = load i32* getelementptr inbounds (%struct.decoded_picture_buffer* @dpb, i64 0, i32 7), align 8, !tbaa !3
  %6 = load i32* %poc, align 4, !tbaa !3
  %cmp7 = icmp slt i32 %5, %6
  br i1 %cmp7, label %if.end9, label %if.then8

if.then8:                                         ; preds = %if.end6
  call void @error(i8* getelementptr inbounds ([38 x i8]* @.str24, i64 0, i64 0), i32 150) #6
  br label %if.end9

if.end9:                                          ; preds = %if.end6, %if.then8
  store i32 %6, i32* getelementptr inbounds (%struct.decoded_picture_buffer* @dpb, i64 0, i32 7), align 8, !tbaa !3
  %idxprom10 = sext i32 %1 to i64
  %7 = load %struct.frame_store*** getelementptr inbounds (%struct.decoded_picture_buffer* @dpb, i64 0, i32 0), align 8, !tbaa !0
  %arrayidx11 = getelementptr inbounds %struct.frame_store** %7, i64 %idxprom10
  %8 = load %struct.frame_store** %arrayidx11, align 8, !tbaa !0
  %call = call fastcc i32 @is_used_for_reference(%struct.frame_store* %8) #7
  %tobool = icmp eq i32 %call, 0
  br i1 %tobool, label %if.then12, label %if.end13

if.then12:                                        ; preds = %if.end9
  call fastcc void @remove_frame_from_dpb(i32 %1) #7
  br label %if.end13

if.end13:                                         ; preds = %if.end9, %if.then12
  ret void
}
