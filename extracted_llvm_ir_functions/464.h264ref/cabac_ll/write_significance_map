define void @write_significance_map(%struct.macroblock* nocapture %currMB, %struct.EncodingEnvironment* %eep_dp, i32 %type, i32* nocapture %coeff, i32 %coeff_ctr) #0 {
entry:
  %idxprom = sext i32 %type to i64
  %arrayidx = getelementptr inbounds [10 x i32]* @maxpos, i64 0, i64 %idxprom
  %0 = load i32* %arrayidx, align 4, !tbaa !0
  %sub = add nsw i32 %0, -1
  %1 = load %struct.ImageParameters** @img, align 8, !tbaa !3
  %structure = getelementptr inbounds %struct.ImageParameters* %1, i64 0, i32 7
  %2 = load i32* %structure, align 4, !tbaa !0
  %cmp = icmp eq i32 %2, 0
  br i1 %cmp, label %lor.rhs, label %lor.end

lor.rhs:                                          ; preds = %entry
  %mb_field = getelementptr inbounds %struct.macroblock* %currMB, i64 0, i32 22
  %3 = load i32* %mb_field, align 4, !tbaa !0
  %tobool = icmp ne i32 %3, 0
  br label %lor.end

lor.end:                                          ; preds = %entry, %lor.rhs
  %4 = phi i1 [ true, %entry ], [ %tobool, %lor.rhs ]
  %arrayidx3 = getelementptr inbounds [10 x i32]* @type2ctx_last, i64 0, i64 %idxprom
  %5 = load i32* %arrayidx3, align 4, !tbaa !0
  %idxprom4 = sext i32 %5 to i64
  %currentSlice = getelementptr inbounds %struct.ImageParameters* %1, i64 0, i32 50
  %6 = load %struct.Slice** %currentSlice, align 8, !tbaa !3
  %tex_ctx = getelementptr inbounds %struct.Slice* %6, i64 0, i32 8
  %7 = load %struct.TextureInfoContexts** %tex_ctx, align 8, !tbaa !3
  %fld_map_contexts = getelementptr inbounds %struct.TextureInfoContexts* %7, i64 0, i32 8
  %map_contexts = getelementptr inbounds %struct.TextureInfoContexts* %7, i64 0, i32 4
  %fld_map_contexts.sink = select i1 %4, [10 x [15 x %struct.BiContextType]]* %fld_map_contexts, [10 x [15 x %struct.BiContextType]]* %map_contexts
  %arrayidx16 = getelementptr inbounds [10 x i32]* @type2ctx_last, i64 0, i64 %idxprom
  %8 = load i32* %arrayidx16, align 4, !tbaa !0
  %idxprom17 = sext i32 %8 to i64
  %fld_last_contexts = getelementptr inbounds %struct.TextureInfoContexts* %7, i64 0, i32 9
  %last_contexts = getelementptr inbounds %struct.TextureInfoContexts* %7, i64 0, i32 5
  %fld_last_contexts.sink = select i1 %4, [10 x [15 x %struct.BiContextType]]* %fld_last_contexts, [10 x [15 x %struct.BiContextType]]* %last_contexts
  switch i32 %type, label %if.end [
    i32 7, label %if.then
    i32 1, label %if.then
  ]

if.then:                                          ; preds = %lor.end, %lor.end
  %incdec.ptr = getelementptr inbounds i32* %coeff, i64 -1
  br label %if.end

if.end:                                           ; preds = %lor.end, %if.then
  %k0.0 = phi i16 [ 0, %lor.end ], [ 1, %if.then ]
  %k1.0 = phi i32 [ %sub, %lor.end ], [ %0, %if.then ]
  %coeff.addr.0 = phi i32* [ %coeff, %lor.end ], [ %incdec.ptr, %if.then ]
  %conv36101105 = zext i16 %k0.0 to i32
  %cmp37102 = icmp slt i32 %conv36101105, %k1.0
  br i1 %cmp37102, label %for.body.lr.ph, label %for.end

for.body.lr.ph:                                   ; preds = %if.end
  %mb_field48 = getelementptr inbounds %struct.macroblock* %currMB, i64 0, i32 22
  %arrayidx57 = getelementptr inbounds [10 x i32*]* @pos2ctx_map, i64 0, i64 %idxprom
  %arrayidx70 = getelementptr inbounds [10 x i32*]* @pos2ctx_last, i64 0, i64 %idxprom
  %arrayidx53 = getelementptr inbounds [10 x i32*]* @pos2ctx_map_int, i64 0, i64 %idxprom
  br label %for.body

for.body:                                         ; preds = %for.inc.for.body_crit_edge, %for.body.lr.ph
  %9 = phi i32 [ %2, %for.body.lr.ph ], [ %.pre106, %for.inc.for.body_crit_edge ]
  %coeff_ctr.addr.0104 = phi i32 [ %coeff_ctr, %for.body.lr.ph ], [ %coeff_ctr.addr.1, %for.inc.for.body_crit_edge ]
  %k.0103 = phi i16 [ %k0.0, %for.body.lr.ph ], [ %inc78, %for.inc.for.body_crit_edge ]
  %idxprom39 = sext i16 %k.0103 to i64
  %arrayidx40 = getelementptr inbounds i32* %coeff.addr.0, i64 %idxprom39
  %10 = load i32* %arrayidx40, align 4, !tbaa !0
  %cmp41 = icmp ne i32 %10, 0
  %conv44 = zext i1 %cmp41 to i16
  %cmp46 = icmp eq i32 %9, 0
  br i1 %cmp46, label %lor.lhs.false, label %if.then50

lor.lhs.false:                                    ; preds = %for.body
  %11 = load i32* %mb_field48, align 4, !tbaa !0
  %tobool49 = icmp eq i32 %11, 0
  br i1 %tobool49, label %if.else, label %if.then50

if.then50:                                        ; preds = %lor.lhs.false, %for.body
  %12 = load i32** %arrayidx53, align 8, !tbaa !3
  %arrayidx54 = getelementptr inbounds i32* %12, i64 %idxprom39
  %13 = load i32* %arrayidx54, align 4, !tbaa !0
  %idx.ext = sext i32 %13 to i64
  %add.ptr = getelementptr inbounds [10 x [15 x %struct.BiContextType]]* %fld_map_contexts.sink, i64 0, i64 %idxprom4, i64 %idx.ext
  tail call void @biari_encode_symbol(%struct.EncodingEnvironment* %eep_dp, i16 signext %conv44, %struct.BiContextType* %add.ptr) #5
  br label %if.end61

if.else:                                          ; preds = %lor.lhs.false
  %14 = load i32** %arrayidx57, align 8, !tbaa !3
  %arrayidx58 = getelementptr inbounds i32* %14, i64 %idxprom39
  %15 = load i32* %arrayidx58, align 4, !tbaa !0
  %idx.ext59 = sext i32 %15 to i64
  %add.ptr60 = getelementptr inbounds [10 x [15 x %struct.BiContextType]]* %fld_map_contexts.sink, i64 0, i64 %idxprom4, i64 %idx.ext59
  tail call void @biari_encode_symbol(%struct.EncodingEnvironment* %eep_dp, i16 signext %conv44, %struct.BiContextType* %add.ptr60) #5
  br label %if.end61

if.end61:                                         ; preds = %if.else, %if.then50
  br i1 %cmp41, label %if.then63, label %for.inc

if.then63:                                        ; preds = %if.end61
  %dec = add nsw i32 %coeff_ctr.addr.0104, -1
  %cmp64 = icmp eq i32 %dec, 0
  %conv67 = zext i1 %cmp64 to i16
  %16 = load i32** %arrayidx70, align 8, !tbaa !3
  %arrayidx71 = getelementptr inbounds i32* %16, i64 %idxprom39
  %17 = load i32* %arrayidx71, align 4, !tbaa !0
  %idx.ext72 = sext i32 %17 to i64
  %add.ptr73 = getelementptr inbounds [10 x [15 x %struct.BiContextType]]* %fld_last_contexts.sink, i64 0, i64 %idxprom17, i64 %idx.ext72
  tail call void @biari_encode_symbol(%struct.EncodingEnvironment* %eep_dp, i16 signext %conv67, %struct.BiContextType* %add.ptr73) #5
  br i1 %cmp64, label %for.end, label %for.inc

for.inc:                                          ; preds = %if.end61, %if.then63
  %coeff_ctr.addr.1 = phi i32 [ %dec, %if.then63 ], [ %coeff_ctr.addr.0104, %if.end61 ]
  %inc78 = add i16 %k.0103, 1
  %conv36 = sext i16 %inc78 to i32
  %cmp37 = icmp slt i32 %conv36, %k1.0
  br i1 %cmp37, label %for.inc.for.body_crit_edge, label %for.end

for.inc.for.body_crit_edge:                       ; preds = %for.inc
  %.pre = load %struct.ImageParameters** @img, align 8, !tbaa !3
  %structure45.phi.trans.insert = getelementptr inbounds %struct.ImageParameters* %.pre, i64 0, i32 7
  %.pre106 = load i32* %structure45.phi.trans.insert, align 4, !tbaa !0
  br label %for.body

for.end:                                          ; preds = %for.inc, %if.then63, %if.end
  ret void
}
