define i32 @FastSubPelBlockMotionSearch(i16** nocapture %orig_pic, i16 signext %ref, i32 %list, i32 %pic_pix_x, i32 %pic_pix_y, i32 %blocktype, i16 signext %pred_mv_x, i16 signext %pred_mv_y, i16* nocapture %mv_x, i16* nocapture %mv_y, i32 %search_pos2, i32 %search_pos4, i32 %min_mcost, double %lambda, i32 %useABT) #0 {
entry:
  %0 = load %struct.ImageParameters** @img, align 8, !tbaa !3
  %MbaffFrameFlag = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 90
  %1 = load i32* %MbaffFrameFlag, align 4, !tbaa !4
  %tobool = icmp eq i32 %1, 0
  br i1 %tobool, label %cond.end, label %land.lhs.true

land.lhs.true:                                    ; preds = %entry
  %current_mb_nr = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 3
  %2 = load i32* %current_mb_nr, align 4, !tbaa !4
  %idxprom = sext i32 %2 to i64
  %mb_data = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 51
  %3 = load %struct.macroblock** %mb_data, align 8, !tbaa !3
  %mb_field = getelementptr inbounds %struct.macroblock* %3, i64 %idxprom, i32 22
  %4 = load i32* %mb_field, align 4, !tbaa !4
  %tobool1 = icmp eq i32 %4, 0
  br i1 %tobool1, label %cond.end, label %cond.true

cond.true:                                        ; preds = %land.lhs.true
  %rem341 = shl i32 %2, 1
  %5 = and i32 %rem341, 2
  %6 = add i32 %5, 2
  br label %cond.end

cond.end:                                         ; preds = %land.lhs.true, %entry, %cond.true
  %cond4 = phi i32 [ %6, %cond.true ], [ 0, %land.lhs.true ], [ 0, %entry ]
  %idxprom5 = sext i16 %ref to i64
  %add = add nsw i32 %cond4, %list
  %idxprom6 = sext i32 %add to i64
  %arrayidx7 = getelementptr inbounds [6 x %struct.storable_picture**]* @listX, i64 0, i64 %idxprom6
  %7 = load %struct.storable_picture*** %arrayidx7, align 8, !tbaa !3
  %arrayidx8 = getelementptr inbounds %struct.storable_picture** %7, i64 %idxprom5
  %8 = load %struct.storable_picture** %arrayidx8, align 8, !tbaa !3
  %mul = fmul double %lambda, 6.553600e+04
  %add9 = fadd double %mul, 5.000000e-01
  %conv = fptosi double %add9 to i32
  %idxprom10 = sext i32 %blocktype to i64
  %9 = load %struct.InputParameters** @input, align 8, !tbaa !3
  %arrayidx12 = getelementptr inbounds %struct.InputParameters* %9, i64 0, i32 20, i64 %idxprom10, i64 0
  %10 = load i32* %arrayidx12, align 4, !tbaa !4
  %arrayidx16 = getelementptr inbounds %struct.InputParameters* %9, i64 0, i32 20, i64 %idxprom10, i64 1
  %11 = load i32* %arrayidx16, align 4, !tbaa !4
  %shl = shl i32 %pic_pix_x, 2
  %shl17 = shl i32 %pic_pix_y, 2
  %size_x = getelementptr inbounds %struct.storable_picture* %8, i64 0, i32 18
  %12 = load i32* %size_x, align 4, !tbaa !4
  %size_y = getelementptr inbounds %struct.storable_picture* %8, i64 0, i32 19
  %13 = load i32* %size_y, align 4, !tbaa !4
  %sub20 = sub nsw i32 %13, %11
  %add21 = shl i32 %sub20, 2
  %14 = load i16* %mv_x, align 2, !tbaa !5
  %shl24 = shl i16 %14, 2
  store i16 %shl24, i16* %mv_x, align 2, !tbaa !5
  %15 = load i16* %mv_y, align 2, !tbaa !5
  %shl27 = shl i16 %15, 2
  store i16 %shl27, i16* %mv_y, align 2, !tbaa !5
  %16 = load i16* %mv_x, align 2, !tbaa !5
  %conv29 = sext i16 %16 to i32
  %add30 = add nsw i32 %conv29, %shl
  %cmp = icmp sgt i32 %add30, 1
  br i1 %cmp, label %land.lhs.true32, label %if.else

land.lhs.true32:                                  ; preds = %cond.end
  %sub = sub nsw i32 %12, %10
  %add18 = shl i32 %sub, 2
  %sub35339 = or i32 %add18, 2
  %cmp36 = icmp slt i32 %add30, %sub35339
  br i1 %cmp36, label %land.lhs.true38, label %if.else

land.lhs.true38:                                  ; preds = %land.lhs.true32
  %conv39 = sext i16 %shl27 to i32
  %add40 = add nsw i32 %conv39, %shl17
  %cmp41 = icmp sgt i32 %add40, 1
  br i1 %cmp41, label %land.lhs.true43, label %if.else

land.lhs.true43:                                  ; preds = %land.lhs.true38
  %sub46340 = or i32 %add21, 2
  %cmp47 = icmp slt i32 %add40, %sub46340
  br i1 %cmp47, label %if.end, label %if.else

if.else:                                          ; preds = %land.lhs.true43, %land.lhs.true38, %land.lhs.true32, %cond.end
  %conv54.pre = sext i16 %shl27 to i32
  br label %if.end

if.end:                                           ; preds = %land.lhs.true43, %if.else
  %conv54.pre-phi = phi i32 [ %conv39, %land.lhs.true43 ], [ %conv54.pre, %if.else ]
  %storemerge = phi i16 (i16**, i32, i32, i32, i32)* [ @FastPelY_14, %land.lhs.true43 ], [ @UMVPelY_14, %if.else ]
  store i16 (i16**, i32, i32, i32, i32)* %storemerge, i16 (i16**, i32, i32, i32, i32)** @PelY_14, align 8, !tbaa !3
  %conv49 = sext i16 %pred_mv_x to i32
  %sub51 = sub nsw i32 %conv49, %conv29
  %rem52 = srem i32 %sub51, 4
  %conv53 = sext i16 %pred_mv_y to i32
  %sub55 = sub nsw i32 %conv53, %conv54.pre-phi
  %rem56 = srem i32 %sub55, 4
  %17 = load i8*** @SearchState, align 8, !tbaa !3
  %18 = load i8** %17, align 8, !tbaa !3
  tail call void @llvm.memset.p0i8.i64(i8* %18, i8 0, i64 49, i32 1, i1 false)
  %19 = load %struct.InputParameters** @input, align 8, !tbaa !3
  %hadamard = getelementptr inbounds %struct.InputParameters* %19, i64 0, i32 6
  %20 = load i32* %hadamard, align 4, !tbaa !4
  %tobool70 = icmp eq i32 %20, 0
  br i1 %tobool70, label %if.else94, label %if.then71

if.then71:                                        ; preds = %if.end
  %21 = load i16* %mv_x, align 2, !tbaa !5
  %conv72 = sext i16 %21 to i32
  %22 = load i16* %mv_y, align 2, !tbaa !5
  %conv73 = sext i16 %22 to i32
  %sub76 = sub nsw i32 %conv72, %conv49
  %idxprom77 = sext i32 %sub76 to i64
  %23 = load i32** @mvbits, align 8, !tbaa !3
  %arrayidx78 = getelementptr inbounds i32* %23, i64 %idxprom77
  %24 = load i32* %arrayidx78, align 4, !tbaa !4
  %sub81 = sub nsw i32 %conv73, %conv53
  %idxprom82 = sext i32 %sub81 to i64
  %arrayidx83 = getelementptr inbounds i32* %23, i64 %idxprom82
  %25 = load i32* %arrayidx83, align 4, !tbaa !4
  %add84 = add nsw i32 %25, %24
  %mul85 = mul nsw i32 %add84, %conv
  %shr = ashr i32 %mul85, 16
  %call = tail call i32 @AddUpSADQuarter(i32 %pic_pix_x, i32 %pic_pix_y, i32 %10, i32 %11, i32 %conv72, i32 %conv73, %struct.storable_picture* %8, i16** %orig_pic, i32 %shr, i32 %min_mcost, i32 %useABT) #4
  %26 = load i8*** @SearchState, align 8, !tbaa !3
  %arrayidx88 = getelementptr inbounds i8** %26, i64 3
  %27 = load i8** %arrayidx88, align 8, !tbaa !3
  %arrayidx89 = getelementptr inbounds i8* %27, i64 3
  store i8 1, i8* %arrayidx89, align 1, !tbaa !1
  %cmp90 = icmp slt i32 %call, %min_mcost
  %conv72. = select i1 %cmp90, i32 %conv72, i32 0
  %conv73. = select i1 %cmp90, i32 %conv73, i32 0
  %call.min_mcost = select i1 %cmp90, i32 %call, i32 %min_mcost
  br label %if.end101

if.else94:                                        ; preds = %if.end
  %28 = load i8*** @SearchState, align 8, !tbaa !3
  %arrayidx97 = getelementptr inbounds i8** %28, i64 3
  %29 = load i8** %arrayidx97, align 8, !tbaa !3
  %arrayidx98 = getelementptr inbounds i8* %29, i64 3
  store i8 1, i8* %arrayidx98, align 1, !tbaa !1
  %30 = load i16* %mv_x, align 2, !tbaa !5
  %conv99 = sext i16 %30 to i32
  %31 = load i16* %mv_y, align 2, !tbaa !5
  %conv100 = sext i16 %31 to i32
  br label %if.end101

if.end101:                                        ; preds = %if.then71, %if.else94
  %currmv_x.0 = phi i32 [ %conv99, %if.else94 ], [ %conv72., %if.then71 ]
  %currmv_y.0 = phi i32 [ %conv100, %if.else94 ], [ %conv73., %if.then71 ]
  %min_mcost.addr.0 = phi i32 [ %min_mcost, %if.else94 ], [ %call.min_mcost, %if.then71 ]
  %32 = or i32 %rem56, %rem52
  %33 = icmp eq i32 %32, 0
  br i1 %33, label %for.cond144.preheader, label %if.then106

if.then106:                                       ; preds = %if.end101
  %34 = load i16* %mv_x, align 2, !tbaa !5
  %conv107 = sext i16 %34 to i32
  %add108 = add nsw i32 %conv107, %rem52
  %35 = load i16* %mv_y, align 2, !tbaa !5
  %conv109 = sext i16 %35 to i32
  %add110 = add nsw i32 %conv109, %rem56
  %sub113 = sub nsw i32 %add108, %conv49
  %idxprom114 = sext i32 %sub113 to i64
  %36 = load i32** @mvbits, align 8, !tbaa !3
  %arrayidx115 = getelementptr inbounds i32* %36, i64 %idxprom114
  %37 = load i32* %arrayidx115, align 4, !tbaa !4
  %sub118 = sub nsw i32 %add110, %conv53
  %idxprom119 = sext i32 %sub118 to i64
  %arrayidx120 = getelementptr inbounds i32* %36, i64 %idxprom119
  %38 = load i32* %arrayidx120, align 4, !tbaa !4
  %add121 = add nsw i32 %38, %37
  %mul122 = mul nsw i32 %add121, %conv
  %shr123 = ashr i32 %mul122, 16
  %call124 = tail call i32 @AddUpSADQuarter(i32 %pic_pix_x, i32 %pic_pix_y, i32 %10, i32 %11, i32 %add108, i32 %add110, %struct.storable_picture* %8, i16** %orig_pic, i32 %shr123, i32 %min_mcost.addr.0, i32 %useABT) #4
  %39 = load i16* %mv_x, align 2, !tbaa !5
  %conv125 = sext i16 %39 to i32
  %sub126 = add i32 %add108, 3
  %add127 = sub i32 %sub126, %conv125
  %idxprom128 = sext i32 %add127 to i64
  %40 = load i16* %mv_y, align 2, !tbaa !5
  %conv129 = sext i16 %40 to i32
  %sub130 = add i32 %add110, 3
  %add131 = sub i32 %sub130, %conv129
  %idxprom132 = sext i32 %add131 to i64
  %41 = load i8*** @SearchState, align 8, !tbaa !3
  %arrayidx133 = getelementptr inbounds i8** %41, i64 %idxprom132
  %42 = load i8** %arrayidx133, align 8, !tbaa !3
  %arrayidx134 = getelementptr inbounds i8* %42, i64 %idxprom128
  store i8 1, i8* %arrayidx134, align 1, !tbaa !1
  %cmp135 = icmp slt i32 %call124, %min_mcost.addr.0
  %add108.currmv_x.0 = select i1 %cmp135, i32 %add108, i32 %currmv_x.0
  %add110.currmv_y.0 = select i1 %cmp135, i32 %add110, i32 %currmv_y.0
  %call124.min_mcost.addr.0 = select i1 %cmp135, i32 %call124, i32 %min_mcost.addr.0
  br label %for.cond144.preheader

for.cond144.preheader:                            ; preds = %if.then106, %if.end101, %for.end
  %min_mcost.addr.2350 = phi i32 [ %min_mcost.addr.4, %for.end ], [ %call124.min_mcost.addr.0, %if.then106 ], [ %min_mcost.addr.0, %if.end101 ]
  %currmv_x.2349 = phi i32 [ %currmv_x.4, %for.end ], [ %add108.currmv_x.0, %if.then106 ], [ %currmv_x.0, %if.end101 ]
  %iYMinNow.0348 = phi i32 [ %currmv_y.4, %for.end ], [ %add110.currmv_y.0, %if.then106 ], [ %currmv_y.0, %if.end101 ]
  %i.0347 = phi i32 [ %inc212, %for.end ], [ 0, %if.then106 ], [ 0, %if.end101 ]
  br label %for.body147

for.body147:                                      ; preds = %for.inc, %for.cond144.preheader
  %indvars.iv = phi i64 [ 0, %for.cond144.preheader ], [ %indvars.iv.next, %for.inc ]
  %min_mcost.addr.3346 = phi i32 [ %min_mcost.addr.2350, %for.cond144.preheader ], [ %min_mcost.addr.4, %for.inc ]
  %abort_search.0345 = phi i32 [ 1, %for.cond144.preheader ], [ %abort_search.1, %for.inc ]
  %currmv_y.3344 = phi i32 [ %iYMinNow.0348, %for.cond144.preheader ], [ %currmv_y.4, %for.inc ]
  %currmv_x.3343 = phi i32 [ %currmv_x.2349, %for.cond144.preheader ], [ %currmv_x.4, %for.inc ]
  %arrayidx149 = getelementptr inbounds [4 x i32]* @FastSubPelBlockMotionSearch.Diamond_x, i64 0, i64 %indvars.iv
  %43 = load i32* %arrayidx149, align 4, !tbaa !4
  %add150 = add nsw i32 %43, %currmv_x.2349
  %arrayidx152 = getelementptr inbounds [4 x i32]* @FastSubPelBlockMotionSearch.Diamond_y, i64 0, i64 %indvars.iv
  %44 = load i32* %arrayidx152, align 4, !tbaa !4
  %add153 = add nsw i32 %44, %iYMinNow.0348
  %45 = load i16* %mv_x, align 2, !tbaa !5
  %conv154 = sext i16 %45 to i32
  %sub155 = sub nsw i32 %add150, %conv154
  %ispos = icmp sgt i32 %sub155, -1
  %neg = sub i32 0, %sub155
  %46 = select i1 %ispos, i32 %sub155, i32 %neg
  %cmp157 = icmp slt i32 %46, 4
  br i1 %cmp157, label %land.lhs.true159, label %for.inc

land.lhs.true159:                                 ; preds = %for.body147
  %47 = load i16* %mv_y, align 2, !tbaa !5
  %conv160 = sext i16 %47 to i32
  %sub161 = sub nsw i32 %add153, %conv160
  %ispos337 = icmp sgt i32 %sub161, -1
  %neg338 = sub i32 0, %sub161
  %48 = select i1 %ispos337, i32 %sub161, i32 %neg338
  %cmp163 = icmp slt i32 %48, 4
  br i1 %cmp163, label %if.then165, label %for.inc

if.then165:                                       ; preds = %land.lhs.true159
  %add168 = add nsw i32 %sub155, 3
  %idxprom169 = sext i32 %add168 to i64
  %add172 = add nsw i32 %sub161, 3
  %idxprom173 = sext i32 %add172 to i64
  %49 = load i8*** @SearchState, align 8, !tbaa !3
  %arrayidx174 = getelementptr inbounds i8** %49, i64 %idxprom173
  %50 = load i8** %arrayidx174, align 8, !tbaa !3
  %arrayidx175 = getelementptr inbounds i8* %50, i64 %idxprom169
  %51 = load i8* %arrayidx175, align 1, !tbaa !1
  %tobool176 = icmp eq i8 %51, 0
  br i1 %tobool176, label %if.then177, label %for.inc

if.then177:                                       ; preds = %if.then165
  %sub180 = sub nsw i32 %add150, %conv49
  %idxprom181 = sext i32 %sub180 to i64
  %52 = load i32** @mvbits, align 8, !tbaa !3
  %arrayidx182 = getelementptr inbounds i32* %52, i64 %idxprom181
  %53 = load i32* %arrayidx182, align 4, !tbaa !4
  %sub185 = sub nsw i32 %add153, %conv53
  %idxprom186 = sext i32 %sub185 to i64
  %arrayidx187 = getelementptr inbounds i32* %52, i64 %idxprom186
  %54 = load i32* %arrayidx187, align 4, !tbaa !4
  %add188 = add nsw i32 %54, %53
  %mul189 = mul nsw i32 %add188, %conv
  %shr190 = ashr i32 %mul189, 16
  %call191 = tail call i32 @AddUpSADQuarter(i32 %pic_pix_x, i32 %pic_pix_y, i32 %10, i32 %11, i32 %add150, i32 %add153, %struct.storable_picture* %8, i16** %orig_pic, i32 %shr190, i32 %min_mcost.addr.3346, i32 %useABT) #4
  %55 = load i16* %mv_x, align 2, !tbaa !5
  %conv192 = sext i16 %55 to i32
  %sub193 = add i32 %add150, 3
  %add194 = sub i32 %sub193, %conv192
  %idxprom195 = sext i32 %add194 to i64
  %56 = load i16* %mv_y, align 2, !tbaa !5
  %conv196 = sext i16 %56 to i32
  %sub197 = add i32 %add153, 3
  %add198 = sub i32 %sub197, %conv196
  %idxprom199 = sext i32 %add198 to i64
  %57 = load i8*** @SearchState, align 8, !tbaa !3
  %arrayidx200 = getelementptr inbounds i8** %57, i64 %idxprom199
  %58 = load i8** %arrayidx200, align 8, !tbaa !3
  %arrayidx201 = getelementptr inbounds i8* %58, i64 %idxprom195
  store i8 1, i8* %arrayidx201, align 1, !tbaa !1
  %cmp202 = icmp slt i32 %call191, %min_mcost.addr.3346
  %add150.currmv_x.3 = select i1 %cmp202, i32 %add150, i32 %currmv_x.3343
  %add153.currmv_y.3 = select i1 %cmp202, i32 %add153, i32 %currmv_y.3344
  %.abort_search.0 = select i1 %cmp202, i32 0, i32 %abort_search.0345
  %call191.min_mcost.addr.3 = select i1 %cmp202, i32 %call191, i32 %min_mcost.addr.3346
  br label %for.inc

for.inc:                                          ; preds = %if.then177, %if.then165, %for.body147, %land.lhs.true159
  %currmv_x.4 = phi i32 [ %currmv_x.3343, %if.then165 ], [ %currmv_x.3343, %land.lhs.true159 ], [ %currmv_x.3343, %for.body147 ], [ %add150.currmv_x.3, %if.then177 ]
  %currmv_y.4 = phi i32 [ %currmv_y.3344, %if.then165 ], [ %currmv_y.3344, %land.lhs.true159 ], [ %currmv_y.3344, %for.body147 ], [ %add153.currmv_y.3, %if.then177 ]
  %abort_search.1 = phi i32 [ %abort_search.0345, %if.then165 ], [ %abort_search.0345, %land.lhs.true159 ], [ %abort_search.0345, %for.body147 ], [ %.abort_search.0, %if.then177 ]
  %min_mcost.addr.4 = phi i32 [ %min_mcost.addr.3346, %if.then165 ], [ %min_mcost.addr.3346, %land.lhs.true159 ], [ %min_mcost.addr.3346, %for.body147 ], [ %call191.min_mcost.addr.3, %if.then177 ]
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp eq i32 %lftr.wideiv, 4
  br i1 %exitcond, label %for.end, label %for.body147

for.end:                                          ; preds = %for.inc
  %tobool208 = icmp eq i32 %abort_search.1, 0
  %inc212 = add nsw i32 %i.0347, 1
  %cmp142 = icmp slt i32 %inc212, 7
  %or.cond = and i1 %tobool208, %cmp142
  br i1 %or.cond, label %for.cond144.preheader, label %for.end213

for.end213:                                       ; preds = %for.end
  %conv214 = trunc i32 %currmv_x.4 to i16
  store i16 %conv214, i16* %mv_x, align 2, !tbaa !5
  %conv215 = trunc i32 %currmv_y.4 to i16
  store i16 %conv215, i16* %mv_y, align 2, !tbaa !5
  ret i32 %min_mcost.addr.4
}
