define void @MADModelEstimator(i32 %n_windowSize) #0 {
entry:
  %cmp157 = icmp sgt i32 %n_windowSize, 0
  br i1 %cmp157, label %for.body, label %for.end.thread

for.end.thread:                                   ; preds = %entry
  store double 0.000000e+00, double* @MADPictureC2, align 8, !tbaa !4
  store double 0.000000e+00, double* @MADPictureC1, align 8, !tbaa !4
  br label %if.end88

for.body:                                         ; preds = %entry, %for.body
  %indvars.iv169 = phi i64 [ %indvars.iv.next170, %for.body ], [ 0, %entry ]
  %n_realSize.0159 = phi i32 [ %n_realSize.0.dec, %for.body ], [ %n_windowSize, %entry ]
  %arrayidx = getelementptr inbounds [21 x i32]* @PictureRejected, i64 0, i64 %indvars.iv169
  %0 = load i32* %arrayidx, align 4, !tbaa !1
  %not.tobool = icmp ne i32 %0, 0
  %dec = sext i1 %not.tobool to i32
  %n_realSize.0.dec = add nsw i32 %dec, %n_realSize.0159
  %indvars.iv.next170 = add i64 %indvars.iv169, 1
  %lftr.wideiv171 = trunc i64 %indvars.iv.next170 to i32
  %exitcond172 = icmp eq i32 %lftr.wideiv171, %n_windowSize
  br i1 %exitcond172, label %for.end, label %for.body

for.end:                                          ; preds = %for.body
  store double 0.000000e+00, double* @MADPictureC2, align 8, !tbaa !4
  store double 0.000000e+00, double* @MADPictureC1, align 8, !tbaa !4
  br i1 %cmp157, label %for.body3, label %if.end88

for.cond14.preheader:                             ; preds = %for.inc11
  br i1 %cmp157, label %for.body16.lr.ph, label %if.end88

for.body16.lr.ph:                                 ; preds = %for.cond14.preheader
  %conv = sitofp i32 %n_realSize.0.dec to double
  br label %for.body16

for.body3:                                        ; preds = %for.end, %for.inc11
  %indvars.iv165 = phi i64 [ %indvars.iv.next166, %for.inc11 ], [ 0, %for.end ]
  %oneSampleQ.0155 = phi double [ %oneSampleQ.1, %for.inc11 ], [ undef, %for.end ]
  %arrayidx5 = getelementptr inbounds [21 x i32]* @PictureRejected, i64 0, i64 %indvars.iv165
  %1 = load i32* %arrayidx5, align 4, !tbaa !1
  %tobool6 = icmp eq i32 %1, 0
  br i1 %tobool6, label %if.then7, label %for.inc11

if.then7:                                         ; preds = %for.body3
  %arrayidx9 = getelementptr inbounds [21 x double]* @PictureMAD, i64 0, i64 %indvars.iv165
  %2 = load double* %arrayidx9, align 8, !tbaa !4
  br label %for.inc11

for.inc11:                                        ; preds = %for.body3, %if.then7
  %oneSampleQ.1 = phi double [ %oneSampleQ.0155, %for.body3 ], [ %2, %if.then7 ]
  %indvars.iv.next166 = add i64 %indvars.iv165, 1
  %lftr.wideiv167 = trunc i64 %indvars.iv.next166 to i32
  %exitcond168 = icmp eq i32 %lftr.wideiv167, %n_windowSize
  br i1 %exitcond168, label %for.cond14.preheader, label %for.body3

for.body16:                                       ; preds = %for.inc34, %for.body16.lr.ph
  %3 = phi double [ 0.000000e+00, %for.body16.lr.ph ], [ %7, %for.inc34 ]
  %indvars.iv161 = phi i64 [ 0, %for.body16.lr.ph ], [ %indvars.iv.next162, %for.inc34 ]
  %estimateX2.0151 = phi i32 [ 0, %for.body16.lr.ph ], [ %estimateX2.1, %for.inc34 ]
  %arrayidx18 = getelementptr inbounds [21 x double]* @PictureMAD, i64 0, i64 %indvars.iv161
  %4 = load double* %arrayidx18, align 8, !tbaa !4
  %cmp19 = fcmp une double %4, %oneSampleQ.1
  %arrayidx21 = getelementptr inbounds [21 x i32]* @PictureRejected, i64 0, i64 %indvars.iv161
  %5 = load i32* %arrayidx21, align 4, !tbaa !1
  br i1 %cmp19, label %land.lhs.true, label %if.end24

land.lhs.true:                                    ; preds = %for.body16
  %tobool22 = icmp eq i32 %5, 0
  %.estimateX2.0 = select i1 %tobool22, i32 1, i32 %estimateX2.0151
  br label %if.end24

if.end24:                                         ; preds = %for.body16, %land.lhs.true
  %estimateX2.1 = phi i32 [ %.estimateX2.0, %land.lhs.true ], [ %estimateX2.0151, %for.body16 ]
  %tobool27 = icmp eq i32 %5, 0
  br i1 %tobool27, label %if.then28, label %for.inc34

if.then28:                                        ; preds = %if.end24
  %arrayidx32 = getelementptr inbounds [21 x double]* @ReferenceMAD, i64 0, i64 %indvars.iv161
  %6 = load double* %arrayidx32, align 8, !tbaa !4
  %mul = fmul double %conv, %6
  %div = fdiv double %4, %mul
  %add = fadd double %div, %3
  store double %add, double* @MADPictureC1, align 8, !tbaa !4
  br label %for.inc34

for.inc34:                                        ; preds = %if.end24, %if.then28
  %7 = phi double [ %3, %if.end24 ], [ %add, %if.then28 ]
  %indvars.iv.next162 = add i64 %indvars.iv161, 1
  %lftr.wideiv163 = trunc i64 %indvars.iv.next162 to i32
  %exitcond164 = icmp eq i32 %lftr.wideiv163, %n_windowSize
  br i1 %exitcond164, label %for.end36, label %for.body16

for.end36:                                        ; preds = %for.inc34
  %cmp37 = icmp slt i32 %n_realSize.0.dec, 1
  %tobool40 = icmp eq i32 %estimateX2.1, 0
  %or.cond = or i1 %cmp37, %tobool40
  br i1 %or.cond, label %if.end88, label %for.cond42.preheader

for.cond42.preheader:                             ; preds = %for.end36
  br i1 %cmp157, label %for.body45, label %for.end72

for.body45:                                       ; preds = %for.cond42.preheader, %for.inc70
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.inc70 ], [ 0, %for.cond42.preheader ]
  %b1.0143 = phi double [ %b1.1, %for.inc70 ], [ 0.000000e+00, %for.cond42.preheader ]
  %b0.0142 = phi double [ %b0.1, %for.inc70 ], [ 0.000000e+00, %for.cond42.preheader ]
  %a11.0141 = phi double [ %a11.1, %for.inc70 ], [ 0.000000e+00, %for.cond42.preheader ]
  %a10.0140 = phi double [ %a10.1, %for.inc70 ], [ 0.000000e+00, %for.cond42.preheader ]
  %a01.0139 = phi double [ %a01.1, %for.inc70 ], [ 0.000000e+00, %for.cond42.preheader ]
  %a00.0138 = phi double [ %a00.1, %for.inc70 ], [ 0.000000e+00, %for.cond42.preheader ]
  %arrayidx47 = getelementptr inbounds [21 x i32]* @PictureRejected, i64 0, i64 %indvars.iv
  %8 = load i32* %arrayidx47, align 4, !tbaa !1
  %tobool48 = icmp eq i32 %8, 0
  br i1 %tobool48, label %if.then49, label %for.inc70

if.then49:                                        ; preds = %for.body45
  %add50 = fadd double %a00.0138, 1.000000e+00
  %arrayidx52 = getelementptr inbounds [21 x double]* @ReferenceMAD, i64 0, i64 %indvars.iv
  %9 = load double* %arrayidx52, align 8, !tbaa !4
  %add53 = fadd double %a01.0139, %9
  %mul58 = fmul double %9, %9
  %add59 = fadd double %a11.0141, %mul58
  %arrayidx61 = getelementptr inbounds [21 x double]* @PictureMAD, i64 0, i64 %indvars.iv
  %10 = load double* %arrayidx61, align 8, !tbaa !4
  %add62 = fadd double %b0.0142, %10
  %mul67 = fmul double %9, %10
  %add68 = fadd double %b1.0143, %mul67
  br label %for.inc70

for.inc70:                                        ; preds = %for.body45, %if.then49
  %a00.1 = phi double [ %a00.0138, %for.body45 ], [ %add50, %if.then49 ]
  %a01.1 = phi double [ %a01.0139, %for.body45 ], [ %add53, %if.then49 ]
  %a10.1 = phi double [ %a10.0140, %for.body45 ], [ %add53, %if.then49 ]
  %a11.1 = phi double [ %a11.0141, %for.body45 ], [ %add59, %if.then49 ]
  %b0.1 = phi double [ %b0.0142, %for.body45 ], [ %add62, %if.then49 ]
  %b1.1 = phi double [ %b1.0143, %for.body45 ], [ %add68, %if.then49 ]
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp eq i32 %lftr.wideiv, %n_windowSize
  br i1 %exitcond, label %for.end72, label %for.body45

for.end72:                                        ; preds = %for.inc70, %for.cond42.preheader
  %b1.0.lcssa = phi double [ 0.000000e+00, %for.cond42.preheader ], [ %b1.1, %for.inc70 ]
  %b0.0.lcssa = phi double [ 0.000000e+00, %for.cond42.preheader ], [ %b0.1, %for.inc70 ]
  %a11.0.lcssa = phi double [ 0.000000e+00, %for.cond42.preheader ], [ %a11.1, %for.inc70 ]
  %a10.0.lcssa = phi double [ 0.000000e+00, %for.cond42.preheader ], [ %a10.1, %for.inc70 ]
  %a01.0.lcssa = phi double [ 0.000000e+00, %for.cond42.preheader ], [ %a01.1, %for.inc70 ]
  %a00.0.lcssa = phi double [ 0.000000e+00, %for.cond42.preheader ], [ %a00.1, %for.inc70 ]
  %mul73 = fmul double %a00.0.lcssa, %a11.0.lcssa
  %mul74 = fmul double %a01.0.lcssa, %a10.0.lcssa
  %sub = fsub double %mul73, %mul74
  %call = tail call double @fabs(double %sub) #8
  %cmp75 = fcmp ogt double %call, 1.000000e-06
  br i1 %cmp75, label %if.then77, label %if.else

if.then77:                                        ; preds = %for.end72
  %mul78 = fmul double %a11.0.lcssa, %b0.0.lcssa
  %mul79 = fmul double %a01.0.lcssa, %b1.0.lcssa
  %sub80 = fsub double %mul78, %mul79
  %div81 = fdiv double %sub80, %sub
  store double %div81, double* @MADPictureC2, align 8, !tbaa !4
  %mul82 = fmul double %a00.0.lcssa, %b1.0.lcssa
  %mul83 = fmul double %a10.0.lcssa, %b0.0.lcssa
  %sub84 = fsub double %mul82, %mul83
  %div85 = fdiv double %sub84, %sub
  store double %div85, double* @MADPictureC1, align 8, !tbaa !4
  br label %if.end88

if.else:                                          ; preds = %for.end72
  %div86 = fdiv double %b0.0.lcssa, %a01.0.lcssa
  store double %div86, double* @MADPictureC1, align 8, !tbaa !4
  store double 0.000000e+00, double* @MADPictureC2, align 8, !tbaa !4
  br label %if.end88

if.end88:                                         ; preds = %for.end, %for.end.thread, %for.cond14.preheader, %for.end36, %if.then77, %if.else
  %11 = phi double [ 0.000000e+00, %for.end36 ], [ %div81, %if.then77 ], [ 0.000000e+00, %if.else ], [ 0.000000e+00, %for.cond14.preheader ], [ 0.000000e+00, %for.end.thread ], [ 0.000000e+00, %for.end ]
  %12 = phi double [ %7, %for.end36 ], [ %div85, %if.then77 ], [ %div86, %if.else ], [ 0.000000e+00, %for.cond14.preheader ], [ 0.000000e+00, %for.end.thread ], [ 0.000000e+00, %for.end ]
  %13 = load %struct.ImageParameters** @img, align 8, !tbaa !0
  %type = getelementptr inbounds %struct.ImageParameters* %13, i64 0, i32 6
  %14 = load i32* %type, align 4, !tbaa !3
  %cmp89 = icmp eq i32 %14, 0
  br i1 %cmp89, label %if.then91, label %if.end92

if.then91:                                        ; preds = %if.end88
  store double %12, double* @PMADPictureC1, align 8, !tbaa !4
  store double %11, double* @PMADPictureC2, align 8, !tbaa !4
  br label %if.end92

if.end92:                                         ; preds = %if.then91, %if.end88
  ret void
}
