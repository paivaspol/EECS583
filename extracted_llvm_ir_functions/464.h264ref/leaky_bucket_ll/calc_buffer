define void @calc_buffer() #0 {
  tail call void @llvm.dbg.value(metadata i64 0, i64 0, metadata !124, metadata !620), !dbg !737
  %1 = load %struct.__sFILE** @__stdoutp, align 8, !dbg !738, !tbaa !625
  %2 = tail call i64 @fwrite(i8* getelementptr inbounds ([81 x i8]* @.str8, i64 0, i64 0), i64 80, i64 1, %struct.__sFILE* %1), !dbg !739
  %3 = load i64* @total_frame_buffer, align 8, !dbg !740, !tbaa !651
  %4 = load %struct.InputParameters** @input, align 8, !dbg !741, !tbaa !625
  %5 = getelementptr inbounds %struct.InputParameters* %4, i64 0, i32 2, !dbg !742
  %6 = load i32* %5, align 4, !dbg !742, !tbaa !743
  %7 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([27 x i8]* @.str9, i64 0, i64 0), i64 %3, i32 %6) #5, !dbg !747
  %8 = load %struct.InputParameters** @input, align 8, !dbg !748, !tbaa !625
  %9 = getelementptr inbounds %struct.InputParameters* %8, i64 0, i32 88, !dbg !749
  %10 = load i32* %9, align 4, !dbg !749, !tbaa !750
  %11 = sext i32 %10 to i64, !dbg !751
  tail call void @llvm.dbg.value(metadata i64 %11, i64 0, metadata !118, metadata !620), !dbg !752
  tail call void @llvm.dbg.value(metadata i64* undef, i64 0, metadata !119, metadata !620), !dbg !753
  %12 = tail call i8* @calloc(i64 %11, i64 8) #5, !dbg !754
  %13 = bitcast i8* %12 to i64*, !dbg !754
  tail call void @llvm.dbg.value(metadata i64* %13, i64 0, metadata !129, metadata !620), !dbg !755
  %14 = icmp eq i8* %12, null, !dbg !756
  br i1 %14, label %15, label %16, !dbg !758

; <label>:15                                      ; preds = %0
  tail call void @no_mem_exit(i8* getelementptr inbounds ([18 x i8]* @.str11, i64 0, i64 0)) #5, !dbg !759
  br label %16, !dbg !759

; <label>:16                                      ; preds = %0, %15
  %17 = tail call i8* @calloc(i64 %11, i64 8) #5, !dbg !760
  %18 = bitcast i8* %17 to i64*, !dbg !760
  tail call void @llvm.dbg.value(metadata i64* %18, i64 0, metadata !130, metadata !620), !dbg !761
  %19 = icmp eq i8* %17, null, !dbg !762
  br i1 %19, label %20, label %21, !dbg !764

; <label>:20                                      ; preds = %16
  tail call void @no_mem_exit(i8* getelementptr inbounds ([18 x i8]* @.str12, i64 0, i64 0)) #5, !dbg !765
  br label %21, !dbg !765

; <label>:21                                      ; preds = %16, %20
  %22 = tail call i8* @calloc(i64 %11, i64 8) #5, !dbg !766
  %23 = bitcast i8* %22 to i64*, !dbg !766
  tail call void @llvm.dbg.value(metadata i64* %23, i64 0, metadata !131, metadata !620), !dbg !767
  %24 = icmp eq i8* %22, null, !dbg !768
  br i1 %24, label %25, label %.preheader2, !dbg !770

; <label>:25                                      ; preds = %21
  tail call void @no_mem_exit(i8* getelementptr inbounds ([18 x i8]* @.str13, i64 0, i64 0)) #5, !dbg !771
  br label %.preheader2, !dbg !771

.preheader2:                                      ; preds = %21, %25
  %26 = load i64* @total_frame_buffer, align 8, !dbg !772, !tbaa !651
  %27 = icmp eq i64 %26, 0, !dbg !775
  br i1 %27, label %33, label %.lr.ph16, !dbg !776

.lr.ph16:                                         ; preds = %.preheader2, %.lr.ph16
  %TotalRate.015 = phi i64 [ %30, %.lr.ph16 ], [ 0, %.preheader2 ]
  %iFrame.014 = phi i64 [ %31, %.lr.ph16 ], [ 0, %.preheader2 ]
  %28 = getelementptr inbounds [10000 x i64]* @Bit_Buffer, i64 0, i64 %iFrame.014, !dbg !777
  %29 = load i64* %28, align 8, !dbg !777, !tbaa !651
  %30 = add i64 %29, %TotalRate.015, !dbg !779
  tail call void @llvm.dbg.value(metadata i64 %30, i64 0, metadata !117, metadata !620), !dbg !780
  %31 = add nuw i64 %iFrame.014, 1, !dbg !781
  tail call void @llvm.dbg.value(metadata i64 %31, i64 0, metadata !123, metadata !620), !dbg !782
  %32 = icmp ult i64 %31, %26, !dbg !775
  br i1 %32, label %.lr.ph16, label %._crit_edge17, !dbg !776

._crit_edge17:                                    ; preds = %.lr.ph16
  %phitmp = uitofp i64 %30 to float, !dbg !776
  %phitmp21 = uitofp i64 %26 to float, !dbg !776
  br label %33, !dbg !776

; <label>:33                                      ; preds = %.preheader2, %._crit_edge17
  %.lcssa = phi float [ %phitmp21, %._crit_edge17 ], [ 0.000000e+00, %.preheader2 ]
  %TotalRate.0.lcssa = phi float [ %phitmp, %._crit_edge17 ], [ 0.000000e+00, %.preheader2 ]
  %34 = fdiv float %TotalRate.0.lcssa, %.lcssa, !dbg !783
  %35 = fptoui float %34 to i64, !dbg !784
  tail call void @llvm.dbg.value(metadata i64 %35, i64 0, metadata !116, metadata !620), !dbg !785
  %36 = tail call i32 @get_LeakyBucketRate(i64 %11, i64* %13) #6, !dbg !786
  %37 = icmp eq i32 %36, 1, !dbg !788
  br i1 %37, label %.loopexit, label %.preheader, !dbg !789

.preheader:                                       ; preds = %33
  %38 = icmp eq i32 %10, 0, !dbg !790
  br i1 %38, label %.loopexit.thread, label %.lr.ph13, !dbg !794

.loopexit.thread:                                 ; preds = %.preheader
  tail call void @Sort(i64 %11, i64* %13) #6, !dbg !795
  tail call void @llvm.dbg.value(metadata i64 %73, i64 0, metadata !125, metadata !620), !dbg !796
  tail call void @llvm.dbg.value(metadata i64 0, i64 0, metadata !122, metadata !620), !dbg !797
  br label %._crit_edge11, !dbg !798

.lr.ph13:                                         ; preds = %.preheader
  %39 = uitofp i64 %35 to float, !dbg !800
  %40 = load %struct.ImageParameters** @img, align 8, !dbg !803, !tbaa !625
  %41 = getelementptr inbounds %struct.ImageParameters* %40, i64 0, i32 12, !dbg !804
  %42 = load %struct.InputParameters** @input, align 8, !dbg !805, !tbaa !625
  %43 = getelementptr inbounds %struct.InputParameters* %42, i64 0, i32 5, !dbg !806
  %44 = lshr i64 %35, 2, !dbg !807
  %45 = uitofp i64 %44 to float, !dbg !808
  br label %46, !dbg !794

; <label>:46                                      ; preds = %.lr.ph13, %69
  %iBucket.012 = phi i64 [ 0, %.lr.ph13 ], [ %71, %69 ]
  %47 = icmp eq i64 %iBucket.012, 0, !dbg !809
  br i1 %47, label %48, label %56, !dbg !810

; <label>:48                                      ; preds = %46
  %49 = load float* %41, align 4, !dbg !804, !tbaa !811
  %50 = fmul float %39, %49, !dbg !814
  %51 = fptoui float %50 to i64, !dbg !815
  %52 = load i32* %43, align 4, !dbg !806, !tbaa !816
  %53 = add nsw i32 %52, 1, !dbg !817
  %54 = sext i32 %53 to i64, !dbg !818
  %55 = udiv i64 %51, %54, !dbg !819
  br label %69, !dbg !820

; <label>:56                                      ; preds = %46
  %57 = add i64 %iBucket.012, -1, !dbg !821
  %58 = getelementptr inbounds i64* %13, i64 %57, !dbg !822
  %59 = load i64* %58, align 8, !dbg !822, !tbaa !651
  %60 = uitofp i64 %59 to float, !dbg !823
  %61 = load float* %41, align 4, !dbg !824, !tbaa !811
  %62 = fmul float %45, %61, !dbg !825
  %63 = load i32* %43, align 4, !dbg !826, !tbaa !816
  %64 = add nsw i32 %63, 1, !dbg !827
  %65 = sitofp i32 %64 to float, !dbg !828
  %66 = fdiv float %62, %65, !dbg !829
  %67 = fadd float %60, %66, !dbg !830
  %68 = fptoui float %67 to i64, !dbg !831
  br label %69

; <label>:69                                      ; preds = %48, %56
  %.sink = phi i64 [ %55, %48 ], [ %68, %56 ]
  %70 = getelementptr inbounds i64* %13, i64 %iBucket.012, !dbg !820
  store i64 %.sink, i64* %70, align 8
  %71 = add nuw i64 %iBucket.012, 1, !dbg !832
  tail call void @llvm.dbg.value(metadata i64 %71, i64 0, metadata !122, metadata !620), !dbg !797
  %72 = icmp ult i64 %71, %11, !dbg !790
  br i1 %72, label %46, label %.loopexit, !dbg !794

.loopexit:                                        ; preds = %69, %33
  tail call void @Sort(i64 %11, i64* %13) #6, !dbg !795
  %73 = mul i64 %35, 20, !dbg !833
  tail call void @llvm.dbg.value(metadata i64 %73, i64 0, metadata !125, metadata !620), !dbg !796
  tail call void @llvm.dbg.value(metadata i64 0, i64 0, metadata !122, metadata !620), !dbg !797
  %74 = icmp eq i32 %10, 0, !dbg !834
  br i1 %74, label %._crit_edge11, label %.lr.ph10, !dbg !798

.lr.ph10:                                         ; preds = %.loopexit
  %75 = load %struct.InputParameters** @input, align 8, !dbg !836, !tbaa !625
  %76 = getelementptr inbounds %struct.InputParameters* %75, i64 0, i32 5, !dbg !838
  %77 = load i32* %76, align 4, !dbg !838, !tbaa !816
  %78 = add nsw i32 %77, 1, !dbg !839
  %79 = sext i32 %78 to i64, !dbg !840
  %80 = load %struct.ImageParameters** @img, align 8, !dbg !841, !tbaa !625
  %81 = getelementptr inbounds %struct.ImageParameters* %80, i64 0, i32 12, !dbg !842
  %82 = load float* %81, align 4, !dbg !842, !tbaa !811
  %83 = load i64* @total_frame_buffer, align 8, !dbg !843, !tbaa !651
  %84 = icmp eq i64 %83, 0, !dbg !846
  %85 = load i64* getelementptr inbounds ([10000 x i64]* @Bit_Buffer, i64 0, i64 0), align 16, !dbg !847, !tbaa !651
  br label %86, !dbg !798

; <label>:86                                      ; preds = %.lr.ph10, %115
  %iBucket.18 = phi i64 [ 0, %.lr.ph10 ], [ %118, %115 ]
  %FrameIndex.07 = phi i64 [ 0, %.lr.ph10 ], [ %FrameIndex.1.lcssa, %115 ]
  %87 = getelementptr inbounds i64* %13, i64 %iBucket.18, !dbg !848
  %88 = load i64* %87, align 8, !dbg !848, !tbaa !651
  %89 = mul i64 %79, %88, !dbg !849
  %90 = uitofp i64 %89 to float, !dbg !848
  %91 = fdiv float %90, %82, !dbg !850
  %92 = fptosi float %91 to i64, !dbg !851
  tail call void @llvm.dbg.value(metadata i64 %92, i64 0, metadata !128, metadata !620), !dbg !852
  tail call void @llvm.dbg.value(metadata i64 %73, i64 0, metadata !127, metadata !620), !dbg !853
  tail call void @llvm.dbg.value(metadata i64 %73, i64 0, metadata !121, metadata !620), !dbg !854
  tail call void @llvm.dbg.value(metadata i64 0, i64 0, metadata !123, metadata !620), !dbg !782
  br i1 %84, label %._crit_edge, label %.lr.ph, !dbg !855

.lr.ph:                                           ; preds = %86, %.lr.ph
  %93 = phi i64 [ %storemerge1, %.lr.ph ], [ %73, %86 ], !dbg !856
  %minB.05 = phi i64 [ %.minB.0, %.lr.ph ], [ %73, %86 ]
  %iFrame.14 = phi i64 [ %99, %.lr.ph ], [ 0, %86 ]
  %FrameIndex.13 = phi i64 [ %iFrame.1.FrameIndex.1, %.lr.ph ], [ %FrameIndex.07, %86 ]
  %94 = getelementptr inbounds [10000 x i64]* @Bit_Buffer, i64 0, i64 %iFrame.14, !dbg !858
  %95 = load i64* %94, align 8, !dbg !858, !tbaa !651
  %96 = sub nsw i64 %93, %95, !dbg !859
  %97 = icmp slt i64 %96, %minB.05, !dbg !860
  tail call void @llvm.dbg.value(metadata i64 %96, i64 0, metadata !121, metadata !620), !dbg !854
  tail call void @llvm.dbg.value(metadata i64 %99, i64 0, metadata !124, metadata !620), !dbg !737
  %iFrame.1.FrameIndex.1 = select i1 %97, i64 %iFrame.14, i64 %FrameIndex.13, !dbg !862
  %.minB.0 = select i1 %97, i64 %96, i64 %minB.05, !dbg !862
  %98 = add nsw i64 %96, %92, !dbg !863
  %99 = add nuw i64 %iFrame.14, 1, !dbg !864
  %100 = icmp sgt i64 %98, %73, !dbg !865
  %storemerge1 = select i1 %100, i64 %73, i64 %98, !dbg !867
  tail call void @llvm.dbg.value(metadata i64 %99, i64 0, metadata !123, metadata !620), !dbg !782
  %exitcond = icmp eq i64 %99, %83, !dbg !855
  br i1 %exitcond, label %._crit_edge, label %.lr.ph, !dbg !855

._crit_edge:                                      ; preds = %.lr.ph, %86
  %minB.0.lcssa = phi i64 [ %73, %86 ], [ %.minB.0, %.lr.ph ]
  %FrameIndex.1.lcssa = phi i64 [ %FrameIndex.07, %86 ], [ %iFrame.1.FrameIndex.1, %.lr.ph ]
  %101 = sub nsw i64 %73, %minB.0.lcssa, !dbg !868
  tail call void @llvm.dbg.value(metadata i64 %101, i64 0, metadata !126, metadata !620), !dbg !869
  tail call void @llvm.dbg.value(metadata i64 %85, i64 0, metadata !127, metadata !620), !dbg !853
  tail call void @llvm.dbg.value(metadata i64 0, i64 0, metadata !123, metadata !620), !dbg !782
  %102 = add i64 %FrameIndex.1.lcssa, 1, !dbg !870
  br label %103, !dbg !873

; <label>:103                                     ; preds = %106, %._crit_edge
  %104 = phi i64 [ %85, %._crit_edge ], [ %112, %106 ]
  %InitFullness.0 = phi i64 [ %85, %._crit_edge ], [ %.InitFullness.0, %106 ]
  %iFrame.2 = phi i64 [ 0, %._crit_edge ], [ %113, %106 ]
  %105 = icmp ult i64 %iFrame.2, %102, !dbg !874
  br i1 %105, label %106, label %115, !dbg !875

; <label>:106                                     ; preds = %103
  %107 = getelementptr inbounds [10000 x i64]* @Bit_Buffer, i64 0, i64 %iFrame.2, !dbg !876
  %108 = load i64* %107, align 8, !dbg !876, !tbaa !651
  %109 = sub nsw i64 %104, %108, !dbg !878
  %110 = icmp slt i64 %109, 0, !dbg !879
  %. = select i1 %110, i64 0, i64 %109, !dbg !881
  %111 = select i1 %110, i64 %109, i64 0, !dbg !881
  %.InitFullness.0 = sub nsw i64 %InitFullness.0, %111, !dbg !881
  %112 = add nsw i64 %., %92, !dbg !882
  %113 = add i64 %iFrame.2, 1, !dbg !883
  %114 = icmp sgt i64 %112, %101, !dbg !884
  br i1 %114, label %115, label %103, !dbg !886

; <label>:115                                     ; preds = %106, %103
  %InitFullness.2 = phi i64 [ %.InitFullness.0, %106 ], [ %InitFullness.0, %103 ]
  %116 = getelementptr inbounds i64* %18, i64 %iBucket.18, !dbg !887
  store i64 %101, i64* %116, align 8, !dbg !888, !tbaa !651
  %117 = getelementptr inbounds i64* %23, i64 %iBucket.18, !dbg !889
  store i64 %InitFullness.2, i64* %117, align 8, !dbg !890, !tbaa !651
  %118 = add nuw i64 %iBucket.18, 1, !dbg !891
  tail call void @llvm.dbg.value(metadata i64 %118, i64 0, metadata !122, metadata !620), !dbg !797
  %119 = icmp ult i64 %118, %11, !dbg !834
  br i1 %119, label %86, label %._crit_edge11, !dbg !798

._crit_edge11:                                    ; preds = %115, %.loopexit.thread, %.loopexit
  tail call void @write_buffer(i64 %11, i64* %13, i64* %18, i64* %23) #6, !dbg !892
  tail call void @free(i8* %12) #6, !dbg !893
  tail call void @free(i8* %17) #6, !dbg !894
  tail call void @free(i8* %22) #6, !dbg !895
  ret void, !dbg !896
}
