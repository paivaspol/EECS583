define void @LumaResidualCoding() #0 {
entry:
  %fw_mode = alloca i32, align 4
  %bw_mode = alloca i32, align 4
  %p_dir = alloca i16, align 2
  %refframe = alloca i16, align 2
  %bw_ref = alloca i16, align 2
  call void @llvm.dbg.declare(metadata !{i32* %fw_mode}, metadata !599), !dbg !2554
  call void @llvm.dbg.declare(metadata !{i32* %bw_mode}, metadata !600), !dbg !2554
  call void @llvm.dbg.declare(metadata !{i16* %p_dir}, metadata !601), !dbg !2555
  call void @llvm.dbg.declare(metadata !{i16* %refframe}, metadata !602), !dbg !2555
  %0 = load %struct.ImageParameters** @img, align 8, !dbg !2556, !tbaa !1576
  %current_mb_nr = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 3, !dbg !2556
  %1 = load i32* %current_mb_nr, align 4, !dbg !2556, !tbaa !1579
  %idxprom = sext i32 %1 to i64, !dbg !2556
  %mb_data = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 51, !dbg !2556
  %2 = load %struct.macroblock** %mb_data, align 8, !dbg !2556, !tbaa !1576
  %cbp = getelementptr inbounds %struct.macroblock* %2, i64 %idxprom, i32 12, !dbg !2557
  store i32 0, i32* %cbp, align 4, !dbg !2557, !tbaa !1579
  %cbp_blk = getelementptr inbounds %struct.macroblock* %2, i64 %idxprom, i32 13, !dbg !2558
  store i64 0, i64* %cbp_blk, align 8, !dbg !2558, !tbaa !1879
  call void @llvm.dbg.value(metadata !72, i64 0, metadata !603), !dbg !2559
  call void @llvm.dbg.value(metadata !72, i64 0, metadata !596), !dbg !2560
  br label %for.body, !dbg !2560

for.body:                                         ; preds = %for.body, %entry
  %sum_cnt_nonz.095 = phi i32 [ 0, %entry ], [ %add, %for.body ]
  %block8x8.094 = phi i32 [ 0, %entry ], [ %inc, %for.body ]
  call void @llvm.dbg.declare(metadata !{i16* %bw_ref}, metadata !605), !dbg !2561
  call void @SetModesAndRefframe(i32 %block8x8.094, i16* %p_dir, i32* %fw_mode, i32* %bw_mode, i16* %refframe, i16* %bw_ref) #9, !dbg !2562
  call void @llvm.dbg.value(metadata !{i16* %p_dir}, i64 0, metadata !601), !dbg !2563
  %3 = load i16* %p_dir, align 2, !dbg !2563, !tbaa !1878
  call void @llvm.dbg.value(metadata !{i32* %fw_mode}, i64 0, metadata !599), !dbg !2563
  %4 = load i32* %fw_mode, align 4, !dbg !2563, !tbaa !1579
  call void @llvm.dbg.value(metadata !{i32* %bw_mode}, i64 0, metadata !600), !dbg !2563
  %5 = load i32* %bw_mode, align 4, !dbg !2563, !tbaa !1579
  call void @llvm.dbg.value(metadata !{i16* %refframe}, i64 0, metadata !602), !dbg !2563
  %6 = load i16* %refframe, align 2, !dbg !2563, !tbaa !1878
  call void @llvm.dbg.value(metadata !{i16* %bw_ref}, i64 0, metadata !605), !dbg !2563
  %7 = load i16* %bw_ref, align 2, !dbg !2563, !tbaa !1878
  %call = call i32 @LumaResidualCoding8x8(i32* %cbp, i64* %cbp_blk, i32 %block8x8.094, i16 signext %3, i32 %4, i32 %5, i16 signext %6, i16 signext %7) #9, !dbg !2563
  %add = add nsw i32 %call, %sum_cnt_nonz.095, !dbg !2563
  call void @llvm.dbg.value(metadata !{i32 %add}, i64 0, metadata !603), !dbg !2563
  %inc = add nsw i32 %block8x8.094, 1, !dbg !2560
  call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !596), !dbg !2560
  %exitcond101 = icmp eq i32 %inc, 4, !dbg !2560
  br i1 %exitcond101, label %for.end, label %for.body, !dbg !2560

for.end:                                          ; preds = %for.body
  %cmp3 = icmp slt i32 %add, 6, !dbg !2564
  br i1 %cmp3, label %land.lhs.true, label %if.end63, !dbg !2564

land.lhs.true:                                    ; preds = %for.end
  %8 = load %struct.ImageParameters** @img, align 8, !dbg !2564, !tbaa !1576
  %qp = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 10, !dbg !2564
  %9 = load i32* %qp, align 4, !dbg !2564, !tbaa !1579
  %bitdepth_luma_qp_scale = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 151, !dbg !2564
  %10 = load i32* %bitdepth_luma_qp_scale, align 4, !dbg !2564, !tbaa !1579
  %add4 = sub i32 0, %10, !dbg !2564
  %cmp5 = icmp eq i32 %9, %add4, !dbg !2564
  br i1 %cmp5, label %lor.lhs.false, label %if.then, !dbg !2564

lor.lhs.false:                                    ; preds = %land.lhs.true
  %lossless_qpprime_flag = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 160, !dbg !2564
  %11 = load i32* %lossless_qpprime_flag, align 4, !dbg !2564, !tbaa !1579
  %cmp6 = icmp eq i32 %11, 0, !dbg !2564
  br i1 %cmp6, label %if.then, label %if.end63, !dbg !2564

if.then:                                          ; preds = %land.lhs.true, %lor.lhs.false
  %12 = load i32* %cbp, align 4, !dbg !2565, !tbaa !1579
  %and = and i32 %12, 16777200, !dbg !2565
  store i32 %and, i32* %cbp, align 4, !dbg !2565, !tbaa !1579
  %13 = load i64* %cbp_blk, align 8, !dbg !2567, !tbaa !1879
  %and9 = and i64 %13, 16711680, !dbg !2567
  store i64 %and9, i64* %cbp_blk, align 8, !dbg !2567, !tbaa !1879
  call void @llvm.dbg.value(metadata !72, i64 0, metadata !594), !dbg !2568
  %residue_transform_flag = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 164, !dbg !2570
  %pix_x = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 33, !dbg !2574
  %pix_y = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 34, !dbg !2574
  %14 = load %struct.storable_picture** @enc_picture, align 8, !dbg !2574, !tbaa !1576
  %imgY = getelementptr inbounds %struct.storable_picture* %14, i64 0, i32 25, !dbg !2574
  br label %for.cond13.preheader, !dbg !2568

for.cond13.preheader:                             ; preds = %for.inc34, %if.then
  %indvars.iv97 = phi i64 [ 0, %if.then ], [ %indvars.iv.next98, %for.inc34 ]
  br label %for.body15, !dbg !2575

for.body15:                                       ; preds = %for.inc31, %for.cond13.preheader
  %indvars.iv = phi i64 [ 0, %for.cond13.preheader ], [ %indvars.iv.next, %for.inc31 ]
  %15 = load i32* %residue_transform_flag, align 4, !dbg !2570, !tbaa !1579
  %tobool = icmp eq i32 %15, 0, !dbg !2570
  br i1 %tobool, label %if.then16, label %if.else, !dbg !2570

if.then16:                                        ; preds = %for.body15
  %arrayidx20 = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 45, i64 %indvars.iv97, i64 %indvars.iv, !dbg !2574
  %16 = load i16* %arrayidx20, align 2, !dbg !2574, !tbaa !1878
  %17 = load i32* %pix_x, align 4, !dbg !2574, !tbaa !1579
  %18 = trunc i64 %indvars.iv97 to i32, !dbg !2574
  %add21 = add nsw i32 %17, %18, !dbg !2574
  %idxprom22 = sext i32 %add21 to i64, !dbg !2574
  %19 = load i32* %pix_y, align 4, !dbg !2574, !tbaa !1579
  %20 = trunc i64 %indvars.iv to i32, !dbg !2574
  %add23 = add nsw i32 %19, %20, !dbg !2574
  %idxprom24 = sext i32 %add23 to i64, !dbg !2574
  %21 = load i16*** %imgY, align 8, !dbg !2574, !tbaa !1576
  %arrayidx25 = getelementptr inbounds i16** %21, i64 %idxprom24, !dbg !2574
  %22 = load i16** %arrayidx25, align 8, !dbg !2574, !tbaa !1576
  %arrayidx26 = getelementptr inbounds i16* %22, i64 %idxprom22, !dbg !2574
  store i16 %16, i16* %arrayidx26, align 2, !dbg !2574, !tbaa !1878
  br label %for.inc31, !dbg !2574

if.else:                                          ; preds = %for.body15
  %arrayidx30 = getelementptr inbounds [16 x [16 x i32]]* @rec_resG, i64 0, i64 %indvars.iv97, i64 %indvars.iv, !dbg !2576
  store i32 0, i32* %arrayidx30, align 4, !dbg !2576, !tbaa !1579
  br label %for.inc31

for.inc31:                                        ; preds = %if.then16, %if.else
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !2575
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !2575
  %exitcond96 = icmp eq i32 %lftr.wideiv, 16, !dbg !2575
  br i1 %exitcond96, label %for.inc34, label %for.body15, !dbg !2575

for.inc34:                                        ; preds = %for.inc31
  %indvars.iv.next98 = add i64 %indvars.iv97, 1, !dbg !2568
  %lftr.wideiv99 = trunc i64 %indvars.iv.next98 to i32, !dbg !2568
  %exitcond100 = icmp eq i32 %lftr.wideiv99, 16, !dbg !2568
  br i1 %exitcond100, label %for.end36, label %for.cond13.preheader, !dbg !2568

for.end36:                                        ; preds = %for.inc34
  %type = getelementptr inbounds %struct.ImageParameters* %8, i64 0, i32 6, !dbg !2577
  %23 = load i32* %type, align 4, !dbg !2577, !tbaa !1579
  %cmp37 = icmp eq i32 %23, 3, !dbg !2577
  br i1 %cmp37, label %for.body41, label %if.end63, !dbg !2577

for.body41:                                       ; preds = %for.end36, %for.inc59
  %block8x8.191 = phi i32 [ %inc60, %for.inc59 ], [ 0, %for.end36 ]
  %and42 = shl i32 %block8x8.191, 3, !dbg !2578
  %shl = and i32 %and42, 8, !dbg !2578
  call void @llvm.dbg.value(metadata !{i32 %shl}, i64 0, metadata !597), !dbg !2578
  %and43 = shl i32 %block8x8.191, 2, !dbg !2582
  %shl44 = and i32 %and43, 8, !dbg !2582
  call void @llvm.dbg.value(metadata !{i32 %shl44}, i64 0, metadata !598), !dbg !2582
  call void @llvm.dbg.value(metadata !72, i64 0, metadata !594), !dbg !2583
  br label %for.cond48.preheader, !dbg !2583

for.cond48.preheader:                             ; preds = %for.body41, %for.inc56
  %i.190 = phi i32 [ 0, %for.body41 ], [ %add57, %for.inc56 ]
  %add51 = add nsw i32 %i.190, %shl, !dbg !2585
  br label %for.body50, !dbg !2587

for.body50:                                       ; preds = %for.cond48.preheader, %for.body50
  %j.189 = phi i32 [ 0, %for.cond48.preheader ], [ %add54, %for.body50 ]
  %add52 = add nsw i32 %j.189, %shl44, !dbg !2585
  call void @copyblock_sp(i32 %add51, i32 %add52) #8, !dbg !2585
  %add54 = add nsw i32 %j.189, 4, !dbg !2587
  call void @llvm.dbg.value(metadata !{i32 %add54}, i64 0, metadata !595), !dbg !2587
  %cmp49 = icmp slt i32 %add54, 8, !dbg !2587
  br i1 %cmp49, label %for.body50, label %for.inc56, !dbg !2587

for.inc56:                                        ; preds = %for.body50
  %add57 = add nsw i32 %i.190, 4, !dbg !2583
  call void @llvm.dbg.value(metadata !{i32 %add57}, i64 0, metadata !594), !dbg !2583
  %cmp46 = icmp slt i32 %add57, 8, !dbg !2583
  br i1 %cmp46, label %for.cond48.preheader, label %for.inc59, !dbg !2583

for.inc59:                                        ; preds = %for.inc56
  %inc60 = add nsw i32 %block8x8.191, 1, !dbg !2588
  call void @llvm.dbg.value(metadata !{i32 %inc60}, i64 0, metadata !596), !dbg !2588
  %exitcond = icmp eq i32 %inc60, 4, !dbg !2588
  br i1 %exitcond, label %if.end63, label %for.body41, !dbg !2588

if.end63:                                         ; preds = %for.inc59, %for.end36, %lor.lhs.false, %for.end
  ret void, !dbg !2589
}
