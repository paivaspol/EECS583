define i32 @TransformDecision(i32 %block_check, i32* nocapture %cost) #0 {
entry:
  %fw_mode = alloca i32, align 4
  %bw_mode = alloca i32, align 4
  %p_dir = alloca i16, align 2
  %fw_ref = alloca i16, align 2
  %bw_ref = alloca i16, align 2
  %diff = alloca [64 x i32], align 16
  %0 = bitcast [64 x i32]* %diff to i8*
  call void @llvm.lifetime.start(i64 256, i8* %0) #4
  %cmp = icmp eq i32 %block_check, -1
  %add = add nsw i32 %block_check, 1
  %.block_check = select i1 %cmp, i32 0, i32 %block_check
  %.add = select i1 %cmp, i32 4, i32 %add
  %cmp1103 = icmp slt i32 %.block_check, %.add
  br i1 %cmp1103, label %for.body.lr.ph, label %for.end53

for.body.lr.ph:                                   ; preds = %entry
  %arraydecay = getelementptr inbounds [64 x i32]* %diff, i64 0, i64 0
  br label %for.body

for.body:                                         ; preds = %for.end47, %for.body.lr.ph
  %cost4x4.0106 = phi i32 [ 0, %for.body.lr.ph ], [ %add41, %for.end47 ]
  %cost8x8.0105 = phi i32 [ 0, %for.body.lr.ph ], [ %add50, %for.end47 ]
  %block8x8.0104 = phi i32 [ %.block_check, %for.body.lr.ph ], [ %inc52, %for.end47 ]
  call void @SetModesAndRefframe(i32 %block8x8.0104, i16* %p_dir, i32* %fw_mode, i32* %bw_mode, i16* %fw_ref, i16* %bw_ref) #8
  %div = sdiv i32 %block8x8.0104, 2
  %shl = shl i32 %div, 3
  %rem = srem i32 %block8x8.0104, 2
  %shl2 = shl i32 %rem, 3
  %1 = load i16* %p_dir, align 2, !tbaa !4
  %conv = sext i16 %1 to i32
  %2 = load i32* %fw_mode, align 4, !tbaa !3
  %3 = load i32* %bw_mode, align 4, !tbaa !3
  %4 = load i16* %fw_ref, align 2, !tbaa !4
  %5 = load i16* %bw_ref, align 2, !tbaa !4
  %6 = shl i32 %rem, 3
  %7 = sext i32 %6 to i64
  %8 = or i32 %6, 4
  %9 = icmp sgt i32 %6, %8
  %smax = select i1 %9, i32 %6, i32 %8
  %10 = or i32 %smax, 3
  %11 = sub i32 %10, %6
  %12 = lshr i32 %11, 2
  %13 = shl i32 %12, 4
  %14 = add i32 %13, 16
  %15 = shl i32 %div, 3
  %16 = sext i32 %15 to i64
  br label %for.body6

for.body6:                                        ; preds = %for.body, %for.inc45
  %indvars.iv120 = phi i64 [ %16, %for.body ], [ %indvars.iv.next121, %for.inc45 ]
  %cost4x4.1102 = phi i32 [ %cost4x4.0106, %for.body ], [ %add41, %for.inc45 ]
  %k.0100 = phi i32 [ 0, %for.body ], [ %40, %for.inc45 ]
  %17 = load %struct.ImageParameters** @img, align 8, !tbaa !0
  %opix_y = getelementptr inbounds %struct.ImageParameters* %17, i64 0, i32 38
  %18 = load i32* %opix_y, align 4, !tbaa !3
  %19 = trunc i64 %indvars.iv120 to i32
  %add7 = add nsw i32 %18, %19
  %20 = sext i32 %add7 to i64
  br label %for.body11

for.body11:                                       ; preds = %for.end40.for.body11_crit_edge, %for.body6
  %21 = phi %struct.ImageParameters* [ %17, %for.body6 ], [ %.pre, %for.end40.for.body11_crit_edge ]
  %indvars.iv118 = phi i64 [ %7, %for.body6 ], [ %indvars.iv.next119, %for.end40.for.body11_crit_edge ]
  %cost4x4.299 = phi i32 [ %cost4x4.1102, %for.body6 ], [ %add41, %for.end40.for.body11_crit_edge ]
  %k.197 = phi i32 [ %k.0100, %for.body6 ], [ %39, %for.end40.for.body11_crit_edge ]
  %opix_x = getelementptr inbounds %struct.ImageParameters* %21, i64 0, i32 37
  %22 = load i32* %opix_x, align 4, !tbaa !3
  %23 = trunc i64 %indvars.iv118 to i32
  %add12 = add nsw i32 %22, %23
  call void @LumaPrediction4x4(i32 %23, i32 %19, i32 %conv, i32 %2, i32 %3, i16 signext %4, i16 signext %5) #8
  %idxprom = sext i32 %k.197 to i64
  %24 = load i16*** @imgY_org, align 8, !tbaa !0
  %25 = load %struct.ImageParameters** @img, align 8, !tbaa !0
  %26 = sext i32 %add12 to i64
  br label %for.cond17.preheader

for.cond17.preheader:                             ; preds = %for.inc38, %for.body11
  %indvars.iv112 = phi i64 [ 0, %for.body11 ], [ %indvars.iv.next113, %for.inc38 ]
  %k.296 = phi i32 [ %k.197, %for.body11 ], [ %35, %for.inc38 ]
  %27 = add nsw i64 %20, %indvars.iv112
  %arrayidx25 = getelementptr inbounds i16** %24, i64 %27
  %28 = load i16** %arrayidx25, align 8, !tbaa !0
  %29 = add nsw i64 %indvars.iv112, %indvars.iv120
  %30 = sext i32 %k.296 to i64
  br label %for.body20

for.body20:                                       ; preds = %for.body20, %for.cond17.preheader
  %indvars.iv108 = phi i64 [ 0, %for.cond17.preheader ], [ %indvars.iv.next109, %for.body20 ]
  %indvars.iv = phi i64 [ %30, %for.cond17.preheader ], [ %indvars.iv.next, %for.body20 ]
  %31 = add nsw i64 %26, %indvars.iv108
  %arrayidx26 = getelementptr inbounds i16* %28, i64 %31
  %32 = load i16* %arrayidx26, align 2, !tbaa !4
  %conv27 = zext i16 %32 to i32
  %33 = add nsw i64 %indvars.iv108, %indvars.iv118
  %arrayidx33 = getelementptr inbounds %struct.ImageParameters* %25, i64 0, i32 45, i64 %33, i64 %29
  %34 = load i16* %arrayidx33, align 2, !tbaa !4
  %conv34 = zext i16 %34 to i32
  %sub = sub nsw i32 %conv27, %conv34
  %arrayidx36 = getelementptr inbounds [64 x i32]* %diff, i64 0, i64 %indvars.iv
  store i32 %sub, i32* %arrayidx36, align 4, !tbaa !3
  %indvars.iv.next109 = add i64 %indvars.iv108, 1
  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next109 to i32
  %exitcond = icmp eq i32 %lftr.wideiv, 4
  br i1 %exitcond, label %for.inc38, label %for.body20

for.inc38:                                        ; preds = %for.body20
  %35 = add i32 %k.296, 4
  %indvars.iv.next113 = add i64 %indvars.iv112, 1
  %lftr.wideiv116 = trunc i64 %indvars.iv.next113 to i32
  %exitcond117 = icmp eq i32 %lftr.wideiv116, 4
  br i1 %exitcond117, label %for.end40, label %for.cond17.preheader

for.end40:                                        ; preds = %for.inc38
  %arrayidx = getelementptr inbounds [64 x i32]* %diff, i64 0, i64 %idxprom
  %36 = load %struct.InputParameters** @input, align 8, !tbaa !0
  %hadamard = getelementptr inbounds %struct.InputParameters* %36, i64 0, i32 6
  %37 = load i32* %hadamard, align 4, !tbaa !3
  %call = call i32 @SATD(i32* %arrayidx, i32 %37) #7
  %add41 = add nsw i32 %call, %cost4x4.299
  %38 = or i32 %shl2, 4
  %cmp10 = icmp slt i32 %23, %38
  br i1 %cmp10, label %for.end40.for.body11_crit_edge, label %for.inc45

for.end40.for.body11_crit_edge:                   ; preds = %for.end40
  %indvars.iv.next119 = add i64 %indvars.iv118, 4
  %39 = add i32 %k.197, 16
  %.pre = load %struct.ImageParameters** @img, align 8, !tbaa !0
  br label %for.body11

for.inc45:                                        ; preds = %for.end40
  %40 = add i32 %14, %k.0100
  %indvars.iv.next121 = add i64 %indvars.iv120, 4
  %41 = or i32 %shl, 4
  %cmp5 = icmp slt i32 %19, %41
  br i1 %cmp5, label %for.body6, label %for.end47

for.end47:                                        ; preds = %for.inc45
  %42 = load %struct.InputParameters** @input, align 8, !tbaa !0
  %hadamard48 = getelementptr inbounds %struct.InputParameters* %42, i64 0, i32 6
  %43 = load i32* %hadamard48, align 4, !tbaa !3
  %call49 = call i32 @SATD8X8(i32* %arraydecay, i32 %43) #7
  %add50 = add nsw i32 %call49, %cost8x8.0105
  %inc52 = add nsw i32 %block8x8.0104, 1
  %exitcond122 = icmp eq i32 %inc52, %.add
  br i1 %exitcond122, label %for.end53, label %for.body

for.end53:                                        ; preds = %for.end47, %entry
  %cost4x4.0.lcssa = phi i32 [ 0, %entry ], [ %add41, %for.end47 ]
  %cost8x8.0.lcssa = phi i32 [ 0, %entry ], [ %add50, %for.end47 ]
  %44 = load %struct.InputParameters** @input, align 8, !tbaa !0
  %AllowTransform8x8 = getelementptr inbounds %struct.InputParameters* %44, i64 0, i32 123
  %45 = load i32* %AllowTransform8x8, align 4, !tbaa !3
  %cmp54 = icmp eq i32 %45, 2
  %cmp58 = icmp slt i32 %cost8x8.0.lcssa, %cost4x4.0.lcssa
  %or.cond = or i1 %cmp54, %cmp58
  br i1 %or.cond, label %cleanup, label %if.else61

if.else61:                                        ; preds = %for.end53
  %46 = load i32* %cost, align 4, !tbaa !3
  %sub62 = sub i32 %cost4x4.0.lcssa, %cost8x8.0.lcssa
  %add63 = add i32 %sub62, %46
  store i32 %add63, i32* %cost, align 4, !tbaa !3
  br label %cleanup

cleanup:                                          ; preds = %for.end53, %if.else61
  %retval.0 = phi i32 [ 0, %if.else61 ], [ 1, %for.end53 ]
  call void @llvm.lifetime.end(i64 256, i8* %0) #4
  ret i32 %retval.0
}
