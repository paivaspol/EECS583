define i32 @FastFullPelBlockMotionSearch(i16** nocapture %orig_pic, i16 signext %ref, i32 %list, i32 %pic_pix_x, i32 %pic_pix_y, i32 %blocktype, i16 signext %pred_mv_x, i16 signext %pred_mv_y, i16* nocapture %mv_x, i16* nocapture %mv_y, i32 %search_range, i32 %min_mcost, double %lambda) #0 {
entry:
  %mul = shl nsw i32 %search_range, 1
  %add128 = or i32 %mul, 1
  %mul3 = mul nsw i32 %add128, %add128
  %mul4 = fmul double %lambda, 6.553600e+04
  %add5 = fadd double %mul4, 5.000000e-01
  %conv = fptosi double %add5 to i32
  %0 = load %struct.ImageParameters** @img, align 8, !tbaa !0
  %opix_y = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 38
  %1 = load i32* %opix_y, align 4, !tbaa !3
  %sub = sub i32 %pic_pix_y, %1
  %opix_x = getelementptr inbounds %struct.ImageParameters* %0, i64 0, i32 37
  %2 = load i32* %opix_x, align 4, !tbaa !3
  %sub6 = sub nsw i32 %pic_pix_x, %2
  %shr = ashr i32 %sub6, 2
  %add7 = add nsw i32 %sub, %shr
  %idxprom = sext i32 %add7 to i64
  %idxprom8 = sext i32 %blocktype to i64
  %idxprom9 = sext i16 %ref to i64
  %idxprom10 = sext i32 %list to i64
  %3 = load i32****** @BlockSAD, align 8, !tbaa !0
  %arrayidx = getelementptr inbounds i32***** %3, i64 %idxprom10
  %4 = load i32***** %arrayidx, align 8, !tbaa !0
  %arrayidx11 = getelementptr inbounds i32**** %4, i64 %idxprom9
  %5 = load i32**** %arrayidx11, align 8, !tbaa !0
  %arrayidx12 = getelementptr inbounds i32*** %5, i64 %idxprom8
  %6 = load i32*** %arrayidx12, align 8, !tbaa !0
  %arrayidx13 = getelementptr inbounds i32** %6, i64 %idxprom
  %7 = load i32** %arrayidx13, align 8, !tbaa !0
  %8 = load i32*** @search_setup_done, align 8, !tbaa !0
  %arrayidx16 = getelementptr inbounds i32** %8, i64 %idxprom10
  %9 = load i32** %arrayidx16, align 8, !tbaa !0
  %arrayidx17 = getelementptr inbounds i32* %9, i64 %idxprom9
  %10 = load i32* %arrayidx17, align 4, !tbaa !3
  %tobool = icmp eq i32 %10, 0
  br i1 %tobool, label %if.then, label %if.end

if.then:                                          ; preds = %entry
  tail call void @SetupFastFullPelSearch(i16 signext %ref, i32 %list) #8
  %.pre = load %struct.ImageParameters** @img, align 8, !tbaa !0
  %opix_x22.phi.trans.insert = getelementptr inbounds %struct.ImageParameters* %.pre, i64 0, i32 37
  %.pre133 = load i32* %opix_x22.phi.trans.insert, align 4, !tbaa !3
  %opix_y28.phi.trans.insert = getelementptr inbounds %struct.ImageParameters* %.pre, i64 0, i32 38
  %.pre134 = load i32* %opix_y28.phi.trans.insert, align 4, !tbaa !3
  br label %if.end

if.end:                                           ; preds = %entry, %if.then
  %11 = phi i32 [ %1, %entry ], [ %.pre134, %if.then ]
  %12 = phi i32 [ %2, %entry ], [ %.pre133, %if.then ]
  %13 = load i32*** @search_center_x, align 8, !tbaa !0
  %arrayidx20 = getelementptr inbounds i32** %13, i64 %idxprom10
  %14 = load i32** %arrayidx20, align 8, !tbaa !0
  %arrayidx21 = getelementptr inbounds i32* %14, i64 %idxprom9
  %15 = load i32* %arrayidx21, align 4, !tbaa !3
  %sub23 = sub nsw i32 %15, %12
  %16 = load i32*** @search_center_y, align 8, !tbaa !0
  %arrayidx26 = getelementptr inbounds i32** %16, i64 %idxprom10
  %17 = load i32** %arrayidx26, align 8, !tbaa !0
  %arrayidx27 = getelementptr inbounds i32* %17, i64 %idxprom9
  %18 = load i32* %arrayidx27, align 4, !tbaa !3
  %sub29 = sub nsw i32 %18, %11
  %19 = load %struct.InputParameters** @input, align 8, !tbaa !0
  %rdopt = getelementptr inbounds %struct.InputParameters* %19, i64 0, i32 85
  %20 = load i32* %rdopt, align 4, !tbaa !3
  %tobool30 = icmp eq i32 %20, 0
  br i1 %tobool30, label %if.then31, label %if.end.for.cond.preheader_crit_edge

if.end.for.cond.preheader_crit_edge:              ; preds = %if.end
  %.pre135 = load i32** @mvbits, align 8, !tbaa !0
  br label %for.cond.preheader

if.then31:                                        ; preds = %if.end
  %21 = load i32*** @pos_00, align 8, !tbaa !0
  %arrayidx34 = getelementptr inbounds i32** %21, i64 %idxprom10
  %22 = load i32** %arrayidx34, align 8, !tbaa !0
  %arrayidx35 = getelementptr inbounds i32* %22, i64 %idxprom9
  %23 = load i32* %arrayidx35, align 4, !tbaa !3
  %idxprom36 = sext i32 %23 to i64
  %arrayidx37 = getelementptr inbounds i32* %7, i64 %idxprom36
  %24 = load i32* %arrayidx37, align 4, !tbaa !3
  %conv38 = sext i16 %pred_mv_x to i64
  %sub39 = sub i64 0, %conv38
  %25 = load i32** @mvbits, align 8, !tbaa !0
  %arrayidx41 = getelementptr inbounds i32* %25, i64 %sub39
  %26 = load i32* %arrayidx41, align 4, !tbaa !3
  %conv42 = sext i16 %pred_mv_y to i64
  %sub43 = sub i64 0, %conv42
  %arrayidx45 = getelementptr inbounds i32* %25, i64 %sub43
  %27 = load i32* %arrayidx45, align 4, !tbaa !3
  %add46 = add nsw i32 %27, %26
  %mul47 = mul nsw i32 %add46, %conv
  %shr48 = ashr i32 %mul47, 16
  %add49 = add nsw i32 %shr48, %24
  %cmp = icmp slt i32 %add49, %min_mcost
  %. = select i1 %cmp, i32 %23, i32 0
  %add49.min_mcost = select i1 %cmp, i32 %add49, i32 %min_mcost
  br label %for.cond.preheader

for.cond.preheader:                               ; preds = %if.end.for.cond.preheader_crit_edge, %if.then31
  %28 = phi i32* [ %25, %if.then31 ], [ %.pre135, %if.end.for.cond.preheader_crit_edge ]
  %best_pos.1.ph = phi i32 [ %., %if.then31 ], [ 0, %if.end.for.cond.preheader_crit_edge ]
  %min_mcost.addr.1.ph = phi i32 [ %add49.min_mcost, %if.then31 ], [ %min_mcost, %if.end.for.cond.preheader_crit_edge ]
  %29 = load i32** @spiral_search_x, align 8, !tbaa !0
  %30 = load i32** @spiral_search_y, align 8, !tbaa !0
  %conv69 = sext i16 %pred_mv_x to i32
  %conv74 = sext i16 %pred_mv_y to i32
  br label %for.body

for.body:                                         ; preds = %for.cond.preheader, %for.inc
  %indvars.iv = phi i64 [ 0, %for.cond.preheader ], [ %indvars.iv.next, %for.inc ]
  %block_sad.0132 = phi i32* [ %7, %for.cond.preheader ], [ %incdec.ptr, %for.inc ]
  %min_mcost.addr.1131 = phi i32 [ %min_mcost.addr.1.ph, %for.cond.preheader ], [ %min_mcost.addr.2, %for.inc ]
  %best_pos.1130 = phi i32 [ %best_pos.1.ph, %for.cond.preheader ], [ %best_pos.2, %for.inc ]
  %31 = load i32* %block_sad.0132, align 4, !tbaa !3
  %cmp60 = icmp slt i32 %31, %min_mcost.addr.1131
  br i1 %cmp60, label %if.then62, label %for.inc

if.then62:                                        ; preds = %for.body
  %arrayidx64 = getelementptr inbounds i32* %29, i64 %indvars.iv
  %32 = load i32* %arrayidx64, align 4, !tbaa !3
  %add65 = add nsw i32 %32, %sub23
  %arrayidx67 = getelementptr inbounds i32* %30, i64 %indvars.iv
  %33 = load i32* %arrayidx67, align 4, !tbaa !3
  %add68 = add nsw i32 %33, %sub29
  %shl = shl i32 %add65, 2
  %sub70 = sub nsw i32 %shl, %conv69
  %idxprom71 = sext i32 %sub70 to i64
  %arrayidx72 = getelementptr inbounds i32* %28, i64 %idxprom71
  %34 = load i32* %arrayidx72, align 4, !tbaa !3
  %shl73 = shl i32 %add68, 2
  %sub75 = sub nsw i32 %shl73, %conv74
  %idxprom76 = sext i32 %sub75 to i64
  %arrayidx77 = getelementptr inbounds i32* %28, i64 %idxprom76
  %35 = load i32* %arrayidx77, align 4, !tbaa !3
  %add78 = add nsw i32 %35, %34
  %mul79 = mul nsw i32 %add78, %conv
  %shr80 = ashr i32 %mul79, 16
  %add81 = add nsw i32 %shr80, %31
  %cmp82 = icmp slt i32 %add81, %min_mcost.addr.1131
  %36 = trunc i64 %indvars.iv to i32
  %pos.0.best_pos.1 = select i1 %cmp82, i32 %36, i32 %best_pos.1130
  %add81.min_mcost.addr.1 = select i1 %cmp82, i32 %add81, i32 %min_mcost.addr.1131
  br label %for.inc

for.inc:                                          ; preds = %if.then62, %for.body
  %best_pos.2 = phi i32 [ %best_pos.1130, %for.body ], [ %pos.0.best_pos.1, %if.then62 ]
  %min_mcost.addr.2 = phi i32 [ %min_mcost.addr.1131, %for.body ], [ %add81.min_mcost.addr.1, %if.then62 ]
  %indvars.iv.next = add i64 %indvars.iv, 1
  %incdec.ptr = getelementptr inbounds i32* %block_sad.0132, i64 1
  %37 = trunc i64 %indvars.iv.next to i32
  %cmp58 = icmp slt i32 %37, %mul3
  br i1 %cmp58, label %for.body, label %for.end

for.end:                                          ; preds = %for.inc
  %idxprom87 = sext i32 %best_pos.2 to i64
  %arrayidx88 = getelementptr inbounds i32* %29, i64 %idxprom87
  %38 = load i32* %arrayidx88, align 4, !tbaa !3
  %add89 = add nsw i32 %38, %sub23
  %conv90 = trunc i32 %add89 to i16
  store i16 %conv90, i16* %mv_x, align 2, !tbaa !4
  %arrayidx92 = getelementptr inbounds i32* %30, i64 %idxprom87
  %39 = load i32* %arrayidx92, align 4, !tbaa !3
  %add93 = add nsw i32 %39, %sub29
  %conv94 = trunc i32 %add93 to i16
  store i16 %conv94, i16* %mv_y, align 2, !tbaa !4
  ret i32 %min_mcost.addr.2
}
