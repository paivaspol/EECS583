define internal fastcc void @expand_arg(%struct.cpp_reader* %pfile, %struct.macro_arg* nocapture %arg) #0 {
entry:
  tail call void @llvm.dbg.value(metadata !{%struct.cpp_reader* %pfile}, i64 0, metadata !786), !dbg !1664
  tail call void @llvm.dbg.value(metadata !{%struct.macro_arg* %arg}, i64 0, metadata !787), !dbg !1665
  %count = getelementptr inbounds %struct.macro_arg* %arg, i64 0, i32 3, !dbg !1666
  %0 = load i32* %count, align 4, !dbg !1666, !tbaa !1016
  %cmp = icmp eq i32 %0, 0, !dbg !1666
  br i1 %cmp, label %return, label %if.end, !dbg !1666

if.end:                                           ; preds = %entry
  tail call void @llvm.dbg.value(metadata !1667, i64 0, metadata !788), !dbg !1668
  %call = tail call noalias i8* @xmalloc(i64 2048) #8, !dbg !1669
  %1 = bitcast i8* %call to %struct.cpp_token**, !dbg !1669
  %expanded = getelementptr inbounds %struct.macro_arg* %arg, i64 0, i32 1, !dbg !1669
  store %struct.cpp_token** %1, %struct.cpp_token*** %expanded, align 8, !dbg !1669, !tbaa !894
  %first = getelementptr inbounds %struct.macro_arg* %arg, i64 0, i32 0, !dbg !1670
  %2 = load %struct.cpp_token*** %first, align 8, !dbg !1670, !tbaa !894
  %3 = load i32* %count, align 4, !dbg !1670, !tbaa !1016
  %add = add i32 %3, 1, !dbg !1670
  tail call void @llvm.dbg.value(metadata !{%struct.cpp_reader* %pfile}, i64 0, metadata !1671) #4, !dbg !1672
  tail call void @llvm.dbg.value(metadata !974, i64 0, metadata !1673) #4, !dbg !1674
  tail call void @llvm.dbg.value(metadata !1675, i64 0, metadata !1676) #4, !dbg !1677
  tail call void @llvm.dbg.value(metadata !{%struct.cpp_token** %2}, i64 0, metadata !1678) #4, !dbg !1679
  tail call void @llvm.dbg.value(metadata !{i32 %add}, i64 0, metadata !1680) #4, !dbg !1681
  %call.i = tail call fastcc %struct.cpp_context* @next_context(%struct.cpp_reader* %pfile) #8, !dbg !1682
  tail call void @llvm.dbg.value(metadata !{%struct.cpp_context* %call.i}, i64 0, metadata !1683) #4, !dbg !1682
  %buff2.i = getelementptr inbounds %struct.cpp_context* %call.i, i64 0, i32 4, !dbg !1684
  %4 = getelementptr inbounds %struct.cpp_context* %call.i, i64 0, i32 2, i32 0, !dbg !1685
  %first.c.i = bitcast %struct.cpp_token** %2 to %struct.cpp_token*, !dbg !1685
  %5 = bitcast %struct._cpp_buff** %buff2.i to i8*, !dbg !1685
  call void @llvm.memset.p0i8.i64(i8* %5, i8 0, i64 17, i32 8, i1 false), !dbg !1686
  store %struct.cpp_token* %first.c.i, %struct.cpp_token** %4, align 8, !dbg !1685, !tbaa !894
  %idx.ext.i = zext i32 %add to i64, !dbg !1687
  %add.ptr.i = getelementptr inbounds %struct.cpp_token** %2, i64 %idx.ext.i, !dbg !1687
  %6 = getelementptr inbounds %struct.cpp_context* %call.i, i64 0, i32 3, i32 0, !dbg !1687
  %add.ptr.c.i = bitcast %struct.cpp_token** %add.ptr.i to %struct.cpp_token*, !dbg !1687
  store %struct.cpp_token* %add.ptr.c.i, %struct.cpp_token** %6, align 8, !dbg !1687, !tbaa !894
  %expanded_count = getelementptr inbounds %struct.macro_arg* %arg, i64 0, i32 4, !dbg !1688
  %.pre = load i32* %expanded_count, align 4, !dbg !1688, !tbaa !1016
  br label %for.cond, !dbg !1689

for.cond:                                         ; preds = %if.end17, %if.end
  %7 = phi i32 [ %.pre, %if.end ], [ %inc, %if.end17 ]
  %capacity.0 = phi i32 [ 256, %if.end ], [ %capacity.1, %if.end17 ]
  %add2 = add i32 %7, 1, !dbg !1688
  %cmp3 = icmp ult i32 %add2, %capacity.0, !dbg !1688
  br i1 %cmp3, label %if.end12, label %if.then5, !dbg !1688

if.then5:                                         ; preds = %for.cond
  %mul6 = shl i32 %capacity.0, 1, !dbg !1690
  tail call void @llvm.dbg.value(metadata !{i32 %mul6}, i64 0, metadata !788), !dbg !1690
  %8 = load %struct.cpp_token*** %expanded, align 8, !dbg !1692, !tbaa !894
  %9 = bitcast %struct.cpp_token** %8 to i8*, !dbg !1692
  %conv8 = zext i32 %mul6 to i64, !dbg !1692
  %mul9 = shl nuw nsw i64 %conv8, 3, !dbg !1692
  %call10 = tail call i8* @xrealloc(i8* %9, i64 %mul9) #8, !dbg !1692
  %10 = bitcast i8* %call10 to %struct.cpp_token**, !dbg !1692
  store %struct.cpp_token** %10, %struct.cpp_token*** %expanded, align 8, !dbg !1692, !tbaa !894
  br label %if.end12, !dbg !1693

if.end12:                                         ; preds = %for.cond, %if.then5
  %capacity.1 = phi i32 [ %mul6, %if.then5 ], [ %capacity.0, %for.cond ]
  %call13 = tail call %struct.cpp_token* @cpp_get_token(%struct.cpp_reader* %pfile) #10, !dbg !1694
  tail call void @llvm.dbg.value(metadata !{%struct.cpp_token* %call13}, i64 0, metadata !789), !dbg !1694
  %type = getelementptr inbounds %struct.cpp_token* %call13, i64 0, i32 2, !dbg !1695
  %bf.load = load i8* %type, align 2, !dbg !1695
  %cmp14 = icmp eq i8 %bf.load, 67, !dbg !1695
  br i1 %cmp14, label %for.end, label %if.end17, !dbg !1695

if.end17:                                         ; preds = %if.end12
  %11 = load i32* %expanded_count, align 4, !dbg !1696, !tbaa !1016
  %inc = add i32 %11, 1, !dbg !1696
  store i32 %inc, i32* %expanded_count, align 4, !dbg !1696, !tbaa !1016
  %idxprom = zext i32 %11 to i64, !dbg !1696
  %12 = load %struct.cpp_token*** %expanded, align 8, !dbg !1696, !tbaa !894
  %arrayidx = getelementptr inbounds %struct.cpp_token** %12, i64 %idxprom, !dbg !1696
  store %struct.cpp_token* %call13, %struct.cpp_token** %arrayidx, align 8, !dbg !1696, !tbaa !894
  br label %for.cond, !dbg !1697

for.end:                                          ; preds = %if.end12
  tail call void @_cpp_pop_context(%struct.cpp_reader* %pfile) #10, !dbg !1698
  br label %return, !dbg !1698

return:                                           ; preds = %entry, %for.end
  ret void, !dbg !1698
}
