define void @_ZN10xalanc_1_815FormatterToText6updateEb(%"class.xalanc_1_8::FormatterToText"* %this, i1 zeroext %fNormalizationOnly) #0 align 2 {
entry:
  %theUTF8String = alloca %"class.xalanc_1_8::XalanDOMString", align 8
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::FormatterToText"* %this}, i64 0, metadata !2202), !dbg !2917
  call void @llvm.dbg.value(metadata !{i1 %fNormalizationOnly}, i64 0, metadata !2203), !dbg !2917
  %m_writer = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 1, !dbg !2918
  %0 = load %"class.xalanc_1_8::Writer"** %m_writer, align 8, !dbg !2918, !tbaa !2877
  %1 = bitcast %"class.xalanc_1_8::Writer"* %0 to %"class.xalanc_1_8::XalanOutputStream"* (%"class.xalanc_1_8::Writer"*)***, !dbg !2918
  %vtable = load %"class.xalanc_1_8::XalanOutputStream"* (%"class.xalanc_1_8::Writer"*)*** %1, align 8, !dbg !2918, !tbaa !2875
  %vfn = getelementptr inbounds %"class.xalanc_1_8::XalanOutputStream"* (%"class.xalanc_1_8::Writer"*)** %vtable, i64 4, !dbg !2918
  %2 = load %"class.xalanc_1_8::XalanOutputStream"* (%"class.xalanc_1_8::Writer"*)** %vfn, align 8, !dbg !2918
  %call = call %"class.xalanc_1_8::XalanOutputStream"* %2(%"class.xalanc_1_8::Writer"* %0) #10, !dbg !2918
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanOutputStream"* %call}, i64 0, metadata !2204), !dbg !2918
  %cmp = icmp eq %"class.xalanc_1_8::XalanOutputStream"* %call, null, !dbg !2919
  br i1 %cmp, label %if.then, label %if.else, !dbg !2919

if.then:                                          ; preds = %entry
  %m_newlineString = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 7, !dbg !2920
  store i16* getelementptr inbounds ([0 x i16]* @_ZN10xalanc_1_817XalanOutputStream10s_nlStringE, i64 0, i64 0), i16** %m_newlineString, align 8, !dbg !2920, !tbaa !2877
  tail call void @llvm.dbg.value(metadata !2922, i64 0, metadata !2923), !dbg !2925
  tail call void @llvm.dbg.value(metadata !2922, i64 0, metadata !2926), !dbg !2927
  br label %while.cond.i, !dbg !2928

while.cond.i:                                     ; preds = %while.cond.i, %if.then
  %theBufferPointer.0.i = phi i16* [ getelementptr inbounds ([0 x i16]* @_ZN10xalanc_1_817XalanOutputStream10s_nlStringE, i64 0, i64 0), %if.then ], [ %incdec.ptr.i, %while.cond.i ]
  %3 = load i16* %theBufferPointer.0.i, align 2, !dbg !2928, !tbaa !2879
  %cmp.i = icmp eq i16 %3, 0, !dbg !2928
  %incdec.ptr.i = getelementptr inbounds i16* %theBufferPointer.0.i, i64 1, !dbg !2929
  tail call void @llvm.dbg.value(metadata !{i16* %incdec.ptr.i}, i64 0, metadata !2926), !dbg !2929
  br i1 %cmp.i, label %_ZN10xalanc_1_86lengthEPKt.exit, label %while.cond.i, !dbg !2928

_ZN10xalanc_1_86lengthEPKt.exit:                  ; preds = %while.cond.i
  %sub.ptr.lhs.cast.i = ptrtoint i16* %theBufferPointer.0.i to i64, !dbg !2931
  %sub.ptr.sub.i = sub i64 %sub.ptr.lhs.cast.i, ptrtoint ([0 x i16]* @_ZN10xalanc_1_817XalanOutputStream10s_nlStringE to i64), !dbg !2931
  %sub.ptr.div4.i = lshr exact i64 %sub.ptr.sub.i, 1, !dbg !2931
  %conv1.i = trunc i64 %sub.ptr.div4.i to i32, !dbg !2931
  %m_newlineStringLength = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 8, !dbg !2924
  store i32 %conv1.i, i32* %m_newlineStringLength, align 4, !dbg !2924, !tbaa !2881
  br i1 %fNormalizationOnly, label %if.end33, label %if.then6, !dbg !2932

if.then6:                                         ; preds = %_ZN10xalanc_1_86lengthEPKt.exit
  %call7 = call zeroext i16 @_ZN10xalanc_1_824XalanTranscodingServices24getMaximumCharacterValueEv() #10, !dbg !2933
  %m_maxCharacter = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 2, !dbg !2933
  store i16 %call7, i16* %m_maxCharacter, align 2, !dbg !2933, !tbaa !2879
  br label %if.end33, !dbg !2935

if.else:                                          ; preds = %entry
  %4 = bitcast %"class.xalanc_1_8::XalanOutputStream"* %call to i16* (%"class.xalanc_1_8::XalanOutputStream"*)***, !dbg !2936
  %vtable8 = load i16* (%"class.xalanc_1_8::XalanOutputStream"*)*** %4, align 8, !dbg !2936, !tbaa !2875
  %vfn9 = getelementptr inbounds i16* (%"class.xalanc_1_8::XalanOutputStream"*)** %vtable8, i64 3, !dbg !2936
  %5 = load i16* (%"class.xalanc_1_8::XalanOutputStream"*)** %vfn9, align 8, !dbg !2936
  %call10 = call i16* %5(%"class.xalanc_1_8::XalanOutputStream"* %call) #10, !dbg !2936
  %m_newlineString11 = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 7, !dbg !2936
  store i16* %call10, i16** %m_newlineString11, align 8, !dbg !2936, !tbaa !2877
  tail call void @llvm.dbg.value(metadata !{i16* %call10}, i64 0, metadata !2937), !dbg !2939
  tail call void @llvm.dbg.value(metadata !{i16* %call10}, i64 0, metadata !2940), !dbg !2941
  br label %while.cond.i47, !dbg !2942

while.cond.i47:                                   ; preds = %while.cond.i47, %if.else
  %theBufferPointer.0.i44 = phi i16* [ %call10, %if.else ], [ %incdec.ptr.i46, %while.cond.i47 ]
  %6 = load i16* %theBufferPointer.0.i44, align 2, !dbg !2942, !tbaa !2879
  %cmp.i45 = icmp eq i16 %6, 0, !dbg !2942
  %incdec.ptr.i46 = getelementptr inbounds i16* %theBufferPointer.0.i44, i64 1, !dbg !2943
  tail call void @llvm.dbg.value(metadata !{i16* %incdec.ptr.i46}, i64 0, metadata !2940), !dbg !2943
  br i1 %cmp.i45, label %_ZN10xalanc_1_86lengthEPKt.exit52, label %while.cond.i47, !dbg !2942

_ZN10xalanc_1_86lengthEPKt.exit52:                ; preds = %while.cond.i47
  %sub.ptr.lhs.cast.i48 = ptrtoint i16* %theBufferPointer.0.i44 to i64, !dbg !2944
  %sub.ptr.rhs.cast.i = ptrtoint i16* %call10 to i64, !dbg !2944
  %sub.ptr.sub.i49 = sub i64 %sub.ptr.lhs.cast.i48, %sub.ptr.rhs.cast.i, !dbg !2944
  %sub.ptr.div4.i50 = lshr exact i64 %sub.ptr.sub.i49, 1, !dbg !2944
  %conv1.i51 = trunc i64 %sub.ptr.div4.i50 to i32, !dbg !2944
  %m_newlineStringLength14 = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 8, !dbg !2938
  store i32 %conv1.i51, i32* %m_newlineStringLength14, align 4, !dbg !2938, !tbaa !2881
  br i1 %fNormalizationOnly, label %if.end33, label %if.then18, !dbg !2945

if.then18:                                        ; preds = %_ZN10xalanc_1_86lengthEPKt.exit52
  %m_encoding = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 3, !dbg !2946
  invoke void @_ZN10xalanc_1_817XalanOutputStream17setOutputEncodingERKNS_14XalanDOMStringE(%"class.xalanc_1_8::XalanOutputStream"* %call, %"class.xalanc_1_8::XalanDOMString"* %m_encoding) #10
          to label %try.cont unwind label %lpad, !dbg !2946

lpad:                                             ; preds = %if.then18
  %7 = landingpad { i8*, i32 } personality i8* bitcast (i32 (...)* @__gxx_personality_v0 to i8*)
          catch i8* bitcast (i8** @_ZTIN10xalanc_1_817XalanOutputStream28UnsupportedEncodingExceptionE to i8*), !dbg !2946
  %8 = extractvalue { i8*, i32 } %7, 0, !dbg !2946
  %9 = extractvalue { i8*, i32 } %7, 1, !dbg !2946
  %10 = call i32 @llvm.eh.typeid.for(i8* bitcast (i8** @_ZTIN10xalanc_1_817XalanOutputStream28UnsupportedEncodingExceptionE to i8*)) #8, !dbg !2948
  %matches = icmp eq i32 %9, %10, !dbg !2948
  br i1 %matches, label %catch, label %eh.resume, !dbg !2948

catch:                                            ; preds = %lpad
  %11 = call i8* @__cxa_begin_catch(i8* %8) #8, !dbg !2948
  call void @llvm.dbg.declare(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, metadata !2357), !dbg !2949
  invoke void @_ZN10xalanc_1_814XalanDOMStringC1EPKtj(%"class.xalanc_1_8::XalanDOMString"* %theUTF8String, i16* getelementptr inbounds ([0 x i16]* @_ZN10xalanc_1_824XalanTranscodingServices12s_utf8StringE, i64 0, i64 0), i32 -1) #10
          to label %invoke.cont20 unwind label %lpad19, !dbg !2949

invoke.cont20:                                    ; preds = %catch
  invoke void @_ZN10xalanc_1_817XalanOutputStream17setOutputEncodingERKNS_14XalanDOMStringE(%"class.xalanc_1_8::XalanOutputStream"* %call, %"class.xalanc_1_8::XalanDOMString"* %theUTF8String) #10
          to label %invoke.cont22 unwind label %lpad21, !dbg !2950

invoke.cont22:                                    ; preds = %invoke.cont20
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %m_encoding}, i64 0, metadata !2951), !dbg !2953
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, i64 0, metadata !2954), !dbg !2953
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %m_encoding}, i64 0, metadata !2955), !dbg !2958
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, i64 0, metadata !2959), !dbg !2958
  %cmp.i.i = icmp eq %"class.xalanc_1_8::XalanDOMString"* %theUTF8String, %m_encoding, !dbg !2960
  br i1 %cmp.i.i, label %invoke.cont24, label %if.then.i.i, !dbg !2960

if.then.i.i:                                      ; preds = %invoke.cont22
  %m_data.i.i = getelementptr inbounds %"class.xalanc_1_8::XalanDOMString"* %m_encoding, i64 0, i32 0, !dbg !2961
  %m_data2.i.i = getelementptr inbounds %"class.xalanc_1_8::XalanDOMString"* %theUTF8String, i64 0, i32 0, !dbg !2961
  %call.i.i57 = invoke %"class.std::vector"* @_ZNSt6vectorItSaItEEaSERKS1_(%"class.std::vector"* %m_data.i.i, %"class.std::vector"* %m_data2.i.i) #10
          to label %call.i.i.noexc unwind label %lpad21

call.i.i.noexc:                                   ; preds = %if.then.i.i
  %m_size.i.i = getelementptr inbounds %"class.xalanc_1_8::XalanDOMString"* %theUTF8String, i64 0, i32 1, !dbg !2963
  %12 = load i32* %m_size.i.i, align 8, !dbg !2963, !tbaa !2881
  %m_size3.i.i = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 3, i32 1, !dbg !2963
  store i32 %12, i32* %m_size3.i.i, align 4, !dbg !2963, !tbaa !2881
  br label %invoke.cont24, !dbg !2964

invoke.cont24:                                    ; preds = %call.i.i.noexc, %invoke.cont22
  %m_haveEncoding = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 4, !dbg !2965
  store i8 1, i8* %m_haveEncoding, align 1, !dbg !2965, !tbaa !2880
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, i64 0, metadata !2966), !dbg !2968
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, i64 0, metadata !2969), !dbg !2971
  %_M_start.i.i.i.i.i53 = getelementptr inbounds %"class.xalanc_1_8::XalanDOMString"* %theUTF8String, i64 0, i32 0, i32 0, i32 0, i32 0, !dbg !2972
  %13 = load i16** %_M_start.i.i.i.i.i53, align 8, !dbg !2972, !tbaa !2877
  call void @llvm.dbg.value(metadata !{i16* %13}, i64 0, metadata !2976) #8, !dbg !2977
  %tobool.i.i.i.i.i.i54 = icmp eq i16* %13, null, !dbg !2978
  br i1 %tobool.i.i.i.i.i.i54, label %invoke.cont26, label %if.then.i.i.i.i.i.i55, !dbg !2978

if.then.i.i.i.i.i.i55:                            ; preds = %invoke.cont24
  call void @llvm.dbg.value(metadata !2908, i64 0, metadata !2979) #8, !dbg !2981
  call void @llvm.dbg.value(metadata !{i16* %13}, i64 0, metadata !2982) #8, !dbg !2981
  call void @llvm.dbg.value(metadata !2913, i64 0, metadata !2983) #8, !dbg !2981
  %14 = bitcast i16* %13 to i8*, !dbg !2984
  call void @_ZdlPv(i8* %14) #12, !dbg !2984
  br label %invoke.cont26, !dbg !2980

invoke.cont26:                                    ; preds = %if.then.i.i.i.i.i.i55, %invoke.cont24
  call void @__cxa_end_catch(), !dbg !2985
  br label %try.cont, !dbg !2985

try.cont:                                         ; preds = %if.then18, %invoke.cont26
  tail call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanOutputStream"* %call}, i64 0, metadata !2986), !dbg !2988
  %m_encoding.i = getelementptr inbounds %"class.xalanc_1_8::XalanOutputStream"* %call, i64 0, i32 5, !dbg !2989
  %call30 = call zeroext i16 @_ZN10xalanc_1_824XalanTranscodingServices24getMaximumCharacterValueERKNS_14XalanDOMStringE(%"class.xalanc_1_8::XalanDOMString"* %m_encoding.i) #10, !dbg !2987
  %m_maxCharacter31 = getelementptr inbounds %"class.xalanc_1_8::FormatterToText"* %this, i64 0, i32 2, !dbg !2987
  store i16 %call30, i16* %m_maxCharacter31, align 2, !dbg !2987, !tbaa !2879
  br label %if.end33, !dbg !2991

lpad19:                                           ; preds = %catch
  %15 = landingpad { i8*, i32 } personality i8* bitcast (i32 (...)* @__gxx_personality_v0 to i8*)
          cleanup, !dbg !2949
  %16 = extractvalue { i8*, i32 } %15, 0, !dbg !2949
  %17 = extractvalue { i8*, i32 } %15, 1, !dbg !2949
  br label %ehcleanup, !dbg !2949

lpad21:                                           ; preds = %if.then.i.i, %invoke.cont20
  %18 = landingpad { i8*, i32 } personality i8* bitcast (i32 (...)* @__gxx_personality_v0 to i8*)
          cleanup, !dbg !2950
  %19 = extractvalue { i8*, i32 } %18, 0, !dbg !2950
  %20 = extractvalue { i8*, i32 } %18, 1, !dbg !2950
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, i64 0, metadata !2992), !dbg !2993
  call void @llvm.dbg.value(metadata !{%"class.xalanc_1_8::XalanDOMString"* %theUTF8String}, i64 0, metadata !2994), !dbg !2996
  %_M_start.i.i.i.i.i = getelementptr inbounds %"class.xalanc_1_8::XalanDOMString"* %theUTF8String, i64 0, i32 0, i32 0, i32 0, i32 0, !dbg !2997
  %21 = load i16** %_M_start.i.i.i.i.i, align 8, !dbg !2997, !tbaa !2877
  call void @llvm.dbg.value(metadata !{i16* %21}, i64 0, metadata !3001) #8, !dbg !3002
  %tobool.i.i.i.i.i.i = icmp eq i16* %21, null, !dbg !3003
  br i1 %tobool.i.i.i.i.i.i, label %ehcleanup, label %if.then.i.i.i.i.i.i, !dbg !3003

if.then.i.i.i.i.i.i:                              ; preds = %lpad21
  call void @llvm.dbg.value(metadata !2908, i64 0, metadata !3004) #8, !dbg !3006
  call void @llvm.dbg.value(metadata !{i16* %21}, i64 0, metadata !3007) #8, !dbg !3006
  call void @llvm.dbg.value(metadata !2913, i64 0, metadata !3008) #8, !dbg !3006
  %22 = bitcast i16* %21 to i8*, !dbg !3009
  call void @_ZdlPv(i8* %22) #12, !dbg !3009
  br label %ehcleanup, !dbg !3005

ehcleanup:                                        ; preds = %if.then.i.i.i.i.i.i, %lpad21, %lpad19
  %ehselector.slot.0 = phi i32 [ %17, %lpad19 ], [ %20, %lpad21 ], [ %20, %if.then.i.i.i.i.i.i ]
  %exn.slot.0 = phi i8* [ %16, %lpad19 ], [ %19, %lpad21 ], [ %19, %if.then.i.i.i.i.i.i ]
  invoke void @__cxa_end_catch()
          to label %eh.resume unwind label %terminate.lpad, !dbg !2985

if.end33:                                         ; preds = %_ZN10xalanc_1_86lengthEPKt.exit, %_ZN10xalanc_1_86lengthEPKt.exit52, %try.cont, %if.then6
  ret void, !dbg !3010

eh.resume:                                        ; preds = %ehcleanup, %lpad
  %ehselector.slot.1 = phi i32 [ %ehselector.slot.0, %ehcleanup ], [ %9, %lpad ]
  %exn.slot.1 = phi i8* [ %exn.slot.0, %ehcleanup ], [ %8, %lpad ]
  %lpad.val = insertvalue { i8*, i32 } undef, i8* %exn.slot.1, 0, !dbg !2948
  %lpad.val36 = insertvalue { i8*, i32 } %lpad.val, i32 %ehselector.slot.1, 1, !dbg !2948
  resume { i8*, i32 } %lpad.val36, !dbg !2948

terminate.lpad:                                   ; preds = %ehcleanup
  %23 = landingpad { i8*, i32 } personality i8* bitcast (i32 (...)* @__gxx_personality_v0 to i8*)
          catch i8* null, !dbg !2985
  %24 = extractvalue { i8*, i32 } %23, 0, !dbg !2985
  call void @__clang_call_terminate(i8* %24) #11, !dbg !2985
  unreachable, !dbg !2985
}
