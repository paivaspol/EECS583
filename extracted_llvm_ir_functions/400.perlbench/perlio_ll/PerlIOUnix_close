define i64 @PerlIOUnix_close(%struct._PerlIO** nocapture %f) #1 {
entry:
  %0 = load %struct._PerlIO** %f, align 8, !tbaa !3
  %fd1 = getelementptr inbounds %struct._PerlIO* %0, i64 1
  %1 = bitcast %struct._PerlIO* %fd1 to i32*
  %2 = load i32* %1, align 4, !tbaa !0
  %flags = getelementptr inbounds %struct._PerlIO* %0, i64 0, i32 2
  %3 = load i32* %flags, align 4, !tbaa !0
  %and = and i32 %3, 2097152
  %tobool = icmp eq i32 %and, 0
  br i1 %tobool, label %if.else, label %if.then

if.then:                                          ; preds = %entry
  %call = tail call i32 @PerlIOUnix_refcnt_dec(i32 %2) #10
  %cmp = icmp sgt i32 %call, 0
  br i1 %cmp, label %if.then2, label %while.cond.preheader

while.cond.preheader:                             ; preds = %if.then
  %call731 = tail call i32 @close(i32 %2) #9
  %cmp832 = icmp eq i32 %call731, 0
  br i1 %cmp832, label %if.then17, label %while.body

if.then2:                                         ; preds = %if.then
  %4 = load %struct._PerlIO** %f, align 8, !tbaa !3
  %flags3 = getelementptr inbounds %struct._PerlIO* %4, i64 0, i32 2
  %5 = load i32* %flags3, align 4, !tbaa !0
  %and4 = and i32 %5, -2097153
  store i32 %and4, i32* %flags3, align 4, !tbaa !0
  br label %return

if.else:                                          ; preds = %entry
  %call5 = tail call i32* @__errno_location() #9
  store i32 9, i32* %call5, align 4, !tbaa !0
  br label %return

while.body:                                       ; preds = %while.cond.preheader, %while.cond.backedge
  %call9 = tail call i32* @__errno_location() #9
  %6 = load i32* %call9, align 4, !tbaa !0
  %cmp10 = icmp eq i32 %6, 4
  br i1 %cmp10, label %if.end12, label %return

if.end12:                                         ; preds = %while.body
  %7 = load i32* @PL_sig_pending, align 4, !tbaa !0
  %tobool13 = icmp eq i32 %7, 0
  br i1 %tobool13, label %while.cond.backedge, label %if.then14

if.then14:                                        ; preds = %if.end12
  tail call void @Perl_despatch_signals() #9
  br label %while.cond.backedge

while.cond.backedge:                              ; preds = %if.then14, %if.end12
  %call7 = tail call i32 @close(i32 %2) #9
  %cmp8 = icmp eq i32 %call7, 0
  br i1 %cmp8, label %if.then17, label %while.body

if.then17:                                        ; preds = %while.cond.backedge, %while.cond.preheader
  %8 = load %struct._PerlIO** %f, align 8, !tbaa !3
  %flags18 = getelementptr inbounds %struct._PerlIO* %8, i64 0, i32 2
  %9 = load i32* %flags18, align 4, !tbaa !0
  %and19 = and i32 %9, -2097153
  store i32 %and19, i32* %flags18, align 4, !tbaa !0
  br label %return

return:                                           ; preds = %while.body, %if.then17, %if.else, %if.then2
  %retval.0 = phi i64 [ 0, %if.then2 ], [ -1, %if.else ], [ 0, %if.then17 ], [ -1, %while.body ]
  ret i64 %retval.0
}
