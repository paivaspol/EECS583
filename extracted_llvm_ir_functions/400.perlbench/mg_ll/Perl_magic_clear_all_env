define i32 @Perl_magic_clear_all_env(%struct.sv* nocapture %sv, %struct.magic* nocapture %mg) #0 {
entry:
  %0 = load i32* @PL_use_safe_putenv, align 4, !tbaa !3
  %tobool = icmp eq i32 %0, 0
  %1 = load i8*** @environ, align 8, !tbaa !0
  br i1 %tobool, label %if.then, label %if.end5

if.then:                                          ; preds = %entry
  %2 = load i8*** @PL_origenviron, align 8, !tbaa !0
  %cmp = icmp eq i8** %1, %2
  br i1 %cmp, label %if.then1, label %for.cond.preheader

for.cond.preheader:                               ; preds = %if.then
  %3 = load i8** %1, align 8, !tbaa !0
  %tobool29 = icmp eq i8* %3, null
  br i1 %tobool29, label %if.end5, label %for.body

if.then1:                                         ; preds = %if.then
  %call = tail call i8* @Perl_safesysmalloc(i64 8) #7
  %4 = bitcast i8* %call to i8**
  store i8** %4, i8*** @environ, align 8, !tbaa !0
  br label %if.end5

for.body:                                         ; preds = %for.cond.preheader, %for.body
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body ], [ 0, %for.cond.preheader ]
  %5 = phi i8* [ %7, %for.body ], [ %3, %for.cond.preheader ]
  tail call void @Perl_safesysfree(i8* %5) #7
  %indvars.iv.next = add i64 %indvars.iv, 1
  %6 = load i8*** @environ, align 8, !tbaa !0
  %arrayidx = getelementptr inbounds i8** %6, i64 %indvars.iv.next
  %7 = load i8** %arrayidx, align 8, !tbaa !0
  %tobool2 = icmp eq i8* %7, null
  br i1 %tobool2, label %if.end5, label %for.body

if.end5:                                          ; preds = %entry, %for.cond.preheader, %for.body, %if.then1
  %8 = phi i8** [ %4, %if.then1 ], [ %1, %for.cond.preheader ], [ %6, %for.body ], [ %1, %entry ]
  store i8* null, i8** %8, align 8, !tbaa !0
  ret i32 0
}
