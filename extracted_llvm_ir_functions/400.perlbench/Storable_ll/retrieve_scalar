define internal %struct.sv* @retrieve_scalar(%struct.stcxt* nocapture %cxt, i8* %cname) #1 {
entry:
  %fio = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 23
  %0 = load %struct._PerlIO*** %fio, align 8, !tbaa !0
  %tobool = icmp eq %struct._PerlIO** %0, null
  br i1 %tobool, label %if.then, label %if.else5

if.then:                                          ; preds = %entry
  %aptr = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 21, i32 2
  %1 = load i8** %aptr, align 8, !tbaa !0
  %aend = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 21, i32 3
  %2 = load i8** %aend, align 8, !tbaa !0
  %cmp = icmp ult i8* %1, %2
  br i1 %cmp, label %if.then2, label %return

if.then2:                                         ; preds = %if.then
  %incdec.ptr = getelementptr inbounds i8* %1, i64 1
  store i8* %incdec.ptr, i8** %aptr, align 8, !tbaa !0
  %3 = load i8* %1, align 1, !tbaa !1
  %conv = zext i8 %3 to i32
  br label %if.end11

if.else5:                                         ; preds = %entry
  %call = tail call i32 @PerlIO_getc(%struct._PerlIO** %0) #7
  %cmp7 = icmp eq i32 %call, -1
  br i1 %cmp7, label %return, label %if.end11

if.end11:                                         ; preds = %if.else5, %if.then2
  %len.0 = phi i32 [ %call, %if.else5 ], [ %conv, %if.then2 ]
  %conv12 = sext i32 %len.0 to i64
  %call13 = tail call %struct.sv* @Perl_newSV(i64 %conv12) #7
  %tobool14 = icmp eq %struct.sv* %call13, null
  br i1 %tobool14, label %return, label %if.end16

if.end16:                                         ; preds = %if.end11
  %aseen = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 4
  %4 = load %struct.av** %aseen, align 8, !tbaa !0
  %tagnum = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 9
  %5 = load i64* %tagnum, align 8, !tbaa !4
  %inc = add nsw i64 %5, 1
  store i64 %inc, i64* %tagnum, align 8, !tbaa !4
  %conv17 = trunc i64 %5 to i32
  store %struct.sv* %call13, %struct.sv** @PL_Sv, align 8, !tbaa !0
  %sv_refcnt = getelementptr inbounds %struct.sv* %call13, i64 0, i32 1
  %6 = load i32* %sv_refcnt, align 4, !tbaa !3
  %inc19 = add i32 %6, 1
  store i32 %inc19, i32* %sv_refcnt, align 4, !tbaa !3
  %call21 = tail call %struct.sv** @Perl_av_store(%struct.av* %4, i32 %conv17, %struct.sv* %call13) #7
  %cmp22 = icmp eq %struct.sv** %call21, null
  br i1 %cmp22, label %return, label %if.end25

if.end25:                                         ; preds = %if.end16
  %tobool26 = icmp eq i8* %cname, null
  br i1 %tobool26, label %if.end31, label %if.then27

if.then27:                                        ; preds = %if.end25
  %call28 = tail call %struct.hv* @Perl_gv_stashpv(i8* %cname, i32 1) #7
  %call29 = tail call %struct.sv* @Perl_newRV_noinc(%struct.sv* %call13) #7
  %call30 = tail call %struct.sv* @Perl_sv_bless(%struct.sv* %call29, %struct.hv* %call28) #7
  %sv_any = getelementptr inbounds %struct.sv* %call29, i64 0, i32 0
  %7 = load i8** %sv_any, align 8, !tbaa !0
  %xrv_rv = bitcast i8* %7 to %struct.sv**
  store %struct.sv* null, %struct.sv** %xrv_rv, align 8, !tbaa !0
  tail call void @Perl_sv_free(%struct.sv* %call29) #7
  br label %if.end31

if.end31:                                         ; preds = %if.end25, %if.then27
  %cmp32 = icmp eq i32 %len.0, 0
  br i1 %cmp32, label %if.then34, label %if.else48

if.then34:                                        ; preds = %if.end31
  %sv_flags = getelementptr inbounds %struct.sv* %call13, i64 0, i32 2
  %8 = load i32* %sv_flags, align 4, !tbaa !3
  %and = and i32 %8, 255
  %cmp35 = icmp ult i32 %and, 5
  br i1 %cmp35, label %if.then37, label %if.end39

if.then37:                                        ; preds = %if.then34
  %call38 = tail call signext i8 @Perl_sv_upgrade(%struct.sv* %call13, i32 4) #7
  br label %if.end39

if.end39:                                         ; preds = %if.then37, %if.then34
  %sv_any40 = getelementptr inbounds %struct.sv* %call13, i64 0, i32 0
  %9 = load i8** %sv_any40, align 8, !tbaa !0
  %xpv_len = getelementptr inbounds i8* %9, i64 16
  %10 = bitcast i8* %xpv_len to i64*
  %11 = load i64* %10, align 8, !tbaa !4
  %cmp41 = icmp eq i64 %11, 0
  br i1 %cmp41, label %cond.true, label %cond.end

cond.true:                                        ; preds = %if.end39
  %call43 = tail call i8* @Perl_sv_grow(%struct.sv* %call13, i64 1) #7
  %.pre = load i8** %sv_any40, align 8, !tbaa !0
  br label %cond.end

cond.end:                                         ; preds = %if.end39, %cond.true
  %12 = phi i8* [ %9, %if.end39 ], [ %.pre, %cond.true ]
  %xpv_pv46 = bitcast i8* %12 to i8**
  %13 = load i8** %xpv_pv46, align 8, !tbaa !0
  %xpv_cur = getelementptr inbounds i8* %12, i64 8
  %14 = bitcast i8* %xpv_cur to i64*
  %15 = load i64* %14, align 8, !tbaa !4
  %add.ptr = getelementptr inbounds i8* %13, i64 %15
  store i8 0, i8* %add.ptr, align 1, !tbaa !1
  br label %if.end91

if.else48:                                        ; preds = %if.end31
  %16 = load %struct._PerlIO*** %fio, align 8, !tbaa !0
  %tobool50 = icmp eq %struct._PerlIO** %16, null
  br i1 %tobool50, label %if.then51, label %if.else71

if.then51:                                        ; preds = %if.else48
  %aptr53 = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 21, i32 2
  %17 = load i8** %aptr53, align 8, !tbaa !0
  %add.ptr54 = getelementptr inbounds i8* %17, i64 %conv12
  %aend56 = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 21, i32 3
  %18 = load i8** %aend56, align 8, !tbaa !0
  %cmp57 = icmp ugt i8* %add.ptr54, %18
  br i1 %cmp57, label %if.else69, label %if.then59

if.then59:                                        ; preds = %if.then51
  %sv_any60 = getelementptr inbounds %struct.sv* %call13, i64 0, i32 0
  %19 = load i8** %sv_any60, align 8, !tbaa !0
  %xpv_pv61 = bitcast i8* %19 to i8**
  %20 = load i8** %xpv_pv61, align 8, !tbaa !0
  tail call void @llvm.memcpy.p0i8.p0i8.i64(i8* %20, i8* %17, i64 %conv12, i32 1, i1 false)
  %21 = load i8** %aptr53, align 8, !tbaa !0
  %add.ptr68 = getelementptr inbounds i8* %21, i64 %conv12
  store i8* %add.ptr68, i8** %aptr53, align 8, !tbaa !0
  br label %if.end82

if.else69:                                        ; preds = %if.then51
  tail call void @Perl_sv_free(%struct.sv* %call13) #7
  br label %return

if.else71:                                        ; preds = %if.else48
  %sv_any73 = getelementptr inbounds %struct.sv* %call13, i64 0, i32 0
  %22 = load i8** %sv_any73, align 8, !tbaa !0
  %xpv_pv74 = bitcast i8* %22 to i8**
  %23 = load i8** %xpv_pv74, align 8, !tbaa !0
  %call76 = tail call i64 @Perl_PerlIO_read(%struct._PerlIO** %16, i8* %23, i64 %conv12) #7
  %cmp78 = icmp eq i64 %call76, %conv12
  br i1 %cmp78, label %if.end82, label %if.then80

if.then80:                                        ; preds = %if.else71
  tail call void @Perl_sv_free(%struct.sv* %call13) #7
  br label %return

if.end82:                                         ; preds = %if.else71, %if.then59
  %sv_any84 = getelementptr inbounds %struct.sv* %call13, i64 0, i32 0
  %24 = load i8** %sv_any84, align 8, !tbaa !0
  %xpv_cur85 = getelementptr inbounds i8* %24, i64 8
  %25 = bitcast i8* %xpv_cur85 to i64*
  store i64 %conv12, i64* %25, align 8, !tbaa !4
  %xpv_pv87 = bitcast i8* %24 to i8**
  %26 = load i8** %xpv_pv87, align 8, !tbaa !0
  %add.ptr90 = getelementptr inbounds i8* %26, i64 %conv12
  store i8 0, i8* %add.ptr90, align 1, !tbaa !1
  %sv_flags92.pre = getelementptr inbounds %struct.sv* %call13, i64 0, i32 2
  br label %if.end91

if.end91:                                         ; preds = %if.end82, %cond.end
  %sv_flags92.pre-phi = phi i32* [ %sv_flags92.pre, %if.end82 ], [ %sv_flags, %cond.end ]
  %27 = load i32* %sv_flags92.pre-phi, align 4, !tbaa !3
  %and93 = and i32 %27, 1223753727
  %or = or i32 %and93, 67371008
  store i32 %or, i32* %sv_flags92.pre-phi, align 4, !tbaa !3
  %s_tainted = getelementptr inbounds %struct.stcxt* %cxt, i64 0, i32 12
  %28 = load i32* %s_tainted, align 4, !tbaa !3
  %tobool95 = icmp ne i32 %28, 0
  %29 = load i8* @PL_tainting, align 1, !tbaa !1
  %tobool97 = icmp ne i8 %29, 0
  %or.cond = and i1 %tobool95, %tobool97
  %30 = load i8* @PL_tainted, align 1, !tbaa !1
  %tobool99 = icmp ne i8 %30, 0
  %or.cond107 = and i1 %or.cond, %tobool99
  br i1 %or.cond107, label %if.then102, label %return

if.then102:                                       ; preds = %if.end91
  tail call void @Perl_sv_taint(%struct.sv* %call13) #7
  br label %return

return:                                           ; preds = %if.end11, %if.end91, %if.then102, %if.end16, %if.else5, %if.then, %if.then80, %if.else69
  %retval.0 = phi %struct.sv* [ null, %if.then80 ], [ null, %if.else69 ], [ null, %if.then ], [ null, %if.else5 ], [ null, %if.end11 ], [ null, %if.end16 ], [ %call13, %if.then102 ], [ %call13, %if.end91 ]
  ret %struct.sv* %retval.0
}
