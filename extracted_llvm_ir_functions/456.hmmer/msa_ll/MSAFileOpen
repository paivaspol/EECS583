define %struct.msafile_struct* @MSAFileOpen(i8* %filename, i32 %format, i8* %env) #0 {
entry:
  %dir = alloca i8*, align 8
  %call = call i8* @sre_malloc(i8* getelementptr inbounds ([49 x i8]* @.str, i64 0, i64 0), i32 760, i64 64) #6
  %0 = bitcast i8* %call to %struct.msafile_struct*
  %call1 = call i32 @strcmp(i8* %filename, i8* getelementptr inbounds ([2 x i8]* @.str13, i64 0, i64 0)) #7
  %cmp = icmp eq i32 %call1, 0
  br i1 %cmp, label %if.then, label %if.else

if.then:                                          ; preds = %entry
  %1 = load %struct._IO_FILE** @stdin, align 8, !tbaa !0
  %f = bitcast i8* %call to %struct._IO_FILE**
  store %struct._IO_FILE* %1, %struct._IO_FILE** %f, align 8, !tbaa !0
  %do_stdin = getelementptr inbounds i8* %call, i64 52
  %2 = bitcast i8* %do_stdin to i32*
  store i32 1, i32* %2, align 4, !tbaa !3
  %do_gzip = getelementptr inbounds i8* %call, i64 48
  %3 = bitcast i8* %do_gzip to i32*
  store i32 0, i32* %3, align 4, !tbaa !3
  %call2 = call i8* @sre_strdup(i8* getelementptr inbounds ([8 x i8]* @.str14, i64 0, i64 0), i32 -1) #6
  %fname = getelementptr inbounds i8* %call, i64 8
  %4 = bitcast i8* %fname to i8**
  store i8* %call2, i8** %4, align 8, !tbaa !0
  %ssi = getelementptr inbounds i8* %call, i64 40
  %5 = bitcast i8* %ssi to %struct.ssifile_s**
  store %struct.ssifile_s* null, %struct.ssifile_s** %5, align 8, !tbaa !0
  br label %if.end32

if.else:                                          ; preds = %entry
  %call3 = call %struct._IO_FILE* @fopen(i8* %filename, i8* getelementptr inbounds ([2 x i8]* @.str15, i64 0, i64 0)) #6
  %f4 = bitcast i8* %call to %struct._IO_FILE**
  store %struct._IO_FILE* %call3, %struct._IO_FILE** %f4, align 8, !tbaa !0
  %cmp5 = icmp eq %struct._IO_FILE* %call3, null
  br i1 %cmp5, label %if.else10, label %if.then6

if.then6:                                         ; preds = %if.else
  %call7 = call i64 @strlen(i8* %filename) #7
  %add = add i64 %call7, 5
  %call8 = call i8* @sre_malloc(i8* getelementptr inbounds ([49 x i8]* @.str, i64 0, i64 0), i32 806, i64 %add) #6
  %call9 = call i32 (i8*, i8*, ...)* @sprintf(i8* %call8, i8* getelementptr inbounds ([7 x i8]* @.str16, i64 0, i64 0), i8* %filename) #6
  br label %if.end24

if.else10:                                        ; preds = %if.else
  %call11 = call %struct._IO_FILE* @EnvFileOpen(i8* %filename, i8* %env, i8** %dir) #6
  store %struct._IO_FILE* %call11, %struct._IO_FILE** %f4, align 8, !tbaa !0
  %cmp13 = icmp eq %struct._IO_FILE* %call11, null
  br i1 %cmp13, label %return, label %if.then14

if.then14:                                        ; preds = %if.else10
  %6 = load i8** %dir, align 8, !tbaa !0
  %call15 = call i8* @FileConcat(i8* %6, i8* %filename) #6
  %call16 = call i64 @strlen(i8* %call15) #7
  %call17 = call i64 @strlen(i8* %filename) #7
  %add18 = add i64 %call16, 5
  %add19 = add i64 %add18, %call17
  %call21 = call i8* @sre_malloc(i8* getelementptr inbounds ([49 x i8]* @.str, i64 0, i64 0), i32 813, i64 %add19) #6
  %call22 = call i32 (i8*, i8*, ...)* @sprintf(i8* %call21, i8* getelementptr inbounds ([7 x i8]* @.str16, i64 0, i64 0), i8* %call15) #6
  %7 = load i8** %dir, align 8, !tbaa !0
  call void @free(i8* %7) #6
  br label %if.end24

if.end24:                                         ; preds = %if.then14, %if.then6
  %ssifile.0 = phi i8* [ %call8, %if.then6 ], [ %call21, %if.then14 ]
  %do_stdin25 = getelementptr inbounds i8* %call, i64 52
  %8 = bitcast i8* %do_stdin25 to i32*
  store i32 0, i32* %8, align 4, !tbaa !3
  %do_gzip26 = getelementptr inbounds i8* %call, i64 48
  %9 = bitcast i8* %do_gzip26 to i32*
  store i32 0, i32* %9, align 4, !tbaa !3
  %call27 = call i8* @sre_strdup(i8* %filename, i32 -1) #6
  %fname28 = getelementptr inbounds i8* %call, i64 8
  %10 = bitcast i8* %fname28 to i8**
  store i8* %call27, i8** %10, align 8, !tbaa !0
  %ssi29 = getelementptr inbounds i8* %call, i64 40
  %11 = bitcast i8* %ssi29 to %struct.ssifile_s**
  store %struct.ssifile_s* null, %struct.ssifile_s** %11, align 8, !tbaa !0
  %call31 = call i32 @SSIOpen(i8* %ssifile.0, %struct.ssifile_s** %11) #6
  call void @free(i8* %ssifile.0) #6
  br label %if.end32

if.end32:                                         ; preds = %if.end24, %if.then
  %cmp33 = icmp eq i32 %format, 0
  br i1 %cmp33, label %if.then34, label %if.end45

if.then34:                                        ; preds = %if.end32
  %do_stdin35 = getelementptr inbounds i8* %call, i64 52
  %12 = bitcast i8* %do_stdin35 to i32*
  %13 = load i32* %12, align 4, !tbaa !3
  %cmp36 = icmp eq i32 %13, 1
  br i1 %cmp36, label %if.then38, label %lor.lhs.false

lor.lhs.false:                                    ; preds = %if.then34
  %do_gzip37 = getelementptr inbounds i8* %call, i64 48
  %14 = bitcast i8* %do_gzip37 to i32*
  %15 = load i32* %14, align 4, !tbaa !3
  %tobool = icmp eq i32 %15, 0
  br i1 %tobool, label %if.end39, label %if.then38

if.then38:                                        ; preds = %lor.lhs.false, %if.then34
  call void (i8*, ...)* @Die(i8* getelementptr inbounds ([65 x i8]* @.str17, i64 0, i64 0)) #6
  br label %if.end39

if.end39:                                         ; preds = %lor.lhs.false, %if.then38
  %call40 = call i32 @MSAFileFormat(%struct.msafile_struct* %0) #8
  %cmp41 = icmp eq i32 %call40, 0
  br i1 %cmp41, label %if.then42, label %if.end45

if.then42:                                        ; preds = %if.end39
  %fname43 = getelementptr inbounds i8* %call, i64 8
  %16 = bitcast i8* %fname43 to i8**
  %17 = load i8** %16, align 8, !tbaa !0
  call void (i8*, ...)* @Die(i8* getelementptr inbounds ([53 x i8]* @.str18, i64 0, i64 0), i8* %17) #6
  br label %if.end45

if.end45:                                         ; preds = %if.end39, %if.then42, %if.end32
  %format.addr.0 = phi i32 [ 0, %if.then42 ], [ %call40, %if.end39 ], [ %format, %if.end32 ]
  %format46 = getelementptr inbounds i8* %call, i64 56
  %18 = bitcast i8* %format46 to i32*
  store i32 %format.addr.0, i32* %18, align 4, !tbaa !3
  %linenumber = getelementptr inbounds i8* %call, i64 16
  %19 = bitcast i8* %linenumber to i32*
  store i32 0, i32* %19, align 4, !tbaa !3
  %buf = getelementptr inbounds i8* %call, i64 24
  %20 = bitcast i8* %buf to i8**
  store i8* null, i8** %20, align 8, !tbaa !0
  %buflen = getelementptr inbounds i8* %call, i64 32
  %21 = bitcast i8* %buflen to i32*
  store i32 0, i32* %21, align 4, !tbaa !3
  br label %return

return:                                           ; preds = %if.else10, %if.end45
  %retval.0 = phi %struct.msafile_struct* [ %0, %if.end45 ], [ null, %if.else10 ]
  ret %struct.msafile_struct* %retval.0
}
