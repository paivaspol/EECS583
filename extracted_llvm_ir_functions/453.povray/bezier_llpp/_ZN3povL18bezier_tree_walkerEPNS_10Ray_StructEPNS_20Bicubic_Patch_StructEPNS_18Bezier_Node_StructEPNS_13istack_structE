define internal fastcc i32 @_ZN3povL18bezier_tree_walkerEPNS_10Ray_StructEPNS_20Bicubic_Patch_StructEPNS_18Bezier_Node_StructEPNS_13istack_structE(%"struct.pov::Ray_Struct"* nocapture %Ray, %"struct.pov::Bicubic_Patch_Struct"* %Shape, %"struct.pov::Bezier_Node_Struct"* nocapture %Node, %"struct.pov::istack_struct"* %Depth_Stack) #0 {
entry:
  %Depth = alloca double, align 8
  %u = alloca double, align 8
  %v = alloca double, align 8
  %uu = alloca [3 x double], align 16
  %vv = alloca [3 x double], align 16
  %N = alloca [3 x double], align 16
  %P = alloca [3 x double], align 16
  %V1 = alloca [3 x [3 x double]], align 16
  %uv_point = alloca [2 x double], align 16
  %tpoint = alloca [2 x double], align 16
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1113), !dbg !2072
  call void @llvm.dbg.value(metadata !{%"struct.pov::Bicubic_Patch_Struct"* %Shape}, i64 0, metadata !1114), !dbg !2072
  call void @llvm.dbg.value(metadata !{%"struct.pov::Bezier_Node_Struct"* %Node}, i64 0, metadata !1115), !dbg !2072
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !1116), !dbg !2072
  call void @llvm.dbg.value(metadata !146, i64 0, metadata !1118), !dbg !2073
  call void @llvm.dbg.declare(metadata !{double* %Depth}, metadata !1119), !dbg !2074
  call void @llvm.dbg.declare(metadata !{double* %u}, metadata !1120), !dbg !2074
  call void @llvm.dbg.declare(metadata !{double* %v}, metadata !1121), !dbg !2074
  call void @llvm.dbg.declare(metadata !{[3 x double]* %uu}, metadata !1122), !dbg !2075
  call void @llvm.dbg.declare(metadata !{[3 x double]* %vv}, metadata !1123), !dbg !2075
  call void @llvm.dbg.declare(metadata !{[3 x double]* %N}, metadata !1124), !dbg !2076
  call void @llvm.dbg.declare(metadata !{[3 x double]* %P}, metadata !1125), !dbg !2076
  %0 = bitcast [3 x [3 x double]]* %V1 to i8*, !dbg !2077
  call void @llvm.lifetime.start(i64 72, i8* %0) #2, !dbg !2077
  call void @llvm.dbg.declare(metadata !{[3 x [3 x double]]* %V1}, metadata !1126), !dbg !2077
  call void @llvm.dbg.declare(metadata !2078, metadata !1128), !dbg !2079
  call void @llvm.dbg.declare(metadata !{[2 x double]* %uv_point}, metadata !1129), !dbg !2080
  call void @llvm.dbg.declare(metadata !{[2 x double]* %tpoint}, metadata !1130), !dbg !2080
  %arraydecay = getelementptr inbounds %"struct.pov::Bezier_Node_Struct"* %Node, i64 0, i32 1, i64 0, !dbg !2081
  %Radius_Squared = getelementptr inbounds %"struct.pov::Bezier_Node_Struct"* %Node, i64 0, i32 2, !dbg !2081
  %1 = load double* %Radius_Squared, align 8, !dbg !2081, !tbaa !1603
  %call = call fastcc i32 @_ZN3povL22spherical_bounds_checkEPNS_10Ray_StructEPdd(%"struct.pov::Ray_Struct"* %Ray, double* %arraydecay, double %1) #9, !dbg !2081
  %tobool = icmp eq i32 %call, 0, !dbg !2081
  br i1 %tobool, label %cleanup, label %if.end, !dbg !2081

if.end:                                           ; preds = %entry
  %Node_Type = getelementptr inbounds %"struct.pov::Bezier_Node_Struct"* %Node, i64 0, i32 0, !dbg !2082
  %2 = load i32* %Node_Type, align 4, !dbg !2082, !tbaa !1588
  switch i32 %2, label %if.else112 [
    i32 0, label %if.then1
    i32 1, label %if.then7
  ], !dbg !2082

if.then1:                                         ; preds = %if.end
  call void @llvm.dbg.value(metadata !146, i64 0, metadata !1117), !dbg !2083
  %Count = getelementptr inbounds %"struct.pov::Bezier_Node_Struct"* %Node, i64 0, i32 3, !dbg !2083
  %3 = load i32* %Count, align 4, !dbg !2083, !tbaa !1588
  %cmp2185 = icmp sgt i32 %3, 0, !dbg !2083
  br i1 %cmp2185, label %for.body.lr.ph, label %cleanup, !dbg !2083

for.body.lr.ph:                                   ; preds = %if.then1
  %Data_Ptr = getelementptr inbounds %"struct.pov::Bezier_Node_Struct"* %Node, i64 0, i32 4, !dbg !2086
  %4 = load i8** %Data_Ptr, align 8, !dbg !2086, !tbaa !1654
  %Children3 = bitcast i8* %4 to [4 x %"struct.pov::Bezier_Node_Struct"*]*, !dbg !2087
  br label %for.body, !dbg !2083

for.body:                                         ; preds = %for.body.lr.ph, %for.body
  %indvars.iv = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next, %for.body ]
  %cnt.0186 = phi i32 [ 0, %for.body.lr.ph ], [ %add, %for.body ]
  %arrayidx = getelementptr inbounds [4 x %"struct.pov::Bezier_Node_Struct"*]* %Children3, i64 0, i64 %indvars.iv, !dbg !2087
  %5 = load %"struct.pov::Bezier_Node_Struct"** %arrayidx, align 8, !dbg !2087, !tbaa !1654
  %call4 = call fastcc i32 @_ZN3povL18bezier_tree_walkerEPNS_10Ray_StructEPNS_20Bicubic_Patch_StructEPNS_18Bezier_Node_StructEPNS_13istack_structE(%"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Bicubic_Patch_Struct"* %Shape, %"struct.pov::Bezier_Node_Struct"* %5, %"struct.pov::istack_struct"* %Depth_Stack) #9, !dbg !2087
  %add = add nsw i32 %call4, %cnt.0186, !dbg !2087
  call void @llvm.dbg.value(metadata !{i32 %add}, i64 0, metadata !1118), !dbg !2087
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !2083
  %6 = load i32* %Count, align 4, !dbg !2083, !tbaa !1588
  %7 = trunc i64 %indvars.iv.next to i32, !dbg !2083
  %cmp2 = icmp slt i32 %7, %6, !dbg !2083
  br i1 %cmp2, label %for.body, label %cleanup, !dbg !2083

if.then7:                                         ; preds = %if.end
  %Data_Ptr8 = getelementptr inbounds %"struct.pov::Bezier_Node_Struct"* %Node, i64 0, i32 4, !dbg !2089
  %8 = load i8** %Data_Ptr8, align 8, !dbg !2089, !tbaa !1654
  %arraydecay10 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 0, i64 0, !dbg !2091
  %Vertices11 = getelementptr inbounds i8* %8, i64 16, !dbg !2091
  %arraydecay13 = bitcast i8* %Vertices11 to double*, !dbg !2091
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay10}, i64 0, metadata !2092), !dbg !2093
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay13}, i64 0, metadata !2094), !dbg !2093
  %9 = load double* %arraydecay13, align 8, !dbg !2095, !tbaa !1603
  store double %9, double* %arraydecay10, align 16, !dbg !2095, !tbaa !1603
  %arrayidx2.i = getelementptr inbounds i8* %8, i64 24, !dbg !2096
  %10 = bitcast i8* %arrayidx2.i to double*, !dbg !2096
  %11 = load double* %10, align 8, !dbg !2096, !tbaa !1603
  %arrayidx3.i = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 0, i64 1, !dbg !2096
  store double %11, double* %arrayidx3.i, align 8, !dbg !2096, !tbaa !1603
  %arrayidx4.i = getelementptr inbounds i8* %8, i64 32, !dbg !2097
  %12 = bitcast i8* %arrayidx4.i to double*, !dbg !2097
  %13 = load double* %12, align 8, !dbg !2097, !tbaa !1603
  %arrayidx5.i = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 0, i64 2, !dbg !2097
  store double %13, double* %arrayidx5.i, align 16, !dbg !2097, !tbaa !1603
  %arraydecay15 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 1, i64 0, !dbg !2098
  %arrayidx17 = getelementptr inbounds i8* %8, i64 40, !dbg !2098
  %arraydecay18 = bitcast i8* %arrayidx17 to double*, !dbg !2098
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay15}, i64 0, metadata !2099), !dbg !2100
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay18}, i64 0, metadata !2101), !dbg !2100
  %14 = load double* %arraydecay18, align 8, !dbg !2102, !tbaa !1603
  store double %14, double* %arraydecay15, align 8, !dbg !2102, !tbaa !1603
  %arrayidx2.i148 = getelementptr inbounds i8* %8, i64 48, !dbg !2103
  %15 = bitcast i8* %arrayidx2.i148 to double*, !dbg !2103
  %16 = load double* %15, align 8, !dbg !2103, !tbaa !1603
  %arrayidx3.i149 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 1, i64 1, !dbg !2103
  store double %16, double* %arrayidx3.i149, align 8, !dbg !2103, !tbaa !1603
  %arrayidx4.i150 = getelementptr inbounds i8* %8, i64 56, !dbg !2104
  %17 = bitcast i8* %arrayidx4.i150 to double*, !dbg !2104
  %18 = load double* %17, align 8, !dbg !2104, !tbaa !1603
  %arrayidx5.i151 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 1, i64 2, !dbg !2104
  store double %18, double* %arrayidx5.i151, align 8, !dbg !2104, !tbaa !1603
  %arraydecay20 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 2, i64 0, !dbg !2105
  %arrayidx22 = getelementptr inbounds i8* %8, i64 64, !dbg !2105
  %arraydecay23 = bitcast i8* %arrayidx22 to double*, !dbg !2105
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay20}, i64 0, metadata !2106), !dbg !2107
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay23}, i64 0, metadata !2108), !dbg !2107
  %19 = load double* %arraydecay23, align 8, !dbg !2109, !tbaa !1603
  store double %19, double* %arraydecay20, align 16, !dbg !2109, !tbaa !1603
  %arrayidx2.i152 = getelementptr inbounds i8* %8, i64 72, !dbg !2110
  %20 = bitcast i8* %arrayidx2.i152 to double*, !dbg !2110
  %21 = load double* %20, align 8, !dbg !2110, !tbaa !1603
  %arrayidx3.i153 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 2, i64 1, !dbg !2110
  store double %21, double* %arrayidx3.i153, align 8, !dbg !2110, !tbaa !1603
  %arrayidx4.i154 = getelementptr inbounds i8* %8, i64 80, !dbg !2111
  %22 = bitcast i8* %arrayidx4.i154 to double*, !dbg !2111
  %23 = load double* %22, align 8, !dbg !2111, !tbaa !1603
  %arrayidx5.i155 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 2, i64 2, !dbg !2111
  store double %23, double* %arrayidx5.i155, align 16, !dbg !2111, !tbaa !1603
  %arrayidx24 = bitcast i8* %8 to float*, !dbg !2112
  %24 = load float* %arrayidx24, align 4, !dbg !2112, !tbaa !1728
  %conv = fpext float %24 to double, !dbg !2112
  %arrayidx25 = getelementptr inbounds [3 x double]* %uu, i64 0, i64 0, !dbg !2112
  store double %conv, double* %arrayidx25, align 16, !dbg !2112, !tbaa !1603
  %arrayidx29 = getelementptr inbounds [3 x double]* %uu, i64 0, i64 1, !dbg !2113
  store double %conv, double* %arrayidx29, align 8, !dbg !2113, !tbaa !1603
  %arrayidx31 = getelementptr inbounds i8* %8, i64 4, !dbg !2114
  %25 = bitcast i8* %arrayidx31 to float*, !dbg !2114
  %26 = load float* %25, align 4, !dbg !2114, !tbaa !1728
  %conv32 = fpext float %26 to double, !dbg !2114
  %arrayidx33 = getelementptr inbounds [3 x double]* %uu, i64 0, i64 2, !dbg !2114
  store double %conv32, double* %arrayidx33, align 16, !dbg !2114, !tbaa !1603
  %arrayidx35 = getelementptr inbounds i8* %8, i64 8, !dbg !2115
  %27 = bitcast i8* %arrayidx35 to float*, !dbg !2115
  %28 = load float* %27, align 4, !dbg !2115, !tbaa !1728
  %conv36 = fpext float %28 to double, !dbg !2115
  %arrayidx37 = getelementptr inbounds [3 x double]* %vv, i64 0, i64 0, !dbg !2115
  store double %conv36, double* %arrayidx37, align 16, !dbg !2115, !tbaa !1603
  %arrayidx39 = getelementptr inbounds i8* %8, i64 12, !dbg !2116
  %29 = bitcast i8* %arrayidx39 to float*, !dbg !2116
  %30 = load float* %29, align 4, !dbg !2116, !tbaa !1728
  %conv40 = fpext float %30 to double, !dbg !2116
  %arrayidx41 = getelementptr inbounds [3 x double]* %vv, i64 0, i64 1, !dbg !2116
  store double %conv40, double* %arrayidx41, align 8, !dbg !2116, !tbaa !1603
  %arrayidx45 = getelementptr inbounds [3 x double]* %vv, i64 0, i64 2, !dbg !2117
  store double %conv40, double* %arrayidx45, align 16, !dbg !2117, !tbaa !1603
  %arraydecay46 = getelementptr inbounds [3 x [3 x double]]* %V1, i64 0, i64 0, !dbg !2118
  %arraydecay49 = getelementptr inbounds [3 x double]* %P, i64 0, i64 0, !dbg !2118
  %arraydecay50 = getelementptr inbounds [3 x double]* %N, i64 0, i64 0, !dbg !2118
  %call51 = call fastcc i32 @_ZN3povL18intersect_subpatchEPNS_20Bicubic_Patch_StructEPNS_10Ray_StructEPA3_dPdS6_S6_S6_S6_S6_S6_(%"struct.pov::Bicubic_Patch_Struct"* %Shape, %"struct.pov::Ray_Struct"* %Ray, [3 x double]* %arraydecay46, double* %arrayidx25, double* %arrayidx37, double* %Depth, double* %arraydecay49, double* %arraydecay50, double* %u, double* %v) #9, !dbg !2118
  %tobool52 = icmp eq i32 %call51, 0, !dbg !2118
  br i1 %tobool52, label %if.end67, label %if.then53, !dbg !2118

if.then53:                                        ; preds = %if.then7
  call void @llvm.dbg.value(metadata !{double* %v}, i64 0, metadata !1121), !dbg !2119
  %31 = load double* %v, align 8, !dbg !2119, !tbaa !1603
  %arrayidx54 = getelementptr inbounds [2 x double]* %uv_point, i64 0, i64 0, !dbg !2119
  store double %31, double* %arrayidx54, align 16, !dbg !2119, !tbaa !1603
  call void @llvm.dbg.value(metadata !{double* %u}, i64 0, metadata !1120), !dbg !2121
  %32 = load double* %u, align 8, !dbg !2121, !tbaa !1603
  %arrayidx55 = getelementptr inbounds [2 x double]* %uv_point, i64 0, i64 1, !dbg !2121
  store double %32, double* %arrayidx55, align 8, !dbg !2121, !tbaa !1603
  %arraydecay57 = getelementptr inbounds %"struct.pov::Bicubic_Patch_Struct"* %Shape, i64 0, i32 18, i64 0, !dbg !2122
  %arraydecay58 = getelementptr inbounds [2 x double]* %tpoint, i64 0, i64 0, !dbg !2122
  call fastcc void @_ZN3povL18Compute_Texture_UVEPdPA2_dS0_(double* %arrayidx54, [2 x double]* %arraydecay57, double* %arraydecay58) #9, !dbg !2122
  %33 = load double* %arraydecay58, align 16, !dbg !2123, !tbaa !1603
  %arrayidx61 = getelementptr inbounds [2 x double]* %tpoint, i64 0, i64 1, !dbg !2124
  %34 = load double* %arrayidx61, align 8, !dbg !2124, !tbaa !1603
  call void @llvm.dbg.value(metadata !{double* %Depth}, i64 0, metadata !1119), !dbg !2125
  %35 = load double* %Depth, align 8, !dbg !2125, !tbaa !1603
  %36 = bitcast %"struct.pov::Bicubic_Patch_Struct"* %Shape to %"struct.pov::Object_Struct"*, !dbg !2125
  call void @llvm.dbg.value(metadata !{double %35}, i64 0, metadata !2126), !dbg !2127
  call void @llvm.dbg.value(metadata !{double* %arraydecay49}, i64 0, metadata !2128), !dbg !2127
  call void @llvm.dbg.value(metadata !{double* %arraydecay50}, i64 0, metadata !2129), !dbg !2127
  call void @llvm.dbg.value(metadata !1845, i64 0, metadata !2130), !dbg !2127
  call void @llvm.dbg.value(metadata !{%"struct.pov::Object_Struct"* %36}, i64 0, metadata !2131), !dbg !2127
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2132), !dbg !2127
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2133), !dbg !2136
  %top_entry.i.i156 = getelementptr inbounds %"struct.pov::istack_struct"* %Depth_Stack, i64 0, i32 3, !dbg !2137
  %37 = load i32* %top_entry.i.i156, align 4, !dbg !2137, !tbaa !1588
  %idxprom.i.i157 = zext i32 %37 to i64, !dbg !2137
  %istack.i.i158 = getelementptr inbounds %"struct.pov::istack_struct"* %Depth_Stack, i64 0, i32 1, !dbg !2137
  %38 = load %"struct.pov::istk_entry"** %istack.i.i158, align 8, !dbg !2137, !tbaa !1654
  %Depth.i159 = getelementptr inbounds %"struct.pov::istk_entry"* %38, i64 %idxprom.i.i157, i32 0, !dbg !2134
  store double %35, double* %Depth.i159, align 8, !dbg !2134, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2138), !dbg !2140
  %Object.i160 = getelementptr inbounds %"struct.pov::istk_entry"* %38, i64 %idxprom.i.i157, i32 5, !dbg !2139
  store %"struct.pov::Object_Struct"* %36, %"struct.pov::Object_Struct"** %Object.i160, align 8, !dbg !2139, !tbaa !1654
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2141), !dbg !2143
  %39 = load %"struct.pov::istk_entry"** %istack.i.i158, align 8, !dbg !2144, !tbaa !1654
  %arraydecay.i161 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 1, i64 0, !dbg !2142
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i161}, i64 0, metadata !2145), !dbg !2146
  call void @llvm.dbg.value(metadata !{double* %arraydecay49}, i64 0, metadata !2147), !dbg !2146
  %40 = load double* %arraydecay49, align 16, !dbg !2148, !tbaa !1603
  store double %40, double* %arraydecay.i161, align 8, !dbg !2148, !tbaa !1603
  %arrayidx2.i28.i162 = getelementptr inbounds [3 x double]* %P, i64 0, i64 1, !dbg !2149
  %41 = load double* %arrayidx2.i28.i162, align 8, !dbg !2149, !tbaa !1603
  %arrayidx3.i29.i163 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 1, i64 1, !dbg !2149
  store double %41, double* %arrayidx3.i29.i163, align 8, !dbg !2149, !tbaa !1603
  %arrayidx4.i30.i164 = getelementptr inbounds [3 x double]* %P, i64 0, i64 2, !dbg !2150
  %42 = load double* %arrayidx4.i30.i164, align 16, !dbg !2150, !tbaa !1603
  %arrayidx5.i31.i165 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 1, i64 2, !dbg !2150
  store double %42, double* %arrayidx5.i31.i165, align 8, !dbg !2150, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2151), !dbg !2153
  %arraydecay4.i166 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 2, i64 0, !dbg !2152
  call void @llvm.dbg.value(metadata !{double* %arraydecay4.i166}, i64 0, metadata !2154), !dbg !2155
  call void @llvm.dbg.value(metadata !{double* %arraydecay50}, i64 0, metadata !2156), !dbg !2155
  %43 = load double* %arraydecay50, align 16, !dbg !2157, !tbaa !1603
  store double %43, double* %arraydecay4.i166, align 8, !dbg !2157, !tbaa !1603
  %arrayidx2.i22.i167 = getelementptr inbounds [3 x double]* %N, i64 0, i64 1, !dbg !2158
  %44 = load double* %arrayidx2.i22.i167, align 8, !dbg !2158, !tbaa !1603
  %arrayidx3.i23.i168 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 2, i64 1, !dbg !2158
  store double %44, double* %arrayidx3.i23.i168, align 8, !dbg !2158, !tbaa !1603
  %arrayidx4.i.i169 = getelementptr inbounds [3 x double]* %N, i64 0, i64 2, !dbg !2159
  %45 = load double* %arrayidx4.i.i169, align 16, !dbg !2159, !tbaa !1603
  %arrayidx5.i.i170 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 2, i64 2, !dbg !2159
  store double %45, double* %arrayidx5.i.i170, align 8, !dbg !2159, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2160), !dbg !2162
  %arraydecay6.i171 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 4, i64 0, !dbg !2161
  call void @llvm.dbg.value(metadata !{double* %arraydecay6.i171}, i64 0, metadata !2163), !dbg !2164
  call void @llvm.dbg.value(metadata !1845, i64 0, metadata !2165), !dbg !2164
  store double %33, double* %arraydecay6.i171, align 8, !dbg !2166, !tbaa !1603
  %arrayidx3.i.i173 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 4, i64 1, !dbg !2167
  store double %34, double* %arrayidx3.i.i173, align 8, !dbg !2167, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2168), !dbg !2170
  %Csg.i174 = getelementptr inbounds %"struct.pov::istk_entry"* %39, i64 %idxprom.i.i157, i32 18, !dbg !2169
  store i8* null, i8** %Csg.i174, align 8, !dbg !2169, !tbaa !1654
  call void @_ZN3pov8incstackEPNS_13istack_structE(%"struct.pov::istack_struct"* %Depth_Stack) #9, !dbg !2171
  call void @llvm.dbg.value(metadata !1941, i64 0, metadata !1118), !dbg !2172
  br label %if.end67, !dbg !2173

if.end67:                                         ; preds = %if.then7, %if.then53
  %cnt.1 = phi i32 [ 1, %if.then53 ], [ 0, %if.then7 ]
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay15}, i64 0, metadata !2174), !dbg !2176
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay20}, i64 0, metadata !2177), !dbg !2176
  %46 = load double* %arraydecay20, align 16, !dbg !2178, !tbaa !1603
  store double %46, double* %arraydecay15, align 8, !dbg !2178, !tbaa !1603
  %47 = load double* %arrayidx3.i153, align 8, !dbg !2179, !tbaa !1603
  store double %47, double* %arrayidx3.i149, align 8, !dbg !2179, !tbaa !1603
  %48 = load double* %arrayidx5.i155, align 16, !dbg !2180, !tbaa !1603
  store double %48, double* %arrayidx5.i151, align 8, !dbg !2180, !tbaa !1603
  %arrayidx75 = getelementptr inbounds i8* %8, i64 88, !dbg !2181
  %arraydecay76 = bitcast i8* %arrayidx75 to double*, !dbg !2181
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay20}, i64 0, metadata !2182), !dbg !2183
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay76}, i64 0, metadata !2184), !dbg !2183
  %49 = load double* %arraydecay76, align 8, !dbg !2185, !tbaa !1603
  store double %49, double* %arraydecay20, align 16, !dbg !2185, !tbaa !1603
  %arrayidx2.i179 = getelementptr inbounds i8* %8, i64 96, !dbg !2186
  %50 = bitcast i8* %arrayidx2.i179 to double*, !dbg !2186
  %51 = load double* %50, align 8, !dbg !2186, !tbaa !1603
  store double %51, double* %arrayidx3.i153, align 8, !dbg !2186, !tbaa !1603
  %arrayidx4.i181 = getelementptr inbounds i8* %8, i64 104, !dbg !2187
  %52 = bitcast i8* %arrayidx4.i181 to double*, !dbg !2187
  %53 = load double* %52, align 8, !dbg !2187, !tbaa !1603
  store double %53, double* %arrayidx5.i155, align 16, !dbg !2187, !tbaa !1603
  %54 = load double* %arrayidx33, align 16, !dbg !2188, !tbaa !1603
  store double %54, double* %arrayidx29, align 8, !dbg !2188, !tbaa !1603
  %55 = load float* %25, align 4, !dbg !2188, !tbaa !1728
  %conv81 = fpext float %55 to double, !dbg !2188
  store double %conv81, double* %arrayidx33, align 16, !dbg !2188, !tbaa !1603
  %56 = load double* %arrayidx45, align 16, !dbg !2189, !tbaa !1603
  store double %56, double* %arrayidx41, align 8, !dbg !2189, !tbaa !1603
  %57 = load float* %27, align 4, !dbg !2189, !tbaa !1728
  %conv87 = fpext float %57 to double, !dbg !2189
  store double %conv87, double* %arrayidx45, align 16, !dbg !2189, !tbaa !1603
  %call94 = call fastcc i32 @_ZN3povL18intersect_subpatchEPNS_20Bicubic_Patch_StructEPNS_10Ray_StructEPA3_dPdS6_S6_S6_S6_S6_S6_(%"struct.pov::Bicubic_Patch_Struct"* %Shape, %"struct.pov::Ray_Struct"* %Ray, [3 x double]* %arraydecay46, double* %arrayidx25, double* %arrayidx37, double* %Depth, double* %arraydecay49, double* %arraydecay50, double* %u, double* %v) #9, !dbg !2190
  %tobool95 = icmp eq i32 %call94, 0, !dbg !2190
  br i1 %tobool95, label %cleanup, label %if.then96, !dbg !2190

if.then96:                                        ; preds = %if.end67
  call void @llvm.dbg.value(metadata !{double* %v}, i64 0, metadata !1121), !dbg !2191
  %58 = load double* %v, align 8, !dbg !2191, !tbaa !1603
  %arrayidx97 = getelementptr inbounds [2 x double]* %uv_point, i64 0, i64 0, !dbg !2191
  store double %58, double* %arrayidx97, align 16, !dbg !2191, !tbaa !1603
  call void @llvm.dbg.value(metadata !{double* %u}, i64 0, metadata !1120), !dbg !2193
  %59 = load double* %u, align 8, !dbg !2193, !tbaa !1603
  %arrayidx98 = getelementptr inbounds [2 x double]* %uv_point, i64 0, i64 1, !dbg !2193
  store double %59, double* %arrayidx98, align 8, !dbg !2193, !tbaa !1603
  %arraydecay101 = getelementptr inbounds %"struct.pov::Bicubic_Patch_Struct"* %Shape, i64 0, i32 18, i64 0, !dbg !2194
  %arraydecay102 = getelementptr inbounds [2 x double]* %tpoint, i64 0, i64 0, !dbg !2194
  call fastcc void @_ZN3povL18Compute_Texture_UVEPdPA2_dS0_(double* %arrayidx97, [2 x double]* %arraydecay101, double* %arraydecay102) #9, !dbg !2194
  %60 = load double* %arraydecay102, align 16, !dbg !2195, !tbaa !1603
  %arrayidx105 = getelementptr inbounds [2 x double]* %tpoint, i64 0, i64 1, !dbg !2196
  %61 = load double* %arrayidx105, align 8, !dbg !2196, !tbaa !1603
  call void @llvm.dbg.value(metadata !{double* %Depth}, i64 0, metadata !1119), !dbg !2197
  %62 = load double* %Depth, align 8, !dbg !2197, !tbaa !1603
  %63 = bitcast %"struct.pov::Bicubic_Patch_Struct"* %Shape to %"struct.pov::Object_Struct"*, !dbg !2197
  call void @llvm.dbg.value(metadata !{double %62}, i64 0, metadata !2198), !dbg !2199
  call void @llvm.dbg.value(metadata !{double* %arraydecay49}, i64 0, metadata !2200), !dbg !2199
  call void @llvm.dbg.value(metadata !{double* %arraydecay50}, i64 0, metadata !2201), !dbg !2199
  call void @llvm.dbg.value(metadata !1845, i64 0, metadata !2202), !dbg !2199
  call void @llvm.dbg.value(metadata !{%"struct.pov::Object_Struct"* %63}, i64 0, metadata !2203), !dbg !2199
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2204), !dbg !2199
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2205), !dbg !2207
  %top_entry.i.i = getelementptr inbounds %"struct.pov::istack_struct"* %Depth_Stack, i64 0, i32 3, !dbg !2208
  %64 = load i32* %top_entry.i.i, align 4, !dbg !2208, !tbaa !1588
  %idxprom.i.i = zext i32 %64 to i64, !dbg !2208
  %istack.i.i = getelementptr inbounds %"struct.pov::istack_struct"* %Depth_Stack, i64 0, i32 1, !dbg !2208
  %65 = load %"struct.pov::istk_entry"** %istack.i.i, align 8, !dbg !2208, !tbaa !1654
  %Depth.i = getelementptr inbounds %"struct.pov::istk_entry"* %65, i64 %idxprom.i.i, i32 0, !dbg !2206
  store double %62, double* %Depth.i, align 8, !dbg !2206, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2209), !dbg !2211
  %Object.i = getelementptr inbounds %"struct.pov::istk_entry"* %65, i64 %idxprom.i.i, i32 5, !dbg !2210
  store %"struct.pov::Object_Struct"* %63, %"struct.pov::Object_Struct"** %Object.i, align 8, !dbg !2210, !tbaa !1654
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2212), !dbg !2214
  %66 = load %"struct.pov::istk_entry"** %istack.i.i, align 8, !dbg !2215, !tbaa !1654
  %arraydecay.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 1, i64 0, !dbg !2213
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i}, i64 0, metadata !2216), !dbg !2217
  call void @llvm.dbg.value(metadata !{double* %arraydecay49}, i64 0, metadata !2218), !dbg !2217
  %67 = load double* %arraydecay49, align 16, !dbg !2219, !tbaa !1603
  store double %67, double* %arraydecay.i, align 8, !dbg !2219, !tbaa !1603
  %arrayidx2.i28.i = getelementptr inbounds [3 x double]* %P, i64 0, i64 1, !dbg !2220
  %68 = load double* %arrayidx2.i28.i, align 8, !dbg !2220, !tbaa !1603
  %arrayidx3.i29.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 1, i64 1, !dbg !2220
  store double %68, double* %arrayidx3.i29.i, align 8, !dbg !2220, !tbaa !1603
  %arrayidx4.i30.i = getelementptr inbounds [3 x double]* %P, i64 0, i64 2, !dbg !2221
  %69 = load double* %arrayidx4.i30.i, align 16, !dbg !2221, !tbaa !1603
  %arrayidx5.i31.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 1, i64 2, !dbg !2221
  store double %69, double* %arrayidx5.i31.i, align 8, !dbg !2221, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2222), !dbg !2224
  %arraydecay4.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 2, i64 0, !dbg !2223
  call void @llvm.dbg.value(metadata !{double* %arraydecay4.i}, i64 0, metadata !2225), !dbg !2226
  call void @llvm.dbg.value(metadata !{double* %arraydecay50}, i64 0, metadata !2227), !dbg !2226
  %70 = load double* %arraydecay50, align 16, !dbg !2228, !tbaa !1603
  store double %70, double* %arraydecay4.i, align 8, !dbg !2228, !tbaa !1603
  %arrayidx2.i22.i = getelementptr inbounds [3 x double]* %N, i64 0, i64 1, !dbg !2229
  %71 = load double* %arrayidx2.i22.i, align 8, !dbg !2229, !tbaa !1603
  %arrayidx3.i23.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 2, i64 1, !dbg !2229
  store double %71, double* %arrayidx3.i23.i, align 8, !dbg !2229, !tbaa !1603
  %arrayidx4.i.i = getelementptr inbounds [3 x double]* %N, i64 0, i64 2, !dbg !2230
  %72 = load double* %arrayidx4.i.i, align 16, !dbg !2230, !tbaa !1603
  %arrayidx5.i.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 2, i64 2, !dbg !2230
  store double %72, double* %arrayidx5.i.i, align 8, !dbg !2230, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2231), !dbg !2233
  %arraydecay6.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 4, i64 0, !dbg !2232
  call void @llvm.dbg.value(metadata !{double* %arraydecay6.i}, i64 0, metadata !2234), !dbg !2235
  call void @llvm.dbg.value(metadata !1845, i64 0, metadata !2236), !dbg !2235
  store double %60, double* %arraydecay6.i, align 8, !dbg !2237, !tbaa !1603
  %arrayidx3.i.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 4, i64 1, !dbg !2238
  store double %61, double* %arrayidx3.i.i, align 8, !dbg !2238, !tbaa !1603
  call void @llvm.dbg.value(metadata !{%"struct.pov::istack_struct"* %Depth_Stack}, i64 0, metadata !2239), !dbg !2241
  %Csg.i = getelementptr inbounds %"struct.pov::istk_entry"* %66, i64 %idxprom.i.i, i32 18, !dbg !2240
  store i8* null, i8** %Csg.i, align 8, !dbg !2240, !tbaa !1654
  call void @_ZN3pov8incstackEPNS_13istack_structE(%"struct.pov::istack_struct"* %Depth_Stack) #9, !dbg !2242
  %inc110 = add nsw i32 %cnt.1, 1, !dbg !2243
  call void @llvm.dbg.value(metadata !{i32 %inc110}, i64 0, metadata !1118), !dbg !2243
  br label %cleanup, !dbg !2244

if.else112:                                       ; preds = %if.end
  %call113 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([39 x i8]* @.str3, i64 0, i64 0)) #9, !dbg !2245
  br label %cleanup

cleanup:                                          ; preds = %if.then1, %for.body, %if.then96, %if.else112, %if.end67, %entry
  %retval.0 = phi i32 [ 0, %entry ], [ %inc110, %if.then96 ], [ %cnt.1, %if.end67 ], [ 0, %if.else112 ], [ 0, %if.then1 ], [ %add, %for.body ]
  call void @llvm.lifetime.end(i64 72, i8* %0) #2, !dbg !2247
  ret i32 %retval.0, !dbg !2247
}
