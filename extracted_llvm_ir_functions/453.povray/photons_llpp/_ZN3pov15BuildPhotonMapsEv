define void @_ZN3pov15BuildPhotonMapsEv() #0 {
entry:
  %numph.i = alloca i32, align 4
  %0 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 0), align 8, !dbg !1788, !tbaa !1674
  %tobool = icmp eq i32 %0, 0, !dbg !1788
  br i1 %tobool, label %return, label %if.end, !dbg !1788

if.end:                                           ; preds = %entry
  %1 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !1789, !tbaa !1709
  %tobool1 = icmp ne i8* %1, null, !dbg !1789
  %2 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 13), align 4, !dbg !1789, !tbaa !1674
  %tobool2 = icmp ne i32 %2, 0, !dbg !1789
  %or.cond = and i1 %tobool1, %tobool2, !dbg !1789
  br i1 %or.cond, label %if.then3, label %if.end14, !dbg !1789

if.then3:                                         ; preds = %if.end
  %call = call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([20 x i8]* @.str4, i64 0, i64 0), i32 5) #8, !dbg !1790
  %3 = bitcast i32* %numph.i to i8*, !dbg !1792
  call void @llvm.lifetime.start(i64 4, i8* %3), !dbg !1792
  call void @llvm.dbg.declare(metadata !{i32* %numph.i}, metadata !1517), !dbg !1792
  %4 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 0), align 8, !dbg !1794, !tbaa !1674
  %tobool.i = icmp eq i32 %4, 0, !dbg !1794
  br i1 %tobool.i, label %if.then6, label %if.end.i, !dbg !1794

if.end.i:                                         ; preds = %if.then3
  %5 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !1795, !tbaa !1709
  %call.i = call %struct._IO_FILE* @fopen(i8* %5, i8* getelementptr inbounds ([3 x i8]* @.str15, i64 0, i64 0)) #8, !dbg !1795
  call void @llvm.dbg.value(metadata !{%struct._IO_FILE* %call.i}, i64 0, metadata !1796), !dbg !1795
  %tobool1.i = icmp eq %struct._IO_FILE* %call.i, null, !dbg !1797
  br i1 %tobool1.i, label %if.then6, label %if.end3.i, !dbg !1797

if.end3.i:                                        ; preds = %if.end.i
  %call4.i = call i64 @fread(i8* %3, i64 4, i64 1, %struct._IO_FILE* %call.i) #8, !dbg !1798
  call void @llvm.dbg.value(metadata !172, i64 0, metadata !1799), !dbg !1800
  call void @llvm.dbg.value(metadata !{i32* %numph.i}, i64 0, metadata !1802), !dbg !1800
  call void @llvm.dbg.value(metadata !{i32* %numph.i}, i64 0, metadata !1517), !dbg !1800
  %6 = load i32* %numph.i, align 4, !dbg !1800, !tbaa !1674
  %cmp45.i = icmp sgt i32 %6, 0, !dbg !1800
  br i1 %cmp45.i, label %for.body.i, label %for.end.i, !dbg !1800

for.cond.i:                                       ; preds = %for.body.i
  call void @llvm.dbg.value(metadata !{i32* %numph.i}, i64 0, metadata !1802), !dbg !1800
  %cmp.i = icmp slt i32 %inc.i, %6, !dbg !1800
  br i1 %cmp.i, label %for.body.i, label %for.end.i, !dbg !1800

for.body.i:                                       ; preds = %if.end3.i, %for.cond.i
  %i.046.i = phi i32 [ %inc.i, %for.cond.i ], [ 0, %if.end3.i ]
  %call5.i = call fastcc %"struct.pov::photon_struct"* @_ZN3povL14AllocatePhotonEPNS_17photon_map_structE(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14)) #8, !dbg !1803
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %call5.i}, i64 0, metadata !1805), !dbg !1803
  %7 = bitcast %"struct.pov::photon_struct"* %call5.i to i8*, !dbg !1806
  %call6.i = call i64 @fread(i8* %7, i64 20, i64 1, %struct._IO_FILE* %call.i) #8, !dbg !1806
  %conv.i = trunc i64 %call6.i to i32, !dbg !1806
  call void @llvm.dbg.value(metadata !{i32 %conv.i}, i64 0, metadata !1807), !dbg !1806
  %cmp7.i = icmp slt i32 %conv.i, 1, !dbg !1808
  %inc.i = add nsw i32 %i.046.i, 1, !dbg !1800
  call void @llvm.dbg.value(metadata !{i32 %inc.i}, i64 0, metadata !1799), !dbg !1800
  br i1 %cmp7.i, label %if.then8.i, label %for.cond.i, !dbg !1808

if.then8.i:                                       ; preds = %for.body.i
  %call9.i = call i32 @fclose(%struct._IO_FILE* %call.i) #8, !dbg !1809
  br label %if.then6, !dbg !1811

for.end.i:                                        ; preds = %for.cond.i, %if.end3.i
  %call11.i = call i32 @feof(%struct._IO_FILE* %call.i) #9, !dbg !1812
  %tobool12.i = icmp eq i32 %call11.i, 0, !dbg !1812
  br i1 %tobool12.i, label %if.then13.i, label %_ZN3povL13loadPhotonMapEv.exit, !dbg !1812

if.then13.i:                                      ; preds = %for.end.i
  %call14.i = call i64 @fread(i8* %3, i64 4, i64 1, %struct._IO_FILE* %call.i) #8, !dbg !1813
  call void @llvm.dbg.value(metadata !172, i64 0, metadata !1799), !dbg !1815
  call void @llvm.dbg.value(metadata !{i32* %numph.i}, i64 0, metadata !1802), !dbg !1815
  call void @llvm.dbg.value(metadata !{i32* %numph.i}, i64 0, metadata !1517), !dbg !1815
  %8 = load i32* %numph.i, align 4, !dbg !1815, !tbaa !1674
  %cmp1643.i = icmp sgt i32 %8, 0, !dbg !1815
  br i1 %cmp1643.i, label %for.body17.i, label %_ZN3povL13loadPhotonMapEv.exit, !dbg !1815

for.cond15.i:                                     ; preds = %for.body17.i
  call void @llvm.dbg.value(metadata !{i32* %numph.i}, i64 0, metadata !1802), !dbg !1815
  %cmp16.i = icmp slt i32 %inc26.i, %8, !dbg !1815
  br i1 %cmp16.i, label %for.body17.i, label %_ZN3povL13loadPhotonMapEv.exit, !dbg !1815

for.body17.i:                                     ; preds = %if.then13.i, %for.cond15.i
  %i.144.i = phi i32 [ %inc26.i, %for.cond15.i ], [ 0, %if.then13.i ]
  %call18.i = call fastcc %"struct.pov::photon_struct"* @_ZN3povL14AllocatePhotonEPNS_17photon_map_structE(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29)) #8, !dbg !1817
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %call18.i}, i64 0, metadata !1805), !dbg !1817
  %9 = bitcast %"struct.pov::photon_struct"* %call18.i to i8*, !dbg !1819
  %call19.i = call i64 @fread(i8* %9, i64 20, i64 1, %struct._IO_FILE* %call.i) #8, !dbg !1819
  %conv20.i = trunc i64 %call19.i to i32, !dbg !1819
  call void @llvm.dbg.value(metadata !{i32 %conv20.i}, i64 0, metadata !1807), !dbg !1819
  %cmp21.i = icmp slt i32 %conv20.i, 1, !dbg !1820
  %inc26.i = add nsw i32 %i.144.i, 1, !dbg !1815
  call void @llvm.dbg.value(metadata !{i32 %inc26.i}, i64 0, metadata !1799), !dbg !1815
  br i1 %cmp21.i, label %if.then22.i, label %for.cond15.i, !dbg !1820

if.then22.i:                                      ; preds = %for.body17.i
  %call23.i = call i32 @fclose(%struct._IO_FILE* %call.i) #8, !dbg !1821
  br label %if.then6, !dbg !1823

_ZN3povL13loadPhotonMapEv.exit:                   ; preds = %for.cond15.i, %for.end.i, %if.then13.i
  %call29.i = call i32 @fclose(%struct._IO_FILE* %call.i) #8, !dbg !1824
  call void @llvm.lifetime.end(i64 4, i8* %3), !dbg !1825
  br label %if.end8, !dbg !1793

if.then6:                                         ; preds = %if.then8.i, %if.then22.i, %if.then3, %if.end.i
  call void @llvm.lifetime.end(i64 4, i8* %3), !dbg !1825
  %10 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !1826, !tbaa !1709
  %call7 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([31 x i8]* @.str5, i64 0, i64 0), i8* %10) #8, !dbg !1826
  br label %if.end8, !dbg !1828

if.end8:                                          ; preds = %_ZN3povL13loadPhotonMapEv.exit, %if.then6
  call void @_ZN3pov12Do_CooperateEi(i32 0) #8, !dbg !1829
  %11 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !1830, !tbaa !1674
  %cmp = icmp sgt i32 %11, 0, !dbg !1830
  br i1 %cmp, label %if.then9, label %if.end10, !dbg !1830

if.then9:                                         ; preds = %if.end8
  call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14), i32 0) #8, !dbg !1831
  br label %if.end10, !dbg !1833

if.end10:                                         ; preds = %if.then9, %if.end8
  %12 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1834, !tbaa !1674
  %cmp11 = icmp sgt i32 %12, 0, !dbg !1834
  br i1 %cmp11, label %if.then12, label %return, !dbg !1834

if.then12:                                        ; preds = %if.end10
  call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29), i32 1) #8, !dbg !1835
  br label %return, !dbg !1837

if.end14:                                         ; preds = %if.end
  store i32 1, i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !1838, !tbaa !1674
  %call15 = call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([21 x i8]* @.str6, i64 0, i64 0), i32 4) #8, !dbg !1839
  %13 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !1840, !tbaa !1732
  call void @llvm.dbg.value(metadata !{double %13}, i64 0, metadata !972), !dbg !1840
  %14 = load i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !1841, !tbaa !1674
  call void @llvm.dbg.value(metadata !{i32 %14}, i64 0, metadata !971), !dbg !1841
  %15 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 5), align 4, !dbg !1842, !tbaa !1674
  %cmp16 = icmp sgt i32 %15, -1, !dbg !1842
  br i1 %cmp16, label %if.then17, label %if.end18, !dbg !1842

if.then17:                                        ; preds = %if.end14
  store i32 %15, i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !1843, !tbaa !1674
  br label %if.end18, !dbg !1843

if.end18:                                         ; preds = %if.then17, %if.end14
  %16 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 6), align 8, !dbg !1844, !tbaa !1732
  %cmp19 = fcmp ult double %16, 0.000000e+00, !dbg !1844
  br i1 %cmp19, label %if.end21, label %if.then20, !dbg !1844

if.then20:                                        ; preds = %if.end18
  store double %16, double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !1845, !tbaa !1732
  br label %if.end21, !dbg !1845

if.end21:                                         ; preds = %if.end18, %if.then20
  %17 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 32), align 4, !dbg !1846, !tbaa !1674
  %cmp22 = icmp sgt i32 %17, 0, !dbg !1846
  br i1 %cmp22, label %if.then23, label %if.end41, !dbg !1846

if.then23:                                        ; preds = %if.end21
  store double 0.000000e+00, double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !1847, !tbaa !1732
  store i8 1, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !1848, !tbaa !1849
  %Light.0225 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !1850
  %cmp24226 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.0225, null, !dbg !1850
  br i1 %cmp24226, label %for.end, label %for.body, !dbg !1850

for.body:                                         ; preds = %if.then23, %for.inc
  %Light.0227 = phi %"struct.pov::Light_Source_Struct"* [ %Light.0, %for.inc ], [ %Light.0225, %if.then23 ]
  %Light_Type = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.0227, i64 0, i32 27, !dbg !1852
  %18 = load i8* %Light_Type, align 1, !dbg !1852, !tbaa !1675
  %cmp25 = icmp eq i8 %18, 3, !dbg !1852
  br i1 %cmp25, label %for.inc, label %if.then26, !dbg !1852

if.then26:                                        ; preds = %for.body
  %19 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !1853, !tbaa !1709
  call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %19, %"struct.pov::Light_Source_Struct"* %Light.0227, i1 zeroext true) #8, !dbg !1853
  br label %for.inc, !dbg !1855

for.inc:                                          ; preds = %for.body, %if.then26
  %Next_Light_Source = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.0227, i64 0, i32 26, !dbg !1856
  %Light.0 = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source, align 8, !dbg !1850
  %cmp24 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.0, null, !dbg !1850
  br i1 %cmp24, label %for.end, label %for.body, !dbg !1850

for.end:                                          ; preds = %for.inc, %if.then23
  store i8 0, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !1857, !tbaa !1849
  %Light_Group_Light.0222 = load %"struct.pov::light_group_light_struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 16), align 8, !dbg !1858
  %cmp29223 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.0222, null, !dbg !1858
  br i1 %cmp29223, label %for.end38, label %for.body30, !dbg !1858

for.body30:                                       ; preds = %for.end, %for.inc37
  %Light_Group_Light.0224 = phi %"struct.pov::light_group_light_struct"* [ %Light_Group_Light.0, %for.inc37 ], [ %Light_Group_Light.0222, %for.end ]
  %Light31 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.0224, i64 0, i32 0, !dbg !1860
  %20 = load %"struct.pov::Light_Source_Struct"** %Light31, align 8, !dbg !1860, !tbaa !1709
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_Source_Struct"* %20}, i64 0, metadata !959), !dbg !1860
  %Light_Type32 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %20, i64 0, i32 27, !dbg !1862
  %21 = load i8* %Light_Type32, align 1, !dbg !1862, !tbaa !1675
  %cmp34 = icmp eq i8 %21, 3, !dbg !1862
  br i1 %cmp34, label %for.inc37, label %if.then35, !dbg !1862

if.then35:                                        ; preds = %for.body30
  %22 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !1863, !tbaa !1709
  call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %22, %"struct.pov::Light_Source_Struct"* %20, i1 zeroext true) #8, !dbg !1863
  br label %for.inc37, !dbg !1865

for.inc37:                                        ; preds = %for.body30, %if.then35
  %Next = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.0224, i64 0, i32 1, !dbg !1866
  %Light_Group_Light.0 = load %"struct.pov::light_group_light_struct"** %Next, align 8, !dbg !1858
  %cmp29 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.0, null, !dbg !1858
  br i1 %cmp29, label %for.end38, label %for.body30, !dbg !1858

for.end38:                                        ; preds = %for.inc37, %for.end
  %23 = load double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !1867, !tbaa !1732
  %24 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 32), align 4, !dbg !1867, !tbaa !1674
  %conv39 = sitofp i32 %24 to double, !dbg !1867
  %div = fdiv double %23, %conv39, !dbg !1867
  call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !973), !dbg !1867
  %call40 = call double @sqrt(double %div) #9, !dbg !1868
  call void @llvm.dbg.value(metadata !{double %call40}, i64 0, metadata !973), !dbg !1868
  %25 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 1), align 8, !dbg !1869, !tbaa !1732
  %mul = fmul double %call40, %25, !dbg !1869
  store double %mul, double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 1), align 8, !dbg !1869, !tbaa !1732
  br label %if.end41, !dbg !1870

if.end41:                                         ; preds = %for.end38, %if.end21
  %26 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8, !dbg !1871, !tbaa !1674
  %cmp42 = icmp sgt i32 %26, 0, !dbg !1871
  br i1 %cmp42, label %if.then43, label %if.end72, !dbg !1871

if.then43:                                        ; preds = %if.end41
  store double 0.000000e+00, double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !1872, !tbaa !1732
  store i8 1, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !1873, !tbaa !1849
  %Light.1219 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !1874
  %cmp46220 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.1219, null, !dbg !1874
  br i1 %cmp46220, label %for.end55, label %for.body47, !dbg !1874

for.body47:                                       ; preds = %if.then43, %for.inc53
  %Light.1221 = phi %"struct.pov::Light_Source_Struct"* [ %Light.1, %for.inc53 ], [ %Light.1219, %if.then43 ]
  %Light_Type48 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.1221, i64 0, i32 27, !dbg !1876
  %27 = load i8* %Light_Type48, align 1, !dbg !1876, !tbaa !1675
  %cmp50 = icmp eq i8 %27, 3, !dbg !1876
  br i1 %cmp50, label %for.inc53, label %if.then51, !dbg !1876

if.then51:                                        ; preds = %for.body47
  call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %Light.1221, i32 1) #8, !dbg !1877
  br label %for.inc53, !dbg !1879

for.inc53:                                        ; preds = %for.body47, %if.then51
  %Next_Light_Source54 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.1221, i64 0, i32 26, !dbg !1880
  %Light.1 = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source54, align 8, !dbg !1874
  %cmp46 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.1, null, !dbg !1874
  br i1 %cmp46, label %for.end55, label %for.body47, !dbg !1874

for.end55:                                        ; preds = %for.inc53, %if.then43
  store i8 0, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !1881, !tbaa !1849
  %Light_Group_Light.1216 = load %"struct.pov::light_group_light_struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 16), align 8, !dbg !1882
  %cmp57217 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.1216, null, !dbg !1882
  br i1 %cmp57217, label %for.end67, label %for.body58, !dbg !1882

for.body58:                                       ; preds = %for.end55, %for.inc65
  %Light_Group_Light.1218 = phi %"struct.pov::light_group_light_struct"* [ %Light_Group_Light.1, %for.inc65 ], [ %Light_Group_Light.1216, %for.end55 ]
  %Light59 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.1218, i64 0, i32 0, !dbg !1884
  %28 = load %"struct.pov::Light_Source_Struct"** %Light59, align 8, !dbg !1884, !tbaa !1709
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_Source_Struct"* %28}, i64 0, metadata !959), !dbg !1884
  %Light_Type60 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %28, i64 0, i32 27, !dbg !1886
  %29 = load i8* %Light_Type60, align 1, !dbg !1886, !tbaa !1675
  %cmp62 = icmp eq i8 %29, 3, !dbg !1886
  br i1 %cmp62, label %for.inc65, label %if.then63, !dbg !1886

if.then63:                                        ; preds = %for.body58
  call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %28, i32 1) #8, !dbg !1887
  br label %for.inc65, !dbg !1889

for.inc65:                                        ; preds = %for.body58, %if.then63
  %Next66 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.1218, i64 0, i32 1, !dbg !1890
  %Light_Group_Light.1 = load %"struct.pov::light_group_light_struct"** %Next66, align 8, !dbg !1882
  %cmp57 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.1, null, !dbg !1882
  br i1 %cmp57, label %for.end67, label %for.body58, !dbg !1882

for.end67:                                        ; preds = %for.inc65, %for.end55
  %30 = load double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !1891, !tbaa !1732
  %31 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8, !dbg !1891, !tbaa !1674
  %conv68 = sitofp i32 %31 to double, !dbg !1891
  %div69 = fdiv double %30, %conv68, !dbg !1891
  call void @llvm.dbg.value(metadata !{double %div69}, i64 0, metadata !975), !dbg !1891
  %call70 = call double @sqrt(double %div69) #9, !dbg !1892
  call void @llvm.dbg.value(metadata !{double %call70}, i64 0, metadata !975), !dbg !1892
  %32 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 2), align 8, !dbg !1893, !tbaa !1732
  %mul71 = fmul double %call70, %32, !dbg !1893
  store double %mul71, double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 2), align 8, !dbg !1893, !tbaa !1732
  call void @_ZN3pov12Do_CooperateEi(i32 1) #8, !dbg !1894
  br label %if.end72, !dbg !1895

if.end72:                                         ; preds = %for.end67, %if.end41
  call void @_ZN3pov12Do_CooperateEi(i32 0) #8, !dbg !1896
  store i8 1, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !1897, !tbaa !1849
  %Light.2212 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !1898
  %cmp74213 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.2212, null, !dbg !1898
  br i1 %cmp74213, label %for.end97, label %for.body75, !dbg !1898

for.body75:                                       ; preds = %if.end72, %for.inc95
  %Light.2214 = phi %"struct.pov::Light_Source_Struct"* [ %Light.2, %for.inc95 ], [ %Light.2212, %if.end72 ]
  %Light_Type76 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.2214, i64 0, i32 27, !dbg !1900
  %33 = load i8* %Light_Type76, align 1, !dbg !1900, !tbaa !1675
  switch i8 %33, label %if.end87 [
    i8 3, label %for.inc95
    i8 4, label %land.lhs.true83
  ], !dbg !1900

land.lhs.true83:                                  ; preds = %for.body75
  %Parallel = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.2214, i64 0, i32 33, !dbg !1901
  %34 = load i8* %Parallel, align 1, !dbg !1901, !tbaa !1675
  %tobool84 = icmp eq i8 %34, 0, !dbg !1901
  br i1 %tobool84, label %if.then85, label %if.end87, !dbg !1901

if.then85:                                        ; preds = %land.lhs.true83
  %call86 = call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([59 x i8]* @.str7, i64 0, i64 0)) #8, !dbg !1903
  br label %if.end87, !dbg !1905

if.end87:                                         ; preds = %for.body75, %land.lhs.true83, %if.then85
  %Flags = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.2214, i64 0, i32 13, !dbg !1906
  %35 = load i32* %Flags, align 4, !dbg !1906, !tbaa !1674
  %and = and i32 %35, 524288, !dbg !1906
  %tobool89 = icmp ne i32 %and, 0, !dbg !1906
  %36 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8, !dbg !1906, !tbaa !1674
  %cmp91 = icmp sgt i32 %36, 0, !dbg !1906
  %or.cond148 = and i1 %tobool89, %cmp91, !dbg !1906
  br i1 %or.cond148, label %if.then92, label %if.end93, !dbg !1906

if.then92:                                        ; preds = %if.end87
  call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %Light.2214, i32 0) #8, !dbg !1907
  br label %if.end93, !dbg !1907

if.end93:                                         ; preds = %if.then92, %if.end87
  %37 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !1908, !tbaa !1709
  call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %37, %"struct.pov::Light_Source_Struct"* %Light.2214, i1 zeroext false) #8, !dbg !1908
  br label %for.inc95, !dbg !1909

for.inc95:                                        ; preds = %for.body75, %if.end93
  %Next_Light_Source96 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.2214, i64 0, i32 26, !dbg !1910
  %Light.2 = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source96, align 8, !dbg !1898
  %cmp74 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.2, null, !dbg !1898
  br i1 %cmp74, label %for.end97, label %for.body75, !dbg !1898

for.end97:                                        ; preds = %for.inc95, %if.end72
  store i8 0, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !1911, !tbaa !1849
  %Light_Group_Light.2209 = load %"struct.pov::light_group_light_struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 16), align 8, !dbg !1912
  %cmp99210 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.2209, null, !dbg !1912
  br i1 %cmp99210, label %for.end121, label %for.body100, !dbg !1912

for.body100:                                      ; preds = %for.end97, %if.end118
  %Light_Group_Light.2211 = phi %"struct.pov::light_group_light_struct"* [ %Light_Group_Light.2, %if.end118 ], [ %Light_Group_Light.2209, %for.end97 ]
  %Light101 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.2211, i64 0, i32 0, !dbg !1914
  %38 = load %"struct.pov::Light_Source_Struct"** %Light101, align 8, !dbg !1914, !tbaa !1709
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_Source_Struct"* %38}, i64 0, metadata !959), !dbg !1914
  %Light_Type102 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %38, i64 0, i32 27, !dbg !1916
  %39 = load i8* %Light_Type102, align 1, !dbg !1916, !tbaa !1675
  %cmp104 = icmp eq i8 %39, 4, !dbg !1916
  br i1 %cmp104, label %land.lhs.true105, label %if.end110, !dbg !1916

land.lhs.true105:                                 ; preds = %for.body100
  %Parallel106 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %38, i64 0, i32 33, !dbg !1916
  %40 = load i8* %Parallel106, align 1, !dbg !1916, !tbaa !1675
  %tobool107 = icmp eq i8 %40, 0, !dbg !1916
  br i1 %tobool107, label %if.then108, label %if.end110, !dbg !1916

if.then108:                                       ; preds = %land.lhs.true105
  %call109 = call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([59 x i8]* @.str7, i64 0, i64 0)) #8, !dbg !1917
  br label %if.end110, !dbg !1919

if.end110:                                        ; preds = %land.lhs.true105, %if.then108, %for.body100
  %Flags111 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %38, i64 0, i32 13, !dbg !1920
  %41 = load i32* %Flags111, align 4, !dbg !1920, !tbaa !1674
  %and113 = and i32 %41, 524288, !dbg !1920
  %tobool114 = icmp ne i32 %and113, 0, !dbg !1920
  %42 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8, !dbg !1920, !tbaa !1674
  %cmp116 = icmp sgt i32 %42, 0, !dbg !1920
  %or.cond149 = and i1 %tobool114, %cmp116, !dbg !1920
  br i1 %or.cond149, label %if.then117, label %if.end118, !dbg !1920

if.then117:                                       ; preds = %if.end110
  call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %38, i32 0) #8, !dbg !1921
  br label %if.end118, !dbg !1921

if.end118:                                        ; preds = %if.then117, %if.end110
  %43 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !1922, !tbaa !1709
  call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %43, %"struct.pov::Light_Source_Struct"* %38, i1 zeroext false) #8, !dbg !1922
  %Next120 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.2211, i64 0, i32 1, !dbg !1923
  %Light_Group_Light.2 = load %"struct.pov::light_group_light_struct"** %Next120, align 8, !dbg !1912
  %cmp99 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.2, null, !dbg !1912
  br i1 %cmp99, label %for.end121, label %for.body100, !dbg !1912

for.end121:                                       ; preds = %if.end118, %for.end97
  store i32 0, i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !1924, !tbaa !1674
  store double %13, double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !1925, !tbaa !1732
  store i32 %14, i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !1926, !tbaa !1674
  %44 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !1927, !tbaa !1674
  %cmp122 = icmp sgt i32 %44, 0, !dbg !1927
  br i1 %cmp122, label %if.then123, label %if.end124, !dbg !1927

if.then123:                                       ; preds = %for.end121
  call void @llvm.dbg.value(metadata !1928, i64 0, metadata !1929), !dbg !1932
  %call.i187 = call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([16 x i8]* @.str11, i64 0, i64 0), i32 7) #8, !dbg !1933
  %45 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 0), align 8, !dbg !1935, !tbaa !1709
  store %"struct.pov::photon_struct"** %45, %"struct.pov::photon_struct"*** @_ZN3povL5map_sE, align 8, !dbg !1935, !tbaa !1709
  %46 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !1936, !tbaa !1674
  %sub.i = add nsw i32 %46, -1, !dbg !1936
  call fastcc void @_ZN3povL16sortAndSubdivideEiii(i32 0, i32 %sub.i) #8, !dbg !1936
  call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14), i32 0) #8, !dbg !1937
  br label %if.end124, !dbg !1938

if.end124:                                        ; preds = %if.then123, %for.end121
  %47 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1939, !tbaa !1674
  %cmp125 = icmp sgt i32 %47, 0, !dbg !1939
  br i1 %cmp125, label %if.then126, label %if.end127, !dbg !1939

if.then126:                                       ; preds = %if.end124
  call void @llvm.dbg.value(metadata !1940, i64 0, metadata !1941), !dbg !1944
  %call.i188 = call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([16 x i8]* @.str11, i64 0, i64 0), i32 7) #8, !dbg !1945
  %48 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 0), align 8, !dbg !1946, !tbaa !1709
  store %"struct.pov::photon_struct"** %48, %"struct.pov::photon_struct"*** @_ZN3povL5map_sE, align 8, !dbg !1946, !tbaa !1709
  %49 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1947, !tbaa !1674
  %sub.i189 = add nsw i32 %49, -1, !dbg !1947
  call fastcc void @_ZN3povL16sortAndSubdivideEiii(i32 0, i32 %sub.i189) #8, !dbg !1947
  call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29), i32 1) #8, !dbg !1948
  %.pre = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1949, !tbaa !1674
  br label %if.end127, !dbg !1950

if.end127:                                        ; preds = %if.end124, %if.then126
  %50 = phi i32 [ %.pre, %if.then126 ], [ %47, %if.end124 ]
  %51 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !1949, !tbaa !1674
  %add = add nsw i32 %50, %51, !dbg !1949
  %cmp128 = icmp sgt i32 %add, 0, !dbg !1949
  %52 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !1951, !tbaa !1709
  %tobool130.not = icmp eq i8* %52, null, !dbg !1951
  %53 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 13), align 4, !dbg !1951, !tbaa !1674
  %tobool132 = icmp ne i32 %53, 0, !dbg !1951
  %or.cond150 = or i1 %tobool130.not, %tobool132, !dbg !1951
  br i1 %cmp128, label %if.then129, label %if.else, !dbg !1949

if.then129:                                       ; preds = %if.end127
  br i1 %or.cond150, label %if.end147, label %if.then133, !dbg !1951

if.then133:                                       ; preds = %if.then129
  %call134 = call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([19 x i8]* @.str8, i64 0, i64 0), i32 6) #8, !dbg !1953
  %54 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !1955, !tbaa !1709
  %call.i190 = call %struct._IO_FILE* @fopen(i8* %54, i8* getelementptr inbounds ([3 x i8]* @.str13, i64 0, i64 0)) #9, !dbg !1955
  call void @llvm.dbg.value(metadata !{%struct._IO_FILE* %call.i190}, i64 0, metadata !1957) #7, !dbg !1955
  %tobool.i191 = icmp eq %struct._IO_FILE* %call.i190, null, !dbg !1958
  br i1 %tobool.i191, label %if.then137, label %if.end.i193, !dbg !1958

if.end.i193:                                      ; preds = %if.then133
  %call1.i = call i64 @fwrite(i8* bitcast (i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2) to i8*), i64 4, i64 1, %struct._IO_FILE* %call.i190) #9, !dbg !1959
  %55 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !1960, !tbaa !1674
  %cmp.i192 = icmp sgt i32 %55, 0, !dbg !1960
  %56 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 0), align 8, !dbg !1960, !tbaa !1709
  %tobool2.i = icmp ne %"struct.pov::photon_struct"** %56, null, !dbg !1960
  %or.cond.i = and i1 %cmp.i192, %tobool2.i, !dbg !1960
  br i1 %or.cond.i, label %for.body.i197.preheader, label %if.end12.i, !dbg !1960

for.body.i197.preheader:                          ; preds = %if.end.i193
  %57 = load %"struct.pov::photon_struct"** %56, align 8, !dbg !1961, !tbaa !1709
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %57}, i64 0, metadata !1965) #7, !dbg !1961
  %58 = bitcast %"struct.pov::photon_struct"* %57 to i8*, !dbg !1966
  %call7.i205 = call i64 @fwrite(i8* %58, i64 20, i64 1, %struct._IO_FILE* %call.i190) #9, !dbg !1966
  %conv.i195206 = trunc i64 %call7.i205 to i32, !dbg !1966
  call void @llvm.dbg.value(metadata !{i32 %conv.i195206}, i64 0, metadata !1967) #7, !dbg !1966
  %cmp8.i207 = icmp slt i32 %conv.i195206, 1, !dbg !1968
  call void @llvm.dbg.value(metadata !1969, i64 0, metadata !1970) #7, !dbg !1971
  br i1 %cmp8.i207, label %if.then9.i, label %for.cond.i194, !dbg !1968

for.cond.i194:                                    ; preds = %for.body.i197.preheader, %for.cond.for.body_crit_edge.i
  %inc.i196208 = phi i32 [ %inc.i196, %for.cond.for.body_crit_edge.i ], [ 1, %for.body.i197.preheader ]
  %59 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !1971, !tbaa !1674
  %cmp4.i = icmp slt i32 %inc.i196208, %59, !dbg !1971
  br i1 %cmp4.i, label %for.cond.for.body_crit_edge.i, label %if.end12.i, !dbg !1971

for.cond.for.body_crit_edge.i:                    ; preds = %for.cond.i194
  %.pre61.i = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 0), align 8, !dbg !1961, !tbaa !1709
  %and.i = and i32 %inc.i196208, 16383, !dbg !1961
  %idxprom56.i = zext i32 %and.i to i64, !dbg !1961
  %shr.i = ashr i32 %inc.i196208, 14, !dbg !1961
  %idxprom5.i = sext i32 %shr.i to i64, !dbg !1961
  %arrayidx.i = getelementptr inbounds %"struct.pov::photon_struct"** %.pre61.i, i64 %idxprom5.i, !dbg !1961
  %60 = load %"struct.pov::photon_struct"** %arrayidx.i, align 8, !dbg !1961, !tbaa !1709
  %arrayidx6.i = getelementptr inbounds %"struct.pov::photon_struct"* %60, i64 %idxprom56.i, !dbg !1961
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %arrayidx6.i}, i64 0, metadata !1965) #7, !dbg !1961
  %61 = bitcast %"struct.pov::photon_struct"* %arrayidx6.i to i8*, !dbg !1966
  %call7.i = call i64 @fwrite(i8* %61, i64 20, i64 1, %struct._IO_FILE* %call.i190) #9, !dbg !1966
  %conv.i195 = trunc i64 %call7.i to i32, !dbg !1966
  call void @llvm.dbg.value(metadata !{i32 %conv.i195}, i64 0, metadata !1967) #7, !dbg !1966
  %cmp8.i = icmp slt i32 %conv.i195, 1, !dbg !1968
  %inc.i196 = add nsw i32 %inc.i196208, 1, !dbg !1971
  call void @llvm.dbg.value(metadata !{i32 %inc.i196208}, i64 0, metadata !1970) #7, !dbg !1971
  br i1 %cmp8.i, label %if.then9.i, label %for.cond.i194, !dbg !1968

if.then9.i:                                       ; preds = %for.cond.for.body_crit_edge.i, %for.body.i197.preheader
  %call10.i = call i32 @fclose(%struct._IO_FILE* %call.i190) #9, !dbg !1972
  br label %if.then137, !dbg !1974

if.end12.i:                                       ; preds = %for.cond.i194, %if.end.i193
  %call13.i = call i64 @fwrite(i8* bitcast (i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2) to i8*), i64 4, i64 1, %struct._IO_FILE* %call.i190) #9, !dbg !1975
  %62 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1976, !tbaa !1674
  %cmp14.i = icmp sgt i32 %62, 0, !dbg !1976
  %63 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 0), align 8, !dbg !1976, !tbaa !1709
  %tobool16.i = icmp ne %"struct.pov::photon_struct"** %63, null, !dbg !1976
  %or.cond38.i = and i1 %cmp14.i, %tobool16.i, !dbg !1976
  br i1 %or.cond38.i, label %for.body20.i.preheader, label %_ZN3povL13savePhotonMapEv.exit, !dbg !1976

for.body20.i.preheader:                           ; preds = %if.end12.i
  %64 = load %"struct.pov::photon_struct"** %63, align 8, !dbg !1977, !tbaa !1709
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %64}, i64 0, metadata !1965) #7, !dbg !1977
  %65 = bitcast %"struct.pov::photon_struct"* %64 to i8*, !dbg !1981
  %call27.i201 = call i64 @fwrite(i8* %65, i64 20, i64 1, %struct._IO_FILE* %call.i190) #9, !dbg !1981
  %conv28.i202 = trunc i64 %call27.i201 to i32, !dbg !1981
  call void @llvm.dbg.value(metadata !{i32 %conv28.i202}, i64 0, metadata !1967) #7, !dbg !1981
  %cmp29.i203 = icmp slt i32 %conv28.i202, 1, !dbg !1982
  call void @llvm.dbg.value(metadata !1969, i64 0, metadata !1970) #7, !dbg !1983
  br i1 %cmp29.i203, label %if.then30.i, label %for.cond18.i, !dbg !1982

for.cond18.i:                                     ; preds = %for.body20.i.preheader, %for.cond18.for.body20_crit_edge.i
  %inc34.i204 = phi i32 [ %inc34.i, %for.cond18.for.body20_crit_edge.i ], [ 1, %for.body20.i.preheader ]
  %66 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1983, !tbaa !1674
  %cmp19.i = icmp slt i32 %inc34.i204, %66, !dbg !1983
  br i1 %cmp19.i, label %for.cond18.for.body20_crit_edge.i, label %_ZN3povL13savePhotonMapEv.exit, !dbg !1983

for.cond18.for.body20_crit_edge.i:                ; preds = %for.cond18.i
  %.pre.i = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 0), align 8, !dbg !1977, !tbaa !1709
  %and21.i = and i32 %inc34.i204, 16383, !dbg !1977
  %idxprom2255.i = zext i32 %and21.i to i64, !dbg !1977
  %shr23.i = ashr i32 %inc34.i204, 14, !dbg !1977
  %idxprom24.i = sext i32 %shr23.i to i64, !dbg !1977
  %arrayidx25.i = getelementptr inbounds %"struct.pov::photon_struct"** %.pre.i, i64 %idxprom24.i, !dbg !1977
  %67 = load %"struct.pov::photon_struct"** %arrayidx25.i, align 8, !dbg !1977, !tbaa !1709
  %arrayidx26.i = getelementptr inbounds %"struct.pov::photon_struct"* %67, i64 %idxprom2255.i, !dbg !1977
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %arrayidx26.i}, i64 0, metadata !1965) #7, !dbg !1977
  %68 = bitcast %"struct.pov::photon_struct"* %arrayidx26.i to i8*, !dbg !1981
  %call27.i = call i64 @fwrite(i8* %68, i64 20, i64 1, %struct._IO_FILE* %call.i190) #9, !dbg !1981
  %conv28.i = trunc i64 %call27.i to i32, !dbg !1981
  call void @llvm.dbg.value(metadata !{i32 %conv28.i}, i64 0, metadata !1967) #7, !dbg !1981
  %cmp29.i = icmp slt i32 %conv28.i, 1, !dbg !1982
  %inc34.i = add nsw i32 %inc34.i204, 1, !dbg !1983
  call void @llvm.dbg.value(metadata !{i32 %inc34.i204}, i64 0, metadata !1970) #7, !dbg !1983
  br i1 %cmp29.i, label %if.then30.i, label %for.cond18.i, !dbg !1982

if.then30.i:                                      ; preds = %for.cond18.for.body20_crit_edge.i, %for.body20.i.preheader
  %call31.i = call i32 @fclose(%struct._IO_FILE* %call.i190) #9, !dbg !1984
  br label %if.then137, !dbg !1986

_ZN3povL13savePhotonMapEv.exit:                   ; preds = %for.cond18.i, %if.end12.i
  %call37.i = call i32 @fclose(%struct._IO_FILE* %call.i190) #9, !dbg !1987
  br label %if.end147, !dbg !1956

if.then137:                                       ; preds = %if.then9.i, %if.then30.i, %if.then133
  %call138 = call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([27 x i8]* @.str9, i64 0, i64 0)) #8, !dbg !1988
  br label %if.end147, !dbg !1990

if.else:                                          ; preds = %if.end127
  br i1 %or.cond150, label %if.end147, label %if.then144, !dbg !1991

if.then144:                                       ; preds = %if.else
  %call145 = call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([40 x i8]* @.str10, i64 0, i64 0)) #8, !dbg !1993
  br label %if.end147, !dbg !1995

if.end147:                                        ; preds = %_ZN3povL13savePhotonMapEv.exit, %if.then144, %if.else, %if.then129, %if.then137
  call void @_ZN3pov12Do_CooperateEi(i32 0) #8, !dbg !1996
  br label %return, !dbg !1996

return:                                           ; preds = %entry, %if.end10, %if.then12, %if.end147
  ret void, !dbg !1996
}
