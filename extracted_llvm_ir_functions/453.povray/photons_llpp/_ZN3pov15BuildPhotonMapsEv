define void @_ZN3pov15BuildPhotonMapsEv() #0 {
  %numph.i = alloca i32, align 4
  %1 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 0), align 8, !dbg !2165, !tbaa !1992
  %2 = icmp eq i32 %1, 0, !dbg !2167
  br i1 %2, label %266, label %3, !dbg !2168

; <label>:3                                       ; preds = %0
  %4 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !2169, !tbaa !2112
  %5 = icmp ne i8* %4, null, !dbg !2171
  %6 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 13), align 4
  %7 = icmp ne i32 %6, 0, !dbg !2172
  %or.cond = and i1 %5, %7, !dbg !2173
  br i1 %or.cond, label %8, label %59, !dbg !2173

; <label>:8                                       ; preds = %3
  %9 = tail call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([20 x i8]* @.str4, i64 0, i64 0), i32 5) #8, !dbg !2174
  %10 = bitcast i32* %numph.i to i8*, !dbg !2176
  call void @llvm.lifetime.start(i64 4, i8* %10), !dbg !2176
  %11 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 0), align 8, !dbg !2176, !tbaa !1992
  %12 = icmp eq i32 %11, 0, !dbg !2180
  br i1 %12, label %48, label %13, !dbg !2181

; <label>:13                                      ; preds = %8
  %14 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !2182, !tbaa !2112
  %15 = tail call %struct.__sFILE* @"\01_fopen"(i8* %14, i8* getelementptr inbounds ([3 x i8]* @.str12, i64 0, i64 0)) #8, !dbg !2183
  tail call void @llvm.dbg.value(metadata %struct.__sFILE* %15, i64 0, metadata !1188, metadata !1948), !dbg !2184
  %16 = icmp eq %struct.__sFILE* %15, null, !dbg !2185
  br i1 %16, label %48, label %17, !dbg !2187

; <label>:17                                      ; preds = %13
  %18 = call i64 @fread(i8* %10, i64 4, i64 1, %struct.__sFILE* %15) #8, !dbg !2188
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1185, metadata !1948), !dbg !2189
  tail call void @llvm.dbg.value(metadata i32* %numph.i, i64 0, metadata !1191, metadata !1948), !dbg !2190
  %19 = load i32* %numph.i, align 4, !dbg !2191, !tbaa !2001
  %20 = icmp sgt i32 %19, 0, !dbg !2194
  br i1 %20, label %.lr.ph3.i, label %._crit_edge.i, !dbg !2195

; <label>:21                                      ; preds = %.lr.ph3.i
  tail call void @llvm.dbg.value(metadata i32* %numph.i, i64 0, metadata !1191, metadata !1948), !dbg !2190
  %22 = icmp slt i32 %28, %19, !dbg !2194
  br i1 %22, label %.lr.ph3.i, label %._crit_edge.i, !dbg !2195

.lr.ph3.i:                                        ; preds = %17, %21
  %i.02.i = phi i32 [ %28, %21 ], [ 0, %17 ], !dbg !2196
  %23 = tail call fastcc %"struct.pov::photon_struct"* @_ZN3povL14AllocatePhotonEPNS_17photon_map_structE(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14)) #8, !dbg !2197
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_struct"* %23, i64 0, metadata !1187, metadata !1948), !dbg !2199
  %24 = bitcast %"struct.pov::photon_struct"* %23 to i8*, !dbg !2200
  %25 = tail call i64 @fread(i8* %24, i64 20, i64 1, %struct.__sFILE* %15) #8, !dbg !2201
  %26 = trunc i64 %25 to i32, !dbg !2201
  tail call void @llvm.dbg.value(metadata i32 %26, i64 0, metadata !1186, metadata !1948), !dbg !2202
  %27 = icmp slt i32 %26, 1, !dbg !2203
  %28 = add nuw nsw i32 %i.02.i, 1, !dbg !2205
  tail call void @llvm.dbg.value(metadata i32 %28, i64 0, metadata !1185, metadata !1948), !dbg !2189
  br i1 %27, label %29, label %21, !dbg !2206

; <label>:29                                      ; preds = %.lr.ph3.i
  %30 = tail call i32 @fclose(%struct.__sFILE* %15) #8, !dbg !2207
  br label %48, !dbg !2209

._crit_edge.i:                                    ; preds = %21, %17
  %31 = tail call i32 @feof(%struct.__sFILE* %15) #8, !dbg !2210
  %32 = icmp eq i32 %31, 0, !dbg !2210
  br i1 %32, label %33, label %_ZN3povL13loadPhotonMapEv.exit, !dbg !2212

; <label>:33                                      ; preds = %._crit_edge.i
  %34 = call i64 @fread(i8* %10, i64 4, i64 1, %struct.__sFILE* %15) #8, !dbg !2213
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1185, metadata !1948), !dbg !2189
  tail call void @llvm.dbg.value(metadata i32* %numph.i, i64 0, metadata !1191, metadata !1948), !dbg !2190
  %35 = load i32* %numph.i, align 4, !dbg !2215, !tbaa !2001
  %36 = icmp sgt i32 %35, 0, !dbg !2218
  br i1 %36, label %.lr.ph.i, label %_ZN3povL13loadPhotonMapEv.exit, !dbg !2219

; <label>:37                                      ; preds = %.lr.ph.i
  tail call void @llvm.dbg.value(metadata i32* %numph.i, i64 0, metadata !1191, metadata !1948), !dbg !2190
  %38 = icmp slt i32 %44, %35, !dbg !2218
  br i1 %38, label %.lr.ph.i, label %_ZN3povL13loadPhotonMapEv.exit, !dbg !2219

.lr.ph.i:                                         ; preds = %33, %37
  %i.11.i = phi i32 [ %44, %37 ], [ 0, %33 ], !dbg !2196
  %39 = tail call fastcc %"struct.pov::photon_struct"* @_ZN3povL14AllocatePhotonEPNS_17photon_map_structE(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29)) #8, !dbg !2220
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_struct"* %39, i64 0, metadata !1187, metadata !1948), !dbg !2199
  %40 = bitcast %"struct.pov::photon_struct"* %39 to i8*, !dbg !2222
  %41 = tail call i64 @fread(i8* %40, i64 20, i64 1, %struct.__sFILE* %15) #8, !dbg !2223
  %42 = trunc i64 %41 to i32, !dbg !2223
  tail call void @llvm.dbg.value(metadata i32 %42, i64 0, metadata !1186, metadata !1948), !dbg !2202
  %43 = icmp slt i32 %42, 1, !dbg !2224
  %44 = add nuw nsw i32 %i.11.i, 1, !dbg !2226
  tail call void @llvm.dbg.value(metadata i32 %44, i64 0, metadata !1185, metadata !1948), !dbg !2189
  br i1 %43, label %45, label %37, !dbg !2227

; <label>:45                                      ; preds = %.lr.ph.i
  %46 = tail call i32 @fclose(%struct.__sFILE* %15) #8, !dbg !2228
  br label %48, !dbg !2230

_ZN3povL13loadPhotonMapEv.exit:                   ; preds = %37, %._crit_edge.i, %33
  %47 = tail call i32 @fclose(%struct.__sFILE* %15) #8, !dbg !2231
  call void @llvm.lifetime.end(i64 4, i8* %10), !dbg !2232
  br label %51, !dbg !2233

; <label>:48                                      ; preds = %29, %45, %8, %13
  call void @llvm.lifetime.end(i64 4, i8* %10), !dbg !2232
  %49 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !2234, !tbaa !2112
  %50 = tail call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([31 x i8]* @.str5, i64 0, i64 0), i8* %49) #8, !dbg !2236
  br label %51, !dbg !2237

; <label>:51                                      ; preds = %_ZN3povL13loadPhotonMapEv.exit, %48
  tail call void @_ZN3pov12Do_CooperateEi(i32 0) #8, !dbg !2238
  %52 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !2239, !tbaa !2013
  %53 = icmp sgt i32 %52, 0, !dbg !2241
  br i1 %53, label %54, label %55, !dbg !2242

; <label>:54                                      ; preds = %51
  tail call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14), i32 0) #8, !dbg !2243
  br label %55, !dbg !2245

; <label>:55                                      ; preds = %54, %51
  %56 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !2246, !tbaa !2031
  %57 = icmp sgt i32 %56, 0, !dbg !2248
  br i1 %57, label %58, label %266, !dbg !2249

; <label>:58                                      ; preds = %55
  tail call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29), i32 1) #8, !dbg !2250
  br label %266, !dbg !2252

; <label>:59                                      ; preds = %3
  store i32 1, i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !2253, !tbaa !2001
  %60 = tail call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([21 x i8]* @.str6, i64 0, i64 0), i32 4) #8, !dbg !2254
  %61 = load i64* bitcast (double* @_ZN3pov11ADC_BailoutE to i64*), align 8, !dbg !2255, !tbaa !2066
  %62 = load i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !2256, !tbaa !2001
  tail call void @llvm.dbg.value(metadata i32 %62, i64 0, metadata !1101, metadata !1948), !dbg !2257
  %63 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 5), align 4, !dbg !2258, !tbaa !2260
  %64 = icmp sgt i32 %63, -1, !dbg !2261
  br i1 %64, label %65, label %66, !dbg !2262

; <label>:65                                      ; preds = %59
  store i32 %63, i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !2263, !tbaa !2001
  br label %66, !dbg !2264

; <label>:66                                      ; preds = %65, %59
  %67 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 6), align 8, !dbg !2265, !tbaa !2267
  %68 = fcmp ult double %67, 0.000000e+00, !dbg !2268
  br i1 %68, label %70, label %69, !dbg !2269

; <label>:69                                      ; preds = %66
  store double %67, double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !2270, !tbaa !2066
  br label %70, !dbg !2271

; <label>:70                                      ; preds = %66, %69
  %71 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 32), align 4, !dbg !2272, !tbaa !2273
  %72 = icmp sgt i32 %71, 0, !dbg !2274
  br i1 %72, label %73, label %101, !dbg !2275

; <label>:73                                      ; preds = %70
  store double 0.000000e+00, double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !2276, !tbaa !2066
  store i8 1, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !2277, !tbaa !2278
  %Light.041 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !2279
  %74 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.041, null, !dbg !2281
  br i1 %74, label %._crit_edge45, label %.lr.ph44, !dbg !2283

.lr.ph44:                                         ; preds = %73, %80
  %Light.042 = phi %"struct.pov::Light_Source_Struct"* [ %Light.0, %80 ], [ %Light.041, %73 ]
  %75 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.042, i64 0, i32 27, !dbg !2284
  %76 = load i8* %75, align 1, !dbg !2284, !tbaa !2286
  %77 = icmp eq i8 %76, 3, !dbg !2288
  br i1 %77, label %80, label %78, !dbg !2289

; <label>:78                                      ; preds = %.lr.ph44
  %79 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !2290, !tbaa !2292
  tail call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %79, %"struct.pov::Light_Source_Struct"* %Light.042, i1 zeroext true) #8, !dbg !2294
  br label %80, !dbg !2295

; <label>:80                                      ; preds = %.lr.ph44, %78
  %81 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.042, i64 0, i32 26, !dbg !2296
  %Light.0 = load %"struct.pov::Light_Source_Struct"** %81, align 8, !dbg !2279
  %82 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.0, null, !dbg !2281
  br i1 %82, label %._crit_edge45, label %.lr.ph44, !dbg !2283

._crit_edge45:                                    ; preds = %80, %73
  store i8 0, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !2297, !tbaa !2278
  %Light_Group_Light.036 = load %"struct.pov::light_group_light_struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 16), align 8, !dbg !2298
  %83 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.036, null, !dbg !2300
  br i1 %83, label %._crit_edge40, label %.lr.ph39, !dbg !2302

.lr.ph39:                                         ; preds = %._crit_edge45, %91
  %Light_Group_Light.037 = phi %"struct.pov::light_group_light_struct"* [ %Light_Group_Light.0, %91 ], [ %Light_Group_Light.036, %._crit_edge45 ]
  %84 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.037, i64 0, i32 0, !dbg !2303
  %85 = load %"struct.pov::Light_Source_Struct"** %84, align 8, !dbg !2303, !tbaa !2305
  tail call void @llvm.dbg.value(metadata %"struct.pov::Light_Source_Struct"* %85, i64 0, metadata !1099, metadata !1948), !dbg !2307
  %86 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %85, i64 0, i32 27, !dbg !2308
  %87 = load i8* %86, align 1, !dbg !2308, !tbaa !2286
  %88 = icmp eq i8 %87, 3, !dbg !2310
  br i1 %88, label %91, label %89, !dbg !2311

; <label>:89                                      ; preds = %.lr.ph39
  %90 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !2312, !tbaa !2292
  tail call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %90, %"struct.pov::Light_Source_Struct"* %85, i1 zeroext true) #8, !dbg !2314
  br label %91, !dbg !2315

; <label>:91                                      ; preds = %.lr.ph39, %89
  %92 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.037, i64 0, i32 1, !dbg !2316
  %Light_Group_Light.0 = load %"struct.pov::light_group_light_struct"** %92, align 8, !dbg !2298
  %93 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.0, null, !dbg !2300
  br i1 %93, label %._crit_edge40, label %.lr.ph39, !dbg !2302

._crit_edge40:                                    ; preds = %91, %._crit_edge45
  %94 = load double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !2317, !tbaa !2066
  %95 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 32), align 4, !dbg !2318, !tbaa !2273
  %96 = sitofp i32 %95 to double, !dbg !2319
  %97 = fdiv double %94, %96, !dbg !2320
  tail call void @llvm.dbg.value(metadata double %97, i64 0, metadata !1103, metadata !1948), !dbg !2321
  %98 = tail call double @sqrt(double %97) #9, !dbg !2322
  tail call void @llvm.dbg.value(metadata double %98, i64 0, metadata !1103, metadata !1948), !dbg !2321
  %99 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 1), align 8, !dbg !2323, !tbaa !2324
  %100 = fmul double %98, %99, !dbg !2323
  store double %100, double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 1), align 8, !dbg !2323, !tbaa !2324
  br label %101, !dbg !2325

; <label>:101                                     ; preds = %._crit_edge40, %70
  %102 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8, !dbg !2326, !tbaa !2327
  %103 = icmp sgt i32 %102, 0, !dbg !2328
  br i1 %103, label %104, label %130, !dbg !2329

; <label>:104                                     ; preds = %101
  store double 0.000000e+00, double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !2330, !tbaa !2066
  store i8 1, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !2331, !tbaa !2278
  %Light.131 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !2332
  %105 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.131, null, !dbg !2334
  br i1 %105, label %._crit_edge35, label %.lr.ph34, !dbg !2336

.lr.ph34:                                         ; preds = %104, %110
  %Light.132 = phi %"struct.pov::Light_Source_Struct"* [ %Light.1, %110 ], [ %Light.131, %104 ]
  %106 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.132, i64 0, i32 27, !dbg !2337
  %107 = load i8* %106, align 1, !dbg !2337, !tbaa !2286
  %108 = icmp eq i8 %107, 3, !dbg !2339
  br i1 %108, label %110, label %109, !dbg !2340

; <label>:109                                     ; preds = %.lr.ph34
  tail call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %Light.132, i32 1) #8, !dbg !2341
  br label %110, !dbg !2343

; <label>:110                                     ; preds = %.lr.ph34, %109
  %111 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.132, i64 0, i32 26, !dbg !2344
  %Light.1 = load %"struct.pov::Light_Source_Struct"** %111, align 8, !dbg !2332
  %112 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.1, null, !dbg !2334
  br i1 %112, label %._crit_edge35, label %.lr.ph34, !dbg !2336

._crit_edge35:                                    ; preds = %110, %104
  store i8 0, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !2345, !tbaa !2278
  %Light_Group_Light.126 = load %"struct.pov::light_group_light_struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 16), align 8, !dbg !2346
  %113 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.126, null, !dbg !2348
  br i1 %113, label %._crit_edge30, label %.lr.ph29, !dbg !2350

.lr.ph29:                                         ; preds = %._crit_edge35, %120
  %Light_Group_Light.127 = phi %"struct.pov::light_group_light_struct"* [ %Light_Group_Light.1, %120 ], [ %Light_Group_Light.126, %._crit_edge35 ]
  %114 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.127, i64 0, i32 0, !dbg !2351
  %115 = load %"struct.pov::Light_Source_Struct"** %114, align 8, !dbg !2351, !tbaa !2305
  tail call void @llvm.dbg.value(metadata %"struct.pov::Light_Source_Struct"* %115, i64 0, metadata !1099, metadata !1948), !dbg !2307
  %116 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %115, i64 0, i32 27, !dbg !2353
  %117 = load i8* %116, align 1, !dbg !2353, !tbaa !2286
  %118 = icmp eq i8 %117, 3, !dbg !2355
  br i1 %118, label %120, label %119, !dbg !2356

; <label>:119                                     ; preds = %.lr.ph29
  tail call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %115, i32 1) #8, !dbg !2357
  br label %120, !dbg !2359

; <label>:120                                     ; preds = %.lr.ph29, %119
  %121 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.127, i64 0, i32 1, !dbg !2360
  %Light_Group_Light.1 = load %"struct.pov::light_group_light_struct"** %121, align 8, !dbg !2346
  %122 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.1, null, !dbg !2348
  br i1 %122, label %._crit_edge30, label %.lr.ph29, !dbg !2350

._crit_edge30:                                    ; preds = %120, %._crit_edge35
  %123 = load double* @_ZN3povL19photonCountEstimateE, align 8, !dbg !2361, !tbaa !2066
  %124 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8, !dbg !2362, !tbaa !2327
  %125 = sitofp i32 %124 to double, !dbg !2363
  %126 = fdiv double %123, %125, !dbg !2364
  tail call void @llvm.dbg.value(metadata double %126, i64 0, metadata !1106, metadata !1948), !dbg !2365
  %127 = tail call double @sqrt(double %126) #9, !dbg !2366
  tail call void @llvm.dbg.value(metadata double %127, i64 0, metadata !1106, metadata !1948), !dbg !2365
  %128 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 2), align 8, !dbg !2367, !tbaa !2368
  %129 = fmul double %127, %128, !dbg !2367
  store double %129, double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 2), align 8, !dbg !2367, !tbaa !2368
  tail call void @_ZN3pov12Do_CooperateEi(i32 1) #8, !dbg !2369
  br label %130, !dbg !2370

; <label>:130                                     ; preds = %._crit_edge30, %101
  tail call void @_ZN3pov12Do_CooperateEi(i32 0) #8, !dbg !2371
  store i8 1, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !2372, !tbaa !2278
  %Light.220 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !2373
  %131 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.220, null, !dbg !2375
  br i1 %131, label %._crit_edge25, label %.lr.ph24, !dbg !2377

.lr.ph24:                                         ; preds = %130, %150
  %Light.221 = phi %"struct.pov::Light_Source_Struct"* [ %Light.2, %150 ], [ %Light.220, %130 ]
  %132 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.221, i64 0, i32 27, !dbg !2378
  %133 = load i8* %132, align 1, !dbg !2378, !tbaa !2286
  switch i8 %133, label %140 [
    i8 3, label %150
    i8 4, label %134
  ], !dbg !2380

; <label>:134                                     ; preds = %.lr.ph24
  %135 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.221, i64 0, i32 33, !dbg !2381
  %136 = load i8* %135, align 1, !dbg !2381, !tbaa !2384
  %137 = icmp eq i8 %136, 0, !dbg !2385
  br i1 %137, label %138, label %140, !dbg !2386

; <label>:138                                     ; preds = %134
  %139 = tail call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([59 x i8]* @.str7, i64 0, i64 0)) #8, !dbg !2387
  br label %140, !dbg !2389

; <label>:140                                     ; preds = %.lr.ph24, %134, %138
  %141 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.221, i64 0, i32 13, !dbg !2390
  %142 = load i32* %141, align 4, !dbg !2390, !tbaa !2392
  %143 = and i32 %142, 524288, !dbg !2390
  %144 = icmp ne i32 %143, 0, !dbg !2390
  %145 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8
  %146 = icmp sgt i32 %145, 0, !dbg !2393
  %or.cond4 = and i1 %144, %146, !dbg !2394
  br i1 %or.cond4, label %147, label %148, !dbg !2394

; <label>:147                                     ; preds = %140
  tail call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %Light.221, i32 0) #8, !dbg !2395
  br label %148, !dbg !2395

; <label>:148                                     ; preds = %147, %140
  %149 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !2396, !tbaa !2292
  tail call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %149, %"struct.pov::Light_Source_Struct"* %Light.221, i1 zeroext false) #8, !dbg !2397
  br label %150, !dbg !2398

; <label>:150                                     ; preds = %.lr.ph24, %148
  %151 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.221, i64 0, i32 26, !dbg !2399
  %Light.2 = load %"struct.pov::Light_Source_Struct"** %151, align 8, !dbg !2373
  %152 = icmp eq %"struct.pov::Light_Source_Struct"* %Light.2, null, !dbg !2375
  br i1 %152, label %._crit_edge25, label %.lr.ph24, !dbg !2377

._crit_edge25:                                    ; preds = %150, %130
  store i8 0, i8* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 28), align 8, !dbg !2400, !tbaa !2278
  %Light_Group_Light.217 = load %"struct.pov::light_group_light_struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 16), align 8, !dbg !2401
  %153 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.217, null, !dbg !2403
  br i1 %153, label %._crit_edge, label %.lr.ph19, !dbg !2405

.lr.ph19:                                         ; preds = %._crit_edge25, %173
  %Light_Group_Light.218 = phi %"struct.pov::light_group_light_struct"* [ %Light_Group_Light.2, %173 ], [ %Light_Group_Light.217, %._crit_edge25 ]
  %154 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.218, i64 0, i32 0, !dbg !2406
  %155 = load %"struct.pov::Light_Source_Struct"** %154, align 8, !dbg !2406, !tbaa !2305
  tail call void @llvm.dbg.value(metadata %"struct.pov::Light_Source_Struct"* %155, i64 0, metadata !1099, metadata !1948), !dbg !2307
  %156 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %155, i64 0, i32 27, !dbg !2408
  %157 = load i8* %156, align 1, !dbg !2408, !tbaa !2286
  %158 = icmp eq i8 %157, 4, !dbg !2410
  br i1 %158, label %159, label %165, !dbg !2411

; <label>:159                                     ; preds = %.lr.ph19
  %160 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %155, i64 0, i32 33, !dbg !2412
  %161 = load i8* %160, align 1, !dbg !2412, !tbaa !2384
  %162 = icmp eq i8 %161, 0, !dbg !2413
  br i1 %162, label %163, label %165, !dbg !2414

; <label>:163                                     ; preds = %159
  %164 = tail call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([59 x i8]* @.str7, i64 0, i64 0)) #8, !dbg !2415
  br label %165, !dbg !2417

; <label>:165                                     ; preds = %159, %163, %.lr.ph19
  %166 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %155, i64 0, i32 13, !dbg !2418
  %167 = load i32* %166, align 4, !dbg !2418, !tbaa !2392
  %168 = and i32 %167, 524288, !dbg !2418
  %169 = icmp ne i32 %168, 0, !dbg !2418
  %170 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 33), align 8
  %171 = icmp sgt i32 %170, 0, !dbg !2420
  %or.cond6 = and i1 %169, %171, !dbg !2421
  br i1 %or.cond6, label %172, label %173, !dbg !2421

; <label>:172                                     ; preds = %165
  tail call fastcc void @_ZN3povL20ShootPhotonsAtObjectEPNS_13Object_StructEPNS_19Light_Source_StructEi(%"struct.pov::Object_Struct"* null, %"struct.pov::Light_Source_Struct"* %155, i32 0) #8, !dbg !2422
  br label %173, !dbg !2422

; <label>:173                                     ; preds = %172, %165
  %174 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5), align 8, !dbg !2423, !tbaa !2292
  tail call fastcc void @_ZN3povL20SearchThroughObjectsEPNS_13Object_StructEPNS_19Light_Source_StructEb(%"struct.pov::Object_Struct"* %174, %"struct.pov::Light_Source_Struct"* %155, i1 zeroext false) #8, !dbg !2424
  %175 = getelementptr inbounds %"struct.pov::light_group_light_struct"* %Light_Group_Light.218, i64 0, i32 1, !dbg !2425
  %Light_Group_Light.2 = load %"struct.pov::light_group_light_struct"** %175, align 8, !dbg !2401
  %176 = icmp eq %"struct.pov::light_group_light_struct"* %Light_Group_Light.2, null, !dbg !2403
  br i1 %176, label %._crit_edge, label %.lr.ph19, !dbg !2405

._crit_edge:                                      ; preds = %173, %._crit_edge25
  store i32 0, i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !2426, !tbaa !2001
  store i64 %61, i64* bitcast (double* @_ZN3pov11ADC_BailoutE to i64*), align 8, !dbg !2427, !tbaa !2066
  store i32 %62, i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !2428, !tbaa !2001
  %177 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !2429, !tbaa !2013
  %178 = icmp sgt i32 %177, 0, !dbg !2431
  br i1 %178, label %179, label %184, !dbg !2432

; <label>:179                                     ; preds = %._crit_edge
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14), i64 0, metadata !1409, metadata !1948), !dbg !2433
  %180 = tail call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([16 x i8]* @.str15, i64 0, i64 0), i32 7) #8, !dbg !2436
  %181 = load i64* bitcast (%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14) to i64*), align 8, !dbg !2437, !tbaa !2438
  store i64 %181, i64* bitcast (%"struct.pov::photon_struct"*** @_ZN3povL5map_sE to i64*), align 8, !dbg !2439, !tbaa !2027
  %182 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !2440, !tbaa !2441
  %183 = add nsw i32 %182, -1, !dbg !2442
  tail call fastcc void @_ZN3povL16sortAndSubdivideEiii(i32 0, i32 %183) #8, !dbg !2443
  tail call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14), i32 0) #8, !dbg !2444
  br label %184, !dbg !2445

; <label>:184                                     ; preds = %179, %._crit_edge
  %185 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !2446, !tbaa !2031
  %186 = icmp sgt i32 %185, 0, !dbg !2448
  br i1 %186, label %187, label %192, !dbg !2449

; <label>:187                                     ; preds = %184
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29), i64 0, metadata !1409, metadata !1948), !dbg !2450
  %188 = tail call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([16 x i8]* @.str15, i64 0, i64 0), i32 7) #8, !dbg !2453
  %189 = load i64* bitcast (%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29) to i64*), align 8, !dbg !2454, !tbaa !2438
  store i64 %189, i64* bitcast (%"struct.pov::photon_struct"*** @_ZN3povL5map_sE to i64*), align 8, !dbg !2455, !tbaa !2027
  %190 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !2456, !tbaa !2441
  %191 = add nsw i32 %190, -1, !dbg !2457
  tail call fastcc void @_ZN3povL16sortAndSubdivideEiii(i32 0, i32 %191) #8, !dbg !2458
  tail call fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29), i32 1) #8, !dbg !2459
  %.pre = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !2460, !tbaa !2031
  br label %192, !dbg !2462

; <label>:192                                     ; preds = %187, %184
  %193 = phi i32 [ %.pre, %187 ], [ %185, %184 ]
  %194 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !2463, !tbaa !2013
  %195 = add nsw i32 %193, %194, !dbg !2464
  %196 = icmp sgt i32 %195, 0, !dbg !2465
  %197 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !2466, !tbaa !2112
  %.not = icmp eq i8* %197, null, !dbg !2469
  %198 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 13), align 4
  %199 = icmp ne i32 %198, 0, !dbg !2470
  %or.cond8 = or i1 %.not, %199, !dbg !2469
  br i1 %196, label %200, label %262, !dbg !2471

; <label>:200                                     ; preds = %192
  br i1 %or.cond8, label %265, label %201, !dbg !2469

; <label>:201                                     ; preds = %200
  %202 = tail call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([19 x i8]* @.str8, i64 0, i64 0), i32 6) #8, !dbg !2472
  %203 = load i8** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 11), align 8, !dbg !2474, !tbaa !2112
  %204 = tail call %struct.__sFILE* @"\01_fopen"(i8* %203, i8* getelementptr inbounds ([3 x i8]* @.str14, i64 0, i64 0)) #8, !dbg !2477
  tail call void @llvm.dbg.value(metadata %struct.__sFILE* %204, i64 0, metadata !1347, metadata !1948), !dbg !2478
  %205 = icmp eq %struct.__sFILE* %204, null, !dbg !2479
  br i1 %205, label %260, label %206, !dbg !2481

; <label>:206                                     ; preds = %201
  %207 = tail call i64 @"\01_fwrite"(i8* bitcast (i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2) to i8*), i64 4, i64 1, %struct.__sFILE* %204) #8, !dbg !2482
  %208 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !2483, !tbaa !2013
  %209 = icmp sgt i32 %208, 0, !dbg !2485
  %210 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 0), align 8, !dbg !2486
  %211 = icmp ne %"struct.pov::photon_struct"** %210, null, !dbg !2487
  %or.cond.i = and i1 %209, %211, !dbg !2488
  br i1 %or.cond.i, label %.lr.ph8.i.preheader, label %.loopexit5.i, !dbg !2488

.lr.ph8.i.preheader:                              ; preds = %206
  %212 = bitcast %"struct.pov::photon_struct"** %210 to i8**, !dbg !2489
  %213 = load i8** %212, align 8, !dbg !2489, !tbaa !2027
  %214 = tail call i64 @"\01_fwrite"(i8* %213, i64 20, i64 1, %struct.__sFILE* %204) #8, !dbg !2494
  %215 = trunc i64 %214 to i32, !dbg !2494
  tail call void @llvm.dbg.value(metadata i32 %215, i64 0, metadata !1349, metadata !1948), !dbg !2495
  %216 = icmp slt i32 %215, 1, !dbg !2496
  tail call void @llvm.dbg.value(metadata i32 1, i64 0, metadata !1348, metadata !1948), !dbg !2498
  br i1 %216, label %.lr.ph8.i._crit_edge, label %.lr.ph16, !dbg !2499

.lr.ph16:                                         ; preds = %.lr.ph8.i.preheader, %._crit_edge.i12
  %217 = phi i32 [ %231, %._crit_edge.i12 ], [ 1, %.lr.ph8.i.preheader ]
  %218 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !2500, !tbaa !2013
  %219 = icmp slt i32 %217, %218, !dbg !2501
  br i1 %219, label %._crit_edge.i12, label %.loopexit5.i, !dbg !2502

._crit_edge.i12:                                  ; preds = %.lr.ph16
  %.pre.i = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 0), align 8, !dbg !2489, !tbaa !2018
  %220 = and i32 %217, 16383, !dbg !2489
  %221 = zext i32 %220 to i64, !dbg !2489
  %222 = ashr i32 %217, 14, !dbg !2489
  %223 = sext i32 %222 to i64, !dbg !2489
  %224 = getelementptr inbounds %"struct.pov::photon_struct"** %.pre.i, i64 %223, !dbg !2489
  %225 = load %"struct.pov::photon_struct"** %224, align 8, !dbg !2489, !tbaa !2027
  %226 = getelementptr inbounds %"struct.pov::photon_struct"* %225, i64 %221, !dbg !2489
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_struct"* %226, i64 0, metadata !1346, metadata !1948), !dbg !2503
  %227 = bitcast %"struct.pov::photon_struct"* %226 to i8*, !dbg !2504
  %228 = tail call i64 @"\01_fwrite"(i8* %227, i64 20, i64 1, %struct.__sFILE* %204) #8, !dbg !2494
  %229 = trunc i64 %228 to i32, !dbg !2494
  tail call void @llvm.dbg.value(metadata i32 %229, i64 0, metadata !1349, metadata !1948), !dbg !2495
  %230 = icmp slt i32 %229, 1, !dbg !2496
  %231 = add nuw nsw i32 %217, 1, !dbg !2505
  tail call void @llvm.dbg.value(metadata i32 %231, i64 0, metadata !1348, metadata !1948), !dbg !2498
  br i1 %230, label %.lr.ph8.i._crit_edge, label %.lr.ph16, !dbg !2499

.lr.ph8.i._crit_edge:                             ; preds = %._crit_edge.i12, %.lr.ph8.i.preheader
  %232 = tail call i32 @fclose(%struct.__sFILE* %204) #8, !dbg !2506
  br label %260, !dbg !2508

.loopexit5.i:                                     ; preds = %.lr.ph16, %206
  %233 = tail call i64 @"\01_fwrite"(i8* bitcast (i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2) to i8*), i64 4, i64 1, %struct.__sFILE* %204) #8, !dbg !2509
  %234 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !2510, !tbaa !2031
  %235 = icmp sgt i32 %234, 0, !dbg !2512
  %236 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 0), align 8, !dbg !2486
  %237 = icmp ne %"struct.pov::photon_struct"** %236, null, !dbg !2513
  %or.cond3.i = and i1 %235, %237, !dbg !2514
  br i1 %or.cond3.i, label %.lr.ph.i13.preheader, label %_ZN3povL13savePhotonMapEv.exit, !dbg !2514

.lr.ph.i13.preheader:                             ; preds = %.loopexit5.i
  %238 = bitcast %"struct.pov::photon_struct"** %236 to i8**, !dbg !2515
  %239 = load i8** %238, align 8, !dbg !2515, !tbaa !2027
  %240 = tail call i64 @"\01_fwrite"(i8* %239, i64 20, i64 1, %struct.__sFILE* %204) #8, !dbg !2520
  %241 = trunc i64 %240 to i32, !dbg !2520
  tail call void @llvm.dbg.value(metadata i32 %241, i64 0, metadata !1349, metadata !1948), !dbg !2495
  %242 = icmp slt i32 %241, 1, !dbg !2521
  tail call void @llvm.dbg.value(metadata i32 1, i64 0, metadata !1348, metadata !1948), !dbg !2498
  br i1 %242, label %.lr.ph.i13._crit_edge, label %.lr.ph, !dbg !2523

.lr.ph:                                           ; preds = %.lr.ph.i13.preheader, %._crit_edge9.i
  %243 = phi i32 [ %257, %._crit_edge9.i ], [ 1, %.lr.ph.i13.preheader ]
  %244 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !2524, !tbaa !2031
  %245 = icmp slt i32 %243, %244, !dbg !2525
  br i1 %245, label %._crit_edge9.i, label %_ZN3povL13savePhotonMapEv.exit, !dbg !2526

._crit_edge9.i:                                   ; preds = %.lr.ph
  %.pre10.i = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 0), align 8, !dbg !2515, !tbaa !2036
  %246 = and i32 %243, 16383, !dbg !2515
  %247 = zext i32 %246 to i64, !dbg !2515
  %248 = ashr i32 %243, 14, !dbg !2515
  %249 = sext i32 %248 to i64, !dbg !2515
  %250 = getelementptr inbounds %"struct.pov::photon_struct"** %.pre10.i, i64 %249, !dbg !2515
  %251 = load %"struct.pov::photon_struct"** %250, align 8, !dbg !2515, !tbaa !2027
  %252 = getelementptr inbounds %"struct.pov::photon_struct"* %251, i64 %247, !dbg !2515
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_struct"* %252, i64 0, metadata !1346, metadata !1948), !dbg !2503
  %253 = bitcast %"struct.pov::photon_struct"* %252 to i8*, !dbg !2527
  %254 = tail call i64 @"\01_fwrite"(i8* %253, i64 20, i64 1, %struct.__sFILE* %204) #8, !dbg !2520
  %255 = trunc i64 %254 to i32, !dbg !2520
  tail call void @llvm.dbg.value(metadata i32 %255, i64 0, metadata !1349, metadata !1948), !dbg !2495
  %256 = icmp slt i32 %255, 1, !dbg !2521
  %257 = add nuw nsw i32 %243, 1, !dbg !2528
  tail call void @llvm.dbg.value(metadata i32 %257, i64 0, metadata !1348, metadata !1948), !dbg !2498
  br i1 %256, label %.lr.ph.i13._crit_edge, label %.lr.ph, !dbg !2523

.lr.ph.i13._crit_edge:                            ; preds = %._crit_edge9.i, %.lr.ph.i13.preheader
  %258 = tail call i32 @fclose(%struct.__sFILE* %204) #8, !dbg !2529
  br label %260, !dbg !2531

_ZN3povL13savePhotonMapEv.exit:                   ; preds = %.lr.ph, %.loopexit5.i
  %259 = tail call i32 @fclose(%struct.__sFILE* %204) #8, !dbg !2532
  br label %265, !dbg !2533

; <label>:260                                     ; preds = %.lr.ph8.i._crit_edge, %.lr.ph.i13._crit_edge, %201
  %261 = tail call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([27 x i8]* @.str9, i64 0, i64 0)) #8, !dbg !2534
  br label %265, !dbg !2536

; <label>:262                                     ; preds = %192
  br i1 %or.cond8, label %265, label %263, !dbg !2537

; <label>:263                                     ; preds = %262
  %264 = tail call i32 (i32, i8*, ...)* @_ZN3pov7WarningEjPKcz(i32 0, i8* getelementptr inbounds ([40 x i8]* @.str10, i64 0, i64 0)) #8, !dbg !2540
  br label %265, !dbg !2542

; <label>:265                                     ; preds = %_ZN3povL13savePhotonMapEv.exit, %263, %262, %200, %260
  tail call void @_ZN3pov12Do_CooperateEi(i32 0) #8, !dbg !2543
  br label %266, !dbg !2544

; <label>:266                                     ; preds = %0, %55, %58, %265
  ret void, !dbg !2544
}
