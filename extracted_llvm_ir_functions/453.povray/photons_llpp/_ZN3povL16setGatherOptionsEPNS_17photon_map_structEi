define internal fastcc void @_ZN3povL16setGatherOptionsEPNS_17photon_map_structEi(%"struct.pov::photon_map_struct"* nocapture %map, i32 %mediaMap) #0 {
  %r = alloca double, align 8
  %Point = alloca [3 x double], align 16
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_map_struct"* %map, i64 0, metadata !1464, metadata !1948), !dbg !2545
  tail call void @llvm.dbg.value(metadata i32 %mediaMap, i64 0, metadata !1465, metadata !1948), !dbg !2546
  tail call void @llvm.dbg.declare(metadata [3 x double]* %Point, metadata !1468, metadata !1948), !dbg !2547
  %1 = getelementptr inbounds %"struct.pov::photon_map_struct"* %map, i64 0, i32 3, !dbg !2548
  %2 = load double* %1, align 8, !dbg !2548, !tbaa !2550
  %3 = fcmp ugt double %2, 0.000000e+00, !dbg !2551
  br i1 %3, label %123, label %4, !dbg !2552

; <label>:4                                       ; preds = %0
  tail call void @llvm.dbg.value(metadata double 1.000000e+07, i64 0, metadata !1473, metadata !1948), !dbg !2553
  tail call void @llvm.dbg.value(metadata double 0.000000e+00, i64 0, metadata !1477, metadata !1948), !dbg !2554
  tail call void @llvm.dbg.value(metadata double 0.000000e+00, i64 0, metadata !1476, metadata !1948), !dbg !2555
  tail call void @llvm.dbg.value(metadata double 0.000000e+00, i64 0, metadata !1475, metadata !1948), !dbg !2556
  tail call void @llvm.dbg.value(metadata double 0.000000e+00, i64 0, metadata !1474, metadata !1948), !dbg !2557
  %5 = getelementptr inbounds %"struct.pov::photon_map_struct"* %map, i64 0, i32 2, !dbg !2558
  %6 = load i32* %5, align 4, !dbg !2558, !tbaa !2441
  %7 = sdiv i32 %6, 20, !dbg !2560
  tail call void @llvm.dbg.value(metadata i32 %7, i64 0, metadata !1469, metadata !1948), !dbg !2561
  %8 = icmp sgt i32 %7, 1000, !dbg !2562
  %. = select i1 %8, i32 1000, i32 %7, !dbg !2564
  tail call void @llvm.dbg.value(metadata i32 %., i64 0, metadata !1469, metadata !1948), !dbg !2561
  %9 = icmp slt i32 %., 100, !dbg !2565
  %.. = select i1 %9, i32 100, i32 %., !dbg !2567
  tail call void @llvm.dbg.value(metadata i32 %.., i64 0, metadata !1469, metadata !1948), !dbg !2561
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1471, metadata !1948), !dbg !2568
  %10 = icmp sgt i32 %.., 0, !dbg !2569
  br i1 %10, label %.lr.ph10, label %._crit_edge11, !dbg !2572

.lr.ph10:                                         ; preds = %4
  %11 = getelementptr inbounds [3 x double]* %Point, i64 0, i64 0, !dbg !2573
  %12 = getelementptr inbounds %"struct.pov::photon_map_struct"* %map, i64 0, i32 0, !dbg !2575
  %13 = getelementptr inbounds [3 x double]* %Point, i64 0, i64 2, !dbg !2576
  %14 = icmp eq i32 %mediaMap, 0, !dbg !2578
  br label %15, !dbg !2572

; <label>:15                                      ; preds = %.lr.ph10, %50
  %sum.08 = phi double [ 0.000000e+00, %.lr.ph10 ], [ %51, %50 ]
  %i.05 = phi i32 [ 0, %.lr.ph10 ], [ %52, %50 ]
  %16 = call double @_ZN3pov9spec_randEv() #8, !dbg !2580
  %17 = fmul double %16, 0x41DFFFFFFFC00000, !dbg !2581
  %18 = fptosi double %17 to i32, !dbg !2582
  %19 = load i32* %5, align 4, !dbg !2583, !tbaa !2441
  %20 = srem i32 %18, %19, !dbg !2584
  call void @llvm.dbg.value(metadata i32 %20, i64 0, metadata !1472, metadata !1948), !dbg !2585
  %21 = and i32 %20, 16383, !dbg !2575
  %22 = zext i32 %21 to i64, !dbg !2575
  %23 = ashr i32 %20, 14, !dbg !2575
  %24 = sext i32 %23 to i64, !dbg !2575
  %25 = load %"struct.pov::photon_struct"*** %12, align 8, !dbg !2575, !tbaa !2438
  %26 = getelementptr inbounds %"struct.pov::photon_struct"** %25, i64 %24, !dbg !2575
  %27 = load %"struct.pov::photon_struct"** %26, align 8, !dbg !2575, !tbaa !2027
  %28 = getelementptr inbounds %"struct.pov::photon_struct"* %27, i64 %22, i32 0, i64 0, !dbg !2586
  tail call void @llvm.dbg.value(metadata double* %11, i64 0, metadata !1484, metadata !1948), !dbg !2587
  tail call void @llvm.dbg.value(metadata float* %28, i64 0, metadata !1485, metadata !1948), !dbg !2588
  %29 = bitcast float* %28 to <2 x float>*, !dbg !2589
  %30 = load <2 x float>* %29, align 4, !dbg !2589, !tbaa !2590
  %31 = fpext <2 x float> %30 to <2 x double>, !dbg !2589
  %32 = bitcast [3 x double]* %Point to <2 x double>*, !dbg !2591
  store <2 x double> %31, <2 x double>* %32, align 16, !dbg !2591, !tbaa !2066
  %33 = getelementptr inbounds %"struct.pov::photon_struct"* %27, i64 %22, i32 0, i64 2, !dbg !2592
  %34 = load float* %33, align 4, !dbg !2592, !tbaa !2590
  %35 = fpext float %34 to double, !dbg !2592
  store double %35, double* %13, align 16, !dbg !2593, !tbaa !2066
  call void @llvm.dbg.value(metadata double* %r, i64 0, metadata !1466, metadata !1948), !dbg !2594
  %36 = call i32 @_ZN3pov13gatherPhotonsEPddS0_S0_iPNS_17photon_map_structE(double* %11, double 1.000000e+07, double* %r, double* null, i32 0, %"struct.pov::photon_map_struct"* %map) #8, !dbg !2595
  call void @llvm.dbg.value(metadata i32 %36, i64 0, metadata !1470, metadata !1948), !dbg !2596
  %37 = sitofp i32 %36 to double, !dbg !2597
  br i1 %14, label %45, label %38, !dbg !2598

; <label>:38                                      ; preds = %15
  %39 = fmul double %37, 3.000000e+00, !dbg !2599
  call void @llvm.dbg.value(metadata double* %r, i64 0, metadata !1466, metadata !1948), !dbg !2594
  %40 = load double* %r, align 8, !dbg !2600, !tbaa !2066
  %41 = fmul double %40, 0x402921FB54442D18, !dbg !2601
  %42 = fmul double %40, %41, !dbg !2602
  %43 = fmul double %40, %42, !dbg !2603
  %44 = fdiv double %39, %43, !dbg !2604
  call void @llvm.dbg.value(metadata double %44, i64 0, metadata !1467, metadata !1948), !dbg !2605
  br label %50, !dbg !2606

; <label>:45                                      ; preds = %15
  call void @llvm.dbg.value(metadata double* %r, i64 0, metadata !1466, metadata !1948), !dbg !2594
  %46 = load double* %r, align 8, !dbg !2607, !tbaa !2066
  %47 = fmul double %46, 0x400921FB54442D18, !dbg !2608
  %48 = fmul double %46, %47, !dbg !2609
  %49 = fdiv double %37, %48, !dbg !2610
  call void @llvm.dbg.value(metadata double %49, i64 0, metadata !1467, metadata !1948), !dbg !2605
  br label %50

; <label>:50                                      ; preds = %45, %38
  %density.0 = phi double [ %44, %38 ], [ %49, %45 ]
  call void @llvm.dbg.value(metadata double %density.0, i64 0, metadata !1474, metadata !1948), !dbg !2557
  call void @llvm.dbg.value(metadata double %density.0, i64 0, metadata !1473, metadata !1948), !dbg !2553
  %51 = fadd double %sum.08, %density.0, !dbg !2611
  call void @llvm.dbg.value(metadata double %51, i64 0, metadata !1476, metadata !1948), !dbg !2555
  %52 = add nuw nsw i32 %i.05, 1, !dbg !2612
  call void @llvm.dbg.value(metadata i32 %52, i64 0, metadata !1471, metadata !1948), !dbg !2568
  %53 = icmp slt i32 %52, %.., !dbg !2569
  br i1 %53, label %15, label %._crit_edge11, !dbg !2572

._crit_edge11:                                    ; preds = %50, %4
  %sum.0.lcssa = phi double [ 0.000000e+00, %4 ], [ %51, %50 ]
  %54 = sitofp i32 %.. to double, !dbg !2613
  %55 = fdiv double %sum.0.lcssa, %54, !dbg !2614
  call void @llvm.dbg.value(metadata double %55, i64 0, metadata !1475, metadata !1948), !dbg !2556
  call void @llvm.dbg.value(metadata double %55, i64 0, metadata !1478, metadata !1948), !dbg !2615
  call void @llvm.dbg.value(metadata double %55, i64 0, metadata !1467, metadata !1948), !dbg !2605
  %56 = icmp ne i32 %mediaMap, 0, !dbg !2616
  %57 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 10), align 4, !dbg !2618, !tbaa !2005
  %58 = sitofp i32 %57 to double, !dbg !2620
  br i1 %56, label %59, label %65, !dbg !2621

; <label>:59                                      ; preds = %._crit_edge11
  %60 = fmul double %58, 3.000000e+00, !dbg !2622
  %61 = fmul double %55, 0x400921FB54442D18, !dbg !2623
  %62 = fmul double %61, 4.000000e+00, !dbg !2624
  %63 = fdiv double %60, %62, !dbg !2625
  %64 = call double @llvm.pow.f64(double %63, double 3.333000e-01), !dbg !2626
  br label %69, !dbg !2627

; <label>:65                                      ; preds = %._crit_edge11
  %66 = fmul double %55, 0x400921FB54442D18, !dbg !2628
  %67 = fdiv double %58, %66, !dbg !2629
  %68 = call double @sqrt(double %67) #9, !dbg !2630
  br label %69

; <label>:69                                      ; preds = %65, %59
  %storemerge1 = phi double [ %68, %65 ], [ %64, %59 ]
  store double %storemerge1, double* %1, align 8, !dbg !2631, !tbaa !2550
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1479, metadata !1948), !dbg !2632
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1471, metadata !1948), !dbg !2568
  br i1 %10, label %.lr.ph, label %117, !dbg !2633

.lr.ph:                                           ; preds = %69
  %70 = getelementptr inbounds [3 x double]* %Point, i64 0, i64 0, !dbg !2635
  %71 = getelementptr inbounds %"struct.pov::photon_map_struct"* %map, i64 0, i32 0, !dbg !2638
  %72 = getelementptr inbounds [3 x double]* %Point, i64 0, i64 2, !dbg !2639
  %73 = fmul double %55, 7.000000e-01, !dbg !2641
  %74 = fmul double %55, 5.000000e-02
  br label %75, !dbg !2633

; <label>:75                                      ; preds = %.lr.ph, %111
  %lessThan.04 = phi i32 [ 0, %.lr.ph ], [ %lessThan.1, %111 ]
  %i.13 = phi i32 [ 0, %.lr.ph ], [ %115, %111 ]
  %76 = call double @_ZN3pov9spec_randEv() #8, !dbg !2643
  %77 = fmul double %76, 0x41DFFFFFFFC00000, !dbg !2644
  %78 = fptosi double %77 to i32, !dbg !2645
  %79 = load i32* %5, align 4, !dbg !2646, !tbaa !2441
  %80 = srem i32 %78, %79, !dbg !2647
  call void @llvm.dbg.value(metadata i32 %80, i64 0, metadata !1472, metadata !1948), !dbg !2585
  %81 = and i32 %80, 16383, !dbg !2638
  %82 = zext i32 %81 to i64, !dbg !2638
  %83 = ashr i32 %80, 14, !dbg !2638
  %84 = sext i32 %83 to i64, !dbg !2638
  %85 = load %"struct.pov::photon_struct"*** %71, align 8, !dbg !2638, !tbaa !2438
  %86 = getelementptr inbounds %"struct.pov::photon_struct"** %85, i64 %84, !dbg !2638
  %87 = load %"struct.pov::photon_struct"** %86, align 8, !dbg !2638, !tbaa !2027
  %88 = getelementptr inbounds %"struct.pov::photon_struct"* %87, i64 %82, i32 0, i64 0, !dbg !2648
  tail call void @llvm.dbg.value(metadata double* %70, i64 0, metadata !1484, metadata !1948), !dbg !2649
  tail call void @llvm.dbg.value(metadata float* %88, i64 0, metadata !1485, metadata !1948), !dbg !2650
  %89 = bitcast float* %88 to <2 x float>*, !dbg !2651
  %90 = load <2 x float>* %89, align 4, !dbg !2651, !tbaa !2590
  %91 = fpext <2 x float> %90 to <2 x double>, !dbg !2651
  %92 = bitcast [3 x double]* %Point to <2 x double>*, !dbg !2652
  store <2 x double> %91, <2 x double>* %92, align 16, !dbg !2652, !tbaa !2066
  %93 = getelementptr inbounds %"struct.pov::photon_struct"* %87, i64 %82, i32 0, i64 2, !dbg !2653
  %94 = load float* %93, align 4, !dbg !2653, !tbaa !2590
  %95 = fpext float %94 to double, !dbg !2653
  store double %95, double* %72, align 16, !dbg !2654, !tbaa !2066
  %96 = load double* %1, align 8, !dbg !2655, !tbaa !2550
  call void @llvm.dbg.value(metadata double* %r, i64 0, metadata !1466, metadata !1948), !dbg !2594
  %97 = call i32 @_ZN3pov13gatherPhotonsEPddS0_S0_iPNS_17photon_map_structE(double* %70, double %96, double* %r, double* null, i32 0, %"struct.pov::photon_map_struct"* %map) #8, !dbg !2656
  call void @llvm.dbg.value(metadata i32 %97, i64 0, metadata !1470, metadata !1948), !dbg !2596
  %98 = sitofp i32 %97 to double, !dbg !2657
  br i1 %56, label %99, label %106, !dbg !2659

; <label>:99                                      ; preds = %75
  %100 = fmul double %98, 3.000000e+00, !dbg !2660
  call void @llvm.dbg.value(metadata double* %r, i64 0, metadata !1466, metadata !1948), !dbg !2594
  %101 = load double* %r, align 8, !dbg !2661, !tbaa !2066
  %102 = fmul double %101, 0x402921FB54442D18, !dbg !2662
  %103 = fmul double %101, %102, !dbg !2663
  %104 = fmul double %101, %103, !dbg !2664
  %105 = fdiv double %100, %104, !dbg !2665
  call void @llvm.dbg.value(metadata double %105, i64 0, metadata !1467, metadata !1948), !dbg !2605
  br label %111, !dbg !2666

; <label>:106                                     ; preds = %75
  call void @llvm.dbg.value(metadata double* %r, i64 0, metadata !1466, metadata !1948), !dbg !2594
  %107 = load double* %r, align 8, !dbg !2667, !tbaa !2066
  %108 = fmul double %107, 0x400921FB54442D18, !dbg !2668
  %109 = fmul double %107, %108, !dbg !2669
  %110 = fdiv double %98, %109, !dbg !2670
  call void @llvm.dbg.value(metadata double %110, i64 0, metadata !1467, metadata !1948), !dbg !2605
  br label %111

; <label>:111                                     ; preds = %106, %99
  %density.1 = phi double [ %105, %99 ], [ %110, %106 ]
  %112 = fcmp olt double %density.1, %73, !dbg !2671
  %113 = fcmp ogt double %density.1, %74, !dbg !2672
  %or.cond = and i1 %112, %113, !dbg !2673
  %114 = zext i1 %or.cond to i32, !dbg !2673
  %lessThan.1 = add nsw i32 %114, %lessThan.04, !dbg !2673
  %115 = add nuw nsw i32 %i.13, 1, !dbg !2674
  call void @llvm.dbg.value(metadata i32 %115, i64 0, metadata !1471, metadata !1948), !dbg !2568
  %116 = icmp slt i32 %115, %.., !dbg !2675
  br i1 %116, label %75, label %._crit_edge, !dbg !2633

._crit_edge:                                      ; preds = %111
  %phitmp = sitofp i32 %lessThan.1 to double, !dbg !2633
  %.pre = load double* %1, align 8, !dbg !2676, !tbaa !2550
  br label %117, !dbg !2633

; <label>:117                                     ; preds = %._crit_edge, %69
  %118 = phi double [ %.pre, %._crit_edge ], [ %storemerge1, %69 ]
  %lessThan.0.lcssa = phi double [ %phitmp, %._crit_edge ], [ 0.000000e+00, %69 ]
  %119 = fdiv double %lessThan.0.lcssa, %54, !dbg !2677
  %120 = fmul double %119, 2.000000e+01, !dbg !2678
  %121 = fadd double %120, 1.000000e+00, !dbg !2679
  %122 = fmul double %118, %121, !dbg !2676
  store double %122, double* %1, align 8, !dbg !2676, !tbaa !2550
  br label %123, !dbg !2680

; <label>:123                                     ; preds = %0, %117
  %124 = phi double [ %2, %0 ], [ %122, %117 ]
  %125 = getelementptr inbounds %"struct.pov::photon_map_struct"* %map, i64 0, i32 4, !dbg !2681
  %126 = load double* %125, align 8, !dbg !2681, !tbaa !2682
  %127 = fmul double %126, %124, !dbg !2683
  %128 = icmp eq i32 %mediaMap, 0, !dbg !2684
  br i1 %128, label %131, label %129, !dbg !2686

; <label>:129                                     ; preds = %123
  %130 = fmul double %127, 2.000000e+00, !dbg !2687
  br label %131, !dbg !2689

; <label>:131                                     ; preds = %123, %129
  %storemerge = phi double [ %130, %129 ], [ %127, %123 ]
  store double %storemerge, double* %1, align 8, !dbg !2683, !tbaa !2550
  %132 = fmul double %storemerge, 2.000000e+00, !dbg !2690
  %133 = getelementptr inbounds %"struct.pov::photon_map_struct"* %map, i64 0, i32 5, !dbg !2691
  store double %132, double* %133, align 8, !dbg !2692, !tbaa !2693
  ret void, !dbg !2694
}
