define void @_ZN3pov16addSurfacePhotonEPdS0_PfS0_(double* nocapture %Point, double* nocapture %Origin, float* nocapture %LightCol, double* nocapture) #0 {
entry:
  %LightCol2 = alloca [5 x float], align 16
  call void @llvm.dbg.value(metadata !{double* %Point}, i64 0, metadata !982), !dbg !2640
  call void @llvm.dbg.value(metadata !{double* %Origin}, i64 0, metadata !983), !dbg !2640
  call void @llvm.dbg.value(metadata !{float* %LightCol}, i64 0, metadata !984), !dbg !2640
  call void @llvm.dbg.value(metadata !{double* %0}, i64 0, metadata !985), !dbg !2640
  call void @llvm.dbg.declare(metadata !{[5 x float]* %LightCol2}, metadata !1016), !dbg !2641
  call void @llvm.dbg.declare(metadata !2083, metadata !1018), !dbg !2642
  %1 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 27), align 8, !dbg !2643, !tbaa !1709
  %Fade_Power = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %1, i64 0, i32 25, !dbg !2643
  %2 = load double* %Fade_Power, align 8, !dbg !2643, !tbaa !1732
  %cmp = fcmp ogt double %2, 0.000000e+00, !dbg !2643
  br i1 %cmp, label %land.lhs.true, label %if.end, !dbg !2643

land.lhs.true:                                    ; preds = %entry
  %Fade_Distance = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %1, i64 0, i32 24, !dbg !2643
  %3 = load double* %Fade_Distance, align 8, !dbg !2643, !tbaa !1732
  %call = call double @fabs(double %3) #10, !dbg !2643
  %cmp1 = fcmp ogt double %call, 1.000000e-07, !dbg !2643
  br i1 %cmp1, label %if.then, label %if.end, !dbg !2643

if.then:                                          ; preds = %land.lhs.true
  %4 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !2644, !tbaa !1732
  %div = fdiv double %4, %3, !dbg !2644
  %call4 = call double @pow(double %div, double %2) #9, !dbg !2644
  %add = fadd double %call4, 1.000000e+00, !dbg !2644
  %div5 = fdiv double 2.000000e+00, %add, !dbg !2644
  call void @llvm.dbg.value(metadata !{double %div5}, i64 0, metadata !1017), !dbg !2644
  %phitmp = fptrunc double %div5 to float, !dbg !2646
  %.pre = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 27), align 8, !dbg !2647, !tbaa !1709
  br label %if.end, !dbg !2646

if.end:                                           ; preds = %entry, %land.lhs.true, %if.then
  %5 = phi %"struct.pov::Light_Source_Struct"* [ %.pre, %if.then ], [ %1, %land.lhs.true ], [ %1, %entry ]
  %Attenuation.0 = phi float [ %phitmp, %if.then ], [ 1.000000e+00, %land.lhs.true ], [ 1.000000e+00, %entry ]
  %arraydecay = getelementptr inbounds [5 x float]* %LightCol2, i64 0, i64 0, !dbg !2648
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay}, i64 0, metadata !2649), !dbg !2650
  tail call void @llvm.dbg.value(metadata !{float* %LightCol}, i64 0, metadata !2651), !dbg !2650
  tail call void @llvm.dbg.value(metadata !{float %Attenuation.0}, i64 0, metadata !2652), !dbg !2650
  %6 = load float* %LightCol, align 4, !dbg !2653, !tbaa !2022
  %mul.i = fmul float %Attenuation.0, %6, !dbg !2653
  store float %mul.i, float* %arraydecay, align 16, !dbg !2653, !tbaa !2022
  %arrayidx2.i = getelementptr inbounds float* %LightCol, i64 1, !dbg !2654
  %7 = load float* %arrayidx2.i, align 4, !dbg !2654, !tbaa !2022
  %mul3.i = fmul float %Attenuation.0, %7, !dbg !2654
  %arrayidx4.i = getelementptr inbounds [5 x float]* %LightCol2, i64 0, i64 1, !dbg !2654
  store float %mul3.i, float* %arrayidx4.i, align 4, !dbg !2654, !tbaa !2022
  %arrayidx5.i = getelementptr inbounds float* %LightCol, i64 2, !dbg !2655
  %8 = load float* %arrayidx5.i, align 4, !dbg !2655, !tbaa !2022
  %mul6.i = fmul float %Attenuation.0, %8, !dbg !2655
  %arrayidx7.i = getelementptr inbounds [5 x float]* %LightCol2, i64 0, i64 2, !dbg !2655
  store float %mul6.i, float* %arrayidx7.i, align 8, !dbg !2655, !tbaa !2022
  %Parallel = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %5, i64 0, i32 33, !dbg !2647
  %9 = load i8* %Parallel, align 1, !dbg !2647, !tbaa !1675
  %tobool = icmp eq i8 %9, 0, !dbg !2647
  br i1 %tobool, label %if.then6, label %if.end9, !dbg !2647

if.then6:                                         ; preds = %if.end
  %10 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !2656, !tbaa !1732
  %mul = fmul double %10, %10, !dbg !2656
  %conv8 = fptrunc double %mul to float, !dbg !2656
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay}, i64 0, metadata !2658), !dbg !2659
  tail call void @llvm.dbg.value(metadata !{float %conv8}, i64 0, metadata !2660), !dbg !2659
  %mul.i54 = fmul float %mul.i, %conv8, !dbg !2661
  store float %mul.i54, float* %arraydecay, align 16, !dbg !2661, !tbaa !2022
  %mul2.i = fmul float %mul3.i, %conv8, !dbg !2663
  store float %mul2.i, float* %arrayidx4.i, align 4, !dbg !2663, !tbaa !2022
  %mul4.i = fmul float %conv8, %mul6.i, !dbg !2664
  store float %mul4.i, float* %arrayidx7.i, align 8, !dbg !2664, !tbaa !2022
  br label %if.end9, !dbg !2665

if.end9:                                          ; preds = %if.end, %if.then6
  %11 = phi float [ %mul6.i, %if.end ], [ %mul4.i, %if.then6 ]
  %12 = phi float [ %mul3.i, %if.end ], [ %mul2.i, %if.then6 ]
  %13 = phi float [ %mul.i, %if.end ], [ %mul.i54, %if.then6 ]
  %14 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 16), align 8, !dbg !2666, !tbaa !1732
  %mul11 = fmul double %14, %14, !dbg !2666
  %conv12 = fptrunc double %mul11 to float, !dbg !2666
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay}, i64 0, metadata !2667), !dbg !2668
  tail call void @llvm.dbg.value(metadata !{float %conv12}, i64 0, metadata !2669), !dbg !2668
  %mul.i62 = fmul float %13, %conv12, !dbg !2670
  store float %mul.i62, float* %arraydecay, align 16, !dbg !2670, !tbaa !2022
  %mul2.i64 = fmul float %12, %conv12, !dbg !2671
  store float %mul2.i64, float* %arrayidx4.i, align 4, !dbg !2671, !tbaa !2022
  %mul4.i66 = fmul float %conv12, %11, !dbg !2672
  store float %mul4.i66, float* %arrayidx7.i, align 8, !dbg !2672, !tbaa !2022
  call void @llvm.dbg.value(metadata !2673, i64 0, metadata !1022), !dbg !2674
  tail call void @llvm.dbg.value(metadata !2676, i64 0, metadata !2677), !dbg !2679
  %15 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 119), align 8, !dbg !2680, !tbaa !2599
  %inc.i = add nsw i64 %15, 1, !dbg !2680
  store i64 %inc.i, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 119), align 8, !dbg !2680, !tbaa !2599
  %call13 = call fastcc %"struct.pov::photon_struct"* @_ZN3povL14AllocatePhotonEPNS_17photon_map_structE(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14)) #8, !dbg !2681
  call void @llvm.dbg.value(metadata !{%"struct.pov::photon_struct"* %call13}, i64 0, metadata !986), !dbg !2681
  %arraydecay14 = getelementptr inbounds %"struct.pov::photon_struct"* %call13, i64 0, i32 1, i64 0, !dbg !2682
  call void @_ZN3pov17colour2photonRgbeEPhPf(i8* %arraydecay14, float* %arraydecay) #8, !dbg !2682
  %arraydecay16 = getelementptr inbounds %"struct.pov::photon_struct"* %call13, i64 0, i32 0, i64 0, !dbg !2683
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay16}, i64 0, metadata !2684), !dbg !2685
  tail call void @llvm.dbg.value(metadata !{double* %Point}, i64 0, metadata !2686), !dbg !2685
  %16 = load double* %Point, align 8, !dbg !2687, !tbaa !1732
  %conv.i = fptrunc double %16 to float, !dbg !2687
  store float %conv.i, float* %arraydecay16, align 4, !dbg !2687, !tbaa !2022
  %arrayidx2.i58 = getelementptr inbounds double* %Point, i64 1, !dbg !2689
  %17 = load double* %arrayidx2.i58, align 8, !dbg !2689, !tbaa !1732
  %conv3.i = fptrunc double %17 to float, !dbg !2689
  %arrayidx4.i59 = getelementptr inbounds %"struct.pov::photon_struct"* %call13, i64 0, i32 0, i64 1, !dbg !2689
  store float %conv3.i, float* %arrayidx4.i59, align 4, !dbg !2689, !tbaa !2022
  %arrayidx5.i60 = getelementptr inbounds double* %Point, i64 2, !dbg !2690
  %18 = load double* %arrayidx5.i60, align 8, !dbg !2690, !tbaa !1732
  %conv6.i = fptrunc double %18 to float, !dbg !2690
  %arrayidx7.i61 = getelementptr inbounds %"struct.pov::photon_struct"* %call13, i64 0, i32 0, i64 2, !dbg !2690
  store float %conv6.i, float* %arrayidx7.i61, align 4, !dbg !2690, !tbaa !2022
  tail call void @llvm.dbg.value(metadata !2116, i64 0, metadata !2691), !dbg !2693
  tail call void @llvm.dbg.value(metadata !{double* %Origin}, i64 0, metadata !2694), !dbg !2693
  tail call void @llvm.dbg.value(metadata !{double* %Point}, i64 0, metadata !2695), !dbg !2693
  %19 = load double* %Origin, align 8, !dbg !2696, !tbaa !1732
  %sub.i = fsub double %19, %16, !dbg !2696
  %arrayidx3.i55 = getelementptr inbounds double* %Origin, i64 1, !dbg !2697
  %20 = load double* %arrayidx3.i55, align 8, !dbg !2697, !tbaa !1732
  %sub5.i = fsub double %20, %17, !dbg !2697
  %arrayidx7.i57 = getelementptr inbounds double* %Origin, i64 2, !dbg !2698
  %21 = load double* %arrayidx7.i57, align 8, !dbg !2698, !tbaa !1732
  %sub9.i = fsub double %21, %18, !dbg !2698
  call void @llvm.dbg.value(metadata !2116, i64 0, metadata !2699) #7, !dbg !2701
  call void @llvm.dbg.value(metadata !2116, i64 0, metadata !2702) #7, !dbg !2704
  %mul.i.i = fmul double %sub.i, %sub.i, !dbg !2705
  %mul4.i.i = fmul double %sub5.i, %sub5.i, !dbg !2705
  %add.i.i = fadd double %mul.i.i, %mul4.i.i, !dbg !2705
  %mul7.i.i = fmul double %sub9.i, %sub9.i, !dbg !2705
  %add8.i.i = fadd double %add.i.i, %mul7.i.i, !dbg !2705
  %call.i.i = call double @sqrt(double %add8.i.i) #9, !dbg !2705
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2706) #7, !dbg !2705
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2707) #7, !dbg !2704
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2708) #7, !dbg !2709
  call void @llvm.dbg.value(metadata !2116, i64 0, metadata !2710) #7, !dbg !2711
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2712) #7, !dbg !2711
  %div.i.i = fdiv double 1.000000e+00, %call.i.i, !dbg !2713
  call void @llvm.dbg.value(metadata !{double %div.i.i}, i64 0, metadata !2714) #7, !dbg !2713
  %mul.i2.i = fmul double %sub.i, %div.i.i, !dbg !2715
  %mul2.i.i = fmul double %sub5.i, %div.i.i, !dbg !2716
  %mul4.i3.i = fmul double %sub9.i, %div.i.i, !dbg !2717
  %mul20 = fmul double %mul.i2.i, %mul.i2.i, !dbg !2718
  %mul23 = fmul double %mul4.i3.i, %mul4.i3.i, !dbg !2718
  %add24 = fadd double %mul20, %mul23, !dbg !2718
  %call25 = call double @sqrt(double %add24) #9, !dbg !2718
  call void @llvm.dbg.value(metadata !{double %call25}, i64 0, metadata !1019), !dbg !2718
  %div27 = fdiv double %mul.i2.i, %call25, !dbg !2719
  %call28 = call double @acos(double %div27) #9, !dbg !2719
  call void @llvm.dbg.value(metadata !{double %call28}, i64 0, metadata !1020), !dbg !2719
  %cmp30 = fcmp olt double %mul4.i3.i, 0.000000e+00, !dbg !2720
  br i1 %cmp30, label %if.then31, label %if.end32, !dbg !2720

if.then31:                                        ; preds = %if.end9
  %sub = fsub double -0.000000e+00, %call28, !dbg !2720
  call void @llvm.dbg.value(metadata !{double %sub}, i64 0, metadata !1020), !dbg !2720
  br label %if.end32, !dbg !2720

if.end32:                                         ; preds = %if.then31, %if.end9
  %phi.0 = phi double [ %sub, %if.then31 ], [ %call28, %if.end9 ]
  %call33 = call double @acos(double %call25) #9, !dbg !2721
  call void @llvm.dbg.value(metadata !{double %call33}, i64 0, metadata !1021), !dbg !2721
  %cmp35 = fcmp olt double %mul2.i.i, 0.000000e+00, !dbg !2722
  br i1 %cmp35, label %if.then36, label %if.end38, !dbg !2722

if.then36:                                        ; preds = %if.end32
  %sub37 = fsub double -0.000000e+00, %call33, !dbg !2722
  call void @llvm.dbg.value(metadata !{double %sub37}, i64 0, metadata !1021), !dbg !2722
  br label %if.end38, !dbg !2722

if.end38:                                         ; preds = %if.then36, %if.end32
  %theta.0 = phi double [ %sub37, %if.then36 ], [ %call33, %if.end32 ]
  %mul39 = fmul double %theta.0, 1.270000e+02, !dbg !2723
  %div40 = fdiv double %mul39, 0x400921FB54442D18, !dbg !2723
  %conv41 = fptosi double %div40 to i8, !dbg !2723
  %theta42 = getelementptr inbounds %"struct.pov::photon_struct"* %call13, i64 0, i32 3, !dbg !2723
  store i8 %conv41, i8* %theta42, align 1, !dbg !2723, !tbaa !1675
  %mul43 = fmul double %phi.0, 1.270000e+02, !dbg !2724
  %div44 = fdiv double %mul43, 0x400921FB54442D18, !dbg !2724
  %conv45 = fptosi double %div44 to i8, !dbg !2724
  %phi46 = getelementptr inbounds %"struct.pov::photon_struct"* %call13, i64 0, i32 4, !dbg !2724
  store i8 %conv45, i8* %phi46, align 1, !dbg !2724, !tbaa !1675
  ret void, !dbg !2725
}
