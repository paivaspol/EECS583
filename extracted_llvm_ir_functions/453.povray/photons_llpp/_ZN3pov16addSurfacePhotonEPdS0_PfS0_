define void @_ZN3pov16addSurfacePhotonEPdS0_PfS0_(double* nocapture readonly %Point, double* nocapture readonly %Origin, float* nocapture readonly %LightCol, double* nocapture readnone) #0 {
  %LightCol2 = alloca [5 x float], align 16
  tail call void @llvm.dbg.value(metadata double* %Point, i64 0, metadata !1114, metadata !1948), !dbg !3596
  tail call void @llvm.dbg.value(metadata double* %Origin, i64 0, metadata !1115, metadata !1948), !dbg !3597
  tail call void @llvm.dbg.value(metadata float* %LightCol, i64 0, metadata !1116, metadata !1948), !dbg !3598
  tail call void @llvm.dbg.value(metadata double* %0, i64 0, metadata !1117, metadata !1948), !dbg !3599
  tail call void @llvm.dbg.declare(metadata [5 x float]* %LightCol2, metadata !1119, metadata !1948), !dbg !3600
  tail call void @llvm.dbg.declare(metadata [3 x double]* undef, metadata !1121, metadata !1948), !dbg !3601
  %2 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 27), align 8, !dbg !3602, !tbaa !2755
  %3 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %2, i64 0, i32 25, !dbg !3604
  %4 = load double* %3, align 8, !dbg !3604, !tbaa !3605
  %5 = fcmp ogt double %4, 0.000000e+00, !dbg !3606
  br i1 %5, label %6, label %17, !dbg !3607

; <label>:6                                       ; preds = %1
  %7 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %2, i64 0, i32 24, !dbg !3608
  %8 = load double* %7, align 8, !dbg !3608, !tbaa !3609
  %9 = tail call double @fabs(double %8) #9, !dbg !3610
  %10 = fcmp ogt double %9, 1.000000e-07, !dbg !3611
  br i1 %10, label %11, label %17, !dbg !3612

; <label>:11                                      ; preds = %6
  %12 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !3613, !tbaa !3501
  %13 = fdiv double %12, %8, !dbg !3615
  %14 = tail call double @llvm.pow.f64(double %13, double %4), !dbg !3616
  %15 = fadd double %14, 1.000000e+00, !dbg !3617
  %16 = fdiv double 2.000000e+00, %15, !dbg !3618
  tail call void @llvm.dbg.value(metadata double %16, i64 0, metadata !1120, metadata !1948), !dbg !3619
  %phitmp = fptrunc double %16 to float, !dbg !3620
  br label %17, !dbg !3620

; <label>:17                                      ; preds = %1, %6, %11
  %Attenuation.0 = phi float [ %phitmp, %11 ], [ 1.000000e+00, %6 ], [ 1.000000e+00, %1 ]
  %18 = getelementptr inbounds [5 x float]* %LightCol2, i64 0, i64 0, !dbg !3621
  tail call void @llvm.dbg.value(metadata float* %18, i64 0, metadata !1354, metadata !1948), !dbg !3622
  tail call void @llvm.dbg.value(metadata float* %LightCol, i64 0, metadata !1355, metadata !1948), !dbg !3624
  tail call void @llvm.dbg.value(metadata float %Attenuation.0, i64 0, metadata !1356, metadata !1948), !dbg !3625
  %19 = load float* %LightCol, align 4, !dbg !3626, !tbaa !2590
  %20 = fmul float %Attenuation.0, %19, !dbg !3627
  store float %20, float* %18, align 16, !dbg !3628, !tbaa !2590
  %21 = getelementptr inbounds float* %LightCol, i64 1, !dbg !3629
  %22 = load float* %21, align 4, !dbg !3629, !tbaa !2590
  %23 = fmul float %Attenuation.0, %22, !dbg !3630
  %24 = getelementptr inbounds [5 x float]* %LightCol2, i64 0, i64 1, !dbg !3631
  store float %23, float* %24, align 4, !dbg !3632, !tbaa !2590
  %25 = getelementptr inbounds float* %LightCol, i64 2, !dbg !3633
  %26 = load float* %25, align 4, !dbg !3633, !tbaa !2590
  %27 = fmul float %Attenuation.0, %26, !dbg !3634
  %28 = getelementptr inbounds [5 x float]* %LightCol2, i64 0, i64 2, !dbg !3635
  store float %27, float* %28, align 8, !dbg !3636, !tbaa !2590
  %29 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %2, i64 0, i32 33, !dbg !3637
  %30 = load i8* %29, align 1, !dbg !3637, !tbaa !2384
  %31 = icmp eq i8 %30, 0, !dbg !3639
  br i1 %31, label %32, label %39, !dbg !3640

; <label>:32                                      ; preds = %17
  %33 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !3641, !tbaa !3501
  %34 = fmul double %33, %33, !dbg !3643
  %35 = fptrunc double %34 to float, !dbg !3644
  tail call void @llvm.dbg.value(metadata float* %18, i64 0, metadata !1361, metadata !1948), !dbg !3645
  tail call void @llvm.dbg.value(metadata float %35, i64 0, metadata !1362, metadata !1948), !dbg !3647
  %36 = fmul float %20, %35, !dbg !3648
  store float %36, float* %18, align 16, !dbg !3648, !tbaa !2590
  %37 = fmul float %23, %35, !dbg !3649
  store float %37, float* %24, align 4, !dbg !3649, !tbaa !2590
  %38 = fmul float %35, %27, !dbg !3650
  store float %38, float* %28, align 8, !dbg !3650, !tbaa !2590
  br label %39, !dbg !3651

; <label>:39                                      ; preds = %17, %32
  %40 = phi float [ %27, %17 ], [ %38, %32 ]
  %41 = phi float [ %23, %17 ], [ %37, %32 ]
  %42 = phi float [ %20, %17 ], [ %36, %32 ]
  %43 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 16), align 8, !dbg !3652, !tbaa !2925
  %44 = fmul double %43, %43, !dbg !3653
  %45 = fptrunc double %44 to float, !dbg !3654
  tail call void @llvm.dbg.value(metadata float* %18, i64 0, metadata !1361, metadata !1948), !dbg !3655
  tail call void @llvm.dbg.value(metadata float %45, i64 0, metadata !1362, metadata !1948), !dbg !3657
  %46 = fmul float %42, %45, !dbg !3658
  store float %46, float* %18, align 16, !dbg !3658, !tbaa !2590
  %47 = fmul float %41, %45, !dbg !3659
  store float %47, float* %24, align 4, !dbg !3659, !tbaa !2590
  %48 = fmul float %45, %40, !dbg !3660
  store float %48, float* %28, align 8, !dbg !3660, !tbaa !2590
  tail call void @llvm.dbg.value(metadata !1096, i64 0, metadata !1125, metadata !1948), !dbg !3661
  tail call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 119), i64 0, metadata !1369, metadata !1948), !dbg !3662
  %49 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 119), align 8, !dbg !3665, !tbaa !3507
  %50 = add nsw i64 %49, 1, !dbg !3665
  store i64 %50, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 119), align 8, !dbg !3665, !tbaa !3507
  %51 = tail call fastcc %"struct.pov::photon_struct"* @_ZN3povL14AllocatePhotonEPNS_17photon_map_structE(%"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14)) #8, !dbg !3666
  tail call void @llvm.dbg.value(metadata %"struct.pov::photon_struct"* %51, i64 0, metadata !1118, metadata !1948), !dbg !3667
  %52 = getelementptr inbounds %"struct.pov::photon_struct"* %51, i64 0, i32 1, i64 0, !dbg !3668
  call void @_ZN3pov17colour2photonRgbeEPhPf(i8* %52, float* %18) #8, !dbg !3669
  %53 = getelementptr inbounds %"struct.pov::photon_struct"* %51, i64 0, i32 0, i64 0, !dbg !3670
  tail call void @llvm.dbg.value(metadata float* %53, i64 0, metadata !1385, metadata !1948), !dbg !3671
  tail call void @llvm.dbg.value(metadata double* %Point, i64 0, metadata !1386, metadata !1948), !dbg !3673
  %54 = load double* %Point, align 8, !dbg !3674, !tbaa !2066
  %55 = fptrunc double %54 to float, !dbg !3674
  store float %55, float* %53, align 4, !dbg !3675, !tbaa !2590
  %56 = getelementptr inbounds double* %Point, i64 1, !dbg !3676
  %57 = load double* %56, align 8, !dbg !3676, !tbaa !2066
  %58 = fptrunc double %57 to float, !dbg !3676
  %59 = getelementptr inbounds %"struct.pov::photon_struct"* %51, i64 0, i32 0, i64 1, !dbg !3677
  store float %58, float* %59, align 4, !dbg !3678, !tbaa !2590
  %60 = getelementptr inbounds double* %Point, i64 2, !dbg !3679
  %61 = load double* %60, align 8, !dbg !3679, !tbaa !2066
  %62 = fptrunc double %61 to float, !dbg !3679
  %63 = getelementptr inbounds %"struct.pov::photon_struct"* %51, i64 0, i32 0, i64 2, !dbg !3680
  store float %62, float* %63, align 4, !dbg !3681, !tbaa !2590
  tail call void @llvm.dbg.value(metadata double* undef, i64 0, metadata !1389, metadata !1948), !dbg !3682
  tail call void @llvm.dbg.value(metadata double* %Origin, i64 0, metadata !1390, metadata !1948), !dbg !3684
  tail call void @llvm.dbg.value(metadata double* %Point, i64 0, metadata !1391, metadata !1948), !dbg !3685
  %64 = load double* %Origin, align 8, !dbg !3686, !tbaa !2066
  %65 = fsub double %64, %54, !dbg !3687
  call void @llvm.dbg.value(metadata double %65, i64 0, metadata !1121, metadata !2778), !dbg !3601
  %66 = getelementptr inbounds double* %Origin, i64 1, !dbg !3688
  %67 = load double* %66, align 8, !dbg !3688, !tbaa !2066
  %68 = fsub double %67, %57, !dbg !3689
  call void @llvm.dbg.value(metadata double %68, i64 0, metadata !1121, metadata !2781), !dbg !3601
  %69 = getelementptr inbounds double* %Origin, i64 2, !dbg !3690
  %70 = load double* %69, align 8, !dbg !3690, !tbaa !2066
  %71 = fsub double %70, %61, !dbg !3691
  call void @llvm.dbg.value(metadata double %71, i64 0, metadata !1121, metadata !2784), !dbg !3601
  call void @llvm.dbg.value(metadata double* undef, i64 0, metadata !1396, metadata !1948) #7, !dbg !3692
  call void @llvm.dbg.value(metadata double* undef, i64 0, metadata !1308, metadata !1948) #7, !dbg !3694
  %72 = fmul double %65, %65, !dbg !3696
  %73 = fmul double %68, %68, !dbg !3697
  %74 = fadd double %72, %73, !dbg !3698
  %75 = fmul double %71, %71, !dbg !3699
  %76 = fadd double %74, %75, !dbg !3700
  %77 = call double @sqrt(double %76) #9, !dbg !3701
  call void @llvm.dbg.value(metadata double %77, i64 0, metadata !1307, metadata !1948) #7, !dbg !3702
  call void @llvm.dbg.value(metadata double %77, i64 0, metadata !1397, metadata !1948) #7, !dbg !3703
  call void @llvm.dbg.value(metadata double %77, i64 0, metadata !1397, metadata !1948) #7, !dbg !3703
  call void @llvm.dbg.value(metadata double* undef, i64 0, metadata !1402, metadata !1948) #7, !dbg !3704
  call void @llvm.dbg.value(metadata double %77, i64 0, metadata !1403, metadata !1948) #7, !dbg !3706
  %78 = fdiv double 1.000000e+00, %77, !dbg !3707
  call void @llvm.dbg.value(metadata double %78, i64 0, metadata !1404, metadata !1948) #7, !dbg !3708
  %79 = fmul double %65, %78, !dbg !3709
  call void @llvm.dbg.value(metadata double %79, i64 0, metadata !1121, metadata !2778), !dbg !3601
  %80 = fmul double %68, %78, !dbg !3710
  call void @llvm.dbg.value(metadata double %80, i64 0, metadata !1121, metadata !2781), !dbg !3601
  %81 = fmul double %71, %78, !dbg !3711
  call void @llvm.dbg.value(metadata double %81, i64 0, metadata !1121, metadata !2784), !dbg !3601
  %82 = fmul double %79, %79, !dbg !3712
  %83 = fmul double %81, %81, !dbg !3713
  %84 = fadd double %82, %83, !dbg !3714
  %85 = call double @sqrt(double %84) #9, !dbg !3715
  call void @llvm.dbg.value(metadata double %85, i64 0, metadata !1122, metadata !1948), !dbg !3716
  %86 = fdiv double %79, %85, !dbg !3717
  %87 = call double @acos(double %86) #9, !dbg !3718
  call void @llvm.dbg.value(metadata double %87, i64 0, metadata !1123, metadata !1948), !dbg !3719
  %88 = fcmp olt double %81, 0.000000e+00, !dbg !3720
  br i1 %88, label %89, label %91, !dbg !3722

; <label>:89                                      ; preds = %39
  %90 = fsub double -0.000000e+00, %87, !dbg !3723
  call void @llvm.dbg.value(metadata double %90, i64 0, metadata !1123, metadata !1948), !dbg !3719
  br label %91, !dbg !3724

; <label>:91                                      ; preds = %89, %39
  %phi.0 = phi double [ %90, %89 ], [ %87, %39 ]
  %92 = call double @acos(double %85) #9, !dbg !3725
  call void @llvm.dbg.value(metadata double %92, i64 0, metadata !1124, metadata !1948), !dbg !3726
  %93 = fcmp olt double %80, 0.000000e+00, !dbg !3727
  br i1 %93, label %94, label %96, !dbg !3729

; <label>:94                                      ; preds = %91
  %95 = fsub double -0.000000e+00, %92, !dbg !3730
  call void @llvm.dbg.value(metadata double %95, i64 0, metadata !1124, metadata !1948), !dbg !3726
  br label %96, !dbg !3731

; <label>:96                                      ; preds = %94, %91
  %theta.0 = phi double [ %95, %94 ], [ %92, %91 ]
  %97 = fmul double %theta.0, 1.270000e+02, !dbg !3732
  %98 = fdiv double %97, 0x400921FB54442D18, !dbg !3733
  %99 = fptosi double %98 to i8, !dbg !3734
  %100 = getelementptr inbounds %"struct.pov::photon_struct"* %51, i64 0, i32 3, !dbg !3735
  store i8 %99, i8* %100, align 1, !dbg !3736, !tbaa !3737
  %101 = fmul double %phi.0, 1.270000e+02, !dbg !3739
  %102 = fdiv double %101, 0x400921FB54442D18, !dbg !3740
  %103 = fptosi double %102 to i8, !dbg !3741
  %104 = getelementptr inbounds %"struct.pov::photon_struct"* %51, i64 0, i32 4, !dbg !3742
  store i8 %103, i8* %104, align 1, !dbg !3743, !tbaa !3744
  ret void, !dbg !3745
}
