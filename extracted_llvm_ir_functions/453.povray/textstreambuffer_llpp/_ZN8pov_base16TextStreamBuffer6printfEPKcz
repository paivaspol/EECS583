define void @_ZN8pov_base16TextStreamBuffer6printfEPKcz(%"class.pov_base::TextStreamBuffer"* %this, i8* nocapture %format, ...) #0 align 2 {
entry:
  %marker = alloca [1 x %struct.__va_list_tag], align 16
  call void @llvm.dbg.value(metadata !{%"class.pov_base::TextStreamBuffer"* %this}, i64 0, metadata !167), !dbg !309
  call void @llvm.dbg.value(metadata !{i8* %format}, i64 0, metadata !168), !dbg !309
  call void @llvm.dbg.declare(metadata !{[1 x %struct.__va_list_tag]* %marker}, metadata !169), !dbg !310
  %arraydecay = getelementptr inbounds [1 x %struct.__va_list_tag]* %marker, i64 0, i64 0, !dbg !311
  %arraydecay2 = bitcast [1 x %struct.__va_list_tag]* %marker to i8*, !dbg !311
  call void @llvm.va_start(i8* %arraydecay2), !dbg !311
  %boffset = getelementptr inbounds %"class.pov_base::TextStreamBuffer"* %this, i64 0, i32 2, !dbg !312
  %0 = load i32* %boffset, align 4, !dbg !312, !tbaa !282
  %idxprom = zext i32 %0 to i64, !dbg !312
  %buffer = getelementptr inbounds %"class.pov_base::TextStreamBuffer"* %this, i64 0, i32 1, !dbg !312
  %1 = load i8** %buffer, align 8, !dbg !312, !tbaa !299
  %arrayidx = getelementptr inbounds i8* %1, i64 %idxprom, !dbg !312
  %bsize = getelementptr inbounds %"class.pov_base::TextStreamBuffer"* %this, i64 0, i32 3, !dbg !312
  %2 = load i32* %bsize, align 4, !dbg !312, !tbaa !282
  %sub = xor i32 %0, -1, !dbg !312
  %sub4 = add i32 %2, %sub, !dbg !312
  %conv = zext i32 %sub4 to i64, !dbg !312
  %call = call i32 @vsnprintf(i8* %arrayidx, i64 %conv, i8* %format, %struct.__va_list_tag* %arraydecay) #10, !dbg !312
  call void @llvm.va_end(i8* %arraydecay2), !dbg !313
  %3 = load i32* %boffset, align 4, !dbg !314, !tbaa !282
  %idxprom9 = zext i32 %3 to i64, !dbg !314
  %4 = load i8** %buffer, align 8, !dbg !314, !tbaa !299
  %arrayidx11 = getelementptr inbounds i8* %4, i64 %idxprom9, !dbg !314
  %call16 = call i64 @strlen(i8* %arrayidx11) #11, !dbg !314
  %conv17 = trunc i64 %call16 to i32, !dbg !314
  call void @_ZN8pov_base16TextStreamBuffer11directflushEPKcj(%"class.pov_base::TextStreamBuffer"* %this, i8* %arrayidx11, i32 %conv17) #8, !dbg !314
  %5 = load i8** %buffer, align 8, !dbg !315, !tbaa !299
  %call19 = call i64 @strlen(i8* %5) #11, !dbg !315
  %conv20 = trunc i64 %call19 to i32, !dbg !315
  store i32 %conv20, i32* %boffset, align 4, !dbg !315, !tbaa !282
  call void @_ZN8pov_base16TextStreamBuffer9lineflushEv(%"class.pov_base::TextStreamBuffer"* %this) #8, !dbg !316
  ret void, !dbg !317
}
