define void @_ZN8pov_base16TextStreamBuffer11directflushEPKcj(%"class.pov_base::TextStreamBuffer"* %this, i8* %str, i32 %chars) #0 align 2 {
entry:
  tail call void @llvm.dbg.value(metadata !{%"class.pov_base::TextStreamBuffer"* %this}, i64 0, metadata !245), !dbg !318
  tail call void @llvm.dbg.value(metadata !{i8* %str}, i64 0, metadata !246), !dbg !318
  tail call void @llvm.dbg.value(metadata !{i32 %chars}, i64 0, metadata !247), !dbg !318
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !248), !dbg !319
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !320
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  %0 = bitcast %"class.pov_base::TextStreamBuffer"* %this to void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)***, !dbg !339
  %vtable = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)*** %0, align 8, !dbg !339, !tbaa !278
  %vfn = getelementptr inbounds void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vtable, i64 4, !dbg !339
  %1 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vfn, align 8, !dbg !339
  tail call void %1(%"class.pov_base::TextStreamBuffer"* %this, i8* %str, i32 %chars) #8, !dbg !339
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  %cmp90 = icmp eq i32 %chars, 0, !dbg !331
  br i1 %cmp90, label %if.end50, label %for.body.lr.ph, !dbg !331

for.body.lr.ph:                                   ; preds = %entry
  %curline9 = getelementptr inbounds %"class.pov_base::TextStreamBuffer"* %this, i64 0, i32 5, !dbg !340
  %wrap = getelementptr inbounds %"class.pov_base::TextStreamBuffer"* %this, i64 0, i32 4, !dbg !340
  br label %for.body, !dbg !331

for.body:                                         ; preds = %for.body.lr.ph, %for.inc41
  %chars.addr.094 = phi i32 [ %chars, %for.body.lr.ph ], [ %chars.addr.1, %for.inc41 ]
  %str.addr.093 = phi i8* [ %str, %for.body.lr.ph ], [ %str.addr.1, %for.inc41 ]
  %storemerge91 = phi i32 [ 0, %for.body.lr.ph ], [ %inc42, %for.inc41 ]
  %idxprom = zext i32 %storemerge91 to i64, !dbg !341
  %arrayidx = getelementptr inbounds i8* %str.addr.093, i64 %idxprom, !dbg !341
  %2 = load i8* %arrayidx, align 1, !dbg !341, !tbaa !283
  switch i8 %2, label %if.else [
    i8 10, label %if.then
    i8 13, label %if.then
  ], !dbg !341

if.then:                                          ; preds = %for.body, %for.body
  %inc = add i32 %storemerge91, 1, !dbg !332
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !249), !dbg !331
  %vtable7 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)*** %0, align 8, !dbg !342, !tbaa !278
  %vfn8 = getelementptr inbounds void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vtable7, i64 3, !dbg !342
  %3 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vfn8, align 8, !dbg !342
  tail call void %3(%"class.pov_base::TextStreamBuffer"* %this, i8* %str.addr.093, i32 %inc) #8, !dbg !342
  %idx.ext = zext i32 %inc to i64, !dbg !334
  %add.ptr = getelementptr inbounds i8* %str.addr.093, i64 %idx.ext, !dbg !334
  tail call void @llvm.dbg.value(metadata !{i8* %add.ptr}, i64 0, metadata !246), !dbg !334
  %sub = sub i32 %chars.addr.094, %inc, !dbg !343
  tail call void @llvm.dbg.value(metadata !{i32 %sub}, i64 0, metadata !247), !dbg !343
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !344
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  store i32 0, i32* %curline9, align 4, !dbg !345, !tbaa !282
  br label %for.inc41, !dbg !346

if.else:                                          ; preds = %for.body
  %4 = load i32* %curline9, align 4, !dbg !340, !tbaa !282
  %add = add i32 %4, %storemerge91, !dbg !340
  %5 = load i32* %wrap, align 4, !dbg !340, !tbaa !282
  %cmp10 = icmp ult i32 %add, %5, !dbg !340
  br i1 %cmp10, label %for.inc41, label %for.cond12.preheader, !dbg !340

for.cond12.preheader:                             ; preds = %if.else
  %div85 = lshr i32 %5, 2, !dbg !328
  tail call void @llvm.dbg.value(metadata !{i32 %div85}, i64 0, metadata !347), !dbg !330
  %cmp.i86 = icmp ult i32 %storemerge91, %div85, !dbg !348
  %.sroa.speculated7387 = select i1 %cmp.i86, i32 %storemerge91, i32 %div85, !dbg !328
  %cmp1488 = icmp eq i32 %.sroa.speculated7387, 0, !dbg !328
  br i1 %cmp1488, label %for.end, label %for.body15, !dbg !328

for.cond12:                                       ; preds = %for.body15
  %div = lshr i32 %7, 2, !dbg !328
  tail call void @llvm.dbg.value(metadata !{i32 %div}, i64 0, metadata !347), !dbg !330
  %cmp.i = icmp ult i32 %storemerge91, %div, !dbg !348
  %.sroa.speculated73 = select i1 %cmp.i, i32 %storemerge91, i32 %div, !dbg !328
  %cmp14 = icmp ult i32 %inc22, %.sroa.speculated73, !dbg !328
  br i1 %cmp14, label %for.body15, label %for.end, !dbg !328

for.body15:                                       ; preds = %for.cond12.preheader, %for.cond12
  %ii.089 = phi i32 [ %inc22, %for.cond12 ], [ 0, %for.cond12.preheader ]
  %sub16 = sub i32 %storemerge91, %ii.089, !dbg !335
  %idxprom17 = zext i32 %sub16 to i64, !dbg !335
  %arrayidx18 = getelementptr inbounds i8* %str.addr.093, i64 %idxprom17, !dbg !335
  %6 = load i8* %arrayidx18, align 1, !dbg !335, !tbaa !283
  %conv19 = sext i8 %6 to i32, !dbg !335
  %call20 = tail call i32 @isspace(i32 %conv19) #10, !dbg !335
  %tobool = icmp eq i32 %call20, 0, !dbg !335
  %inc22 = add i32 %ii.089, 1, !dbg !328
  tail call void @llvm.dbg.value(metadata !{i32 %inc22}, i64 0, metadata !248), !dbg !328
  %7 = load i32* %wrap, align 4, !dbg !328, !tbaa !282
  br i1 %tobool, label %for.cond12, label %for.end, !dbg !335

for.end:                                          ; preds = %for.body15, %for.cond12, %for.cond12.preheader
  %8 = phi i32 [ %5, %for.cond12.preheader ], [ %7, %for.cond12 ], [ %7, %for.body15 ]
  %ii.0.lcssa = phi i32 [ 0, %for.cond12.preheader ], [ %inc22, %for.cond12 ], [ %ii.089, %for.body15 ]
  %div24 = lshr i32 %8, 2, !dbg !322
  tail call void @llvm.dbg.value(metadata !{i32 %div24}, i64 0, metadata !351), !dbg !326
  %cmp.i69 = icmp ult i32 %storemerge91, %div24, !dbg !352
  %.sroa.speculated = select i1 %cmp.i69, i32 %storemerge91, i32 %div24, !dbg !322
  %cmp27 = icmp eq i32 %ii.0.lcssa, %.sroa.speculated, !dbg !322
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !248), !dbg !353
  %.ii.0 = select i1 %cmp27, i32 0, i32 %ii.0.lcssa, !dbg !322
  %sub30 = sub i32 %storemerge91, %.ii.0, !dbg !337
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !{i32 %sub30}, i64 0, metadata !249), !dbg !331
  %vtable31 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)*** %0, align 8, !dbg !354, !tbaa !278
  %vfn32 = getelementptr inbounds void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vtable31, i64 3, !dbg !354
  %9 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vfn32, align 8, !dbg !354
  tail call void %9(%"class.pov_base::TextStreamBuffer"* %this, i8* %str.addr.093, i32 %sub30) #8, !dbg !354
  %vtable33 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)*** %0, align 8, !dbg !355, !tbaa !278
  %vfn34 = getelementptr inbounds void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vtable33, i64 3, !dbg !355
  %10 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vfn34, align 8, !dbg !355
  tail call void %10(%"class.pov_base::TextStreamBuffer"* %this, i8* getelementptr inbounds ([2 x i8]* @.str4, i64 0, i64 0), i32 1) #8, !dbg !355
  %idx.ext35 = zext i32 %sub30 to i64, !dbg !338
  %add.ptr36 = getelementptr inbounds i8* %str.addr.093, i64 %idx.ext35, !dbg !338
  tail call void @llvm.dbg.value(metadata !{i8* %add.ptr36}, i64 0, metadata !246), !dbg !338
  %sub37 = sub i32 %chars.addr.094, %sub30, !dbg !356
  tail call void @llvm.dbg.value(metadata !{i32 %sub37}, i64 0, metadata !247), !dbg !356
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !357
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !31, i64 0, metadata !249), !dbg !331
  store i32 0, i32* %curline9, align 4, !dbg !358, !tbaa !282
  br label %for.inc41, !dbg !359

for.inc41:                                        ; preds = %if.else, %if.then, %for.end
  %i.0.load8384 = phi i32 [ 0, %if.then ], [ 0, %for.end ], [ %storemerge91, %if.else ]
  %str.addr.1 = phi i8* [ %add.ptr, %if.then ], [ %add.ptr36, %for.end ], [ %str.addr.093, %if.else ]
  %chars.addr.1 = phi i32 [ %sub, %if.then ], [ %sub37, %for.end ], [ %chars.addr.094, %if.else ]
  %inc42 = add i32 %i.0.load8384, 1, !dbg !331
  tail call void @llvm.dbg.value(metadata !{i32 %inc42}, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !321), !dbg !326
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !327), !dbg !330
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !331
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !332
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !334
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !335
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !337
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !338
  tail call void @llvm.dbg.value(metadata !{i32 %storemerge91}, i64 0, metadata !249), !dbg !331
  %cmp = icmp ult i32 %inc42, %chars.addr.1, !dbg !331
  br i1 %cmp, label %for.body, label %for.end43, !dbg !331

for.end43:                                        ; preds = %for.inc41
  %cmp44 = icmp eq i32 %chars.addr.1, 0, !dbg !360
  br i1 %cmp44, label %if.end50, label %if.then45, !dbg !360

if.then45:                                        ; preds = %for.end43
  %vtable46 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)*** %0, align 8, !dbg !361, !tbaa !278
  %vfn47 = getelementptr inbounds void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vtable46, i64 3, !dbg !361
  %11 = load void (%"class.pov_base::TextStreamBuffer"*, i8*, i32)** %vfn47, align 8, !dbg !361
  tail call void %11(%"class.pov_base::TextStreamBuffer"* %this, i8* %str.addr.1, i32 %chars.addr.1) #8, !dbg !361
  %curline48 = getelementptr inbounds %"class.pov_base::TextStreamBuffer"* %this, i64 0, i32 5, !dbg !363
  %12 = load i32* %curline48, align 4, !dbg !363, !tbaa !282
  %add49 = add i32 %12, %chars.addr.1, !dbg !363
  store i32 %add49, i32* %curline48, align 4, !dbg !363, !tbaa !282
  br label %if.end50, !dbg !364

if.end50:                                         ; preds = %entry, %for.end43, %if.then45
  ret void, !dbg !365
}
