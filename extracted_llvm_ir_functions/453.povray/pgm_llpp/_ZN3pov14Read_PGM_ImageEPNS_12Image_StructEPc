define void @_ZN3pov14Read_PGM_ImageEPNS_12Image_StructEPc(%"struct.pov::Image_Struct"* nocapture %Image, i8* %name) #5 {
entry:
  %header = alloca [2 x i8], align 1
  %line = alloca [1024 x i8], align 16
  %width = alloca i32, align 4
  %height = alloca i32, align 4
  %depth = alloca i32, align 4
  call void @llvm.dbg.value(metadata !{%"struct.pov::Image_Struct"* %Image}, i64 0, metadata !350), !dbg !466
  call void @llvm.dbg.value(metadata !{i8* %name}, i64 0, metadata !351), !dbg !466
  call void @llvm.dbg.declare(metadata !{[2 x i8]* %header}, metadata !353), !dbg !467
  %0 = getelementptr inbounds [1024 x i8]* %line, i64 0, i64 0, !dbg !468
  call void @llvm.lifetime.start(i64 1024, i8* %0) #2, !dbg !468
  call void @llvm.dbg.declare(metadata !{[1024 x i8]* %line}, metadata !355), !dbg !468
  call void @llvm.dbg.declare(metadata !{i32* %width}, metadata !361), !dbg !469
  call void @llvm.dbg.declare(metadata !{i32* %height}, metadata !362), !dbg !469
  call void @llvm.dbg.declare(metadata !{i32* %depth}, metadata !363), !dbg !470
  %call = call %"class.pov_base::IStream"* @_ZN3pov11Locate_FileEPcjS0_b(i8* %name, i32 4, i8* null, i1 zeroext true) #9, !dbg !471
  call void @llvm.dbg.value(metadata !{%"class.pov_base::IStream"* %call}, i64 0, metadata !352), !dbg !471
  %cmp = icmp eq %"class.pov_base::IStream"* %call, null, !dbg !471
  br i1 %cmp, label %if.then, label %if.end, !dbg !471

if.then:                                          ; preds = %entry
  %call1 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([26 x i8]* @.str, i64 0, i64 0), i8* %name) #9, !dbg !472
  br label %if.end, !dbg !472

if.end:                                           ; preds = %if.then, %entry
  %1 = getelementptr inbounds %"class.pov_base::IStream"* %call, i64 0, i32 0, !dbg !473
  %arraydecay = getelementptr inbounds [2 x i8]* %header, i64 0, i64 0, !dbg !473
  %call2 = call %"class.pov_base::IOBase"* @_ZN8pov_base6IOBase4readEPvm(%"class.pov_base::IOBase"* %1, i8* %arraydecay, i64 2) #9, !dbg !473
  tail call void @llvm.dbg.value(metadata !{%"class.pov_base::IOBase"* %call2}, i64 0, metadata !474), !dbg !475
  %fail.i = getelementptr inbounds %"class.pov_base::IOBase"* %call2, i64 0, i32 1, !dbg !476
  %2 = load i8* %fail.i, align 1, !dbg !476, !tbaa !445, !range !448
  %tobool.i = icmp eq i8 %2, 0, !dbg !476
  br i1 %tobool.i, label %if.end6, label %if.then4, !dbg !473

if.then4:                                         ; preds = %if.end
  %call5 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([36 x i8]* @.str1, i64 0, i64 0), i8* %name) #9, !dbg !478
  br label %if.end6, !dbg !478

if.end6:                                          ; preds = %if.end, %if.then4
  %3 = load i8* %arraydecay, align 1, !dbg !479, !tbaa !446
  %cmp7 = icmp eq i8 %3, 80, !dbg !479
  br i1 %cmp7, label %if.end10, label %if.then8, !dbg !479

if.then8:                                         ; preds = %if.end6
  %call9 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([27 x i8]* @.str2, i64 0, i64 0)) #9, !dbg !479
  br label %if.end10, !dbg !479

if.end10:                                         ; preds = %if.end6, %if.then8
  %arrayidx11 = getelementptr inbounds [2 x i8]* %header, i64 0, i64 1, !dbg !480
  %4 = load i8* %arrayidx11, align 1, !dbg !480, !tbaa !446
  switch i8 %4, label %if.then17 [
    i8 50, label %do.body.preheader
    i8 53, label %do.body.preheader
  ], !dbg !480

if.then17:                                        ; preds = %if.end10
  %conv12 = zext i8 %4 to i32, !dbg !480
  %call20 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([37 x i8]* @.str3, i64 0, i64 0), i32 %conv12) #9, !dbg !481
  br label %do.body.preheader, !dbg !481

do.body.preheader:                                ; preds = %if.then17, %if.end10, %if.end10
  %arrayidx24 = getelementptr inbounds [1024 x i8]* %line, i64 0, i64 1023, !dbg !482
  br label %do.body, !dbg !484

do.body:                                          ; preds = %do.body.preheader, %do.cond
  %call23 = call %"class.pov_base::IStream"* @_ZN8pov_base7IStream7getlineEPcm(%"class.pov_base::IStream"* %call, i8* %0, i64 1024) #9, !dbg !484
  store i8 0, i8* %arrayidx24, align 1, !dbg !482, !tbaa !446
  %call26 = call i8* @strchr(i8* %0, i32 35) #8, !dbg !485
  call void @llvm.dbg.value(metadata !{i8* %call26}, i64 0, metadata !359), !dbg !485
  %cmp27 = icmp eq i8* %call26, null, !dbg !485
  br i1 %cmp27, label %do.cond, label %if.then28, !dbg !485

if.then28:                                        ; preds = %do.body
  store i8 0, i8* %call26, align 1, !dbg !486, !tbaa !446
  br label %do.cond, !dbg !486

do.cond:                                          ; preds = %do.body, %if.then28
  %5 = load i8* %0, align 16, !dbg !487, !tbaa !446
  %cmp32 = icmp eq i8 %5, 0, !dbg !487
  br i1 %cmp32, label %do.body, label %do.end, !dbg !487

do.end:                                           ; preds = %do.cond
  %call34 = call i32 (i8*, i8*, ...)* @sscanf(i8* %0, i8* getelementptr inbounds ([6 x i8]* @.str4, i64 0, i64 0), i32* %width, i32* %height) #7, !dbg !488
  %cmp35 = icmp eq i32 %call34, 2, !dbg !488
  br i1 %cmp35, label %if.end38, label %if.then36, !dbg !488

if.then36:                                        ; preds = %do.end
  %call37 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([45 x i8]* @.str5, i64 0, i64 0)) #9, !dbg !489
  br label %if.end38, !dbg !489

if.end38:                                         ; preds = %do.end, %if.then36
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !490
  %6 = load i32* %width, align 4, !dbg !490, !tbaa !491
  %cmp39 = icmp slt i32 %6, 1, !dbg !490
  br i1 %cmp39, label %if.then41, label %lor.lhs.false, !dbg !490

lor.lhs.false:                                    ; preds = %if.end38
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !490
  %7 = load i32* %height, align 4, !dbg !490, !tbaa !491
  %cmp40 = icmp slt i32 %7, 1, !dbg !490
  br i1 %cmp40, label %if.then41, label %do.body44, !dbg !490

if.then41:                                        ; preds = %lor.lhs.false, %if.end38
  %call42 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([45 x i8]* @.str6, i64 0, i64 0)) #9, !dbg !492
  br label %do.body44, !dbg !492

do.body44:                                        ; preds = %lor.lhs.false, %if.then41, %do.cond53
  %call46 = call %"class.pov_base::IStream"* @_ZN8pov_base7IStream7getlineEPcm(%"class.pov_base::IStream"* %call, i8* %0, i64 1024) #9, !dbg !493
  store i8 0, i8* %arrayidx24, align 1, !dbg !495, !tbaa !446
  %call49 = call i8* @strchr(i8* %0, i32 35) #8, !dbg !496
  call void @llvm.dbg.value(metadata !{i8* %call49}, i64 0, metadata !359), !dbg !496
  %cmp50 = icmp eq i8* %call49, null, !dbg !496
  br i1 %cmp50, label %do.cond53, label %if.then51, !dbg !496

if.then51:                                        ; preds = %do.body44
  store i8 0, i8* %call49, align 1, !dbg !497, !tbaa !446
  br label %do.cond53, !dbg !497

do.cond53:                                        ; preds = %do.body44, %if.then51
  %8 = load i8* %0, align 16, !dbg !498, !tbaa !446
  %cmp56 = icmp eq i8 %8, 0, !dbg !498
  br i1 %cmp56, label %do.body44, label %do.end57, !dbg !498

do.end57:                                         ; preds = %do.cond53
  %call59 = call i32 (i8*, i8*, ...)* @sscanf(i8* %0, i8* getelementptr inbounds ([3 x i8]* @.str7, i64 0, i64 0), i32* %depth) #7, !dbg !499
  %cmp60 = icmp eq i32 %call59, 1, !dbg !499
  br i1 %cmp60, label %if.end63, label %if.then61, !dbg !499

if.then61:                                        ; preds = %do.end57
  %call62 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([40 x i8]* @.str8, i64 0, i64 0)) #9, !dbg !500
  br label %if.end63, !dbg !500

if.end63:                                         ; preds = %do.end57, %if.then61
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !363), !dbg !501
  %9 = load i32* %depth, align 4, !dbg !501, !tbaa !491
  %cmp64 = icmp ugt i32 %9, 65535, !dbg !501
  %cmp66 = icmp eq i32 %9, 0, !dbg !501
  %or.cond = or i1 %cmp64, %cmp66, !dbg !501
  br i1 %or.cond, label %if.then67, label %if.end69, !dbg !501

if.then67:                                        ; preds = %if.end63
  %call68 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([48 x i8]* @.str9, i64 0, i64 0), i32 %9) #9, !dbg !502
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !363), !dbg !503
  %.pre = load i32* %depth, align 4, !dbg !503, !tbaa !491
  br label %if.end69, !dbg !502

if.end69:                                         ; preds = %if.end63, %if.then67
  %10 = phi i32 [ %9, %if.end63 ], [ %.pre, %if.then67 ]
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !504
  %11 = load i32* %width, align 4, !dbg !504, !tbaa !491
  %iwidth = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 5, !dbg !504
  store i32 %11, i32* %iwidth, align 4, !dbg !504, !tbaa !491
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !505
  %12 = load i32* %height, align 4, !dbg !505, !tbaa !491
  %iheight = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 6, !dbg !505
  store i32 %12, i32* %iheight, align 4, !dbg !505, !tbaa !491
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !506
  %conv70 = sitofp i32 %11 to double, !dbg !506
  %conv71 = fptrunc double %conv70 to float, !dbg !506
  %width72 = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 11, !dbg !506
  store float %conv71, float* %width72, align 4, !dbg !506, !tbaa !507
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !508
  %conv73 = sitofp i32 %12 to double, !dbg !508
  %conv74 = fptrunc double %conv73 to float, !dbg !508
  %height75 = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 12, !dbg !508
  store float %conv74, float* %height75, align 4, !dbg !508, !tbaa !507
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !363), !dbg !503
  %cmp76 = icmp ult i32 %10, 256, !dbg !503
  br i1 %cmp76, label %if.then77, label %if.else149, !dbg !503

if.then77:                                        ; preds = %if.end69
  %conv78 = zext i32 %10 to i64, !dbg !509
  %mul = mul i64 %conv78, 10, !dbg !509
  %call79 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul, i8* getelementptr inbounds ([52 x i8]* @.str10, i64 0, i64 0), i32 203, i8* getelementptr inbounds ([20 x i8]* @.str11, i64 0, i64 0)) #9, !dbg !509
  %13 = bitcast i8* %call79 to %"struct.pov::Image_Colour_Struct"*, !dbg !509
  call void @llvm.dbg.value(metadata !{%"struct.pov::Image_Colour_Struct"* %13}, i64 0, metadata !364), !dbg !509
  call void @llvm.dbg.value(metadata !29, i64 0, metadata !368), !dbg !511
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !363), !dbg !511
  %14 = load i32* %depth, align 4, !dbg !511, !tbaa !491
  %cmp80320 = icmp eq i32 %14, 0, !dbg !511
  br i1 %cmp80320, label %for.end, label %for.body, !dbg !511

for.body:                                         ; preds = %if.then77, %for.body
  %indvars.iv334 = phi i64 [ %indvars.iv.next335, %for.body ], [ 0, %if.then77 ]
  %15 = trunc i64 %indvars.iv334 to i32, !dbg !513
  %mul81 = mul nsw i32 %15, 255, !dbg !513
  %div = udiv i32 %mul81, %14, !dbg !513
  %conv82 = trunc i32 %div to i16, !dbg !513
  %Red = getelementptr inbounds %"struct.pov::Image_Colour_Struct"* %13, i64 %indvars.iv334, i32 0, !dbg !513
  store i16 %conv82, i16* %Red, align 2, !dbg !513, !tbaa !515
  %Green = getelementptr inbounds %"struct.pov::Image_Colour_Struct"* %13, i64 %indvars.iv334, i32 1, !dbg !516
  store i16 %conv82, i16* %Green, align 2, !dbg !516, !tbaa !515
  %Blue = getelementptr inbounds %"struct.pov::Image_Colour_Struct"* %13, i64 %indvars.iv334, i32 2, !dbg !517
  store i16 %conv82, i16* %Blue, align 2, !dbg !517, !tbaa !515
  %Filter = getelementptr inbounds %"struct.pov::Image_Colour_Struct"* %13, i64 %indvars.iv334, i32 3, !dbg !518
  store i16 0, i16* %Filter, align 2, !dbg !518, !tbaa !515
  %Transmit = getelementptr inbounds %"struct.pov::Image_Colour_Struct"* %13, i64 %indvars.iv334, i32 4, !dbg !519
  store i16 0, i16* %Transmit, align 2, !dbg !519, !tbaa !515
  %indvars.iv.next335 = add i64 %indvars.iv334, 1, !dbg !511
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !363), !dbg !511
  %16 = trunc i64 %indvars.iv.next335 to i32, !dbg !511
  %cmp80 = icmp ult i32 %16, %14, !dbg !511
  br i1 %cmp80, label %for.body, label %for.cond.for.end_crit_edge, !dbg !511

for.cond.for.end_crit_edge:                       ; preds = %for.body
  %phitmp = trunc i32 %14 to i16, !dbg !511
  br label %for.end, !dbg !511

for.end:                                          ; preds = %if.then77, %for.cond.for.end_crit_edge
  %17 = phi i16 [ 0, %if.then77 ], [ %phitmp, %for.cond.for.end_crit_edge ]
  %Colour_Map = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 16, !dbg !520
  store %"struct.pov::Image_Colour_Struct"* %13, %"struct.pov::Image_Colour_Struct"** %Colour_Map, align 8, !dbg !520, !tbaa !449
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !363), !dbg !521
  %Colour_Map_Size = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 7, !dbg !521
  store i16 %17, i16* %Colour_Map_Size, align 2, !dbg !521, !tbaa !515
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !522
  %18 = load i32* %height, align 4, !dbg !522, !tbaa !491
  %conv99 = sext i32 %18 to i64, !dbg !522
  %mul100 = shl nsw i64 %conv99, 3, !dbg !522
  %call101 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul100, i8* getelementptr inbounds ([52 x i8]* @.str10, i64 0, i64 0), i32 217, i8* getelementptr inbounds ([10 x i8]* @.str12, i64 0, i64 0)) #9, !dbg !522
  %data = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 18, !dbg !522
  %map_lines = bitcast %union.anon* %data to i8***, !dbg !522
  %19 = getelementptr inbounds %union.anon* %data, i64 0, i32 0, !dbg !522
  %.c287 = bitcast i8* %call101 to %"struct.pov::Image8_Line_Struct"*, !dbg !522
  store %"struct.pov::Image8_Line_Struct"* %.c287, %"struct.pov::Image8_Line_Struct"** %19, align 8, !dbg !522, !tbaa !449
  call void @llvm.dbg.value(metadata !29, i64 0, metadata !370), !dbg !523
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !523
  %20 = load i32* %height, align 4, !dbg !523, !tbaa !491
  %cmp103318 = icmp sgt i32 %20, 0, !dbg !523
  br i1 %cmp103318, label %for.body104.lr.ph, label %if.end220, !dbg !523

for.body104.lr.ph:                                ; preds = %for.end
  %fail.i288 = getelementptr inbounds %"class.pov_base::IStream"* %call, i64 0, i32 0, i32 1, !dbg !525
  %f.i = getelementptr inbounds %"class.pov_base::IStream"* %call, i64 0, i32 0, i32 2, !dbg !525
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !531
  %.pre342 = load i32* %width, align 4, !dbg !531, !tbaa !491
  br label %for.body104, !dbg !523

for.body104:                                      ; preds = %for.body104.lr.ph, %if.end141
  %21 = phi i32 [ %.pre342, %for.body104.lr.ph ], [ %30, %if.end141 ]
  %indvars.iv332 = phi i64 [ 0, %for.body104.lr.ph ], [ %indvars.iv.next333, %if.end141 ]
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !531
  %conv105 = sext i32 %21 to i64, !dbg !531
  %call107 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %conv105, i8* getelementptr inbounds ([52 x i8]* @.str10, i64 0, i64 0), i32 221, i8* getelementptr inbounds ([15 x i8]* @.str13, i64 0, i64 0)) #9, !dbg !531
  call void @llvm.dbg.value(metadata !{i8* %call107}, i64 0, metadata !365), !dbg !531
  %22 = load i8* %arrayidx11, align 1, !dbg !532, !tbaa !446
  %cmp110 = icmp eq i8 %22, 50, !dbg !532
  call void @llvm.dbg.value(metadata !29, i64 0, metadata !369), !dbg !533
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !533
  %23 = load i32* %width, align 4, !dbg !533, !tbaa !491
  %cmp113316 = icmp sgt i32 %23, 0, !dbg !533
  br i1 %cmp110, label %for.cond112.preheader, label %for.cond127.preheader, !dbg !532

for.cond112.preheader:                            ; preds = %for.body104
  br i1 %cmp113316, label %for.body114, label %if.end141, !dbg !533

for.cond127.preheader:                            ; preds = %for.body104
  br i1 %cmp113316, label %for.body129, label %if.end141, !dbg !536

for.body114:                                      ; preds = %for.cond112.preheader, %for.inc123
  %indvars.iv330 = phi i64 [ %indvars.iv.next331, %for.inc123 ], [ 0, %for.cond112.preheader ]
  %call115 = call i32 @_ZN3pov22Read_ASCII_File_NumberEPN8pov_base7IStreamE(%"class.pov_base::IStream"* %call) #9, !dbg !537
  call void @llvm.dbg.value(metadata !{i32 %call115}, i64 0, metadata !360), !dbg !537
  %cmp116 = icmp sgt i32 %call115, -1, !dbg !539
  br i1 %cmp116, label %if.then117, label %if.else, !dbg !539

if.then117:                                       ; preds = %for.body114
  %conv118 = trunc i32 %call115 to i8, !dbg !539
  %arrayidx120 = getelementptr inbounds i8* %call107, i64 %indvars.iv330, !dbg !539
  store i8 %conv118, i8* %arrayidx120, align 1, !dbg !539, !tbaa !446
  br label %for.inc123, !dbg !539

if.else:                                          ; preds = %for.body114
  %call121 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([39 x i8]* @.str14, i64 0, i64 0)) #9, !dbg !540
  br label %for.inc123

for.inc123:                                       ; preds = %if.then117, %if.else
  %indvars.iv.next331 = add i64 %indvars.iv330, 1, !dbg !533
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !533
  %24 = load i32* %width, align 4, !dbg !533, !tbaa !491
  %25 = trunc i64 %indvars.iv.next331 to i32, !dbg !533
  %cmp113 = icmp slt i32 %25, %24, !dbg !533
  br i1 %cmp113, label %for.body114, label %if.end141, !dbg !533

for.body129:                                      ; preds = %for.cond127.preheader, %if.end134
  %indvars.iv = phi i64 [ %indvars.iv.next, %if.end134 ], [ 0, %for.cond127.preheader ]
  call void @llvm.dbg.value(metadata !{%"class.pov_base::IStream"* %call}, i64 0, metadata !541) #2, !dbg !525
  %26 = load i8* %fail.i288, align 1, !dbg !525, !tbaa !445, !range !448
  %tobool.i289 = icmp eq i8 %26, 0, !dbg !525
  br i1 %tobool.i289, label %_ZN8pov_base7IStream9Read_ByteEv.exit, label %if.then132, !dbg !525

_ZN8pov_base7IStream9Read_ByteEv.exit:            ; preds = %for.body129
  %27 = load %struct._IO_FILE** %f.i, align 8, !dbg !525, !tbaa !449
  %call.i = call i32 @fgetc(%struct._IO_FILE* %27) #7, !dbg !525
  call void @llvm.dbg.value(metadata !{i32 %cond.i305}, i64 0, metadata !360), !dbg !526
  %cmp131 = icmp eq i32 %call.i, -1, !dbg !526
  br i1 %cmp131, label %if.then132, label %if.end134, !dbg !526

if.then132:                                       ; preds = %for.body129, %_ZN8pov_base7IStream9Read_ByteEv.exit
  %call133 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([33 x i8]* @.str15, i64 0, i64 0)) #9, !dbg !542
  br label %if.end134, !dbg !542

if.end134:                                        ; preds = %if.then132, %_ZN8pov_base7IStream9Read_ByteEv.exit
  %cond.i305 = phi i32 [ -1, %if.then132 ], [ %call.i, %_ZN8pov_base7IStream9Read_ByteEv.exit ]
  %conv135 = trunc i32 %cond.i305 to i8, !dbg !543
  %arrayidx137 = getelementptr inbounds i8* %call107, i64 %indvars.iv, !dbg !543
  store i8 %conv135, i8* %arrayidx137, align 1, !dbg !543, !tbaa !446
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !536
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !536
  %28 = load i32* %width, align 4, !dbg !536, !tbaa !491
  %29 = trunc i64 %indvars.iv.next to i32, !dbg !536
  %cmp128 = icmp slt i32 %29, %28, !dbg !536
  br i1 %cmp128, label %for.body129, label %if.end141, !dbg !536

if.end141:                                        ; preds = %for.cond112.preheader, %for.inc123, %for.cond127.preheader, %if.end134
  %30 = phi i32 [ %23, %for.cond127.preheader ], [ %28, %if.end134 ], [ %23, %for.cond112.preheader ], [ %24, %for.inc123 ]
  %31 = load i8*** %map_lines, align 8, !dbg !544, !tbaa !449
  %arrayidx145 = getelementptr inbounds i8** %31, i64 %indvars.iv332, !dbg !544
  store i8* %call107, i8** %arrayidx145, align 8, !dbg !544, !tbaa !449
  %indvars.iv.next333 = add i64 %indvars.iv332, 1, !dbg !523
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !523
  %32 = load i32* %height, align 4, !dbg !523, !tbaa !491
  %33 = trunc i64 %indvars.iv.next333 to i32, !dbg !523
  %cmp103 = icmp slt i32 %33, %32, !dbg !523
  br i1 %cmp103, label %for.body104, label %if.end220, !dbg !523

if.else149:                                       ; preds = %if.end69
  %Colour_Map150 = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 16, !dbg !545
  store %"struct.pov::Image_Colour_Struct"* null, %"struct.pov::Image_Colour_Struct"** %Colour_Map150, align 8, !dbg !545, !tbaa !449
  %Colour_Map_Size151 = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 7, !dbg !547
  store i16 0, i16* %Colour_Map_Size151, align 2, !dbg !547, !tbaa !515
  %Image_Type = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 3, !dbg !548
  %34 = load i32* %Image_Type, align 4, !dbg !548, !tbaa !491
  %or153 = or i32 %34, 393216, !dbg !549
  store i32 %or153, i32* %Image_Type, align 4, !dbg !549, !tbaa !491
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !550
  %conv154 = sext i32 %12 to i64, !dbg !550
  %mul155 = shl nsw i64 %conv154, 3, !dbg !550
  %call156 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul155, i8* getelementptr inbounds ([52 x i8]* @.str10, i64 0, i64 0), i32 253, i8* getelementptr inbounds ([10 x i8]* @.str12, i64 0, i64 0)) #9, !dbg !550
  %data157 = getelementptr inbounds %"struct.pov::Image_Struct"* %Image, i64 0, i32 18, !dbg !550
  %gray16_lines = bitcast %union.anon* %data157 to i16***, !dbg !550
  %35 = getelementptr inbounds %union.anon* %data157, i64 0, i32 0, !dbg !550
  %.c = bitcast i8* %call156 to %"struct.pov::Image8_Line_Struct"*, !dbg !550
  store %"struct.pov::Image8_Line_Struct"* %.c, %"struct.pov::Image8_Line_Struct"** %35, align 8, !dbg !550, !tbaa !449
  call void @llvm.dbg.value(metadata !29, i64 0, metadata !370), !dbg !551
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !551
  %36 = load i32* %height, align 4, !dbg !551, !tbaa !491
  %cmp159328 = icmp sgt i32 %36, 0, !dbg !551
  br i1 %cmp159328, label %for.body160.lr.ph, label %if.end220, !dbg !551

for.body160.lr.ph:                                ; preds = %if.else149
  %fail.i290 = getelementptr inbounds %"class.pov_base::IStream"* %call, i64 0, i32 0, i32 1, !dbg !553
  %f.i292 = getelementptr inbounds %"class.pov_base::IStream"* %call, i64 0, i32 0, i32 2, !dbg !553
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !559
  %.pre343 = load i32* %width, align 4, !dbg !559, !tbaa !491
  br label %for.body160, !dbg !551

for.body160:                                      ; preds = %for.body160.lr.ph, %for.inc217
  %37 = phi i32 [ %.pre343, %for.body160.lr.ph ], [ %54, %for.inc217 ]
  %indvars.iv340 = phi i64 [ 0, %for.body160.lr.ph ], [ %indvars.iv.next341, %for.inc217 ]
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !559
  %conv161 = sext i32 %37 to i64, !dbg !559
  %mul162 = shl nsw i64 %conv161, 1, !dbg !559
  %call163 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul162, i8* getelementptr inbounds ([52 x i8]* @.str10, i64 0, i64 0), i32 257, i8* getelementptr inbounds ([15 x i8]* @.str13, i64 0, i64 0)) #9, !dbg !559
  %38 = bitcast i8* %call163 to i16*, !dbg !559
  %39 = load i16*** %gray16_lines, align 8, !dbg !559, !tbaa !449
  %arrayidx167 = getelementptr inbounds i16** %39, i64 %indvars.iv340, !dbg !559
  store i16* %38, i16** %arrayidx167, align 8, !dbg !559, !tbaa !449
  %40 = load i8* %arrayidx11, align 1, !dbg !560, !tbaa !446
  %cmp170 = icmp eq i8 %40, 50, !dbg !560
  call void @llvm.dbg.value(metadata !29, i64 0, metadata !369), !dbg !561
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !561
  %41 = load i32* %width, align 4, !dbg !561, !tbaa !491
  %cmp173325 = icmp sgt i32 %41, 0, !dbg !561
  br i1 %cmp170, label %for.cond172.preheader, label %for.cond192.preheader, !dbg !560

for.cond172.preheader:                            ; preds = %for.body160
  br i1 %cmp173325, label %for.body174, label %for.inc217, !dbg !561

for.cond192.preheader:                            ; preds = %for.body160
  br i1 %cmp173325, label %for.body194, label %for.inc217, !dbg !564

for.body174:                                      ; preds = %for.cond172.preheader, %for.inc188
  %indvars.iv338 = phi i64 [ %indvars.iv.next339, %for.inc188 ], [ 0, %for.cond172.preheader ]
  %call175 = call i32 @_ZN3pov22Read_ASCII_File_NumberEPN8pov_base7IStreamE(%"class.pov_base::IStream"* %call) #9, !dbg !565
  call void @llvm.dbg.value(metadata !{i32 %call175}, i64 0, metadata !360), !dbg !565
  %cmp176 = icmp sgt i32 %call175, -1, !dbg !567
  br i1 %cmp176, label %if.then177, label %if.else185, !dbg !567

if.then177:                                       ; preds = %for.body174
  %conv178 = trunc i32 %call175 to i16, !dbg !567
  %42 = load i16*** %gray16_lines, align 8, !dbg !567, !tbaa !449
  %arrayidx183 = getelementptr inbounds i16** %42, i64 %indvars.iv340, !dbg !567
  %43 = load i16** %arrayidx183, align 8, !dbg !567, !tbaa !449
  %arrayidx184 = getelementptr inbounds i16* %43, i64 %indvars.iv338, !dbg !567
  store i16 %conv178, i16* %arrayidx184, align 2, !dbg !567, !tbaa !515
  br label %for.inc188, !dbg !567

if.else185:                                       ; preds = %for.body174
  %call186 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([39 x i8]* @.str14, i64 0, i64 0)) #9, !dbg !568
  br label %for.inc188

for.inc188:                                       ; preds = %if.then177, %if.else185
  %indvars.iv.next339 = add i64 %indvars.iv338, 1, !dbg !561
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !561
  %44 = load i32* %width, align 4, !dbg !561, !tbaa !491
  %45 = trunc i64 %indvars.iv.next339 to i32, !dbg !561
  %cmp173 = icmp slt i32 %45, %44, !dbg !561
  br i1 %cmp173, label %for.body174, label %for.inc217, !dbg !561

for.body194:                                      ; preds = %for.cond192.preheader, %if.end204
  %indvars.iv336 = phi i64 [ %indvars.iv.next337, %if.end204 ], [ 0, %for.cond192.preheader ]
  call void @llvm.dbg.value(metadata !{%"class.pov_base::IStream"* %call}, i64 0, metadata !569) #2, !dbg !553
  %46 = load i8* %fail.i290, align 1, !dbg !553, !tbaa !445, !range !448
  %tobool.i291 = icmp eq i8 %46, 0, !dbg !553
  br i1 %tobool.i291, label %_ZN8pov_base7IStream9Read_ByteEv.exit296, label %if.then197, !dbg !553

_ZN8pov_base7IStream9Read_ByteEv.exit296:         ; preds = %for.body194
  %47 = load %struct._IO_FILE** %f.i292, align 8, !dbg !553, !tbaa !449
  %call.i293 = call i32 @fgetc(%struct._IO_FILE* %47) #7, !dbg !553
  call void @llvm.dbg.value(metadata !{i32 %cond.i295308}, i64 0, metadata !366), !dbg !554
  %cmp196 = icmp eq i32 %call.i293, -1, !dbg !554
  br i1 %cmp196, label %if.then197, label %if.end199, !dbg !554

if.then197:                                       ; preds = %for.body194, %_ZN8pov_base7IStream9Read_ByteEv.exit296
  %call198 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([33 x i8]* @.str15, i64 0, i64 0)) #9, !dbg !570
  br label %if.end199, !dbg !570

if.end199:                                        ; preds = %if.then197, %_ZN8pov_base7IStream9Read_ByteEv.exit296
  %cond.i295308 = phi i32 [ -1, %if.then197 ], [ %call.i293, %_ZN8pov_base7IStream9Read_ByteEv.exit296 ]
  call void @llvm.dbg.value(metadata !{%"class.pov_base::IStream"* %call}, i64 0, metadata !571) #2, !dbg !573
  %48 = load i8* %fail.i290, align 1, !dbg !573, !tbaa !445, !range !448
  %tobool.i298 = icmp eq i8 %48, 0, !dbg !573
  br i1 %tobool.i298, label %_ZN8pov_base7IStream9Read_ByteEv.exit303, label %if.then202, !dbg !573

_ZN8pov_base7IStream9Read_ByteEv.exit303:         ; preds = %if.end199
  %49 = load %struct._IO_FILE** %f.i292, align 8, !dbg !573, !tbaa !449
  %call.i300 = call i32 @fgetc(%struct._IO_FILE* %49) #7, !dbg !573
  call void @llvm.dbg.value(metadata !{i32 %cond.i302311}, i64 0, metadata !367), !dbg !572
  %cmp201 = icmp eq i32 %call.i300, -1, !dbg !572
  br i1 %cmp201, label %if.then202, label %if.end204, !dbg !572

if.then202:                                       ; preds = %if.end199, %_ZN8pov_base7IStream9Read_ByteEv.exit303
  %call203 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([33 x i8]* @.str15, i64 0, i64 0)) #9, !dbg !574
  br label %if.end204, !dbg !574

if.end204:                                        ; preds = %if.then202, %_ZN8pov_base7IStream9Read_ByteEv.exit303
  %cond.i302311 = phi i32 [ -1, %if.then202 ], [ %call.i300, %_ZN8pov_base7IStream9Read_ByteEv.exit303 ]
  %mul205 = shl i32 %cond.i295308, 8, !dbg !575
  %add = add nsw i32 %cond.i302311, %mul205, !dbg !575
  %conv206 = trunc i32 %add to i16, !dbg !575
  %50 = load i16*** %gray16_lines, align 8, !dbg !575, !tbaa !449
  %arrayidx211 = getelementptr inbounds i16** %50, i64 %indvars.iv340, !dbg !575
  %51 = load i16** %arrayidx211, align 8, !dbg !575, !tbaa !449
  %arrayidx212 = getelementptr inbounds i16* %51, i64 %indvars.iv336, !dbg !575
  store i16 %conv206, i16* %arrayidx212, align 2, !dbg !575, !tbaa !515
  %indvars.iv.next337 = add i64 %indvars.iv336, 1, !dbg !564
  call void @llvm.dbg.value(metadata !{i32* %width}, i64 0, metadata !361), !dbg !564
  %52 = load i32* %width, align 4, !dbg !564, !tbaa !491
  %53 = trunc i64 %indvars.iv.next337 to i32, !dbg !564
  %cmp193 = icmp slt i32 %53, %52, !dbg !564
  br i1 %cmp193, label %for.body194, label %for.inc217, !dbg !564

for.inc217:                                       ; preds = %for.cond172.preheader, %for.inc188, %for.cond192.preheader, %if.end204
  %54 = phi i32 [ %41, %for.cond192.preheader ], [ %52, %if.end204 ], [ %41, %for.cond172.preheader ], [ %44, %for.inc188 ]
  %indvars.iv.next341 = add i64 %indvars.iv340, 1, !dbg !551
  call void @llvm.dbg.value(metadata !{i32* %height}, i64 0, metadata !362), !dbg !551
  %55 = load i32* %height, align 4, !dbg !551, !tbaa !491
  %56 = trunc i64 %indvars.iv.next341 to i32, !dbg !551
  %cmp159 = icmp slt i32 %56, %55, !dbg !551
  br i1 %cmp159, label %for.body160, label %if.end220, !dbg !551

if.end220:                                        ; preds = %if.else149, %for.inc217, %for.end, %if.end141
  br i1 %cmp, label %delete.end, label %delete.notnull, !dbg !576

delete.notnull:                                   ; preds = %if.end220
  %57 = bitcast %"class.pov_base::IStream"* %call to void (%"class.pov_base::IStream"*)***, !dbg !576
  %vtable = load void (%"class.pov_base::IStream"*)*** %57, align 8, !dbg !576, !tbaa !577
  %vfn = getelementptr inbounds void (%"class.pov_base::IStream"*)** %vtable, i64 1, !dbg !576
  %58 = load void (%"class.pov_base::IStream"*)** %vfn, align 8, !dbg !576
  call void %58(%"class.pov_base::IStream"* %call) #9, !dbg !576
  br label %delete.end, !dbg !576

delete.end:                                       ; preds = %delete.notnull, %if.end220
  call void @llvm.lifetime.end(i64 1024, i8* %0) #2, !dbg !578
  ret void, !dbg !578
}
