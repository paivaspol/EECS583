define i32 @_Z10POVMS_SendPvP9POVMSDataS1_i(i8* %contextref, %struct.POVMSData* %msg, %struct.POVMSData* %result, i32 %mode) #5 {
entry:
  %addr = alloca i8*, align 8
  %maxtime = alloca i32, align 4
  %maxsize = alloca i32, align 4
  call void @llvm.dbg.value(metadata !{i8* %contextref}, i64 0, metadata !214), !dbg !1445
  call void @llvm.dbg.value(metadata !{%struct.POVMSData* %msg}, i64 0, metadata !215), !dbg !1445
  call void @llvm.dbg.value(metadata !{%struct.POVMSData* %result}, i64 0, metadata !216), !dbg !1445
  call void @llvm.dbg.value(metadata !{i32 %mode}, i64 0, metadata !217), !dbg !1445
  call void @llvm.dbg.declare(metadata !{i8** %addr}, metadata !219), !dbg !1446
  call void @llvm.dbg.value(metadata !1081, i64 0, metadata !219), !dbg !1446
  store i8* null, i8** %addr, align 8, !dbg !1446, !tbaa !917
  call void @llvm.dbg.declare(metadata !{i32* %maxtime}, metadata !220), !dbg !1447
  call void @llvm.dbg.value(metadata !1448, i64 0, metadata !220), !dbg !1447
  store i32 30, i32* %maxtime, align 4, !dbg !1447, !tbaa !937
  call void @llvm.dbg.value(metadata !71, i64 0, metadata !221), !dbg !1449
  %cmp = icmp eq %struct.POVMSData* %msg, null, !dbg !1450
  br i1 %cmp, label %if.end120, label %if.else, !dbg !1450

if.else:                                          ; preds = %entry
  %type = getelementptr inbounds %struct.POVMSData* %msg, i64 0, i32 0, !dbg !1451
  %0 = load i32* %type, align 4, !dbg !1451, !tbaa !937
  %cmp1 = icmp eq i32 %0, 1280262987, !dbg !1451
  br i1 %cmp1, label %if.end120, label %if.else3, !dbg !1451

if.else3:                                         ; preds = %if.else
  %cmp4 = icmp eq i32 %mode, 0, !dbg !1452
  br i1 %cmp4, label %if.end120, label %if.else6, !dbg !1452

if.else6:                                         ; preds = %if.else3
  %cmp7 = icmp ne %struct.POVMSData* %result, null, !dbg !1453
  %1 = and i32 %mode, -3, !dbg !1453
  %2 = icmp eq i32 %1, 1, !dbg !1453
  %or.cond185 = and i1 %cmp7, %2, !dbg !1453
  br i1 %or.cond185, label %if.end120, label %if.else15, !dbg !1453

if.else15:                                        ; preds = %if.else6
  %cmp13 = icmp eq i32 %mode, 3, !dbg !1454
  %cmp16 = icmp eq i8* %contextref, null, !dbg !1455
  %or.cond183 = and i1 %cmp16, %cmp13, !dbg !1455
  br i1 %or.cond183, label %if.end120, label %if.else20, !dbg !1455

if.else20:                                        ; preds = %if.else15
  %cmp21 = icmp eq i32 %mode, 2, !dbg !1456
  br i1 %cmp21, label %if.end34, label %if.then36, !dbg !1456

if.end34:                                         ; preds = %if.else20
  %cmp23 = icmp eq %struct.POVMSData* %result, null, !dbg !1457
  call void @llvm.dbg.value(metadata !1459, i64 0, metadata !221), !dbg !1460
  %. = sext i1 %cmp23 to i32, !dbg !1457
  call void @llvm.dbg.value(metadata !1459, i64 0, metadata !221), !dbg !1461
  %.. = select i1 %cmp16, i32 -1, i32 %., !dbg !1462
  %cmp35 = icmp eq i32 %.., 0, !dbg !1463
  br i1 %cmp35, label %if.then36, label %if.end120, !dbg !1463

if.then36:                                        ; preds = %if.else20, %if.end34
  %call = call i32 @_Z16POVMSUtil_GetIntP9POVMSDatajPi(%struct.POVMSData* %msg, i32 1414485332, i32* %maxtime) #8, !dbg !1464
  %cmp37 = icmp eq i32 %call, 0, !dbg !1464
  br i1 %cmp37, label %if.end44, label %if.then38, !dbg !1464

if.then38:                                        ; preds = %if.then36
  call void @llvm.dbg.value(metadata !1448, i64 0, metadata !220), !dbg !1466
  store i32 30, i32* %maxtime, align 4, !dbg !1466, !tbaa !937
  br label %if.end44, !dbg !1466

if.end44:                                         ; preds = %if.then38, %if.then36
  %call43 = call i32 @_Z30POVMSMsg_GetDestinationAddressP9POVMSDataPPv(%struct.POVMSData* %msg, i8** %addr) #8, !dbg !1467
  call void @llvm.dbg.value(metadata !{i32 %call43}, i64 0, metadata !221), !dbg !1467
  %cmp45 = icmp eq i32 %call43, 0, !dbg !1468
  br i1 %cmp45, label %if.then46, label %if.end120, !dbg !1468

if.then46:                                        ; preds = %if.end44
  %call47 = call i32 @_Z16POVMSStream_SizeP9POVMSData(%struct.POVMSData* %msg) #8, !dbg !1469
  call void @llvm.dbg.value(metadata !{i32 %call47}, i64 0, metadata !222), !dbg !1469
  %call48 = call i32 @_Z16POVMSStream_SizeP9POVMSData(%struct.POVMSData* %result) #8, !dbg !1470
  call void @llvm.dbg.value(metadata !{i32 %call48}, i64 0, metadata !224), !dbg !1470
  call void @llvm.dbg.value(metadata !71, i64 0, metadata !225), !dbg !1471
  call void @llvm.dbg.value(metadata !71, i64 0, metadata !226), !dbg !1472
  call void @llvm.dbg.value(metadata !71, i64 0, metadata !227), !dbg !1473
  call void @llvm.dbg.declare(metadata !{i32* %maxsize}, metadata !228), !dbg !1474
  call void @llvm.dbg.value(metadata !71, i64 0, metadata !228), !dbg !1474
  store i32 0, i32* %maxsize, align 4, !dbg !1474, !tbaa !937
  %.184 = select i1 %cmp7, i32 2, i32 1, !dbg !1475
  %add = add nsw i32 %call47, 28, !dbg !1476
  call void @llvm.dbg.value(metadata !{i32 %add}, i64 0, metadata !226), !dbg !1476
  br i1 %cmp7, label %if.then54, label %if.end57, !dbg !1477

if.then54:                                        ; preds = %if.then46
  %add55 = add nsw i32 %call47, 32, !dbg !1478
  %add56 = add nsw i32 %add55, %call48, !dbg !1478
  call void @llvm.dbg.value(metadata !{i32 %add56}, i64 0, metadata !226), !dbg !1478
  br label %if.end57, !dbg !1478

if.end57:                                         ; preds = %if.then54, %if.then46
  %totalsize.0 = phi i32 [ %add56, %if.then54 ], [ %add, %if.then46 ]
  call void @llvm.dbg.value(metadata !{i32 %totalsize.0}, i64 0, metadata !228), !dbg !1479
  store i32 %totalsize.0, i32* %maxsize, align 4, !dbg !1479, !tbaa !937
  %conv = sext i32 %totalsize.0 to i64, !dbg !1480
  %call58 = call noalias i8* @malloc(i64 %conv) #9, !dbg !1480
  call void @llvm.dbg.value(metadata !{i8* %call58}, i64 0, metadata !229), !dbg !1480
  %cmp59 = icmp eq i8* %call58, null, !dbg !1481
  br i1 %cmp59, label %if.end120, label %if.then60, !dbg !1481

if.then60:                                        ; preds = %if.end57
  %call61 = call i32 @_Z23POVMSStream_WriteStringPKcPhPi(i8* getelementptr inbounds ([9 x i8]* @.str3, i64 0, i64 0), i8* %call58, i32* %maxsize) #8, !dbg !1482
  call void @llvm.dbg.value(metadata !{i32 %call61}, i64 0, metadata !227), !dbg !1482
  %idx.ext = sext i32 %call61 to i64, !dbg !1483
  %add.ptr = getelementptr inbounds i8* %call58, i64 %idx.ext, !dbg !1483
  %call63 = call i32 @_Z20POVMSStream_WriteIntiPhPi(i32 849, i8* %add.ptr, i32* %maxsize) #8, !dbg !1483
  %add64 = add nsw i32 %call63, %call61, !dbg !1483
  call void @llvm.dbg.value(metadata !{i32 %add64}, i64 0, metadata !227), !dbg !1483
  %idx.ext65 = sext i32 %add64 to i64, !dbg !1484
  %add.ptr66 = getelementptr inbounds i8* %call58, i64 %idx.ext65, !dbg !1484
  %call67 = call i32 @_Z20POVMSStream_WriteIntiPhPi(i32 %totalsize.0, i8* %add.ptr66, i32* %maxsize) #8, !dbg !1484
  %add68 = add nsw i32 %add64, %call67, !dbg !1484
  call void @llvm.dbg.value(metadata !{i32 %add68}, i64 0, metadata !227), !dbg !1484
  %idx.ext69 = sext i32 %add68 to i64, !dbg !1485
  %add.ptr70 = getelementptr inbounds i8* %call58, i64 %idx.ext69, !dbg !1485
  %call71 = call i32 @_Z20POVMSStream_WriteIntiPhPi(i32 %mode, i8* %add.ptr70, i32* %maxsize) #8, !dbg !1485
  %add72 = add nsw i32 %add68, %call71, !dbg !1485
  call void @llvm.dbg.value(metadata !{i32 %add72}, i64 0, metadata !227), !dbg !1485
  %idx.ext73 = sext i32 %add72 to i64, !dbg !1486
  %add.ptr74 = getelementptr inbounds i8* %call58, i64 %idx.ext73, !dbg !1486
  %call75 = call i32 @_Z20POVMSStream_WriteIntiPhPi(i32 %.184, i8* %add.ptr74, i32* %maxsize) #8, !dbg !1486
  %add76 = add nsw i32 %add72, %call75, !dbg !1486
  call void @llvm.dbg.value(metadata !{i32 %add76}, i64 0, metadata !227), !dbg !1486
  %idx.ext77 = sext i32 %add76 to i64, !dbg !1487
  %add.ptr78 = getelementptr inbounds i8* %call58, i64 %idx.ext77, !dbg !1487
  %call79 = call i32 @_Z20POVMSStream_WriteIntiPhPi(i32 %call47, i8* %add.ptr78, i32* %maxsize) #8, !dbg !1487
  %add80 = add nsw i32 %add76, %call79, !dbg !1487
  call void @llvm.dbg.value(metadata !{i32 %add80}, i64 0, metadata !227), !dbg !1487
  %idx.ext81 = sext i32 %add80 to i64, !dbg !1488
  %add.ptr82 = getelementptr inbounds i8* %call58, i64 %idx.ext81, !dbg !1488
  %call83 = call i32 @_Z17POVMSStream_WriteP9POVMSDataPhPi(%struct.POVMSData* %msg, i8* %add.ptr82, i32* %maxsize) #8, !dbg !1488
  %add84 = add nsw i32 %add80, %call83, !dbg !1488
  call void @llvm.dbg.value(metadata !{i32 %add84}, i64 0, metadata !227), !dbg !1488
  br i1 %cmp7, label %if.then86, label %if.end95, !dbg !1489

if.then86:                                        ; preds = %if.then60
  %idx.ext87 = sext i32 %add84 to i64, !dbg !1490
  %add.ptr88 = getelementptr inbounds i8* %call58, i64 %idx.ext87, !dbg !1490
  %call89 = call i32 @_Z20POVMSStream_WriteIntiPhPi(i32 %call48, i8* %add.ptr88, i32* %maxsize) #8, !dbg !1490
  %add90 = add nsw i32 %call89, %add84, !dbg !1490
  call void @llvm.dbg.value(metadata !{i32 %add90}, i64 0, metadata !227), !dbg !1490
  %idx.ext91 = sext i32 %add90 to i64, !dbg !1492
  %add.ptr92 = getelementptr inbounds i8* %call58, i64 %idx.ext91, !dbg !1492
  %call93 = call i32 @_Z17POVMSStream_WriteP9POVMSDataPhPi(%struct.POVMSData* %result, i8* %add.ptr92, i32* %maxsize) #8, !dbg !1492
  br label %if.end95, !dbg !1493

if.end95:                                         ; preds = %if.then86, %if.then60
  call void @llvm.dbg.value(metadata !{i8** %addr}, i64 0, metadata !219), !dbg !1494
  %3 = load i8** %addr, align 8, !dbg !1494, !tbaa !917
  tail call void @llvm.dbg.value(metadata !{i8* %3}, i64 0, metadata !1495), !dbg !1496
  %4 = bitcast i8* %3 to %struct.POVMS_Sys_QueueNode_Default*, !dbg !1497
  %call97 = call i32 @_Z27POVMS_Sys_QueueSend_DefaultP27POVMS_Sys_QueueNode_DefaultPvi(%struct.POVMS_Sys_QueueNode_Default* %4, i8* %call58, i32 %totalsize.0) #8, !dbg !1494
  %cmp98 = icmp eq i32 %call97, 0, !dbg !1494
  call void @llvm.dbg.value(metadata !1498, i64 0, metadata !221), !dbg !1499
  %err.2. = select i1 %cmp98, i32 0, i32 3, !dbg !1494
  br i1 %cmp7, label %while.cond.preheader, label %if.end120, !dbg !1500

while.cond.preheader:                             ; preds = %if.end95
  %result103 = getelementptr inbounds i8* %contextref, i64 24, !dbg !1501
  %type104 = bitcast i8* %result103 to i32*, !dbg !1501
  %5 = load i32* %type104, align 4, !dbg !1501, !tbaa !937
  %cmp105198 = icmp eq i32 %5, 1314212940, !dbg !1501
  br i1 %cmp105198, label %land.rhs, label %if.then112, !dbg !1501

land.rhs:                                         ; preds = %while.cond.preheader, %while.body
  call void @llvm.dbg.value(metadata !{i32* %maxtime}, i64 0, metadata !220), !dbg !1501
  %6 = load i32* %maxtime, align 4, !dbg !1501, !tbaa !937
  %cmp107 = icmp sgt i32 %6, 0, !dbg !1501
  br i1 %cmp107, label %while.body, label %if.end120

while.body:                                       ; preds = %land.rhs
  %call108 = call i32 @_Z21POVMS_ProcessMessagesPvi(i8* %contextref, i32 0) #8, !dbg !1502
  %7 = load i32* %type104, align 4, !dbg !1501, !tbaa !937
  %cmp105 = icmp eq i32 %7, 1314212940, !dbg !1501
  br i1 %cmp105, label %land.rhs, label %if.then112, !dbg !1501

if.then112:                                       ; preds = %while.cond.preheader, %while.body
  %8 = bitcast %struct.POVMSData* %result to i8*, !dbg !1503
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %8, i8* %result103, i64 16, i32 8, i1 false), !dbg !1503, !tbaa.struct !1505
  store i32 1314212940, i32* %type104, align 4, !dbg !1506, !tbaa !937
  br label %if.end120, !dbg !1507

if.end120:                                        ; preds = %land.rhs, %if.else15, %if.else6, %if.else3, %if.else, %entry, %if.end34, %if.end57, %if.then112, %if.end95, %if.end44
  %err.4 = phi i32 [ %err.2., %if.then112 ], [ %err.2., %if.end95 ], [ %call43, %if.end44 ], [ -2, %if.end57 ], [ %.., %if.end34 ], [ -1, %entry ], [ 2, %if.else ], [ -1, %if.else3 ], [ -1, %if.else6 ], [ -1, %if.else15 ], [ %err.2., %land.rhs ]
  %call121 = call i32 @_Z18POVMSObject_DeleteP9POVMSData(%struct.POVMSData* %msg) #8, !dbg !1508
  ret i32 %err.4, !dbg !1509
}
