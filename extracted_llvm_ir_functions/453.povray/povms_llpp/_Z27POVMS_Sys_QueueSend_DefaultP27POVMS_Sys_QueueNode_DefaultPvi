define i32 @_Z27POVMS_Sys_QueueSend_DefaultP27POVMS_Sys_QueueNode_DefaultPvi(%struct.POVMS_Sys_QueueNode_Default* %q, i8* %p, i32 %l) #0 {
entry:
  tail call void @llvm.dbg.value(metadata !{%struct.POVMS_Sys_QueueNode_Default* %q}, i64 0, metadata !877), !dbg !1658
  tail call void @llvm.dbg.value(metadata !{i8* %p}, i64 0, metadata !878), !dbg !1658
  tail call void @llvm.dbg.value(metadata !{i32 %l}, i64 0, metadata !879), !dbg !1658
  tail call void @llvm.dbg.value(metadata !{%struct.POVMS_Sys_QueueNode_Default* %q}, i64 0, metadata !880), !dbg !1659
  tail call void @llvm.dbg.value(metadata !984, i64 0, metadata !881), !dbg !1660
  %cmp = icmp eq %struct.POVMS_Sys_QueueNode_Default* %q, null, !dbg !1661
  br i1 %cmp, label %return, label %if.end, !dbg !1661

if.end:                                           ; preds = %entry
  %magic = getelementptr inbounds %struct.POVMS_Sys_QueueNode_Default* %q, i64 0, i32 0, !dbg !1662
  %0 = load i32* %magic, align 4, !dbg !1662, !tbaa !937
  %cmp1 = icmp eq i32 %0, 305419896, !dbg !1662
  br i1 %cmp1, label %if.end3, label %return, !dbg !1662

if.end3:                                          ; preds = %if.end
  tail call void @llvm.dbg.value(metadata !1081, i64 0, metadata !882), !dbg !1663
  tail call void @llvm.dbg.value(metadata !1081, i64 0, metadata !1664), !dbg !1666
  tail call void @llvm.dbg.value(metadata !1081, i64 0, metadata !882), !dbg !1667
  %1 = load i8** @POVMS_Output_Context, align 8, !dbg !1665, !tbaa !917
  tail call void @llvm.dbg.value(metadata !{i8* %1}, i64 0, metadata !1668), !dbg !1666
  %cmp.i = icmp eq i8* %1, null, !dbg !1669
  br i1 %cmp.i, label %return, label %if.end.i, !dbg !1669

if.end.i:                                         ; preds = %if.end3
  %valid.i = bitcast i8* %1 to i32*, !dbg !1670
  %2 = load i32* %valid.i, align 4, !dbg !1670, !tbaa !937
  %cmp1.i = icmp eq i32 %2, 0, !dbg !1670
  br i1 %cmp1.i, label %return, label %if.end6, !dbg !1670

if.end6:                                          ; preds = %if.end.i
  %queue.i = getelementptr inbounds i8* %1, i64 16, !dbg !1671
  %3 = bitcast i8* %queue.i to %struct.POVMS_Sys_QueueNode_Default**, !dbg !1671
  %4 = load %struct.POVMS_Sys_QueueNode_Default** %3, align 8, !dbg !1671, !tbaa !917
  tail call void @llvm.dbg.value(metadata !{%struct.POVMS_Sys_QueueNode_Default* %4}, i64 0, metadata !1672), !dbg !1673
  tail call void @llvm.dbg.value(metadata !{%struct.POVMS_Sys_QueueNode_Default* %q}, i64 0, metadata !1674), !dbg !1675
  %cmp8 = icmp ne %struct.POVMS_Sys_QueueNode_Default* %4, %q, !dbg !1667
  %5 = load i8* @Binary_POVMS_Stream_Mode, align 1, !dbg !1667, !tbaa !1244, !range !1245
  %tobool = icmp eq i8 %5, 0, !dbg !1667
  %or.cond = or i1 %cmp8, %tobool, !dbg !1667
  br i1 %or.cond, label %if.end12, label %if.then10, !dbg !1667

if.then10:                                        ; preds = %if.end6
  %call11 = tail call i32 @_Z19POVMS_WriteToStdoutPvi(i8* %p, i32 %l) #8, !dbg !1676
  br label %return, !dbg !1676

if.end12:                                         ; preds = %if.end6
  %call13 = tail call noalias i8* @malloc(i64 24) #9, !dbg !1677
  %6 = bitcast i8* %call13 to %struct.POVMS_Sys_QueueDataNode_Default*, !dbg !1677
  tail call void @llvm.dbg.value(metadata !{%struct.POVMS_Sys_QueueDataNode_Default* %6}, i64 0, metadata !881), !dbg !1677
  %cmp14 = icmp eq i8* %call13, null, !dbg !1678
  br i1 %cmp14, label %return, label %if.end16, !dbg !1678

if.end16:                                         ; preds = %if.end12
  %data = getelementptr inbounds i8* %call13, i64 8, !dbg !1679
  %7 = bitcast i8* %data to i8**, !dbg !1679
  store i8* %p, i8** %7, align 8, !dbg !1679, !tbaa !917
  %len = getelementptr inbounds i8* %call13, i64 16, !dbg !1680
  %8 = bitcast i8* %len to i32*, !dbg !1680
  store i32 %l, i32* %8, align 4, !dbg !1680, !tbaa !937
  %next = bitcast i8* %call13 to %struct.POVMS_Sys_QueueDataNode_Default**, !dbg !1681
  store %struct.POVMS_Sys_QueueDataNode_Default* null, %struct.POVMS_Sys_QueueDataNode_Default** %next, align 8, !dbg !1681, !tbaa !917
  %last = getelementptr inbounds %struct.POVMS_Sys_QueueNode_Default* %q, i64 0, i32 3, !dbg !1682
  %9 = load %struct.POVMS_Sys_QueueDataNode_Default** %last, align 8, !dbg !1682, !tbaa !917
  %cmp17 = icmp eq %struct.POVMS_Sys_QueueDataNode_Default* %9, null, !dbg !1682
  br i1 %cmp17, label %if.end21, label %if.then18, !dbg !1682

if.then18:                                        ; preds = %if.end16
  %next20 = getelementptr inbounds %struct.POVMS_Sys_QueueDataNode_Default* %9, i64 0, i32 0, !dbg !1683
  store %struct.POVMS_Sys_QueueDataNode_Default* %6, %struct.POVMS_Sys_QueueDataNode_Default** %next20, align 8, !dbg !1683, !tbaa !917
  br label %if.end21, !dbg !1683

if.end21:                                         ; preds = %if.end16, %if.then18
  %first = getelementptr inbounds %struct.POVMS_Sys_QueueNode_Default* %q, i64 0, i32 2, !dbg !1684
  %10 = load %struct.POVMS_Sys_QueueDataNode_Default** %first, align 8, !dbg !1684, !tbaa !917
  %cmp22 = icmp eq %struct.POVMS_Sys_QueueDataNode_Default* %10, null, !dbg !1684
  br i1 %cmp22, label %if.then23, label %if.end25, !dbg !1684

if.then23:                                        ; preds = %if.end21
  store %struct.POVMS_Sys_QueueDataNode_Default* %6, %struct.POVMS_Sys_QueueDataNode_Default** %first, align 8, !dbg !1685, !tbaa !917
  br label %if.end25, !dbg !1685

if.end25:                                         ; preds = %if.then23, %if.end21
  store %struct.POVMS_Sys_QueueDataNode_Default* %6, %struct.POVMS_Sys_QueueDataNode_Default** %last, align 8, !dbg !1686, !tbaa !917
  %entries = getelementptr inbounds %struct.POVMS_Sys_QueueNode_Default* %q, i64 0, i32 1, !dbg !1687
  %11 = load i32* %entries, align 4, !dbg !1687, !tbaa !937
  %inc = add nsw i32 %11, 1, !dbg !1687
  store i32 %inc, i32* %entries, align 4, !dbg !1687, !tbaa !937
  br label %return, !dbg !1688

return:                                           ; preds = %if.end.i, %if.end3, %if.end12, %if.end, %entry, %if.end25, %if.then10
  %retval.0 = phi i32 [ %call11, %if.then10 ], [ 0, %if.end25 ], [ -1, %entry ], [ -2, %if.end ], [ -3, %if.end12 ], [ -1, %if.end3 ], [ -1, %if.end.i ]
  ret i32 %retval.0, !dbg !1689
}
