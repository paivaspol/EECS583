define void @_ZN3pov9PPM_ImageC2EPciiii(%"class.pov::PPM_Image"* %this, i8* %name, i32 %w, i32 %h, i32 %m, i32 %l) unnamed_addr #0 align 2 {
entry:
  %header = alloca [2 x i8], align 1
  %line = alloca [1024 x i8], align 16
  %depth = alloca i32, align 4
  call void @llvm.dbg.value(metadata !{%"class.pov::PPM_Image"* %this}, i64 0, metadata !443), !dbg !680
  call void @llvm.dbg.value(metadata !{i8* %name}, i64 0, metadata !446), !dbg !680
  call void @llvm.dbg.value(metadata !{i32 %w}, i64 0, metadata !447), !dbg !680
  call void @llvm.dbg.value(metadata !{i32 %h}, i64 0, metadata !448), !dbg !680
  call void @llvm.dbg.value(metadata !{i32 %m}, i64 0, metadata !449), !dbg !680
  call void @llvm.dbg.value(metadata !{i32 %l}, i64 0, metadata !450), !dbg !680
  %0 = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 0, i32 0, !dbg !681
  %valid.i = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 0, i32 1, !dbg !684
  store i8 0, i8* %valid.i, align 1, !dbg !684, !tbaa !686
  store i32 (...)** bitcast (i8** getelementptr inbounds ([9 x i8*]* @_ZTVN3pov9PPM_ImageE, i64 0, i64 2) to i32 (...)**), i32 (...)*** %0, align 8, !dbg !683, !tbaa !689
  call void @llvm.dbg.declare(metadata !{[2 x i8]* %header}, metadata !453), !dbg !690
  %1 = getelementptr inbounds [1024 x i8]* %line, i64 0, i64 0, !dbg !691
  call void @llvm.lifetime.start(i64 1024, i8* %1) #2, !dbg !691
  call void @llvm.dbg.declare(metadata !{[1024 x i8]* %line}, metadata !457), !dbg !691
  call void @llvm.dbg.declare(metadata !{i32* %depth}, metadata !462), !dbg !692
  %mode = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 2, !dbg !693
  store i32 %m, i32* %mode, align 4, !dbg !693, !tbaa !694
  %filename = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 1, !dbg !695
  store i8* %name, i8** %filename, align 8, !dbg !695, !tbaa !696
  %in_file = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 6, !dbg !697
  %out_file = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 7, !dbg !698
  %width = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 3, !dbg !699
  %2 = bitcast %"class.pov_base::IStream"** %in_file to i8*, !dbg !699
  call void @llvm.memset.p0i8.i64(i8* %2, i8 0, i64 16, i32 8, i1 false), !dbg !698
  store i32 %w, i32* %width, align 4, !dbg !699, !tbaa !694
  %height = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 4, !dbg !700
  store i32 %h, i32* %height, align 4, !dbg !700, !tbaa !694
  %line_number = getelementptr inbounds %"class.pov::PPM_Image"* %this, i64 0, i32 5, !dbg !701
  store i32 %l, i32* %line_number, align 4, !dbg !701, !tbaa !694
  %3 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 0), align 8, !dbg !702, !tbaa !694
  %and = lshr i32 %3, 17
  %4 = and i32 %and, 1
  %5 = add i32 %4, 3
  switch i32 %m, label %sw.epilog [
    i32 0, label %sw.bb
    i32 1, label %sw.bb85
    i32 2, label %sw.bb113
  ], !dbg !703

sw.bb:                                            ; preds = %entry
  %and4 = and i32 %3, 1048576, !dbg !704
  %tobool5 = icmp eq i32 %and4, 0, !dbg !704
  br i1 %tobool5, label %lor.lhs.false, label %cleanup, !dbg !704

lor.lhs.false:                                    ; preds = %sw.bb
  %call = call %"class.pov_base::IStream"* @_ZN3pov19New_Checked_IStreamEPcj(i8* %name, i32 %5) #8, !dbg !704
  store %"class.pov_base::IStream"* %call, %"class.pov_base::IStream"** %in_file, align 8, !dbg !704, !tbaa !696
  %cmp = icmp eq %"class.pov_base::IStream"* %call, null, !dbg !704
  br i1 %cmp, label %cleanup, label %if.end8, !dbg !704

if.end8:                                          ; preds = %lor.lhs.false
  %6 = getelementptr inbounds %"class.pov_base::IStream"* %call, i64 0, i32 0, !dbg !706
  %arraydecay = getelementptr inbounds [2 x i8]* %header, i64 0, i64 0, !dbg !706
  %call11 = call %"class.pov_base::IOBase"* @_ZN8pov_base6IOBase4readEPvm(%"class.pov_base::IOBase"* %6, i8* %arraydecay, i64 2) #8, !dbg !706
  tail call void @llvm.dbg.value(metadata !{%"class.pov_base::IOBase"* %call11}, i64 0, metadata !707), !dbg !708
  %fail.i = getelementptr inbounds %"class.pov_base::IOBase"* %call11, i64 0, i32 1, !dbg !709
  %7 = load i8* %fail.i, align 1, !dbg !709, !tbaa !686, !range !711
  %tobool.i = icmp eq i8 %7, 0, !dbg !709
  br i1 %tobool.i, label %if.end15, label %cleanup, !dbg !706

if.end15:                                         ; preds = %if.end8
  %8 = load i8* %arraydecay, align 1, !dbg !712, !tbaa !687
  %cmp17 = icmp eq i8 %8, 80, !dbg !712
  br i1 %cmp17, label %if.end19, label %cleanup, !dbg !712

if.end19:                                         ; preds = %if.end15
  %arrayidx20 = getelementptr inbounds [2 x i8]* %header, i64 0, i64 1, !dbg !713
  %9 = load i8* %arrayidx20, align 1, !dbg !713, !tbaa !687
  %.off145 = add i8 %9, -53, !dbg !713
  %switch = icmp ult i8 %.off145, 2, !dbg !713
  br i1 %switch, label %do.body.preheader, label %cleanup, !dbg !713

do.body.preheader:                                ; preds = %if.end19
  %arrayidx32 = getelementptr inbounds [1024 x i8]* %line, i64 0, i64 1023, !dbg !714
  br label %do.body, !dbg !716

do.body:                                          ; preds = %do.body.preheader, %do.cond
  %10 = load %"class.pov_base::IStream"** %in_file, align 8, !dbg !716, !tbaa !696
  %call31 = call %"class.pov_base::IStream"* @_ZN8pov_base7IStream7getlineEPcm(%"class.pov_base::IStream"* %10, i8* %1, i64 1024) #8, !dbg !716
  store i8 0, i8* %arrayidx32, align 1, !dbg !714, !tbaa !687
  %call34 = call i8* @strchr(i8* %1, i32 35) #9, !dbg !717
  call void @llvm.dbg.value(metadata !{i8* %call34}, i64 0, metadata !461), !dbg !717
  %cmp35 = icmp eq i8* %call34, null, !dbg !717
  br i1 %cmp35, label %do.cond, label %if.then36, !dbg !717

if.then36:                                        ; preds = %do.body
  store i8 0, i8* %call34, align 1, !dbg !718, !tbaa !687
  br label %do.cond, !dbg !718

do.cond:                                          ; preds = %do.body, %if.then36
  %11 = load i8* %1, align 16, !dbg !719, !tbaa !687
  %cmp40 = icmp eq i8 %11, 0, !dbg !719
  br i1 %cmp40, label %do.body, label %do.end, !dbg !719

do.end:                                           ; preds = %do.cond
  %call44 = call i32 (i8*, i8*, ...)* @sscanf(i8* %1, i8* getelementptr inbounds ([6 x i8]* @.str, i64 0, i64 0), i32* %width, i32* %height) #10, !dbg !720
  %cmp45 = icmp eq i32 %call44, 2, !dbg !720
  br i1 %cmp45, label %do.body48, label %cleanup, !dbg !720

do.body48:                                        ; preds = %do.end, %do.cond59
  %12 = load %"class.pov_base::IStream"** %in_file, align 8, !dbg !721, !tbaa !696
  %call52 = call %"class.pov_base::IStream"* @_ZN8pov_base7IStream7getlineEPcm(%"class.pov_base::IStream"* %12, i8* %1, i64 1024) #8, !dbg !721
  store i8 0, i8* %arrayidx32, align 1, !dbg !723, !tbaa !687
  %call55 = call i8* @strchr(i8* %1, i32 35) #9, !dbg !724
  call void @llvm.dbg.value(metadata !{i8* %call55}, i64 0, metadata !461), !dbg !724
  %cmp56 = icmp eq i8* %call55, null, !dbg !724
  br i1 %cmp56, label %do.cond59, label %if.then57, !dbg !724

if.then57:                                        ; preds = %do.body48
  store i8 0, i8* %call55, align 1, !dbg !725, !tbaa !687
  br label %do.cond59, !dbg !725

do.cond59:                                        ; preds = %do.body48, %if.then57
  %13 = load i8* %1, align 16, !dbg !726, !tbaa !687
  %cmp62 = icmp eq i8 %13, 0, !dbg !726
  br i1 %cmp62, label %do.body48, label %do.end63, !dbg !726

do.end63:                                         ; preds = %do.cond59
  %call65 = call i32 (i8*, i8*, ...)* @sscanf(i8* %1, i8* getelementptr inbounds ([3 x i8]* @.str1, i64 0, i64 0), i32* %depth) #10, !dbg !727
  %cmp66 = icmp eq i32 %call65, 1, !dbg !727
  br i1 %cmp66, label %if.end68, label %cleanup, !dbg !727

if.end68:                                         ; preds = %do.end63
  call void @llvm.dbg.value(metadata !{i32* %depth}, i64 0, metadata !462), !dbg !728
  %14 = load i32* %depth, align 4, !dbg !728, !tbaa !694
  %.off = add i32 %14, -1, !dbg !728
  %15 = icmp ugt i32 %.off, 65534, !dbg !728
  br i1 %15, label %cleanup, label %if.end73, !dbg !728

if.end73:                                         ; preds = %if.end68
  %16 = load i32* %width, align 4, !dbg !729, !tbaa !694
  %cmp75 = icmp eq i32 %16, %w, !dbg !729
  br i1 %cmp75, label %lor.lhs.false76, label %if.then79, !dbg !729

lor.lhs.false76:                                  ; preds = %if.end73
  %17 = load i32* %height, align 4, !dbg !729, !tbaa !694
  %cmp78 = icmp eq i32 %17, %h, !dbg !729
  br i1 %cmp78, label %if.end82, label %if.then79, !dbg !729

if.then79:                                        ; preds = %lor.lhs.false76, %if.end73
  %call81 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([52 x i8]* @.str2, i64 0, i64 0)) #8, !dbg !730
  br label %if.end82

if.end82:                                         ; preds = %if.then79, %lor.lhs.false76
  %call84 = call i32 @_ZN3pov13Send_ProgressEPKci(i8* getelementptr inbounds ([27 x i8]* @.str3, i64 0, i64 0), i32 12) #8, !dbg !731
  br label %sw.epilog

sw.bb85:                                          ; preds = %entry
  %and87 = and i32 %3, 1048576, !dbg !732
  %tobool88 = icmp eq i32 %and87, 0, !dbg !732
  br i1 %tobool88, label %if.else93, label %if.then89, !dbg !732

if.then89:                                        ; preds = %sw.bb85
  %call91 = call %"class.pov_base::OStream"* @_ZN8pov_base11New_OStreamEPKcjb(i8* getelementptr inbounds ([7 x i8]* @.str4, i64 0, i64 0), i32 %5, i1 zeroext false) #8, !dbg !733
  store %"class.pov_base::OStream"* %call91, %"class.pov_base::OStream"** %out_file, align 8, !dbg !733, !tbaa !696
  br label %if.end100, !dbg !735

if.else93:                                        ; preds = %sw.bb85
  %call95 = call %"class.pov_base::OStream"* @_ZN3pov19New_Checked_OStreamEPcjb(i8* %name, i32 %5, i1 zeroext false) #8, !dbg !736
  store %"class.pov_base::OStream"* %call95, %"class.pov_base::OStream"** %out_file, align 8, !dbg !736, !tbaa !696
  %cmp97 = icmp eq %"class.pov_base::OStream"* %call95, null, !dbg !736
  br i1 %cmp97, label %cleanup, label %if.end100, !dbg !736

if.end100:                                        ; preds = %if.else93, %if.then89
  %18 = phi %"class.pov_base::OStream"* [ %call95, %if.else93 ], [ %call91, %if.then89 ]
  %19 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 0), align 8, !dbg !737, !tbaa !694
  %and102 = and i32 %19, 131072, !dbg !737
  %tobool103 = icmp eq i32 %and102, 0, !dbg !737
  br i1 %tobool103, label %if.else107, label %if.then104, !dbg !737

if.then104:                                       ; preds = %if.end100
  call void (%"class.pov_base::OStream"*, i8*, ...)* @_ZN8pov_base7OStream6printfEPKcz(%"class.pov_base::OStream"* %18, i8* getelementptr inbounds ([16 x i8]* @.str5, i64 0, i64 0), i32 %w, i32 %h) #8, !dbg !738
  br label %if.end110

if.else107:                                       ; preds = %if.end100
  %20 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 4), align 8, !dbg !740, !tbaa !694
  %shl = shl i32 1, %20, !dbg !740
  %sub = add nsw i32 %shl, -1, !dbg !740
  call void (%"class.pov_base::OStream"*, i8*, ...)* @_ZN8pov_base7OStream6printfEPKcz(%"class.pov_base::OStream"* %18, i8* getelementptr inbounds ([13 x i8]* @.str6, i64 0, i64 0), i32 %w, i32 %h, i32 %sub) #8, !dbg !740
  br label %if.end110

if.end110:                                        ; preds = %if.then104, %if.else107
  store i32 %w, i32* %width, align 4, !dbg !742, !tbaa !694
  store i32 %h, i32* %height, align 4, !dbg !743, !tbaa !694
  br label %sw.epilog, !dbg !744

sw.bb113:                                         ; preds = %entry
  %and115 = and i32 %3, 1048576, !dbg !745
  %tobool116 = icmp eq i32 %and115, 0, !dbg !745
  br i1 %tobool116, label %if.else121, label %if.then117, !dbg !745

if.then117:                                       ; preds = %sw.bb113
  %call119 = call %"class.pov_base::OStream"* @_ZN8pov_base11New_OStreamEPKcjb(i8* getelementptr inbounds ([7 x i8]* @.str4, i64 0, i64 0), i32 %5, i1 zeroext true) #8, !dbg !746
  store %"class.pov_base::OStream"* %call119, %"class.pov_base::OStream"** %out_file, align 8, !dbg !746, !tbaa !696
  br label %sw.epilog, !dbg !748

if.else121:                                       ; preds = %sw.bb113
  %call123 = call %"class.pov_base::OStream"* @_ZN3pov19New_Checked_OStreamEPcjb(i8* %name, i32 %5, i1 zeroext true) #8, !dbg !749
  store %"class.pov_base::OStream"* %call123, %"class.pov_base::OStream"** %out_file, align 8, !dbg !749, !tbaa !696
  %cmp125 = icmp eq %"class.pov_base::OStream"* %call123, null, !dbg !749
  br i1 %cmp125, label %cleanup, label %sw.epilog, !dbg !749

sw.epilog:                                        ; preds = %if.end82, %if.then117, %if.else121, %entry, %if.end110
  store i8 1, i8* %valid.i, align 1, !dbg !750, !tbaa !686
  br label %cleanup, !dbg !751

cleanup:                                          ; preds = %if.end8, %if.end19, %if.else121, %if.else93, %if.end68, %do.end63, %do.end, %if.end15, %lor.lhs.false, %sw.bb, %sw.epilog
  call void @llvm.lifetime.end(i64 1024, i8* %1) #2, !dbg !751
  ret void, !dbg !752
}
