define internal void @_ZN3povL12Prism_NormalEPdPNS_13Object_StructEPNS_10istk_entryE(double* %Result, %"struct.pov::Object_Struct"* nocapture %Object, %"struct.pov::istk_entry"* %Inter) #0 {
entry:
  %P = alloca [3 x double], align 16
  %N = alloca [3 x double], align 16
  call void @llvm.dbg.value(metadata !{double* %Result}, i64 0, metadata !1101), !dbg !2067
  call void @llvm.dbg.value(metadata !{%"struct.pov::Object_Struct"* %Object}, i64 0, metadata !1102), !dbg !2067
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Inter}, i64 0, metadata !1103), !dbg !2067
  call void @llvm.dbg.declare(metadata !{[3 x double]* %P}, metadata !1104), !dbg !2068
  call void @llvm.dbg.declare(metadata !1703, metadata !1105), !dbg !2069
  call void @llvm.dbg.declare(metadata !{[3 x double]* %N}, metadata !1107), !dbg !2070
  %arraydecay = getelementptr inbounds [3 x double]* %N, i64 0, i64 0, !dbg !2071
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !2072), !dbg !2073
  tail call void @llvm.dbg.value(metadata !2074, i64 0, metadata !2075), !dbg !2073
  tail call void @llvm.dbg.value(metadata !2076, i64 0, metadata !2077), !dbg !2073
  tail call void @llvm.dbg.value(metadata !2074, i64 0, metadata !2078), !dbg !2073
  store double 0.000000e+00, double* %arraydecay, align 16, !dbg !2079, !tbaa !1361
  %arrayidx1.i = getelementptr inbounds [3 x double]* %N, i64 0, i64 1, !dbg !2081
  store double 1.000000e+00, double* %arrayidx1.i, align 8, !dbg !2081, !tbaa !1361
  %arrayidx2.i = getelementptr inbounds [3 x double]* %N, i64 0, i64 2, !dbg !2082
  store double 0.000000e+00, double* %arrayidx2.i, align 16, !dbg !2082, !tbaa !1361
  %i1 = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 6, !dbg !2083
  %0 = load i32* %i1, align 4, !dbg !2083, !tbaa !1329
  %cmp = icmp eq i32 %0, 3, !dbg !2083
  br i1 %cmp, label %if.then, label %if.end75, !dbg !2083

if.then:                                          ; preds = %entry
  %i2 = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 7, !dbg !2084
  %1 = load i32* %i2, align 4, !dbg !2084, !tbaa !1329
  %idxprom = sext i32 %1 to i64, !dbg !2084
  %Spline = getelementptr inbounds %"struct.pov::Object_Struct"* %Object, i64 1, i32 8, !dbg !2084
  %2 = load %"struct.pov::Light_Source_Struct"** %Spline, align 8, !dbg !2084
  %Entry1 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %2, i64 0, i32 1, !dbg !2084
  %3 = bitcast i32* %Entry1 to %"struct.pov::Prism_Spline_Entry_Struct"**, !dbg !2084
  %4 = load %"struct.pov::Prism_Spline_Entry_Struct"** %3, align 8, !dbg !2084, !tbaa !1332
  %Entry.sroa.1.56.idx84 = getelementptr inbounds %"struct.pov::Prism_Spline_Entry_Struct"* %4, i64 %idxprom, i32 7, i64 0, !dbg !2084
  %Entry.sroa.1.56.copyload = load double* %Entry.sroa.1.56.idx84, align 8, !dbg !2084
  %Entry.sroa.2.64.idx87 = getelementptr inbounds %"struct.pov::Prism_Spline_Entry_Struct"* %4, i64 %idxprom, i32 7, i64 1, !dbg !2084
  %Entry.sroa.2.64.copyload = load double* %Entry.sroa.2.64.idx87, align 8, !dbg !2084
  %Entry.sroa.3.72.idx90 = getelementptr inbounds %"struct.pov::Prism_Spline_Entry_Struct"* %4, i64 %idxprom, i32 8, i64 0, !dbg !2084
  %Entry.sroa.3.72.copyload = load double* %Entry.sroa.3.72.idx90, align 8, !dbg !2084
  %Entry.sroa.4.80.idx93 = getelementptr inbounds %"struct.pov::Prism_Spline_Entry_Struct"* %4, i64 %idxprom, i32 8, i64 1, !dbg !2084
  %Entry.sroa.4.80.copyload = load double* %Entry.sroa.4.80.idx93, align 8, !dbg !2084
  %Entry.sroa.5.88.idx96 = getelementptr inbounds %"struct.pov::Prism_Spline_Entry_Struct"* %4, i64 %idxprom, i32 9, i64 0, !dbg !2084
  %Entry.sroa.5.88.copyload = load double* %Entry.sroa.5.88.idx96, align 8, !dbg !2084
  %Entry.sroa.6.96.idx99 = getelementptr inbounds %"struct.pov::Prism_Spline_Entry_Struct"* %4, i64 %idxprom, i32 9, i64 1, !dbg !2084
  %Entry.sroa.6.96.copyload = load double* %Entry.sroa.6.96.idx99, align 8, !dbg !2084
  %5 = getelementptr inbounds %"struct.pov::Object_Struct"* %Object, i64 1, i32 1, !dbg !2086
  %6 = load i32* %5, align 4, !dbg !2086, !tbaa !1329
  switch i32 %6, label %sw.default [
    i32 1, label %sw.bb
    i32 2, label %sw.bb27
  ], !dbg !2086

sw.bb:                                            ; preds = %if.then
  %d1 = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 8, !dbg !2087
  %7 = load double* %d1, align 8, !dbg !2087, !tbaa !1361
  %mul = fmul double %Entry.sroa.2.64.copyload, 3.000000e+00, !dbg !2087
  %mul4 = fmul double %mul, %7, !dbg !2087
  %mul6 = fmul double %Entry.sroa.4.80.copyload, 2.000000e+00, !dbg !2087
  %add = fadd double %mul6, %mul4, !dbg !2087
  %mul7 = fmul double %7, %add, !dbg !2087
  %add9 = fadd double %Entry.sroa.6.96.copyload, %mul7, !dbg !2087
  store double %add9, double* %arraydecay, align 16, !dbg !2087, !tbaa !1361
  store double 0.000000e+00, double* %arrayidx1.i, align 8, !dbg !2089, !tbaa !1361
  %mul15 = fmul double %Entry.sroa.1.56.copyload, 3.000000e+00, !dbg !2090
  %mul17 = fmul double %mul15, %7, !dbg !2090
  %mul20 = fmul double %Entry.sroa.3.72.copyload, 2.000000e+00, !dbg !2090
  %add21 = fadd double %mul20, %mul17, !dbg !2090
  %mul22 = fmul double %7, %add21, !dbg !2090
  %add25 = fadd double %Entry.sroa.5.88.copyload, %mul22, !dbg !2090
  %sub = fsub double -0.000000e+00, %add25, !dbg !2090
  store double %sub, double* %arrayidx2.i, align 16, !dbg !2090, !tbaa !1361
  br label %if.end75, !dbg !2091

sw.bb27:                                          ; preds = %if.then
  %arraydecay28 = getelementptr inbounds [3 x double]* %P, i64 0, i64 0, !dbg !2092
  %arraydecay29 = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 1, i64 0, !dbg !2092
  %8 = getelementptr inbounds %"struct.pov::Object_Struct"* %Object, i64 0, i32 10, !dbg !2092
  %9 = load %"struct.pov::Transform_Struct"** %8, align 8, !dbg !2092, !tbaa !1332
  call void @_ZN3pov14MInvTransPointEPdS0_PNS_16Transform_StructE(double* %arraydecay28, double* %arraydecay29, %"struct.pov::Transform_Struct"* %9) #7, !dbg !2092
  %arrayidx30 = getelementptr inbounds [3 x double]* %P, i64 0, i64 1, !dbg !2093
  %10 = load double* %arrayidx30, align 8, !dbg !2093, !tbaa !1361
  %call = call double @fabs(double %10) #8, !dbg !2093
  %cmp31 = fcmp ogt double %call, 1.000000e-07, !dbg !2093
  br i1 %cmp31, label %if.then32, label %if.end75, !dbg !2093

if.then32:                                        ; preds = %sw.bb27
  %d133 = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 8, !dbg !2094
  %11 = load double* %d133, align 8, !dbg !2094, !tbaa !1361
  %mul36 = fmul double %Entry.sroa.2.64.copyload, 3.000000e+00, !dbg !2094
  %mul38 = fmul double %mul36, %11, !dbg !2094
  %mul41 = fmul double %Entry.sroa.4.80.copyload, 2.000000e+00, !dbg !2094
  %add42 = fadd double %mul41, %mul38, !dbg !2094
  %mul43 = fmul double %11, %add42, !dbg !2094
  %add46 = fadd double %Entry.sroa.6.96.copyload, %mul43, !dbg !2094
  store double %add46, double* %arraydecay, align 16, !dbg !2094, !tbaa !1361
  %mul51 = fmul double %Entry.sroa.1.56.copyload, 3.000000e+00, !dbg !2096
  %mul53 = fmul double %mul51, %11, !dbg !2096
  %mul56 = fmul double %Entry.sroa.3.72.copyload, 2.000000e+00, !dbg !2096
  %add57 = fadd double %mul56, %mul53, !dbg !2096
  %mul58 = fmul double %11, %add57, !dbg !2096
  %add61 = fadd double %Entry.sroa.5.88.copyload, %mul58, !dbg !2096
  %sub62 = fsub double -0.000000e+00, %add61, !dbg !2096
  store double %sub62, double* %arrayidx2.i, align 16, !dbg !2096, !tbaa !1361
  %12 = load double* %arraydecay28, align 16, !dbg !2097, !tbaa !1361
  %mul66 = fmul double %12, %add46, !dbg !2097
  %arrayidx67 = getelementptr inbounds [3 x double]* %P, i64 0, i64 2, !dbg !2097
  %13 = load double* %arrayidx67, align 16, !dbg !2097, !tbaa !1361
  %mul69 = fmul double %13, %sub62, !dbg !2097
  %add70 = fadd double %mul66, %mul69, !dbg !2097
  %sub71 = fsub double -0.000000e+00, %add70, !dbg !2097
  %div = fdiv double %sub71, %10, !dbg !2097
  store double %div, double* %arrayidx1.i, align 8, !dbg !2097, !tbaa !1361
  br label %if.end75, !dbg !2098

sw.default:                                       ; preds = %if.then
  %call74 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([38 x i8]* @.str8, i64 0, i64 0)) #7, !dbg !2099
  br label %if.end75, !dbg !2100

if.end75:                                         ; preds = %sw.bb, %sw.default, %if.then32, %sw.bb27, %entry
  %14 = getelementptr inbounds %"struct.pov::Object_Struct"* %Object, i64 0, i32 10, !dbg !2101
  %15 = load %"struct.pov::Transform_Struct"** %14, align 8, !dbg !2101, !tbaa !1332
  call void @_ZN3pov12MTransNormalEPdS0_PNS_16Transform_StructE(double* %Result, double* %arraydecay, %"struct.pov::Transform_Struct"* %15) #7, !dbg !2101
  call void @llvm.dbg.value(metadata !{double* %Result}, i64 0, metadata !2102) #5, !dbg !2104
  call void @llvm.dbg.value(metadata !{double* %Result}, i64 0, metadata !2105) #5, !dbg !2104
  call void @llvm.dbg.value(metadata !{double* %Result}, i64 0, metadata !2106) #5, !dbg !2108
  %16 = load double* %Result, align 8, !dbg !2109, !tbaa !1361
  %mul.i.i = fmul double %16, %16, !dbg !2109
  %arrayidx2.i.i = getelementptr inbounds double* %Result, i64 1, !dbg !2109
  %17 = load double* %arrayidx2.i.i, align 8, !dbg !2109, !tbaa !1361
  %mul4.i.i = fmul double %17, %17, !dbg !2109
  %add.i.i = fadd double %mul.i.i, %mul4.i.i, !dbg !2109
  %arrayidx5.i.i = getelementptr inbounds double* %Result, i64 2, !dbg !2109
  %18 = load double* %arrayidx5.i.i, align 8, !dbg !2109, !tbaa !1361
  %mul7.i.i = fmul double %18, %18, !dbg !2109
  %add8.i.i = fadd double %add.i.i, %mul7.i.i, !dbg !2109
  %call.i.i = call double @sqrt(double %add8.i.i) #9, !dbg !2109
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2110) #5, !dbg !2109
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2111) #5, !dbg !2108
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2112) #5, !dbg !2113
  call void @llvm.dbg.value(metadata !{double* %Result}, i64 0, metadata !2114) #5, !dbg !2115
  call void @llvm.dbg.value(metadata !{double* %Result}, i64 0, metadata !2116) #5, !dbg !2115
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !2117) #5, !dbg !2115
  %div.i.i = fdiv double 1.000000e+00, %call.i.i, !dbg !2118
  call void @llvm.dbg.value(metadata !{double %div.i.i}, i64 0, metadata !2119) #5, !dbg !2118
  %19 = load double* %Result, align 8, !dbg !2120, !tbaa !1361
  %mul.i2.i = fmul double %div.i.i, %19, !dbg !2120
  store double %mul.i2.i, double* %Result, align 8, !dbg !2120, !tbaa !1361
  %20 = load double* %arrayidx2.i.i, align 8, !dbg !2121, !tbaa !1361
  %mul3.i.i = fmul double %div.i.i, %20, !dbg !2121
  store double %mul3.i.i, double* %arrayidx2.i.i, align 8, !dbg !2121, !tbaa !1361
  %21 = load double* %arrayidx5.i.i, align 8, !dbg !2122, !tbaa !1361
  %mul6.i.i = fmul double %div.i.i, %21, !dbg !2122
  store double %mul6.i.i, double* %arrayidx5.i.i, align 8, !dbg !2122, !tbaa !1361
  ret void, !dbg !2123
}
