define internal fastcc void @_ZN3povL12sample_mediaEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEidPfS9_iS1_i(%"struct.pov::Light_List_Struct"* nocapture %light_list, i32 %global_light_list_cnt, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** nocapture %Media_List, %"struct.pov::Media_Interval_Struct"* nocapture %Interval, i32 %light_ray, double %d0, float* nocapture %SampCol, float* nocapture %SampOptDepth, i32 %sample_method, %"struct.pov::Light_List_Struct"* nocapture %local_light_list, i32 %local_light_list_cnt) #0 {
entry:
  %Local_Color.i = alloca [5 x float], align 16
  %len = alloca double, align 8
  %P = alloca [3 x double], align 16
  %H = alloca [3 x double], align 16
  %Light_Colour = alloca [5 x float], align 16
  %Te = alloca [5 x float], align 16
  %Sc = alloca [5 x float], align 16
  %Light_Ray = alloca %"struct.pov::Ray_Struct", align 8
  %tempr = alloca double, align 8
  %TempCol = alloca [5 x float], align 16
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %light_list}, i64 0, metadata !1295), !dbg !1802
  call void @llvm.dbg.value(metadata !{i32 %global_light_list_cnt}, i64 0, metadata !1296), !dbg !1802
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1297), !dbg !1802
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %Media_List}, i64 0, metadata !1298), !dbg !1802
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Interval_Struct"* %Interval}, i64 0, metadata !1299), !dbg !1802
  call void @llvm.dbg.value(metadata !{i32 %light_ray}, i64 0, metadata !1300), !dbg !1802
  call void @llvm.dbg.value(metadata !{double %d0}, i64 0, metadata !1301), !dbg !1802
  call void @llvm.dbg.value(metadata !{float* %SampCol}, i64 0, metadata !1302), !dbg !1803
  call void @llvm.dbg.value(metadata !{float* %SampOptDepth}, i64 0, metadata !1303), !dbg !1803
  call void @llvm.dbg.value(metadata !{i32 %sample_method}, i64 0, metadata !1304), !dbg !1803
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %local_light_list}, i64 0, metadata !1305), !dbg !1803
  call void @llvm.dbg.value(metadata !{i32 %local_light_list_cnt}, i64 0, metadata !1306), !dbg !1803
  call void @llvm.dbg.declare(metadata !{double* %len}, metadata !1311), !dbg !1804
  call void @llvm.dbg.declare(metadata !{[3 x double]* %P}, metadata !1312), !dbg !1805
  call void @llvm.dbg.declare(metadata !{[3 x double]* %H}, metadata !1313), !dbg !1805
  call void @llvm.dbg.declare(metadata !1559, metadata !1314), !dbg !1806
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Light_Colour}, metadata !1315), !dbg !1806
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Te}, metadata !1316), !dbg !1806
  call void @llvm.dbg.declare(metadata !1559, metadata !1317), !dbg !1807
  call void @llvm.dbg.declare(metadata !1559, metadata !1318), !dbg !1807
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Sc}, metadata !1319), !dbg !1807
  %0 = bitcast %"struct.pov::Ray_Struct"* %Light_Ray to i8*, !dbg !1808
  call void @llvm.lifetime.start(i64 856, i8* %0) #4, !dbg !1808
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Ray_Struct"* %Light_Ray}, metadata !1320), !dbg !1808
  tail call void @llvm.dbg.value(metadata !1809, i64 0, metadata !1810), !dbg !1812
  %1 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 99), align 8, !dbg !1813, !tbaa !1566
  %inc.i = add nsw i64 %1, 1, !dbg !1813
  store i64 %inc.i, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 99), align 8, !dbg !1813, !tbaa !1566
  %ds = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 4, !dbg !1814
  %2 = load double* %ds, align 8, !dbg !1814, !tbaa !1601
  %mul = fmul double %2, %d0, !dbg !1814
  call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1301), !dbg !1814
  %s0 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 2, !dbg !1815
  %3 = load double* %s0, align 8, !dbg !1815, !tbaa !1601
  %add = fadd double %3, %mul, !dbg !1815
  call void @llvm.dbg.value(metadata !{double %add}, i64 0, metadata !1310), !dbg !1815
  %arraydecay = getelementptr inbounds [3 x double]* %H, i64 0, i64 0, !dbg !1816
  %arraydecay1 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 0, !dbg !1816
  %arraydecay2 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !1816
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !1817), !dbg !1818
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay1}, i64 0, metadata !1819), !dbg !1818
  tail call void @llvm.dbg.value(metadata !{double %add}, i64 0, metadata !1820), !dbg !1818
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay2}, i64 0, metadata !1821), !dbg !1818
  %4 = load double* %arraydecay1, align 8, !dbg !1822, !tbaa !1601
  %5 = load double* %arraydecay2, align 8, !dbg !1822, !tbaa !1601
  %mul.i517 = fmul double %add, %5, !dbg !1822
  %add.i = fadd double %4, %mul.i517, !dbg !1822
  store double %add.i, double* %arraydecay, align 16, !dbg !1822, !tbaa !1601
  %arrayidx3.i518 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 1, !dbg !1823
  %6 = load double* %arrayidx3.i518, align 8, !dbg !1823, !tbaa !1601
  %arrayidx4.i519 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !1823
  %7 = load double* %arrayidx4.i519, align 8, !dbg !1823, !tbaa !1601
  %mul5.i = fmul double %add, %7, !dbg !1823
  %add6.i = fadd double %6, %mul5.i, !dbg !1823
  %arrayidx7.i520 = getelementptr inbounds [3 x double]* %H, i64 0, i64 1, !dbg !1823
  store double %add6.i, double* %arrayidx7.i520, align 8, !dbg !1823, !tbaa !1601
  %arrayidx8.i521 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 2, !dbg !1824
  %8 = load double* %arrayidx8.i521, align 8, !dbg !1824, !tbaa !1601
  %arrayidx9.i522 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !1824
  %9 = load double* %arrayidx9.i522, align 8, !dbg !1824, !tbaa !1601
  %mul10.i = fmul double %add, %9, !dbg !1824
  %add11.i = fadd double %8, %mul10.i, !dbg !1824
  %arrayidx12.i = getelementptr inbounds [3 x double]* %H, i64 0, i64 2, !dbg !1824
  store double %add11.i, double* %arrayidx12.i, align 16, !dbg !1824, !tbaa !1601
  tail call void @llvm.dbg.value(metadata !1670, i64 0, metadata !1825), !dbg !1827
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1828), !dbg !1827
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1829), !dbg !1827
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1830), !dbg !1827
  tail call void @llvm.dbg.value(metadata !1670, i64 0, metadata !1831), !dbg !1833
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1834), !dbg !1833
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1835), !dbg !1833
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1836), !dbg !1833
  %arraydecay5 = getelementptr inbounds [5 x float]* %Sc, i64 0, i64 0, !dbg !1837
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay5}, i64 0, metadata !1838), !dbg !1839
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1840), !dbg !1839
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1841), !dbg !1839
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1842), !dbg !1839
  %arrayidx1.i546 = getelementptr inbounds [5 x float]* %Sc, i64 0, i64 1, !dbg !1843
  %arrayidx2.i547 = getelementptr inbounds [5 x float]* %Sc, i64 0, i64 2, !dbg !1844
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1309), !dbg !1845
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %Media_List}, i64 0, metadata !1321), !dbg !1846
  %10 = bitcast [5 x float]* %Sc to i8*, !dbg !1846
  call void @llvm.memset.p0i8.i64(i8* %10, i8 0, i64 20, i32 16, i1 false), !dbg !1843
  %11 = load %"struct.pov::Media_Struct"** %Media_List, align 8, !dbg !1846, !tbaa !1570
  %cmp645 = icmp eq %"struct.pov::Media_Struct"* %11, null, !dbg !1846
  br i1 %cmp645, label %for.end65, label %for.cond6.preheader.lr.ph, !dbg !1846

for.cond6.preheader.lr.ph:                        ; preds = %entry
  %arraydecay9 = getelementptr inbounds [3 x double]* %P, i64 0, i64 0, !dbg !1848
  %arrayidx3.i551 = getelementptr inbounds [3 x double]* %P, i64 0, i64 1, !dbg !1852
  %arrayidx5.i553 = getelementptr inbounds [3 x double]* %P, i64 0, i64 2, !dbg !1854
  %12 = bitcast [5 x float]* %Local_Color.i to i8*, !dbg !1855
  %tobool = icmp eq i32 %light_ray, 0, !dbg !1857
  %arraydecay.i = getelementptr inbounds [5 x float]* %Local_Color.i, i64 0, i64 0, !dbg !1858
  %arrayidx1.i14.i = getelementptr inbounds [5 x float]* %Local_Color.i, i64 0, i64 1, !dbg !1860
  %arrayidx2.i15.i = getelementptr inbounds [5 x float]* %Local_Color.i, i64 0, i64 2, !dbg !1861
  br label %for.cond6.preheader, !dbg !1846

for.cond6.preheader:                              ; preds = %for.cond6.preheader.lr.ph, %for.inc64
  %13 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %43, %for.inc64 ]
  %14 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %44, %for.inc64 ]
  %15 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %45, %for.inc64 ]
  %16 = phi %"struct.pov::Media_Struct"* [ %11, %for.cond6.preheader.lr.ph ], [ %46, %for.inc64 ]
  %use_scattering.0653 = phi i32 [ 0, %for.cond6.preheader.lr.ph ], [ %use_scattering.1.lcssa, %for.inc64 ]
  %Tmp.0652 = phi %"struct.pov::Media_Struct"** [ %Media_List, %for.cond6.preheader.lr.ph ], [ %incdec.ptr, %for.inc64 ]
  %Ex.sroa.0.0.load558582651 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %Ex.sroa.0.0.load558581.lcssa, %for.inc64 ]
  %Ex.sroa.1.4.load560584650 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %Ex.sroa.1.4.load560583.lcssa, %for.inc64 ]
  %Ex.sroa.2.8.load562586649 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %Ex.sroa.2.8.load562585.lcssa, %for.inc64 ]
  %Em.sroa.0.0.load563589648 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %Em.sroa.0.0.load563588.lcssa, %for.inc64 ]
  %Em.sroa.1.4.load564592647 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %Em.sroa.1.4.load564591.lcssa, %for.inc64 ]
  %Em.sroa.2.8.load565595646 = phi float [ 0.000000e+00, %for.cond6.preheader.lr.ph ], [ %Em.sroa.2.8.load565594.lcssa, %for.inc64 ]
  %cmp7629 = icmp eq %"struct.pov::Media_Struct"* %16, null, !dbg !1862
  br i1 %cmp7629, label %for.inc64, label %for.body8, !dbg !1862

for.body8:                                        ; preds = %if.end, %for.cond6.preheader
  %17 = phi float [ %13, %for.cond6.preheader ], [ %38, %if.end ]
  %18 = phi float [ %14, %for.cond6.preheader ], [ %39, %if.end ]
  %19 = phi float [ %15, %for.cond6.preheader ], [ %40, %if.end ]
  %use_scattering.1637 = phi i32 [ %use_scattering.0653, %for.cond6.preheader ], [ %or, %if.end ]
  %Local.0636 = phi %"struct.pov::Media_Struct"* [ %16, %for.cond6.preheader ], [ %42, %if.end ]
  %Ex.sroa.0.0.load558581635 = phi float [ %Ex.sroa.0.0.load558582651, %for.cond6.preheader ], [ %add16, %if.end ]
  %Ex.sroa.1.4.load560583634 = phi float [ %Ex.sroa.1.4.load560584650, %for.cond6.preheader ], [ %add22, %if.end ]
  %Ex.sroa.2.8.load562585633 = phi float [ %Ex.sroa.2.8.load562586649, %for.cond6.preheader ], [ %add28, %if.end ]
  %Em.sroa.0.0.load563588632 = phi float [ %Em.sroa.0.0.load563589648, %for.cond6.preheader ], [ %Em.sroa.0.0.load563587, %if.end ]
  %Em.sroa.1.4.load564591631 = phi float [ %Em.sroa.1.4.load564592647, %for.cond6.preheader ], [ %Em.sroa.1.4.load564590, %if.end ]
  %Em.sroa.2.8.load565594630 = phi float [ %Em.sroa.2.8.load565595646, %for.cond6.preheader ], [ %Em.sroa.2.8.load565593, %if.end ]
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay9}, i64 0, metadata !1863), !dbg !1864
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !1865), !dbg !1864
  %20 = load double* %arraydecay, align 16, !dbg !1866, !tbaa !1601
  store double %20, double* %arraydecay9, align 16, !dbg !1866, !tbaa !1601
  %21 = load double* %arrayidx7.i520, align 8, !dbg !1852, !tbaa !1601
  store double %21, double* %arrayidx3.i551, align 8, !dbg !1852, !tbaa !1601
  %22 = load double* %arrayidx12.i, align 16, !dbg !1854, !tbaa !1601
  store double %22, double* %arrayidx5.i553, align 16, !dbg !1854, !tbaa !1601
  call void @llvm.lifetime.start(i64 20, i8* %12), !dbg !1855
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"* %Local.0636}, i64 0, metadata !1867), !dbg !1855
  call void @llvm.dbg.value(metadata !{double* %arraydecay9}, i64 0, metadata !1868), !dbg !1855
  call void @llvm.dbg.value(metadata !1670, i64 0, metadata !1869), !dbg !1855
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Local_Color.i}, metadata !1394), !dbg !1870
  %Density.i = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 24, !dbg !1871
  %23 = load %"struct.pov::Pigment_Struct"** %Density.i, align 8, !dbg !1871, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Pigment_Struct"* %23}, i64 0, metadata !1872), !dbg !1871
  call void @llvm.dbg.value(metadata !1670, i64 0, metadata !1873), !dbg !1875
  call void @llvm.dbg.value(metadata !1876, i64 0, metadata !1877), !dbg !1875
  call void @llvm.dbg.value(metadata !1876, i64 0, metadata !1878), !dbg !1875
  call void @llvm.dbg.value(metadata !1876, i64 0, metadata !1879), !dbg !1875
  %cmp18.i = icmp eq %"struct.pov::Pigment_Struct"* %23, null, !dbg !1880
  br i1 %cmp18.i, label %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit, label %while.body.i, !dbg !1880

while.body.i:                                     ; preds = %for.body8, %while.body.i
  %C0.sroa.2.8.load574601 = phi float [ %mul8.i, %while.body.i ], [ 1.000000e+00, %for.body8 ], !dbg !1881
  %C0.sroa.1.4.load571599 = phi float [ %mul5.i545, %while.body.i ], [ 1.000000e+00, %for.body8 ], !dbg !1881
  %C0.sroa.0.0.load568597 = phi float [ %mul.i544, %while.body.i ], [ 1.000000e+00, %for.body8 ], !dbg !1881
  %Temp.019.i = phi %"struct.pov::Pigment_Struct"* [ %28, %while.body.i ], [ %23, %for.body8 ]
  call void @llvm.dbg.value(metadata !{float* %arraydecay.i}, i64 0, metadata !1882), !dbg !1881
  call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1883), !dbg !1881
  call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1884), !dbg !1881
  call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1885), !dbg !1881
  call void @llvm.memset.p0i8.i64(i8* %12, i8 0, i64 20, i32 16, i1 false), !dbg !1860
  %call.i = call i32 @_ZN3pov15Compute_PigmentEPfPNS_14Pigment_StructEPdPNS_10istk_entryE(float* %arraydecay.i, %"struct.pov::Pigment_Struct"* %Temp.019.i, double* %arraydecay9, %"struct.pov::istk_entry"* null) #7, !dbg !1886
  %24 = load float* %arraydecay.i, align 16, !dbg !1887, !tbaa !1621
  %mul.i544 = fmul float %C0.sroa.0.0.load568597, %24, !dbg !1887
  %25 = load float* %arrayidx1.i14.i, align 4, !dbg !1888, !tbaa !1621
  %mul5.i545 = fmul float %C0.sroa.1.4.load571599, %25, !dbg !1888
  %26 = load float* %arrayidx2.i15.i, align 8, !dbg !1889, !tbaa !1621
  %mul8.i = fmul float %C0.sroa.2.8.load574601, %26, !dbg !1889
  %Next.i = getelementptr inbounds %"struct.pov::Pigment_Struct"* %Temp.019.i, i64 0, i32 8, !dbg !1890
  %27 = load %"struct.pov::Pattern_Struct"** %Next.i, align 8, !dbg !1890, !tbaa !1570
  %28 = bitcast %"struct.pov::Pattern_Struct"* %27 to %"struct.pov::Pigment_Struct"*, !dbg !1890
  call void @llvm.dbg.value(metadata !{%"struct.pov::Pigment_Struct"* %28}, i64 0, metadata !1872), !dbg !1890
  %cmp.i = icmp eq %"struct.pov::Pattern_Struct"* %27, null, !dbg !1880
  br i1 %cmp.i, label %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit, label %while.body.i, !dbg !1880

_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit: ; preds = %while.body.i, %for.body8
  %C0.sroa.2.8.load574600 = phi float [ 1.000000e+00, %for.body8 ], [ %mul8.i, %while.body.i ]
  %C0.sroa.1.4.load571598 = phi float [ 1.000000e+00, %for.body8 ], [ %mul5.i545, %while.body.i ]
  %C0.sroa.0.0.load568596 = phi float [ 1.000000e+00, %for.body8 ], [ %mul.i544, %while.body.i ]
  call void @llvm.lifetime.end(i64 20, i8* %12), !dbg !1891
  %arrayidx13 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 15, i64 0, !dbg !1892
  %29 = load float* %arrayidx13, align 4, !dbg !1892, !tbaa !1621
  %mul14 = fmul float %C0.sroa.0.0.load568596, %29, !dbg !1892
  %add16 = fadd float %Ex.sroa.0.0.load558581635, %mul14, !dbg !1892
  %arrayidx19 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 15, i64 1, !dbg !1893
  %30 = load float* %arrayidx19, align 4, !dbg !1893, !tbaa !1621
  %mul20 = fmul float %C0.sroa.1.4.load571598, %30, !dbg !1893
  %add22 = fadd float %Ex.sroa.1.4.load560583634, %mul20, !dbg !1893
  %arrayidx25 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 15, i64 2, !dbg !1894
  %31 = load float* %arrayidx25, align 4, !dbg !1894, !tbaa !1621
  %mul26 = fmul float %C0.sroa.2.8.load574600, %31, !dbg !1894
  %add28 = fadd float %Ex.sroa.2.8.load562585633, %mul26, !dbg !1894
  br i1 %tobool, label %if.then, label %if.end, !dbg !1857

if.then:                                          ; preds = %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit
  %arrayidx30 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 14, i64 0, !dbg !1895
  %32 = load float* %arrayidx30, align 4, !dbg !1895, !tbaa !1621
  %mul31 = fmul float %C0.sroa.0.0.load568596, %32, !dbg !1895
  %add33 = fadd float %Em.sroa.0.0.load563588632, %mul31, !dbg !1895
  %arrayidx36 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 14, i64 1, !dbg !1897
  %33 = load float* %arrayidx36, align 4, !dbg !1897, !tbaa !1621
  %mul37 = fmul float %C0.sroa.1.4.load571598, %33, !dbg !1897
  %add39 = fadd float %Em.sroa.1.4.load564591631, %mul37, !dbg !1897
  %arrayidx42 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 14, i64 2, !dbg !1898
  %34 = load float* %arrayidx42, align 4, !dbg !1898, !tbaa !1621
  %mul43 = fmul float %C0.sroa.2.8.load574600, %34, !dbg !1898
  %add45 = fadd float %Em.sroa.2.8.load565594630, %mul43, !dbg !1898
  %arrayidx47 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 16, i64 0, !dbg !1899
  %35 = load float* %arrayidx47, align 4, !dbg !1899, !tbaa !1621
  %mul48 = fmul float %C0.sroa.0.0.load568596, %35, !dbg !1899
  %add50 = fadd float %19, %mul48, !dbg !1899
  store float %add50, float* %arraydecay5, align 16, !dbg !1899, !tbaa !1621
  %arrayidx53 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 16, i64 1, !dbg !1900
  %36 = load float* %arrayidx53, align 4, !dbg !1900, !tbaa !1621
  %mul54 = fmul float %C0.sroa.1.4.load571598, %36, !dbg !1900
  %add56 = fadd float %18, %mul54, !dbg !1900
  store float %add56, float* %arrayidx1.i546, align 4, !dbg !1900, !tbaa !1621
  %arrayidx59 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 16, i64 2, !dbg !1901
  %37 = load float* %arrayidx59, align 4, !dbg !1901, !tbaa !1621
  %mul60 = fmul float %C0.sroa.2.8.load574600, %37, !dbg !1901
  %add62 = fadd float %17, %mul60, !dbg !1901
  store float %add62, float* %arrayidx2.i547, align 8, !dbg !1901, !tbaa !1621
  br label %if.end, !dbg !1902

if.end:                                           ; preds = %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit, %if.then
  %38 = phi float [ %17, %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit ], [ %add62, %if.then ]
  %39 = phi float [ %18, %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit ], [ %add56, %if.then ]
  %40 = phi float [ %19, %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit ], [ %add50, %if.then ]
  %Em.sroa.2.8.load565593 = phi float [ %Em.sroa.2.8.load565594630, %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit ], [ %add45, %if.then ]
  %Em.sroa.1.4.load564590 = phi float [ %Em.sroa.1.4.load564591631, %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit ], [ %add39, %if.then ]
  %Em.sroa.0.0.load563587 = phi float [ %Em.sroa.0.0.load563588632, %_ZN3povL24evaluate_density_patternEPNS_12Media_StructEPdPf.exit ], [ %add33, %if.then ]
  %use_scattering63 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 12, !dbg !1903
  %41 = load i32* %use_scattering63, align 4, !dbg !1903, !tbaa !1580
  %or = or i32 %41, %use_scattering.1637, !dbg !1903
  call void @llvm.dbg.value(metadata !{i32 %or}, i64 0, metadata !1309), !dbg !1903
  %Next_Media = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0636, i64 0, i32 25, !dbg !1862
  %42 = load %"struct.pov::Media_Struct"** %Next_Media, align 8, !dbg !1862, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"* %42}, i64 0, metadata !1322), !dbg !1862
  %cmp7 = icmp eq %"struct.pov::Media_Struct"* %42, null, !dbg !1862
  br i1 %cmp7, label %for.inc64, label %for.body8, !dbg !1862

for.inc64:                                        ; preds = %if.end, %for.cond6.preheader
  %43 = phi float [ %13, %for.cond6.preheader ], [ %38, %if.end ]
  %44 = phi float [ %14, %for.cond6.preheader ], [ %39, %if.end ]
  %45 = phi float [ %15, %for.cond6.preheader ], [ %40, %if.end ]
  %use_scattering.1.lcssa = phi i32 [ %use_scattering.0653, %for.cond6.preheader ], [ %or, %if.end ]
  %Ex.sroa.0.0.load558581.lcssa = phi float [ %Ex.sroa.0.0.load558582651, %for.cond6.preheader ], [ %add16, %if.end ]
  %Ex.sroa.1.4.load560583.lcssa = phi float [ %Ex.sroa.1.4.load560584650, %for.cond6.preheader ], [ %add22, %if.end ]
  %Ex.sroa.2.8.load562585.lcssa = phi float [ %Ex.sroa.2.8.load562586649, %for.cond6.preheader ], [ %add28, %if.end ]
  %Em.sroa.0.0.load563588.lcssa = phi float [ %Em.sroa.0.0.load563589648, %for.cond6.preheader ], [ %Em.sroa.0.0.load563587, %if.end ]
  %Em.sroa.1.4.load564591.lcssa = phi float [ %Em.sroa.1.4.load564592647, %for.cond6.preheader ], [ %Em.sroa.1.4.load564590, %if.end ]
  %Em.sroa.2.8.load565594.lcssa = phi float [ %Em.sroa.2.8.load565595646, %for.cond6.preheader ], [ %Em.sroa.2.8.load565593, %if.end ]
  %incdec.ptr = getelementptr inbounds %"struct.pov::Media_Struct"** %Tmp.0652, i64 1, !dbg !1846
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %incdec.ptr}, i64 0, metadata !1321), !dbg !1846
  %46 = load %"struct.pov::Media_Struct"** %incdec.ptr, align 8, !dbg !1846, !tbaa !1570
  %cmp = icmp eq %"struct.pov::Media_Struct"* %46, null, !dbg !1846
  br i1 %cmp, label %for.cond.for.end65_crit_edge, label %for.cond6.preheader, !dbg !1846

for.cond.for.end65_crit_edge:                     ; preds = %for.inc64
  %.pre = load double* %ds, align 8, !dbg !1904, !tbaa !1601
  br label %for.end65, !dbg !1846

for.end65:                                        ; preds = %for.cond.for.end65_crit_edge, %entry
  %47 = phi double [ %.pre, %for.cond.for.end65_crit_edge ], [ %2, %entry ]
  %use_scattering.0.lcssa = phi i32 [ %use_scattering.1.lcssa, %for.cond.for.end65_crit_edge ], [ 0, %entry ]
  %Ex.sroa.0.0.load558582.lcssa = phi float [ %Ex.sroa.0.0.load558581.lcssa, %for.cond.for.end65_crit_edge ], [ 0.000000e+00, %entry ]
  %Ex.sroa.1.4.load560584.lcssa = phi float [ %Ex.sroa.1.4.load560583.lcssa, %for.cond.for.end65_crit_edge ], [ 0.000000e+00, %entry ]
  %Ex.sroa.2.8.load562586.lcssa = phi float [ %Ex.sroa.2.8.load562585.lcssa, %for.cond.for.end65_crit_edge ], [ 0.000000e+00, %entry ]
  %Em.sroa.0.0.load563589.lcssa = phi float [ %Em.sroa.0.0.load563588.lcssa, %for.cond.for.end65_crit_edge ], [ 0.000000e+00, %entry ]
  %Em.sroa.1.4.load564592.lcssa = phi float [ %Em.sroa.1.4.load564591.lcssa, %for.cond.for.end65_crit_edge ], [ 0.000000e+00, %entry ]
  %Em.sroa.2.8.load565595.lcssa = phi float [ %Em.sroa.2.8.load565594.lcssa, %for.cond.for.end65_crit_edge ], [ 0.000000e+00, %entry ]
  %conv = fpext float %Ex.sroa.0.0.load558582.lcssa to double, !dbg !1904
  %mul68 = fmul double %conv, %47, !dbg !1904
  %conv69 = fptrunc double %mul68 to float, !dbg !1904
  store float %conv69, float* %SampOptDepth, align 4, !dbg !1904, !tbaa !1621
  %conv72 = fpext float %Ex.sroa.1.4.load560584.lcssa to double, !dbg !1905
  %mul74 = fmul double %conv72, %47, !dbg !1905
  %conv75 = fptrunc double %mul74 to float, !dbg !1905
  %arrayidx76 = getelementptr inbounds float* %SampOptDepth, i64 1, !dbg !1905
  store float %conv75, float* %arrayidx76, align 4, !dbg !1905, !tbaa !1621
  %conv78 = fpext float %Ex.sroa.2.8.load562586.lcssa to double, !dbg !1906
  %mul80 = fmul double %conv78, %47, !dbg !1906
  %conv81 = fptrunc double %mul80 to float, !dbg !1906
  %arrayidx82 = getelementptr inbounds float* %SampOptDepth, i64 2, !dbg !1906
  store float %conv81, float* %arrayidx82, align 4, !dbg !1906, !tbaa !1621
  %cmp83 = icmp ne i32 %sample_method, 3, !dbg !1907
  br i1 %cmp83, label %if.then84, label %if.end96, !dbg !1907

if.then84:                                        ; preds = %for.end65
  %arrayidx86 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 5, i64 0, !dbg !1908
  %48 = load float* %arrayidx86, align 4, !dbg !1908, !tbaa !1621
  %add87 = fadd float %conv69, %48, !dbg !1908
  store float %add87, float* %arrayidx86, align 4, !dbg !1908, !tbaa !1621
  %49 = load float* %arrayidx76, align 4, !dbg !1910, !tbaa !1621
  %arrayidx90 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 5, i64 1, !dbg !1910
  %50 = load float* %arrayidx90, align 4, !dbg !1910, !tbaa !1621
  %add91 = fadd float %49, %50, !dbg !1910
  store float %add91, float* %arrayidx90, align 4, !dbg !1910, !tbaa !1621
  %51 = load float* %arrayidx82, align 4, !dbg !1911, !tbaa !1621
  %arrayidx94 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 5, i64 2, !dbg !1911
  %52 = load float* %arrayidx94, align 4, !dbg !1911, !tbaa !1621
  %add95 = fadd float %51, %52, !dbg !1911
  store float %add95, float* %arrayidx94, align 4, !dbg !1911, !tbaa !1621
  br label %if.end96, !dbg !1912

if.end96:                                         ; preds = %if.then84, %for.end65
  %arrayidx98 = getelementptr inbounds [5 x float]* %Te, i64 0, i64 0, !dbg !1913
  store float %Em.sroa.0.0.load563589.lcssa, float* %arrayidx98, align 16, !dbg !1913, !tbaa !1621
  %arrayidx100 = getelementptr inbounds [5 x float]* %Te, i64 0, i64 1, !dbg !1914
  store float %Em.sroa.1.4.load564592.lcssa, float* %arrayidx100, align 4, !dbg !1914, !tbaa !1621
  %arrayidx102 = getelementptr inbounds [5 x float]* %Te, i64 0, i64 2, !dbg !1915
  store float %Em.sroa.2.8.load565595.lcssa, float* %arrayidx102, align 8, !dbg !1915, !tbaa !1621
  %tobool103 = icmp ne i32 %light_ray, 0, !dbg !1916
  %tobool104 = icmp eq i32 %use_scattering.0.lcssa, 0, !dbg !1916
  %or.cond510 = or i1 %tobool103, %tobool104, !dbg !1916
  br i1 %or.cond510, label %if.end203, label %land.lhs.true105, !dbg !1916

land.lhs.true105:                                 ; preds = %if.end96
  %lit = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 0, !dbg !1916
  %53 = load i32* %lit, align 4, !dbg !1916, !tbaa !1580
  %tobool106 = icmp eq i32 %53, 0, !dbg !1916
  br i1 %tobool106, label %if.end203, label %if.then107, !dbg !1916

if.then107:                                       ; preds = %land.lhs.true105
  %54 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !1917, !tbaa !1580
  %tobool108 = icmp eq i32 %54, 0, !dbg !1917
  br i1 %tobool108, label %if.then109, label %for.cond133.preheader, !dbg !1917

if.then109:                                       ; preds = %if.then107
  store i32 10485760, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 26), align 4, !dbg !1919, !tbaa !1580
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !1323), !dbg !1921
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1308), !dbg !1922
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %Media_List}, i64 0, metadata !1321), !dbg !1922
  %55 = load %"struct.pov::Media_Struct"** %Media_List, align 8, !dbg !1922, !tbaa !1570
  %cmp111625 = icmp eq %"struct.pov::Media_Struct"* %55, null, !dbg !1922
  br i1 %cmp111625, label %if.then127, label %for.cond113.preheader, !dbg !1922

for.cond113.preheader:                            ; preds = %if.then109, %for.inc123
  %56 = phi %"struct.pov::Media_Struct"* [ %59, %for.inc123 ], [ %55, %if.then109 ]
  %ignore_photons.0627 = phi i32 [ %ignore_photons.1, %for.inc123 ], [ 1, %if.then109 ]
  %Tmp.1626 = phi %"struct.pov::Media_Struct"** [ %incdec.ptr124, %for.inc123 ], [ %Media_List, %if.then109 ]
  %cmp114622 = icmp eq %"struct.pov::Media_Struct"* %56, null, !dbg !1924
  br i1 %cmp114622, label %for.inc123, label %for.body115, !dbg !1924

for.body115:                                      ; preds = %for.cond113.preheader, %for.inc120
  %Local.1623 = phi %"struct.pov::Media_Struct"* [ %58, %for.inc120 ], [ %56, %for.cond113.preheader ]
  %ignore_photons116 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.1623, i64 0, i32 23, !dbg !1926
  %57 = load i32* %ignore_photons116, align 4, !dbg !1926, !tbaa !1580
  %tobool117 = icmp eq i32 %57, 0, !dbg !1926
  br i1 %tobool117, label %for.inc123, label %for.inc120, !dbg !1926

for.inc120:                                       ; preds = %for.body115
  %Next_Media121 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.1623, i64 0, i32 25, !dbg !1924
  %58 = load %"struct.pov::Media_Struct"** %Next_Media121, align 8, !dbg !1924, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"* %58}, i64 0, metadata !1322), !dbg !1924
  %cmp114 = icmp eq %"struct.pov::Media_Struct"* %58, null, !dbg !1924
  br i1 %cmp114, label %for.inc123, label %for.body115, !dbg !1924

for.inc123:                                       ; preds = %for.inc120, %for.body115, %for.cond113.preheader
  %ignore_photons.1 = phi i32 [ %ignore_photons.0627, %for.cond113.preheader ], [ 0, %for.body115 ], [ %ignore_photons.0627, %for.inc120 ]
  %incdec.ptr124 = getelementptr inbounds %"struct.pov::Media_Struct"** %Tmp.1626, i64 1, !dbg !1922
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %incdec.ptr124}, i64 0, metadata !1321), !dbg !1922
  %59 = load %"struct.pov::Media_Struct"** %incdec.ptr124, align 8, !dbg !1922, !tbaa !1570
  %cmp111 = icmp eq %"struct.pov::Media_Struct"* %59, null, !dbg !1922
  br i1 %cmp111, label %for.end125, label %for.cond113.preheader, !dbg !1922

for.end125:                                       ; preds = %for.inc123
  %tobool126 = icmp eq i32 %ignore_photons.1, 0, !dbg !1927
  br i1 %tobool126, label %if.end131, label %if.then127, !dbg !1927

if.then127:                                       ; preds = %if.then109, %for.end125
  store i32 44040192, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 26), align 4, !dbg !1928, !tbaa !1580
  br label %if.end131, !dbg !1928

if.end131:                                        ; preds = %for.end125, %if.then127
  store %"struct.pov::Object_Struct"* null, %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 18), align 8, !dbg !1929, !tbaa !1570
  br label %for.cond133.preheader, !dbg !1930

for.cond133.preheader:                            ; preds = %if.then107, %if.end131
  %cmp134620 = icmp sgt i32 %global_light_list_cnt, 0, !dbg !1931
  br i1 %cmp134620, label %for.body135.lr.ph, label %for.cond165.preheader, !dbg !1931

for.body135.lr.ph:                                ; preds = %for.cond133.preheader
  %arraydecay153 = getelementptr inbounds [3 x double]* %P, i64 0, i64 0, !dbg !1933
  %arraydecay154 = getelementptr inbounds [5 x float]* %Light_Colour, i64 0, i64 0, !dbg !1933
  br label %for.body135, !dbg !1931

for.cond165.preheader:                            ; preds = %for.inc162, %for.cond133.preheader
  %cmp166618 = icmp sgt i32 %local_light_list_cnt, 0, !dbg !1936
  br i1 %cmp166618, label %for.body167.lr.ph, label %if.end203, !dbg !1936

for.body167.lr.ph:                                ; preds = %for.cond165.preheader
  %arraydecay190 = getelementptr inbounds [3 x double]* %P, i64 0, i64 0, !dbg !1938
  %arraydecay191 = getelementptr inbounds [5 x float]* %Light_Colour, i64 0, i64 0, !dbg !1938
  br label %for.body167, !dbg !1936

for.body135:                                      ; preds = %for.inc162, %for.body135.lr.ph
  %indvars.iv665 = phi i64 [ 0, %for.body135.lr.ph ], [ %indvars.iv.next666, %for.inc162 ]
  %active = getelementptr inbounds %"struct.pov::Light_List_Struct"* %light_list, i64 %indvars.iv665, i32 0, !dbg !1941
  %60 = load i8* %active, align 1, !dbg !1941, !tbaa !1942, !range !1943
  %tobool137 = icmp eq i8 %60, 0, !dbg !1941
  br i1 %tobool137, label %for.inc162, label %land.lhs.true138, !dbg !1941

land.lhs.true138:                                 ; preds = %for.body135
  %s0141 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %light_list, i64 %indvars.iv665, i32 1, !dbg !1941
  %61 = load double* %s0141, align 8, !dbg !1941, !tbaa !1601
  %cmp142 = fcmp ult double %add, %61, !dbg !1941
  br i1 %cmp142, label %for.inc162, label %land.lhs.true143, !dbg !1941

land.lhs.true143:                                 ; preds = %land.lhs.true138
  %s1 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %light_list, i64 %indvars.iv665, i32 2, !dbg !1941
  %62 = load double* %s1, align 8, !dbg !1941, !tbaa !1601
  %cmp146 = fcmp ugt double %add, %62, !dbg !1941
  br i1 %cmp146, label %for.inc162, label %if.then147, !dbg !1941

if.then147:                                       ; preds = %land.lhs.true143
  %Light = getelementptr inbounds %"struct.pov::Light_List_Struct"* %light_list, i64 %indvars.iv665, i32 3, !dbg !1944
  %63 = load %"struct.pov::Light_Source_Struct"** %Light, align 8, !dbg !1944, !tbaa !1570
  %Flags = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %63, i64 0, i32 13, !dbg !1944
  %64 = load i32* %Flags, align 4, !dbg !1944, !tbaa !1580
  store i32 %64, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !1944, !tbaa !1580
  %call = call i32 @_ZN3pov11Test_ShadowEPNS_19Light_Source_StructEPdPNS_10Ray_StructES4_S2_Pf(%"struct.pov::Light_Source_Struct"* %63, double* %len, %"struct.pov::Ray_Struct"* %Light_Ray, %"struct.pov::Ray_Struct"* %Ray, double* %arraydecay153, float* %arraydecay154) #7, !dbg !1933
  %tobool155 = icmp eq i32 %call, 0, !dbg !1933
  br i1 %tobool155, label %if.then156, label %for.inc162, !dbg !1933

if.then156:                                       ; preds = %if.then147
  call fastcc void @_ZN3povL22scattering_attenuationEPPNS_12Media_StructEPfS3_S3_PNS_10Ray_StructES5_(%"struct.pov::Media_Struct"** %Media_List, float* %arrayidx98, float* %arraydecay5, float* %arraydecay154, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %Light_Ray) #7, !dbg !1945
  br label %for.inc162, !dbg !1947

for.inc162:                                       ; preds = %if.then147, %land.lhs.true143, %land.lhs.true138, %for.body135, %if.then156
  %indvars.iv.next666 = add i64 %indvars.iv665, 1, !dbg !1931
  %lftr.wideiv667 = trunc i64 %indvars.iv.next666 to i32, !dbg !1931
  %exitcond668 = icmp eq i32 %lftr.wideiv667, %global_light_list_cnt, !dbg !1931
  br i1 %exitcond668, label %for.cond165.preheader, label %for.body135, !dbg !1931

for.body167:                                      ; preds = %for.inc200, %for.body167.lr.ph
  %indvars.iv661 = phi i64 [ 0, %for.body167.lr.ph ], [ %indvars.iv.next662, %for.inc200 ]
  %active170 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list, i64 %indvars.iv661, i32 0, !dbg !1948
  %65 = load i8* %active170, align 1, !dbg !1948, !tbaa !1942, !range !1943
  %tobool171 = icmp eq i8 %65, 0, !dbg !1948
  br i1 %tobool171, label %for.inc200, label %land.lhs.true172, !dbg !1948

land.lhs.true172:                                 ; preds = %for.body167
  %s0175 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list, i64 %indvars.iv661, i32 1, !dbg !1948
  %66 = load double* %s0175, align 8, !dbg !1948, !tbaa !1601
  %cmp176 = fcmp ult double %add, %66, !dbg !1948
  br i1 %cmp176, label %for.inc200, label %land.lhs.true177, !dbg !1948

land.lhs.true177:                                 ; preds = %land.lhs.true172
  %s1180 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list, i64 %indvars.iv661, i32 2, !dbg !1948
  %67 = load double* %s1180, align 8, !dbg !1948, !tbaa !1601
  %cmp181 = fcmp ugt double %add, %67, !dbg !1948
  br i1 %cmp181, label %for.inc200, label %if.then182, !dbg !1948

if.then182:                                       ; preds = %land.lhs.true177
  %Light185 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list, i64 %indvars.iv661, i32 3, !dbg !1949
  %68 = load %"struct.pov::Light_Source_Struct"** %Light185, align 8, !dbg !1949, !tbaa !1570
  %Flags186 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %68, i64 0, i32 13, !dbg !1949
  %69 = load i32* %Flags186, align 4, !dbg !1949, !tbaa !1580
  store i32 %69, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !1949, !tbaa !1580
  %call192 = call i32 @_ZN3pov11Test_ShadowEPNS_19Light_Source_StructEPdPNS_10Ray_StructES4_S2_Pf(%"struct.pov::Light_Source_Struct"* %68, double* %len, %"struct.pov::Ray_Struct"* %Light_Ray, %"struct.pov::Ray_Struct"* %Ray, double* %arraydecay190, float* %arraydecay191) #7, !dbg !1938
  %tobool193 = icmp eq i32 %call192, 0, !dbg !1938
  br i1 %tobool193, label %if.then194, label %for.inc200, !dbg !1938

if.then194:                                       ; preds = %if.then182
  call fastcc void @_ZN3povL22scattering_attenuationEPPNS_12Media_StructEPfS3_S3_PNS_10Ray_StructES5_(%"struct.pov::Media_Struct"** %Media_List, float* %arrayidx98, float* %arraydecay5, float* %arraydecay191, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %Light_Ray) #7, !dbg !1950
  br label %for.inc200, !dbg !1952

for.inc200:                                       ; preds = %if.then182, %land.lhs.true177, %land.lhs.true172, %for.body167, %if.then194
  %indvars.iv.next662 = add i64 %indvars.iv661, 1, !dbg !1936
  %lftr.wideiv663 = trunc i64 %indvars.iv.next662 to i32, !dbg !1936
  %exitcond664 = icmp eq i32 %lftr.wideiv663, %local_light_list_cnt, !dbg !1936
  br i1 %exitcond664, label %if.end203, label %for.body167, !dbg !1936

if.end203:                                        ; preds = %for.cond165.preheader, %for.inc200, %land.lhs.true105, %if.end96
  br i1 %tobool103, label %if.end310, label %land.lhs.true205, !dbg !1953

land.lhs.true205:                                 ; preds = %if.end203
  %tobool206 = icmp ne i32 %use_scattering.0.lcssa, 0, !dbg !1953
  %70 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 2), align 4, !dbg !1954, !tbaa !1580
  %cmp208 = icmp sgt i32 %70, 0, !dbg !1954
  %or.cond397 = and i1 %tobool206, %cmp208, !dbg !1953
  br i1 %or.cond397, label %if.then209, label %if.end310, !dbg !1953

if.then209:                                       ; preds = %land.lhs.true205
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1329), !dbg !1955
  call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1332), !dbg !1957
  call void @llvm.dbg.declare(metadata !{double* %tempr}, metadata !1333), !dbg !1957
  call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1333), !dbg !1957
  store double 0.000000e+00, double* %tempr, align 8, !dbg !1957, !tbaa !1601
  call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1334), !dbg !1958
  call void @llvm.dbg.value(metadata !1959, i64 0, metadata !1335), !dbg !1960
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1336), !dbg !1961
  call void @llvm.dbg.declare(metadata !1559, metadata !1337), !dbg !1962
  call void @llvm.dbg.declare(metadata !{[5 x float]* %TempCol}, metadata !1338), !dbg !1962
  call void @llvm.dbg.value(metadata !{double %73}, i64 0, metadata !1331), !dbg !1963
  tail call void @llvm.dbg.value(metadata !1670, i64 0, metadata !1964), !dbg !1966
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1967), !dbg !1966
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1968), !dbg !1966
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1969), !dbg !1966
  call void @llvm.dbg.value(metadata !1970, i64 0, metadata !1324), !dbg !1971
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1329), !dbg !1972
  %71 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 9), align 8, !dbg !1973, !tbaa !1580
  call void @llvm.dbg.value(metadata !{i32 %71}, i64 0, metadata !1330), !dbg !1973
  %cmp212604 = icmp sgt i32 %71, -1, !dbg !1974
  %72 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 6), align 8, !dbg !1974, !tbaa !1580
  %cmp213605 = icmp sgt i32 %72, 0, !dbg !1974
  %or.cond511606 = and i1 %cmp212604, %cmp213605, !dbg !1974
  br i1 %or.cond511606, label %while.body, label %while.end, !dbg !1974

while.body:                                       ; preds = %if.then209
  %73 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29, i32 3), align 8, !dbg !1963, !tbaa !1601
  %arraydecay214 = getelementptr inbounds [5 x float]* %TempCol, i64 0, i64 0, !dbg !1975
  %arrayidx1.i528 = getelementptr inbounds [5 x float]* %TempCol, i64 0, i64 1, !dbg !1976
  %arrayidx2.i529 = getelementptr inbounds [5 x float]* %TempCol, i64 0, i64 2, !dbg !1977
  %arraydecay220 = getelementptr inbounds [5 x float]* %Light_Colour, i64 0, i64 0, !dbg !1978
  %arrayidx237 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 1, i64 1, !dbg !1979
  %arrayidx241 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 1, i64 0, !dbg !1980
  %arrayidx248 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 1, i64 2, !dbg !1981
  %arraydecay257 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 0, i64 0, !dbg !1982
  %arrayidx7.i525 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 0, i64 1, !dbg !1983
  %arrayidx12.i527 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 0, i64 2, !dbg !1985
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay214}, i64 0, metadata !1986), !dbg !1987
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1988), !dbg !1987
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1989), !dbg !1987
  tail call void @llvm.dbg.value(metadata !1716, i64 0, metadata !1990), !dbg !1987
  call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1333), !dbg !1991
  %74 = bitcast [5 x float]* %TempCol to i8*, !dbg !1991
  call void @llvm.memset.p0i8.i64(i8* %74, i8 0, i64 20, i32 16, i1 false), !dbg !1976
  call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1333), !dbg !1991
  store double 0.000000e+00, double* %tempr, align 8, !dbg !1991, !tbaa !1601
  %call216 = call i32 @_ZN3pov13gatherPhotonsEPddS0_S0_iPNS_17photon_map_structE(double* %arraydecay, double %73, double* %tempr, double* null, i32 0, %"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 29)) #7, !dbg !1992
  call void @llvm.dbg.value(metadata !{i32 %call216}, i64 0, metadata !1327), !dbg !1992
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1328), !dbg !1993
  %cmp218602 = icmp sgt i32 %call216, 0, !dbg !1993
  br i1 %cmp218602, label %for.body219, label %while.cond.while.end_crit_edge, !dbg !1993

for.body219:                                      ; preds = %while.body, %for.body219
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body219 ], [ 0, %while.body ]
  %75 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 21), align 8, !dbg !1978, !tbaa !1570
  %arrayidx222 = getelementptr inbounds %"struct.pov::photon_struct"** %75, i64 %indvars.iv, !dbg !1978
  %76 = load %"struct.pov::photon_struct"** %arrayidx222, align 8, !dbg !1978, !tbaa !1570
  %arraydecay223 = getelementptr inbounds %"struct.pov::photon_struct"* %76, i64 0, i32 1, i64 0, !dbg !1978
  call void @_ZN3pov17photonRgbe2colourEPfPh(float* %arraydecay220, i8* %arraydecay223) #7, !dbg !1978
  %77 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 21), align 8, !dbg !1994, !tbaa !1570
  %arrayidx225 = getelementptr inbounds %"struct.pov::photon_struct"** %77, i64 %indvars.iv, !dbg !1994
  %78 = load %"struct.pov::photon_struct"** %arrayidx225, align 8, !dbg !1994, !tbaa !1570
  %theta226 = getelementptr inbounds %"struct.pov::photon_struct"* %78, i64 0, i32 3, !dbg !1994
  %79 = load i8* %theta226, align 1, !dbg !1994, !tbaa !1567
  %conv227 = sext i8 %79 to i64, !dbg !1994
  %add228 = add i64 %conv227, 127, !dbg !1994
  %phi231 = getelementptr inbounds %"struct.pov::photon_struct"* %78, i64 0, i32 4, !dbg !1995
  %80 = load i8* %phi231, align 1, !dbg !1995, !tbaa !1567
  %conv232 = sext i8 %80 to i64, !dbg !1995
  %add233 = add i64 %conv232, 127, !dbg !1995
  %81 = load double** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 20), align 8, !dbg !1979, !tbaa !1570
  %arrayidx235 = getelementptr inbounds double* %81, i64 %add228, !dbg !1979
  %82 = load double* %arrayidx235, align 8, !dbg !1979, !tbaa !1601
  store double %82, double* %arrayidx237, align 8, !dbg !1979, !tbaa !1601
  %83 = load double** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 19), align 8, !dbg !1980, !tbaa !1570
  %arrayidx239 = getelementptr inbounds double* %83, i64 %add228, !dbg !1980
  %84 = load double* %arrayidx239, align 8, !dbg !1980, !tbaa !1601
  store double %84, double* %arrayidx241, align 8, !dbg !1980, !tbaa !1601
  %arrayidx245 = getelementptr inbounds double* %81, i64 %add233, !dbg !1981
  %85 = load double* %arrayidx245, align 8, !dbg !1981, !tbaa !1601
  %mul246 = fmul double %84, %85, !dbg !1981
  store double %mul246, double* %arrayidx248, align 8, !dbg !1981, !tbaa !1601
  %arrayidx252 = getelementptr inbounds double* %83, i64 %add233, !dbg !1996
  %86 = load double* %arrayidx252, align 8, !dbg !1996, !tbaa !1601
  %mul253 = fmul double %84, %86, !dbg !1996
  store double %mul253, double* %arrayidx241, align 8, !dbg !1996, !tbaa !1601
  %arraydecay260 = getelementptr inbounds %"struct.pov::photon_struct"* %78, i64 0, i32 0, i64 0, !dbg !1982
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay257}, i64 0, metadata !1997), !dbg !1998
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay260}, i64 0, metadata !1999), !dbg !1998
  tail call void @llvm.dbg.value(metadata !{double* %arrayidx241}, i64 0, metadata !2000), !dbg !1998
  %87 = load float* %arraydecay260, align 4, !dbg !2001, !tbaa !1621
  %conv.i = fpext float %87 to double, !dbg !2001
  %sub.i = fsub double %conv.i, %mul253, !dbg !2001
  store double %sub.i, double* %arraydecay257, align 8, !dbg !2001, !tbaa !1601
  %arrayidx3.i523 = getelementptr inbounds %"struct.pov::photon_struct"* %78, i64 0, i32 0, i64 1, !dbg !1983
  %88 = load float* %arrayidx3.i523, align 4, !dbg !1983, !tbaa !1621
  %conv4.i = fpext float %88 to double, !dbg !1983
  %sub6.i = fsub double %conv4.i, %82, !dbg !1983
  store double %sub6.i, double* %arrayidx7.i525, align 8, !dbg !1983, !tbaa !1601
  %arrayidx8.i526 = getelementptr inbounds %"struct.pov::photon_struct"* %78, i64 0, i32 0, i64 2, !dbg !1985
  %89 = load float* %arrayidx8.i526, align 4, !dbg !1985, !tbaa !1621
  %conv9.i = fpext float %89 to double, !dbg !1985
  %sub11.i = fsub double %conv9.i, %mul246, !dbg !1985
  store double %sub11.i, double* %arrayidx12.i527, align 8, !dbg !1985, !tbaa !1601
  call fastcc void @_ZN3povL22scattering_attenuationEPPNS_12Media_StructEPfS3_S3_PNS_10Ray_StructES5_(%"struct.pov::Media_Struct"** %Media_List, float* %arraydecay214, float* %arraydecay5, float* %arraydecay220, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %Light_Ray) #7, !dbg !2002
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !1993
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !1993
  %exitcond = icmp eq i32 %lftr.wideiv, %call216, !dbg !1993
  br i1 %exitcond, label %while.cond.while.end_crit_edge, label %for.body219, !dbg !1993

while.cond.while.end_crit_edge:                   ; preds = %for.body219, %while.body
  call void @llvm.dbg.value(metadata !{double* %tempr}, i64 0, metadata !1333), !dbg !2003
  %90 = load double* %tempr, align 8, !dbg !2003, !tbaa !1601
  call void @llvm.dbg.value(metadata !1959, i64 0, metadata !1335), !dbg !2004
  tail call void @llvm.dbg.value(metadata !1670, i64 0, metadata !2006), !dbg !2008
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay214}, i64 0, metadata !2009), !dbg !2008
  %91 = load float* %arraydecay214, align 16, !dbg !2010, !tbaa !1621
  %92 = load float* %arrayidx1.i528, align 4, !dbg !2012, !tbaa !1621
  %93 = load float* %arrayidx2.i529, align 8, !dbg !2013, !tbaa !1621
  call void @llvm.dbg.value(metadata !{double* %tempr}, i64 0, metadata !1333), !dbg !2014
  call void @llvm.dbg.value(metadata !{double %90}, i64 0, metadata !1332), !dbg !2014
  call void @llvm.dbg.value(metadata !{i32 %call216}, i64 0, metadata !1324), !dbg !2015
  br label %while.end, !dbg !1974

while.end:                                        ; preds = %if.then209, %while.cond.while.end_crit_edge
  %r.0.lcssa = phi double [ %90, %while.cond.while.end_crit_edge ], [ 0.000000e+00, %if.then209 ]
  %Colour2.sroa.0.0.load554576.lcssa = phi float [ %91, %while.cond.while.end_crit_edge ], [ 0.000000e+00, %if.then209 ]
  %Colour2.sroa.1.4.load555578.lcssa = phi float [ %92, %while.cond.while.end_crit_edge ], [ 0.000000e+00, %if.then209 ]
  %Colour2.sroa.2.8.load556580.lcssa = phi float [ %93, %while.cond.while.end_crit_edge ], [ 0.000000e+00, %if.then209 ]
  %mul294 = fmul double %r.0.lcssa, 0x400921FB54442D18, !dbg !2016
  %mul295 = fmul double %r.0.lcssa, %mul294, !dbg !2016
  %mul296 = fmul double %r.0.lcssa, %mul295, !dbg !2016
  %mul297 = fmul double %mul296, 4.000000e+00, !dbg !2016
  %div298 = fdiv double 3.000000e+00, %mul297, !dbg !2016
  %conv299 = fptrunc double %div298 to float, !dbg !2016
  tail call void @llvm.dbg.value(metadata !1670, i64 0, metadata !2017), !dbg !2018
  tail call void @llvm.dbg.value(metadata !{float %conv299}, i64 0, metadata !2019), !dbg !2018
  %mul.i515 = fmul float %Colour2.sroa.0.0.load554576.lcssa, %conv299, !dbg !2020
  %mul2.i = fmul float %Colour2.sroa.1.4.load555578.lcssa, %conv299, !dbg !2021
  %mul4.i = fmul float %Colour2.sroa.2.8.load556580.lcssa, %conv299, !dbg !2022
  %94 = load float* %arrayidx98, align 16, !dbg !2023, !tbaa !1621
  %add302 = fadd float %94, %mul.i515, !dbg !2023
  store float %add302, float* %arrayidx98, align 16, !dbg !2023, !tbaa !1621
  %95 = load float* %arrayidx100, align 4, !dbg !2024, !tbaa !1621
  %add305 = fadd float %95, %mul2.i, !dbg !2024
  store float %add305, float* %arrayidx100, align 4, !dbg !2024, !tbaa !1621
  %96 = load float* %arrayidx102, align 8, !dbg !2025, !tbaa !1621
  %add308 = fadd float %mul4.i, %96, !dbg !2025
  store float %add308, float* %arrayidx102, align 8, !dbg !2025, !tbaa !1621
  br label %if.end310, !dbg !2026

if.end310:                                        ; preds = %land.lhs.true205, %if.end203, %while.end
  %cmp311 = icmp eq i32 %sample_method, 3, !dbg !2027
  %97 = load double* %ds, align 8, !dbg !2028, !tbaa !1601
  br i1 %cmp311, label %if.then312, label %if.else, !dbg !2027

if.then312:                                       ; preds = %if.end310
  %98 = load float* %arrayidx98, align 16, !dbg !2028, !tbaa !1621
  %conv315 = fpext float %98 to double, !dbg !2028
  %mul316 = fmul double %97, %conv315, !dbg !2028
  %conv317 = fptrunc double %mul316 to float, !dbg !2028
  store float %conv317, float* %arrayidx98, align 16, !dbg !2028, !tbaa !1621
  %99 = load float* %arrayidx100, align 4, !dbg !2030, !tbaa !1621
  %conv320 = fpext float %99 to double, !dbg !2030
  %mul321 = fmul double %97, %conv320, !dbg !2030
  %conv322 = fptrunc double %mul321 to float, !dbg !2030
  store float %conv322, float* %arrayidx100, align 4, !dbg !2030, !tbaa !1621
  %100 = load float* %arrayidx102, align 8, !dbg !2031, !tbaa !1621
  %conv325 = fpext float %100 to double, !dbg !2031
  %mul326 = fmul double %97, %conv325, !dbg !2031
  br label %if.end361, !dbg !2032

if.else:                                          ; preds = %if.end310
  %sub330 = fsub float -0.000000e+00, %Ex.sroa.0.0.load558582.lcssa, !dbg !2033
  %conv331 = fpext float %sub330 to double, !dbg !2033
  %mul332 = fmul double %mul, %conv331, !dbg !2033
  %call333 = call double @exp(double %mul332) #8, !dbg !2033
  %mul334 = fmul double %97, %call333, !dbg !2033
  %101 = load float* %arrayidx98, align 16, !dbg !2033, !tbaa !1621
  %conv336 = fpext float %101 to double, !dbg !2033
  %mul337 = fmul double %mul334, %conv336, !dbg !2033
  %conv338 = fptrunc double %mul337 to float, !dbg !2033
  store float %conv338, float* %arrayidx98, align 16, !dbg !2033, !tbaa !1621
  %102 = load double* %ds, align 8, !dbg !2035, !tbaa !1601
  %sub341 = fsub float -0.000000e+00, %Ex.sroa.1.4.load560584.lcssa, !dbg !2035
  %conv342 = fpext float %sub341 to double, !dbg !2035
  %mul343 = fmul double %mul, %conv342, !dbg !2035
  %call344 = call double @exp(double %mul343) #8, !dbg !2035
  %mul345 = fmul double %102, %call344, !dbg !2035
  %103 = load float* %arrayidx100, align 4, !dbg !2035, !tbaa !1621
  %conv347 = fpext float %103 to double, !dbg !2035
  %mul348 = fmul double %mul345, %conv347, !dbg !2035
  %conv349 = fptrunc double %mul348 to float, !dbg !2035
  store float %conv349, float* %arrayidx100, align 4, !dbg !2035, !tbaa !1621
  %104 = load double* %ds, align 8, !dbg !2036, !tbaa !1601
  %sub352 = fsub float -0.000000e+00, %Ex.sroa.2.8.load562586.lcssa, !dbg !2036
  %conv353 = fpext float %sub352 to double, !dbg !2036
  %mul354 = fmul double %mul, %conv353, !dbg !2036
  %call355 = call double @exp(double %mul354) #8, !dbg !2036
  %mul356 = fmul double %104, %call355, !dbg !2036
  %105 = load float* %arrayidx102, align 8, !dbg !2036, !tbaa !1621
  %conv358 = fpext float %105 to double, !dbg !2036
  %mul359 = fmul double %mul356, %conv358, !dbg !2036
  br label %if.end361

if.end361:                                        ; preds = %if.else, %if.then312
  %106 = phi float [ %conv322, %if.then312 ], [ %conv349, %if.else ]
  %107 = phi float [ %conv317, %if.then312 ], [ %conv338, %if.else ]
  %storemerge.in = phi double [ %mul326, %if.then312 ], [ %mul359, %if.else ]
  %storemerge = fptrunc double %storemerge.in to float, !dbg !2031
  store float %storemerge, float* %arrayidx102, align 8, !dbg !2036, !tbaa !1621
  store float %107, float* %SampCol, align 4, !dbg !2037, !tbaa !1621
  %arrayidx365 = getelementptr inbounds float* %SampCol, i64 1, !dbg !2038
  store float %106, float* %arrayidx365, align 4, !dbg !2038, !tbaa !1621
  %arrayidx367 = getelementptr inbounds float* %SampCol, i64 2, !dbg !2039
  store float %storemerge, float* %arrayidx367, align 4, !dbg !2039, !tbaa !1621
  br i1 %cmp83, label %if.then369, label %if.end395, !dbg !2040

if.then369:                                       ; preds = %if.end361
  %arrayidx371 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 6, i64 0, !dbg !2041
  %108 = load float* %arrayidx371, align 4, !dbg !2041, !tbaa !1621
  %add372 = fadd float %107, %108, !dbg !2041
  store float %add372, float* %arrayidx371, align 4, !dbg !2041, !tbaa !1621
  %arrayidx375 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 6, i64 1, !dbg !2043
  %109 = load float* %arrayidx375, align 4, !dbg !2043, !tbaa !1621
  %add376 = fadd float %106, %109, !dbg !2043
  store float %add376, float* %arrayidx375, align 4, !dbg !2043, !tbaa !1621
  %arrayidx379 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 6, i64 2, !dbg !2044
  %110 = load float* %arrayidx379, align 4, !dbg !2044, !tbaa !1621
  %add380 = fadd float %storemerge, %110, !dbg !2044
  store float %add380, float* %arrayidx379, align 4, !dbg !2044, !tbaa !1621
  tail call void @llvm.dbg.value(metadata !{float %107}, i64 0, metadata !2045), !dbg !2047
  %mul.i514 = fmul float %107, %107, !dbg !2048
  %arrayidx383 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 7, i64 0, !dbg !2046
  %111 = load float* %arrayidx383, align 4, !dbg !2046, !tbaa !1621
  %add384 = fadd float %111, %mul.i514, !dbg !2046
  store float %add384, float* %arrayidx383, align 4, !dbg !2046, !tbaa !1621
  tail call void @llvm.dbg.value(metadata !{float %106}, i64 0, metadata !2050), !dbg !2052
  %mul.i513 = fmul float %106, %106, !dbg !2053
  %arrayidx388 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 7, i64 1, !dbg !2051
  %112 = load float* %arrayidx388, align 4, !dbg !2051, !tbaa !1621
  %add389 = fadd float %112, %mul.i513, !dbg !2051
  store float %add389, float* %arrayidx388, align 4, !dbg !2051, !tbaa !1621
  tail call void @llvm.dbg.value(metadata !{float %storemerge}, i64 0, metadata !2054), !dbg !2056
  %mul.i = fmul float %storemerge, %storemerge, !dbg !2057
  %arrayidx393 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 7, i64 2, !dbg !2055
  %113 = load float* %arrayidx393, align 4, !dbg !2055, !tbaa !1621
  %add394 = fadd float %113, %mul.i, !dbg !2055
  store float %add394, float* %arrayidx393, align 4, !dbg !2055, !tbaa !1621
  br label %if.end395, !dbg !2058

if.end395:                                        ; preds = %if.then369, %if.end361
  %samples = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Interval, i64 0, i32 1, !dbg !2059
  %114 = load i32* %samples, align 4, !dbg !2059, !tbaa !1580
  %inc396 = add nsw i32 %114, 1, !dbg !2059
  store i32 %inc396, i32* %samples, align 4, !dbg !2059, !tbaa !1580
  call void @llvm.lifetime.end(i64 856, i8* %0) #4, !dbg !2060
  ret void, !dbg !2060
}
