define internal fastcc void @_ZN3povL22scattering_attenuationEPPNS_12Media_StructEPfS3_S3_PNS_10Ray_StructES5_(%"struct.pov::Media_Struct"** nocapture %Media_List, float* nocapture %OutputColor, float* nocapture %Sc, float* nocapture %Light_Colour, %"struct.pov::Ray_Struct"* nocapture %Ray, %"struct.pov::Ray_Struct"* nocapture %Light_Ray) #6 {
entry:
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %Media_List}, i64 0, metadata !1373), !dbg !2866
  tail call void @llvm.dbg.value(metadata !{float* %OutputColor}, i64 0, metadata !1374), !dbg !2866
  tail call void @llvm.dbg.value(metadata !{float* %Sc}, i64 0, metadata !1375), !dbg !2866
  tail call void @llvm.dbg.value(metadata !{float* %Light_Colour}, i64 0, metadata !1376), !dbg !2866
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1377), !dbg !2866
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Light_Ray}, i64 0, metadata !1378), !dbg !2866
  tail call void @llvm.dbg.value(metadata !2867, i64 0, metadata !1379), !dbg !2868
  tail call void @llvm.dbg.value(metadata !2539, i64 0, metadata !1381), !dbg !2868
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1382), !dbg !2869
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1383), !dbg !2869
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1384), !dbg !2869
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1385), !dbg !2869
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !2870), !dbg !2877
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !2878), !dbg !2880
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !2881), !dbg !2883
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !2884), !dbg !2886
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1385), !dbg !2887
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1385), !dbg !2888
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1385), !dbg !2889
  tail call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1385), !dbg !2890
  tail call void @llvm.dbg.value(metadata !204, i64 0, metadata !1386), !dbg !2891
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %Media_List}, i64 0, metadata !1379), !dbg !2891
  %0 = load %"struct.pov::Media_Struct"** %Media_List, align 8, !dbg !2891, !tbaa !1570
  %cmp140 = icmp eq %"struct.pov::Media_Struct"* %0, null, !dbg !2891
  br i1 %cmp140, label %for.end46, label %for.cond1.preheader.lr.ph, !dbg !2891

for.cond1.preheader.lr.ph:                        ; preds = %entry
  %arraydecay = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 1, i64 0, !dbg !2885
  %arraydecay5 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !2885
  %arrayidx2.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 1, i64 1, !dbg !2892
  %arrayidx3.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !2892
  %arrayidx5.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Ray, i64 0, i32 1, i64 2, !dbg !2892
  %arrayidx6.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !2892
  br label %for.cond1.preheader, !dbg !2891

for.cond1.preheader:                              ; preds = %for.cond1.preheader.lr.ph, %for.inc45
  %1 = phi %"struct.pov::Media_Struct"* [ %0, %for.cond1.preheader.lr.ph ], [ %29, %for.inc45 ]
  %n.0143 = phi i32 [ 0, %for.cond1.preheader.lr.ph ], [ %inc, %for.inc45 ]
  %k.0142 = phi double [ 0.000000e+00, %for.cond1.preheader.lr.ph ], [ %k.1.lcssa, %for.inc45 ]
  %Tmp.0141 = phi %"struct.pov::Media_Struct"** [ %Media_List, %for.cond1.preheader.lr.ph ], [ %incdec.ptr, %for.inc45 ]
  %cmp2137 = icmp eq %"struct.pov::Media_Struct"* %1, null, !dbg !2893
  br i1 %cmp2137, label %for.inc45, label %for.body3, !dbg !2893

for.body3:                                        ; preds = %for.cond1.preheader, %for.inc
  %k.1139 = phi double [ %k.2, %for.inc ], [ %k.0142, %for.cond1.preheader ]
  %Local.0138 = phi %"struct.pov::Media_Struct"* [ %28, %for.inc ], [ %1, %for.cond1.preheader ]
  %Type = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0138, i64 0, i32 0, !dbg !2894
  %2 = load i32* %Type, align 4, !dbg !2894, !tbaa !1580
  switch i32 %2, label %sw.default [
    i32 4, label %sw.bb
    i32 2, label %sw.bb7
    i32 3, label %sw.bb19
    i32 5, label %sw.bb31
  ], !dbg !2894

sw.bb:                                            ; preds = %for.body3
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !2895), !dbg !2886
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay5}, i64 0, metadata !2896), !dbg !2886
  %3 = load double* %arraydecay, align 8, !dbg !2892, !tbaa !1601
  %4 = load double* %arraydecay5, align 8, !dbg !2892, !tbaa !1601
  %mul.i = fmul double %3, %4, !dbg !2892
  %5 = load double* %arrayidx2.i, align 8, !dbg !2892, !tbaa !1601
  %6 = load double* %arrayidx3.i, align 8, !dbg !2892, !tbaa !1601
  %mul4.i = fmul double %5, %6, !dbg !2892
  %add.i = fadd double %mul.i, %mul4.i, !dbg !2892
  %7 = load double* %arrayidx5.i, align 8, !dbg !2892, !tbaa !1601
  %8 = load double* %arrayidx6.i, align 8, !dbg !2892, !tbaa !1601
  %mul7.i = fmul double %7, %8, !dbg !2892
  %add8.i = fadd double %add.i, %mul7.i, !dbg !2892
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1385), !dbg !2892
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !2870), !dbg !2877
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !2878), !dbg !2880
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !2881), !dbg !2883
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !2884), !dbg !2886
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1385), !dbg !2887
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1385), !dbg !2888
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1385), !dbg !2889
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1385), !dbg !2890
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !2897), !dbg !2898
  %mul.i133 = fmul double %add8.i, %add8.i, !dbg !2899
  %add = fadd double %mul.i133, 1.000000e+00, !dbg !2887
  %mul = fmul double %add, 0x3FE994749DA586A7, !dbg !2887
  %add6 = fadd double %k.1139, %mul, !dbg !2887
  tail call void @llvm.dbg.value(metadata !{double %add6}, i64 0, metadata !1382), !dbg !2887
  br label %for.inc, !dbg !2900

sw.bb7:                                           ; preds = %for.body3
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !2901), !dbg !2877
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay5}, i64 0, metadata !2902), !dbg !2877
  %9 = load double* %arraydecay, align 8, !dbg !2903, !tbaa !1601
  %10 = load double* %arraydecay5, align 8, !dbg !2903, !tbaa !1601
  %mul.i124 = fmul double %9, %10, !dbg !2903
  %11 = load double* %arrayidx2.i, align 8, !dbg !2903, !tbaa !1601
  %12 = load double* %arrayidx3.i, align 8, !dbg !2903, !tbaa !1601
  %mul4.i127 = fmul double %11, %12, !dbg !2903
  %add.i128 = fadd double %mul.i124, %mul4.i127, !dbg !2903
  %13 = load double* %arrayidx5.i, align 8, !dbg !2903, !tbaa !1601
  %14 = load double* %arrayidx6.i, align 8, !dbg !2903, !tbaa !1601
  %mul7.i131 = fmul double %13, %14, !dbg !2903
  %add8.i132 = fadd double %add.i128, %mul7.i131, !dbg !2903
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !1385), !dbg !2903
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !2870), !dbg !2877
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !2878), !dbg !2880
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !2881), !dbg !2883
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !2884), !dbg !2886
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !1385), !dbg !2887
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !1385), !dbg !2888
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !1385), !dbg !2889
  tail call void @llvm.dbg.value(metadata !{double %add8.i132}, i64 0, metadata !1385), !dbg !2890
  %add12 = fadd double %add8.i132, 1.000000e+00, !dbg !2888
  %mul13 = fmul double %add12, 5.000000e-01, !dbg !2888
  %call14 = tail call double @pow(double %mul13, double 8.000000e+00) #8, !dbg !2888
  %mul15 = fmul double %call14, 9.000000e+00, !dbg !2888
  %add16 = fadd double %mul15, 1.000000e+00, !dbg !2888
  %mul17 = fmul double %add16, 0x3FE273F5F91600F3, !dbg !2888
  %add18 = fadd double %k.1139, %mul17, !dbg !2888
  tail call void @llvm.dbg.value(metadata !{double %add18}, i64 0, metadata !1382), !dbg !2888
  br label %for.inc, !dbg !2904

sw.bb19:                                          ; preds = %for.body3
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !2905), !dbg !2880
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay5}, i64 0, metadata !2906), !dbg !2880
  %15 = load double* %arraydecay, align 8, !dbg !2907, !tbaa !1601
  %16 = load double* %arraydecay5, align 8, !dbg !2907, !tbaa !1601
  %mul.i115 = fmul double %15, %16, !dbg !2907
  %17 = load double* %arrayidx2.i, align 8, !dbg !2907, !tbaa !1601
  %18 = load double* %arrayidx3.i, align 8, !dbg !2907, !tbaa !1601
  %mul4.i118 = fmul double %17, %18, !dbg !2907
  %add.i119 = fadd double %mul.i115, %mul4.i118, !dbg !2907
  %19 = load double* %arrayidx5.i, align 8, !dbg !2907, !tbaa !1601
  %20 = load double* %arrayidx6.i, align 8, !dbg !2907, !tbaa !1601
  %mul7.i122 = fmul double %19, %20, !dbg !2907
  %add8.i123 = fadd double %add.i119, %mul7.i122, !dbg !2907
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !1385), !dbg !2907
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !2870), !dbg !2877
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !2878), !dbg !2880
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !2881), !dbg !2883
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !2884), !dbg !2886
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !1385), !dbg !2887
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !1385), !dbg !2888
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !1385), !dbg !2889
  tail call void @llvm.dbg.value(metadata !{double %add8.i123}, i64 0, metadata !1385), !dbg !2890
  %add24 = fadd double %add8.i123, 1.000000e+00, !dbg !2889
  %mul25 = fmul double %add24, 5.000000e-01, !dbg !2889
  %call26 = tail call double @pow(double %mul25, double 3.200000e+01) #8, !dbg !2889
  %mul27 = fmul double %call26, 5.000000e+01, !dbg !2889
  %add28 = fadd double %mul27, 1.000000e+00, !dbg !2889
  %mul29 = fmul double %add28, 0x3FDFB9C981E10D99, !dbg !2889
  %add30 = fadd double %k.1139, %mul29, !dbg !2889
  tail call void @llvm.dbg.value(metadata !{double %add30}, i64 0, metadata !1382), !dbg !2889
  br label %for.inc, !dbg !2908

sw.bb31:                                          ; preds = %for.body3
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !2909), !dbg !2883
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay5}, i64 0, metadata !2910), !dbg !2883
  %21 = load double* %arraydecay, align 8, !dbg !2911, !tbaa !1601
  %22 = load double* %arraydecay5, align 8, !dbg !2911, !tbaa !1601
  %mul.i106 = fmul double %21, %22, !dbg !2911
  %23 = load double* %arrayidx2.i, align 8, !dbg !2911, !tbaa !1601
  %24 = load double* %arrayidx3.i, align 8, !dbg !2911, !tbaa !1601
  %mul4.i109 = fmul double %23, %24, !dbg !2911
  %add.i110 = fadd double %mul.i106, %mul4.i109, !dbg !2911
  %25 = load double* %arrayidx5.i, align 8, !dbg !2911, !tbaa !1601
  %26 = load double* %arrayidx6.i, align 8, !dbg !2911, !tbaa !1601
  %mul7.i113 = fmul double %25, %26, !dbg !2911
  %add8.i114 = fadd double %add.i110, %mul7.i113, !dbg !2911
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !1385), !dbg !2911
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !2870), !dbg !2877
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !2878), !dbg !2880
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !2881), !dbg !2883
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !2884), !dbg !2886
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !1385), !dbg !2887
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !1385), !dbg !2888
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !1385), !dbg !2889
  tail call void @llvm.dbg.value(metadata !{double %add8.i114}, i64 0, metadata !1385), !dbg !2890
  %Eccentricity = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0138, i64 0, i32 7, !dbg !2912
  %27 = load double* %Eccentricity, align 8, !dbg !2912, !tbaa !1601
  tail call void @llvm.dbg.value(metadata !{double %27}, i64 0, metadata !1383), !dbg !2912
  tail call void @llvm.dbg.value(metadata !{double %27}, i64 0, metadata !2913), !dbg !2915
  %mul.i105 = fmul double %27, %27, !dbg !2916
  tail call void @llvm.dbg.value(metadata !{double %mul.i105}, i64 0, metadata !1384), !dbg !2914
  %sub = fsub double 1.000000e+00, %mul.i105, !dbg !2890
  %add37 = fadd double %mul.i105, 1.000000e+00, !dbg !2890
  %mul38 = fmul double %27, 2.000000e+00, !dbg !2890
  %mul39 = fmul double %mul38, %add8.i114, !dbg !2890
  %sub40 = fsub double %add37, %mul39, !dbg !2890
  %call41 = tail call double @pow(double %sub40, double 1.500000e+00) #8, !dbg !2890
  %div = fdiv double %sub, %call41, !dbg !2890
  %add42 = fadd double %k.1139, %div, !dbg !2890
  tail call void @llvm.dbg.value(metadata !{double %add42}, i64 0, metadata !1382), !dbg !2890
  br label %for.inc, !dbg !2917

sw.default:                                       ; preds = %for.body3
  %add44 = fadd double %k.1139, 1.000000e+00, !dbg !2918
  tail call void @llvm.dbg.value(metadata !{double %add44}, i64 0, metadata !1382), !dbg !2918
  br label %for.inc, !dbg !2919

for.inc:                                          ; preds = %sw.bb, %sw.bb7, %sw.bb19, %sw.bb31, %sw.default
  %k.2 = phi double [ %add44, %sw.default ], [ %add42, %sw.bb31 ], [ %add30, %sw.bb19 ], [ %add18, %sw.bb7 ], [ %add6, %sw.bb ]
  %Next_Media = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.0138, i64 0, i32 25, !dbg !2893
  %28 = load %"struct.pov::Media_Struct"** %Next_Media, align 8, !dbg !2893, !tbaa !1570
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"* %28}, i64 0, metadata !1381), !dbg !2893
  %cmp2 = icmp eq %"struct.pov::Media_Struct"* %28, null, !dbg !2893
  br i1 %cmp2, label %for.inc45, label %for.body3, !dbg !2893

for.inc45:                                        ; preds = %for.inc, %for.cond1.preheader
  %k.1.lcssa = phi double [ %k.0142, %for.cond1.preheader ], [ %k.2, %for.inc ]
  %inc = add nsw i32 %n.0143, 1, !dbg !2891
  tail call void @llvm.dbg.value(metadata !{i32 %inc}, i64 0, metadata !1386), !dbg !2891
  %incdec.ptr = getelementptr inbounds %"struct.pov::Media_Struct"** %Tmp.0141, i64 1, !dbg !2891
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %incdec.ptr}, i64 0, metadata !1379), !dbg !2891
  %29 = load %"struct.pov::Media_Struct"** %incdec.ptr, align 8, !dbg !2891, !tbaa !1570
  %cmp = icmp eq %"struct.pov::Media_Struct"* %29, null, !dbg !2891
  br i1 %cmp, label %for.cond.for.end46_crit_edge, label %for.cond1.preheader, !dbg !2891

for.cond.for.end46_crit_edge:                     ; preds = %for.inc45
  %phitmp = sitofp i32 %inc to double, !dbg !2891
  br label %for.end46, !dbg !2891

for.end46:                                        ; preds = %for.cond.for.end46_crit_edge, %entry
  %n.0.lcssa = phi double [ %phitmp, %for.cond.for.end46_crit_edge ], [ 0.000000e+00, %entry ]
  %k.0.lcssa = phi double [ %k.1.lcssa, %for.cond.for.end46_crit_edge ], [ 0.000000e+00, %entry ]
  %div47 = fdiv double %k.0.lcssa, %n.0.lcssa, !dbg !2920
  tail call void @llvm.dbg.value(metadata !{double %div47}, i64 0, metadata !1382), !dbg !2920
  %30 = load float* %Sc, align 4, !dbg !2921, !tbaa !1621
  %conv48 = fpext float %30 to double, !dbg !2921
  %mul49 = fmul double %div47, %conv48, !dbg !2921
  %31 = load float* %Light_Colour, align 4, !dbg !2921, !tbaa !1621
  %conv51 = fpext float %31 to double, !dbg !2921
  %mul52 = fmul double %mul49, %conv51, !dbg !2921
  %32 = load float* %OutputColor, align 4, !dbg !2921, !tbaa !1621
  %conv54 = fpext float %32 to double, !dbg !2921
  %add55 = fadd double %conv54, %mul52, !dbg !2921
  %conv56 = fptrunc double %add55 to float, !dbg !2921
  store float %conv56, float* %OutputColor, align 4, !dbg !2921, !tbaa !1621
  %arrayidx57 = getelementptr inbounds float* %Sc, i64 1, !dbg !2922
  %33 = load float* %arrayidx57, align 4, !dbg !2922, !tbaa !1621
  %conv58 = fpext float %33 to double, !dbg !2922
  %mul59 = fmul double %div47, %conv58, !dbg !2922
  %arrayidx60 = getelementptr inbounds float* %Light_Colour, i64 1, !dbg !2922
  %34 = load float* %arrayidx60, align 4, !dbg !2922, !tbaa !1621
  %conv61 = fpext float %34 to double, !dbg !2922
  %mul62 = fmul double %mul59, %conv61, !dbg !2922
  %arrayidx63 = getelementptr inbounds float* %OutputColor, i64 1, !dbg !2922
  %35 = load float* %arrayidx63, align 4, !dbg !2922, !tbaa !1621
  %conv64 = fpext float %35 to double, !dbg !2922
  %add65 = fadd double %conv64, %mul62, !dbg !2922
  %conv66 = fptrunc double %add65 to float, !dbg !2922
  store float %conv66, float* %arrayidx63, align 4, !dbg !2922, !tbaa !1621
  %arrayidx67 = getelementptr inbounds float* %Sc, i64 2, !dbg !2923
  %36 = load float* %arrayidx67, align 4, !dbg !2923, !tbaa !1621
  %conv68 = fpext float %36 to double, !dbg !2923
  %mul69 = fmul double %div47, %conv68, !dbg !2923
  %arrayidx70 = getelementptr inbounds float* %Light_Colour, i64 2, !dbg !2923
  %37 = load float* %arrayidx70, align 4, !dbg !2923, !tbaa !1621
  %conv71 = fpext float %37 to double, !dbg !2923
  %mul72 = fmul double %mul69, %conv71, !dbg !2923
  %arrayidx73 = getelementptr inbounds float* %OutputColor, i64 2, !dbg !2923
  %38 = load float* %arrayidx73, align 4, !dbg !2923, !tbaa !1621
  %conv74 = fpext float %38 to double, !dbg !2923
  %add75 = fadd double %conv74, %mul72, !dbg !2923
  %conv76 = fptrunc double %add75 to float, !dbg !2923
  store float %conv76, float* %arrayidx73, align 4, !dbg !2923, !tbaa !1621
  ret void, !dbg !2924
}
