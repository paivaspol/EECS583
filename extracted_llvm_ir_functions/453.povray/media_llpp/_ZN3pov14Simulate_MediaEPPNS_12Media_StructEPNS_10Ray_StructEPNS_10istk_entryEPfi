define void @_ZN3pov14Simulate_MediaEPPNS_12Media_StructEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* nocapture %Inter, float* nocapture %Colour, i32 %light_ray) #0 {
entry:
  %C0 = alloca [5 x float], align 16
  %C1 = alloca [5 x float], align 16
  %Result = alloca [5 x float], align 16
  %ODResult = alloca [5 x float], align 16
  %od0 = alloca [5 x float], align 16
  %od1 = alloca [5 x float], align 16
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %Media_List}, i64 0, metadata !1032), !dbg !2061
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1033), !dbg !2061
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Inter}, i64 0, metadata !1034), !dbg !2061
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1035), !dbg !2061
  call void @llvm.dbg.value(metadata !{i32 %light_ray}, i64 0, metadata !1036), !dbg !2061
  call void @llvm.dbg.declare(metadata !1559, metadata !1043), !dbg !2062
  call void @llvm.dbg.declare(metadata !1559, metadata !1044), !dbg !2062
  call void @llvm.dbg.declare(metadata !1559, metadata !1045), !dbg !2062
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1046), !dbg !2064
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2065
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !2066), !dbg !2069
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2070
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2071
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2075
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2078
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2079
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2086
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2088
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2094
  call void @llvm.dbg.declare(metadata !{[5 x float]* %C0}, metadata !1064), !dbg !2095
  call void @llvm.dbg.declare(metadata !{[5 x float]* %C1}, metadata !1065), !dbg !2095
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Result}, metadata !1066), !dbg !2095
  call void @llvm.dbg.declare(metadata !{[5 x float]* %ODResult}, metadata !1067), !dbg !2096
  call void @llvm.dbg.declare(metadata !{[5 x float]* %od0}, metadata !1068), !dbg !2097
  call void @llvm.dbg.declare(metadata !{[5 x float]* %od1}, metadata !1069), !dbg !2097
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2098
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !2099), !dbg !2069
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2070
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2071
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2075
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2078
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2079
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2086
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1072), !dbg !2088
  %0 = load i32* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 3), align 8, !dbg !2100, !tbaa !1580
  call void @llvm.dbg.value(metadata !{i32 %0}, i64 0, metadata !1073), !dbg !2100
  %1 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2101, !tbaa !1566
  %inc = add nsw i64 %1, 1, !dbg !2101
  store i64 %inc, i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2101, !tbaa !1566
  %cmp = icmp eq %"struct.pov::Media_Struct"** %Media_List, null, !dbg !2102
  br i1 %cmp, label %if.then, label %lor.lhs.false, !dbg !2102

lor.lhs.false:                                    ; preds = %entry
  %2 = load %"struct.pov::Media_Struct"** %Media_List, align 8, !dbg !2102, !tbaa !1570
  %cmp1 = icmp eq %"struct.pov::Media_Struct"* %2, null, !dbg !2102
  br i1 %cmp1, label %if.then, label %for.cond4.preheader, !dbg !2102

if.then:                                          ; preds = %lor.lhs.false, %entry
  store i64 %1, i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2103, !tbaa !1566
  br label %if.end640, !dbg !2105

for.cond4.preheader:                              ; preds = %lor.lhs.false, %for.inc17
  %3 = phi %"struct.pov::Media_Struct"* [ %9, %for.inc17 ], [ %2, %lor.lhs.false ]
  %all_constant_and_light_ray.01019 = phi i32 [ %all_constant_and_light_ray.1.lcssa, %for.inc17 ], [ %light_ray, %lor.lhs.false ]
  %IMedia.01018 = phi %"struct.pov::Media_Struct"* [ %IMedia.1.lcssa, %for.inc17 ], [ %2, %lor.lhs.false ]
  %Tmp.01017 = phi %"struct.pov::Media_Struct"** [ %incdec.ptr, %for.inc17 ], [ %Media_List, %lor.lhs.false ]
  %use_extinction.01016 = phi i32 [ %use_extinction.1.lcssa, %for.inc17 ], [ 0, %lor.lhs.false ]
  %intervals.01015 = phi i32 [ %intervals.1.lcssa, %for.inc17 ], [ 0, %lor.lhs.false ]
  %cmp51004 = icmp eq %"struct.pov::Media_Struct"* %3, null, !dbg !2106
  br i1 %cmp51004, label %for.inc17, label %for.body6, !dbg !2106

for.body6:                                        ; preds = %for.cond4.preheader, %for.inc
  %all_constant_and_light_ray.11009 = phi i32 [ %all_constant_and_light_ray.2, %for.inc ], [ %all_constant_and_light_ray.01019, %for.cond4.preheader ]
  %Local.01008 = phi %"struct.pov::Media_Struct"* [ %8, %for.inc ], [ %3, %for.cond4.preheader ]
  %IMedia.11007 = phi %"struct.pov::Media_Struct"* [ %Local.0.IMedia.1, %for.inc ], [ %IMedia.01018, %for.cond4.preheader ]
  %use_extinction.11006 = phi i32 [ %or, %for.inc ], [ %use_extinction.01016, %for.cond4.preheader ]
  %intervals.11005 = phi i32 [ %.intervals.1, %for.inc ], [ %intervals.01015, %for.cond4.preheader ]
  %Intervals = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.01008, i64 0, i32 1, !dbg !2110
  %4 = load i32* %Intervals, align 4, !dbg !2110, !tbaa !1580
  %cmp7 = icmp sgt i32 %4, %intervals.11005, !dbg !2110
  call void @llvm.dbg.value(metadata !{i32 %4}, i64 0, metadata !1039), !dbg !2112
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"* %Local.01008}, i64 0, metadata !1058), !dbg !2114
  %.intervals.1 = select i1 %cmp7, i32 %4, i32 %intervals.11005, !dbg !2110
  %Local.0.IMedia.1 = select i1 %cmp7, %"struct.pov::Media_Struct"* %Local.01008, %"struct.pov::Media_Struct"* %IMedia.11007, !dbg !2110
  %use_extinction11 = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.01008, i64 0, i32 11, !dbg !2115
  %5 = load i32* %use_extinction11, align 4, !dbg !2115, !tbaa !1580
  %or = or i32 %5, %use_extinction.11006, !dbg !2115
  call void @llvm.dbg.value(metadata !{i32 %or}, i64 0, metadata !1040), !dbg !2115
  %Density = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.01008, i64 0, i32 24, !dbg !2116
  %6 = load %"struct.pov::Pigment_Struct"** %Density, align 8, !dbg !2116, !tbaa !1570
  %tobool = icmp eq %"struct.pov::Pigment_Struct"* %6, null, !dbg !2116
  br i1 %tobool, label %for.inc, label %if.then12, !dbg !2116

if.then12:                                        ; preds = %for.body6
  %Type = getelementptr inbounds %"struct.pov::Pigment_Struct"* %6, i64 0, i32 0, !dbg !2117
  %7 = load i16* %Type, align 2, !dbg !2117, !tbaa !2119
  %cmp14 = icmp eq i16 %7, 1, !dbg !2117
  %conv15 = zext i1 %cmp14 to i32, !dbg !2117
  %and = and i32 %conv15, %all_constant_and_light_ray.11009, !dbg !2117
  call void @llvm.dbg.value(metadata !{i32 %and}, i64 0, metadata !1070), !dbg !2117
  br label %for.inc, !dbg !2120

for.inc:                                          ; preds = %for.body6, %if.then12
  %all_constant_and_light_ray.2 = phi i32 [ %and, %if.then12 ], [ %all_constant_and_light_ray.11009, %for.body6 ]
  %Next_Media = getelementptr inbounds %"struct.pov::Media_Struct"* %Local.01008, i64 0, i32 25, !dbg !2106
  %8 = load %"struct.pov::Media_Struct"** %Next_Media, align 8, !dbg !2106, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"* %8}, i64 0, metadata !1059), !dbg !2106
  %cmp5 = icmp eq %"struct.pov::Media_Struct"* %8, null, !dbg !2106
  br i1 %cmp5, label %for.inc17, label %for.body6, !dbg !2106

for.inc17:                                        ; preds = %for.inc, %for.cond4.preheader
  %all_constant_and_light_ray.1.lcssa = phi i32 [ %all_constant_and_light_ray.01019, %for.cond4.preheader ], [ %all_constant_and_light_ray.2, %for.inc ]
  %IMedia.1.lcssa = phi %"struct.pov::Media_Struct"* [ %IMedia.01018, %for.cond4.preheader ], [ %Local.0.IMedia.1, %for.inc ]
  %use_extinction.1.lcssa = phi i32 [ %use_extinction.01016, %for.cond4.preheader ], [ %or, %for.inc ]
  %intervals.1.lcssa = phi i32 [ %intervals.01015, %for.cond4.preheader ], [ %.intervals.1, %for.inc ]
  %incdec.ptr = getelementptr inbounds %"struct.pov::Media_Struct"** %Tmp.01017, i64 1, !dbg !2121
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %incdec.ptr}, i64 0, metadata !1057), !dbg !2121
  %9 = load %"struct.pov::Media_Struct"** %incdec.ptr, align 8, !dbg !2121, !tbaa !1570
  %cmp3 = icmp eq %"struct.pov::Media_Struct"* %9, null, !dbg !2121
  br i1 %cmp3, label %for.end18, label %for.cond4.preheader, !dbg !2121

for.end18:                                        ; preds = %for.inc17
  %tobool19 = icmp ne i32 %light_ray, 0, !dbg !2122
  %tobool20 = icmp eq i32 %use_extinction.1.lcssa, 0, !dbg !2122
  %or.cond = and i1 %tobool19, %tobool20, !dbg !2122
  br i1 %or.cond, label %if.then21, label %if.end23, !dbg !2122

if.then21:                                        ; preds = %for.end18
  store i64 %1, i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2123, !tbaa !1566
  br label %if.end640, !dbg !2125

if.end23:                                         ; preds = %for.end18
  %tobool24 = icmp ne i32 %all_constant_and_light_ray.1.lcssa, 0, !dbg !2126
  %Object = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 5, !dbg !2127
  %10 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !2127, !tbaa !1570
  %cmp27 = icmp eq %"struct.pov::Object_Struct"* %10, null, !dbg !2127
  br i1 %cmp27, label %if.end35, label %if.then28, !dbg !2127

if.then28:                                        ; preds = %if.end23
  %Flags = getelementptr inbounds %"struct.pov::Object_Struct"* %10, i64 0, i32 13, !dbg !2128
  %11 = load i32* %Flags, align 4, !dbg !2128, !tbaa !1580
  %and31 = and i32 %11, 131072, !dbg !2128
  %cmp32 = icmp eq i32 %and31, 0, !dbg !2128
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1073), !dbg !2130
  %. = select i1 %cmp32, i32 %0, i32 0, !dbg !2128
  br label %if.end35, !dbg !2128

if.end35:                                         ; preds = %if.then28, %if.end23
  %global_light_list_cnt.0 = phi i32 [ %0, %if.end23 ], [ %., %if.then28 ]
  %cmp38 = icmp eq i32 %global_light_list_cnt.0, 0, !dbg !2131
  %or.cond898 = or i1 %tobool19, %cmp38, !dbg !2131
  br i1 %or.cond898, label %if.then39, label %if.end48, !dbg !2131

if.then39:                                        ; preds = %if.end35
  %12 = load i64* @_ZN3pov17MaxMediaPoolDepthE, align 8, !dbg !2132, !tbaa !1566
  %cmp40 = icmp slt i64 %inc, %12, !dbg !2132
  br i1 %cmp40, label %if.end42, label %if.then41, !dbg !2132

if.then41:                                        ; preds = %if.then39
  %mul = shl nsw i64 %12, 1, !dbg !2134
  call void @_ZN3pov22ResizeMediaMallocPoolsEl(i64 %mul) #7, !dbg !2134
  %.pre = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2136, !tbaa !1566
  br label %if.end42, !dbg !2137

if.end42:                                         ; preds = %if.then39, %if.then41
  %13 = phi i64 [ %inc, %if.then39 ], [ %.pre, %if.then41 ]
  %14 = load %"struct.pov::Lit_Interval_Struct"*** @_ZN3pov20MediaLitIntervalPoolE, align 8, !dbg !2136, !tbaa !1570
  %arrayidx43 = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"** %14, i64 %13, !dbg !2136
  %15 = load %"struct.pov::Lit_Interval_Struct"** %arrayidx43, align 8, !dbg !2136, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %15}, i64 0, metadata !1056), !dbg !2136
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !1041), !dbg !2138
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !2139), !dbg !2140
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !1041), !dbg !2141
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !1041), !dbg !2142
  %lit = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %15, i64 0, i32 0, !dbg !2143
  store i32 0, i32* %lit, align 4, !dbg !2143, !tbaa !1580
  %s0 = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %15, i64 0, i32 1, !dbg !2144
  store double 0.000000e+00, double* %s0, align 8, !dbg !2144, !tbaa !1601
  %Depth = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 0, !dbg !2145
  %16 = load double* %Depth, align 8, !dbg !2145, !tbaa !1601
  %ds = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %15, i64 0, i32 3, !dbg !2145
  store double %16, double* %ds, align 8, !dbg !2145, !tbaa !1601
  %s1 = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %15, i64 0, i32 2, !dbg !2145
  store double %16, double* %s1, align 8, !dbg !2145, !tbaa !1601
  br label %if.end48, !dbg !2146

if.end48:                                         ; preds = %if.end35, %if.end42
  %17 = phi i64 [ %13, %if.end42 ], [ %inc, %if.end35 ]
  %Lit_Interval.0 = phi %"struct.pov::Lit_Interval_Struct"* [ %15, %if.end42 ], [ undef, %if.end35 ]
  br i1 %tobool19, label %if.end57, label %if.then50, !dbg !2147

if.then50:                                        ; preds = %if.end48
  %18 = load i64* @_ZN3pov17MaxMediaPoolDepthE, align 8, !dbg !2148, !tbaa !1566
  %cmp51 = icmp slt i64 %17, %18, !dbg !2148
  br i1 %cmp51, label %if.end54, label %if.then52, !dbg !2148

if.then52:                                        ; preds = %if.then50
  %mul53 = shl nsw i64 %18, 1, !dbg !2149
  call void @_ZN3pov22ResizeMediaMallocPoolsEl(i64 %mul53) #7, !dbg !2149
  %.pre1036 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2151, !tbaa !1566
  br label %if.end54, !dbg !2152

if.end54:                                         ; preds = %if.then50, %if.then52
  %19 = phi i64 [ %17, %if.then50 ], [ %.pre1036, %if.then52 ]
  %20 = load %"struct.pov::Light_List_Struct"*** @_ZN3pov18MediaLightListPoolE, align 8, !dbg !2151, !tbaa !1570
  %arrayidx55 = getelementptr inbounds %"struct.pov::Light_List_Struct"** %20, i64 %19, !dbg !2151
  %21 = load %"struct.pov::Light_List_Struct"** %arrayidx55, align 8, !dbg !2151, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %21}, i64 0, metadata !1046), !dbg !2151
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %21}, i64 0, metadata !2153), !dbg !2069
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !2154), !dbg !2069
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Inter}, i64 0, metadata !2155), !dbg !2069
  call void @llvm.dbg.value(metadata !2156, i64 0, metadata !2157), !dbg !2158
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !2159), !dbg !2160
  %Light.061.i = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !2160
  %cmp62.i = icmp eq %"struct.pov::Light_Source_Struct"* %Light.061.i, null, !dbg !2160
  br i1 %cmp62.i, label %for.end.i, label %for.body.i, !dbg !2160

for.body.i:                                       ; preds = %if.end54, %for.body.i
  %indvars.iv66.i = phi i64 [ %indvars.iv.next67.i, %for.body.i ], [ 0, %if.end54 ]
  %Light.064.i = phi %"struct.pov::Light_Source_Struct"* [ %Light.0.i, %for.body.i ], [ %Light.061.i, %if.end54 ]
  %arrayidx.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %21, i64 %indvars.iv66.i, !dbg !2162
  %Light1.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %21, i64 %indvars.iv66.i, i32 3, !dbg !2162
  store %"struct.pov::Light_Source_Struct"* %Light.064.i, %"struct.pov::Light_Source_Struct"** %Light1.i, align 8, !dbg !2162, !tbaa !1570
  call fastcc void @_ZN3povL23update_light_list_entryEPNS_17Light_List_StructEPNS_10Ray_StructEPNS_10istk_entryE(%"struct.pov::Light_List_Struct"* %arrayidx.i, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Inter) #7, !dbg !2164
  %Next_Light_Source.i = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.064.i, i64 0, i32 26, !dbg !2160
  %indvars.iv.next67.i = add i64 %indvars.iv66.i, 1, !dbg !2160
  %Light.0.i = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source.i, align 8, !dbg !2160
  %cmp.i = icmp eq %"struct.pov::Light_Source_Struct"* %Light.0.i, null, !dbg !2160
  br i1 %cmp.i, label %for.end.i, label %for.body.i, !dbg !2160

for.end.i:                                        ; preds = %for.body.i, %if.end54
  %22 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !2165, !tbaa !1570
  %cmp4.i = icmp eq %"struct.pov::Object_Struct"* %22, null, !dbg !2165
  br i1 %cmp4.i, label %_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit, label %if.then.i, !dbg !2165

if.then.i:                                        ; preds = %for.end.i
  %LLights.i = getelementptr inbounds %"struct.pov::Object_Struct"* %22, i64 0, i32 8, !dbg !2166
  %23 = load %"struct.pov::Light_Source_Struct"** %LLights.i, align 8, !dbg !2166, !tbaa !1570
  %cmp6.i = icmp eq %"struct.pov::Light_Source_Struct"* %23, null, !dbg !2166
  br i1 %cmp6.i, label %_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit, label %for.body12.i, !dbg !2166

for.body12.i:                                     ; preds = %if.then.i, %for.body12.i
  %24 = phi i32 [ %inc13.i, %for.body12.i ], [ 0, %if.then.i ]
  %Light.160.i = phi %"struct.pov::Light_Source_Struct"* [ %Light.1.i, %for.body12.i ], [ %23, %if.then.i ]
  %inc13.i = add nsw i32 %24, 1, !dbg !2168
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2168
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !2099), !dbg !2069
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2070
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2071
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2075
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2078
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2079
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2086
  call void @llvm.dbg.value(metadata !{i32 %inc13.i}, i64 0, metadata !1072), !dbg !2088
  %Next_Light_Source15.i = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.160.i, i64 0, i32 26, !dbg !2172
  %Light.1.i = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source15.i, align 8, !dbg !2173
  %cmp11.i = icmp eq %"struct.pov::Light_Source_Struct"* %Light.1.i, null, !dbg !2173
  br i1 %cmp11.i, label %for.end16.i, label %for.body12.i, !dbg !2173

for.end16.i:                                      ; preds = %for.body12.i
  %phitmp.i = sext i32 %inc13.i to i64, !dbg !2173
  %phitmp65.i = shl nsw i64 %phitmp.i, 5, !dbg !2173
  %call.i = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %phitmp65.i, i8* getelementptr inbounds ([54 x i8]* @.str, i64 0, i64 0), i32 1385, i8* getelementptr inbounds ([23 x i8]* @.str6, i64 0, i64 0)) #7, !dbg !2174
  %25 = bitcast i8* %call.i to %"struct.pov::Light_List_Struct"*, !dbg !2174
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2174
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !2066), !dbg !2069
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2070
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2071
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2075
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2078
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2079
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2086
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2088
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %25}, i64 0, metadata !1055), !dbg !2094
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !2159), !dbg !2175
  %26 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !2175, !tbaa !1570
  %LLights18.i = getelementptr inbounds %"struct.pov::Object_Struct"* %26, i64 0, i32 8, !dbg !2175
  %Light.254.i = load %"struct.pov::Light_Source_Struct"** %LLights18.i, align 8, !dbg !2175
  %cmp2055.i = icmp eq %"struct.pov::Light_Source_Struct"* %Light.254.i, null, !dbg !2175
  br i1 %cmp2055.i, label %_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit, label %for.body21.i, !dbg !2175

for.body21.i:                                     ; preds = %for.end16.i, %for.body21.i
  %indvars.iv.i = phi i64 [ %indvars.iv.next.i, %for.body21.i ], [ 0, %for.end16.i ]
  %Light.257.i = phi %"struct.pov::Light_Source_Struct"* [ %Light.2.i, %for.body21.i ], [ %Light.254.i, %for.end16.i ]
  %Light24.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %25, i64 %indvars.iv.i, i32 3, !dbg !2177
  store %"struct.pov::Light_Source_Struct"* %Light.257.i, %"struct.pov::Light_Source_Struct"** %Light24.i, align 8, !dbg !2177, !tbaa !1570
  %arrayidx26.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %25, i64 %indvars.iv.i, !dbg !2179
  call fastcc void @_ZN3povL23update_light_list_entryEPNS_17Light_List_StructEPNS_10Ray_StructEPNS_10istk_entryE(%"struct.pov::Light_List_Struct"* %arrayidx26.i, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Inter) #7, !dbg !2179
  %Next_Light_Source28.i = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light.257.i, i64 0, i32 26, !dbg !2175
  %Light.2.i = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source28.i, align 8, !dbg !2175
  %cmp20.i = icmp eq %"struct.pov::Light_Source_Struct"* %Light.2.i, null, !dbg !2175
  %indvars.iv.next.i = add i64 %indvars.iv.i, 1, !dbg !2175
  br i1 %cmp20.i, label %_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit, label %for.body21.i, !dbg !2175

_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit: ; preds = %for.body21.i, %for.end16.i, %if.then.i, %for.end.i
  %local_light_list.0.load935956 = phi %"struct.pov::Light_List_Struct"* [ null, %for.end.i ], [ null, %if.then.i ], [ %25, %for.end16.i ], [ %25, %for.body21.i ]
  %inc13.i953 = phi i32 [ 0, %for.end.i ], [ 0, %if.then.i ], [ %inc13.i, %for.end16.i ], [ %inc13.i, %for.body21.i ]
  %27 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2180, !tbaa !1566
  %28 = load %"struct.pov::Lit_Interval_Struct"*** @_ZN3pov20MediaLitIntervalPoolE, align 8, !dbg !2180, !tbaa !1570
  %arrayidx56 = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"** %28, i64 %27, !dbg !2180
  %29 = load %"struct.pov::Lit_Interval_Struct"** %arrayidx56, align 8, !dbg !2180, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %29}, i64 0, metadata !1056), !dbg !2180
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %29}, i64 0, metadata !2181), !dbg !2140
  call void @llvm.dbg.value(metadata !{i32 %global_light_list_cnt.0}, i64 0, metadata !2182), !dbg !2140
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %21}, i64 0, metadata !2183), !dbg !2140
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Inter}, i64 0, metadata !2184), !dbg !2185
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_List_Struct"* %local_light_list.0.load935956}, i64 0, metadata !2186), !dbg !2185
  call void @llvm.dbg.value(metadata !{i32 %inc13.i953}, i64 0, metadata !2187), !dbg !2185
  %add.i = add nsw i32 %inc13.i953, %global_light_list_cnt.0, !dbg !2188
  %30 = load i32* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 3), align 8, !dbg !2188, !tbaa !1580
  %cmp.i900 = icmp sgt i32 %add.i, %30, !dbg !2188
  br i1 %cmp.i900, label %if.then.i902, label %for.cond.preheader.i, !dbg !2188

if.then.i902:                                     ; preds = %_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit
  %31 = load double** @_ZN3pov2s0E, align 8, !dbg !2189, !tbaa !1570
  %32 = bitcast double* %31 to i8*, !dbg !2189
  %conv.i = sext i32 %add.i to i64, !dbg !2189
  %mul.i = shl nsw i64 %conv.i, 3, !dbg !2189
  %call.i901 = call i8* @_ZN3pov11pov_reallocEPvmPKciS2_(i8* %32, i64 %mul.i, i8* getelementptr inbounds ([54 x i8]* @.str, i64 0, i64 0), i32 1479, i8* getelementptr inbounds ([10 x i8]* @.str5, i64 0, i64 0)) #7, !dbg !2189
  %33 = bitcast i8* %call.i901 to double*, !dbg !2189
  store double* %33, double** @_ZN3pov2s0E, align 8, !dbg !2189, !tbaa !1570
  %34 = load double** @_ZN3pov2s1E, align 8, !dbg !2191, !tbaa !1570
  %35 = bitcast double* %34 to i8*, !dbg !2191
  %call5.i = call i8* @_ZN3pov11pov_reallocEPvmPKciS2_(i8* %35, i64 %mul.i, i8* getelementptr inbounds ([54 x i8]* @.str, i64 0, i64 0), i32 1480, i8* getelementptr inbounds ([10 x i8]* @.str5, i64 0, i64 0)) #7, !dbg !2191
  %36 = bitcast i8* %call5.i to double*, !dbg !2191
  store double* %36, double** @_ZN3pov2s1E, align 8, !dbg !2191, !tbaa !1570
  br label %for.cond.preheader.i, !dbg !2192

for.cond.preheader.i:                             ; preds = %if.then.i902, %_ZN3povL14get_light_listEPNS_17Light_List_StructERS1_RiPNS_10Ray_StructEPNS_10istk_entryE.exit
  %cmp6231.i = icmp sgt i32 %global_light_list_cnt.0, 0, !dbg !2193
  br i1 %cmp6231.i, label %for.body.lr.ph.i, label %for.cond18.preheader.i, !dbg !2193

for.body.lr.ph.i:                                 ; preds = %for.cond.preheader.i
  %37 = load double** @_ZN3pov2s0E, align 8, !dbg !2195, !tbaa !1570
  %38 = load double** @_ZN3pov2s1E, align 8, !dbg !2198, !tbaa !1570
  br label %for.body.i903, !dbg !2193

for.cond18.preheader.i:                           ; preds = %for.inc.i, %for.cond.preheader.i
  %a.0.lcssa.i = phi i32 [ 0, %for.cond.preheader.i ], [ %a.1.i, %for.inc.i ]
  %cmp19227.i = icmp sgt i32 %inc13.i953, 0, !dbg !2199
  br i1 %cmp19227.i, label %for.body20.lr.ph.i, label %for.end40.i, !dbg !2199

for.body20.lr.ph.i:                               ; preds = %for.cond18.preheader.i
  %39 = load double** @_ZN3pov2s0E, align 8, !dbg !2201, !tbaa !1570
  %40 = load double** @_ZN3pov2s1E, align 8, !dbg !2204, !tbaa !1570
  br label %for.body20.i, !dbg !2199

for.body.i903:                                    ; preds = %for.inc.i, %for.body.lr.ph.i
  %indvars.iv240.i = phi i64 [ 0, %for.body.lr.ph.i ], [ %indvars.iv.next241.i, %for.inc.i ]
  %a.0232.i = phi i32 [ 0, %for.body.lr.ph.i ], [ %a.1.i, %for.inc.i ]
  %active.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %21, i64 %indvars.iv240.i, i32 0, !dbg !2205
  %41 = load i8* %active.i, align 1, !dbg !2205, !tbaa !1942, !range !1943
  %tobool.i = icmp eq i8 %41, 0, !dbg !2205
  br i1 %tobool.i, label %for.inc.i, label %if.then7.i904, !dbg !2205

if.then7.i904:                                    ; preds = %for.body.i903
  %s0.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %21, i64 %indvars.iv240.i, i32 1, !dbg !2195
  %42 = load double* %s0.i, align 8, !dbg !2195, !tbaa !1601
  %idxprom10.i = sext i32 %a.0232.i to i64, !dbg !2195
  %arrayidx11.i = getelementptr inbounds double* %37, i64 %idxprom10.i, !dbg !2195
  store double %42, double* %arrayidx11.i, align 8, !dbg !2195, !tbaa !1601
  %s1.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %21, i64 %indvars.iv240.i, i32 2, !dbg !2198
  %43 = load double* %s1.i, align 8, !dbg !2198, !tbaa !1601
  %arrayidx15.i = getelementptr inbounds double* %38, i64 %idxprom10.i, !dbg !2198
  store double %43, double* %arrayidx15.i, align 8, !dbg !2198, !tbaa !1601
  %inc.i = add nsw i32 %a.0232.i, 1, !dbg !2206
  call void @llvm.dbg.value(metadata !{i32 %inc.i}, i64 0, metadata !2207), !dbg !2206
  br label %for.inc.i, !dbg !2208

for.inc.i:                                        ; preds = %if.then7.i904, %for.body.i903
  %a.1.i = phi i32 [ %inc.i, %if.then7.i904 ], [ %a.0232.i, %for.body.i903 ]
  %indvars.iv.next241.i = add i64 %indvars.iv240.i, 1, !dbg !2193
  %lftr.wideiv1033 = trunc i64 %indvars.iv.next241.i to i32, !dbg !2193
  %exitcond1034 = icmp eq i32 %lftr.wideiv1033, %global_light_list_cnt.0, !dbg !2193
  br i1 %exitcond1034, label %for.cond18.preheader.i, label %for.body.i903, !dbg !2193

for.body20.i:                                     ; preds = %for.inc38.i, %for.body20.lr.ph.i
  %indvars.iv236.i = phi i64 [ 0, %for.body20.lr.ph.i ], [ %indvars.iv.next237.i, %for.inc38.i ]
  %a.2228.i = phi i32 [ %a.0.lcssa.i, %for.body20.lr.ph.i ], [ %a.3.i, %for.inc38.i ]
  %active23.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list.0.load935956, i64 %indvars.iv236.i, i32 0, !dbg !2209
  %44 = load i8* %active23.i, align 1, !dbg !2209, !tbaa !1942, !range !1943
  %tobool24.i = icmp eq i8 %44, 0, !dbg !2209
  br i1 %tobool24.i, label %for.inc38.i, label %if.then25.i, !dbg !2209

if.then25.i:                                      ; preds = %for.body20.i
  %s028.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list.0.load935956, i64 %indvars.iv236.i, i32 1, !dbg !2201
  %45 = load double* %s028.i, align 8, !dbg !2201, !tbaa !1601
  %idxprom29.i = sext i32 %a.2228.i to i64, !dbg !2201
  %arrayidx30.i = getelementptr inbounds double* %39, i64 %idxprom29.i, !dbg !2201
  store double %45, double* %arrayidx30.i, align 8, !dbg !2201, !tbaa !1601
  %s133.i = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list.0.load935956, i64 %indvars.iv236.i, i32 2, !dbg !2204
  %46 = load double* %s133.i, align 8, !dbg !2204, !tbaa !1601
  %arrayidx35.i = getelementptr inbounds double* %40, i64 %idxprom29.i, !dbg !2204
  store double %46, double* %arrayidx35.i, align 8, !dbg !2204, !tbaa !1601
  %inc36.i = add nsw i32 %a.2228.i, 1, !dbg !2210
  call void @llvm.dbg.value(metadata !{i32 %inc36.i}, i64 0, metadata !2207), !dbg !2210
  br label %for.inc38.i, !dbg !2211

for.inc38.i:                                      ; preds = %if.then25.i, %for.body20.i
  %a.3.i = phi i32 [ %inc36.i, %if.then25.i ], [ %a.2228.i, %for.body20.i ]
  %indvars.iv.next237.i = add i64 %indvars.iv236.i, 1, !dbg !2199
  %lftr.wideiv1031 = trunc i64 %indvars.iv.next237.i to i32, !dbg !2199
  %exitcond1032 = icmp eq i32 %lftr.wideiv1031, %inc13.i953, !dbg !2199
  br i1 %exitcond1032, label %for.end40.i, label %for.body20.i, !dbg !2199

for.end40.i:                                      ; preds = %for.inc38.i, %for.cond18.preheader.i
  %a.2.lcssa.i = phi i32 [ %a.0.lcssa.i, %for.cond18.preheader.i ], [ %a.3.i, %for.inc38.i ]
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !2212), !dbg !2213
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %29}, i64 0, metadata !2214), !dbg !2215
  %tobool42.i = icmp eq i32 %a.2.lcssa.i, 0, !dbg !2216
  br i1 %tobool42.i, label %for.body127.lr.ph.i.thread, label %if.then43.i, !dbg !2216

if.then43.i:                                      ; preds = %for.end40.i
  %47 = load double** @_ZN3pov2s0E, align 8, !dbg !2217, !tbaa !1570
  %48 = bitcast double* %47 to i8*, !dbg !2217
  call void @_ZN3pov10spec_qsortEPviiPFiS0_S0_E(i8* %48, i32 %a.2.lcssa.i, i32 8, i32 (i8*, i8*)* @_ZN3povL11compdoublesEPvS0_) #7, !dbg !2217
  %49 = load double** @_ZN3pov2s1E, align 8, !dbg !2219, !tbaa !1570
  %50 = bitcast double* %49 to i8*, !dbg !2219
  call void @_ZN3pov10spec_qsortEPviiPFiS0_S0_E(i8* %50, i32 %a.2.lcssa.i, i32 8, i32 (i8*, i8*)* @_ZN3povL11compdoublesEPvS0_) #7, !dbg !2219
  %51 = load double** @_ZN3pov2s0E, align 8, !dbg !2220, !tbaa !1570
  %52 = load double* %51, align 8, !dbg !2220, !tbaa !1601
  %cmp51.i = fcmp ogt double %52, 0.000000e+00, !dbg !2220
  br i1 %cmp51.i, label %if.then52.i, label %if.end57.i, !dbg !2220

if.then52.i:                                      ; preds = %if.then43.i
  %lit.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 0, !dbg !2221
  store i32 0, i32* %lit.i, align 4, !dbg !2221, !tbaa !1580
  %s053.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 1, !dbg !2223
  store double 0.000000e+00, double* %s053.i, align 8, !dbg !2223, !tbaa !1601
  %53 = load double* %51, align 8, !dbg !2224, !tbaa !1601
  %s155.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 2, !dbg !2224
  store double %53, double* %s155.i, align 8, !dbg !2224, !tbaa !1601
  %incdec.ptr.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 1, !dbg !2225
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %incdec.ptr.i}, i64 0, metadata !2214), !dbg !2225
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !2212), !dbg !2226
  %.pre.i905 = load double* %51, align 8, !dbg !2227, !tbaa !1601
  br label %if.end57.i, !dbg !2228

if.end57.i:                                       ; preds = %if.then52.i, %if.then43.i
  %54 = phi double [ %.pre.i905, %if.then52.i ], [ %52, %if.then43.i ]
  %n.0.i = phi i32 [ 2, %if.then52.i ], [ 1, %if.then43.i ]
  %curr.0.i = phi %"struct.pov::Lit_Interval_Struct"* [ %incdec.ptr.i, %if.then52.i ], [ %29, %if.then43.i ]
  %lit58.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.0.i, i64 0, i32 0, !dbg !2229
  store i32 1, i32* %lit58.i, align 4, !dbg !2229, !tbaa !1580
  %s060.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.0.i, i64 0, i32 1, !dbg !2227
  store double %54, double* %s060.i, align 8, !dbg !2227, !tbaa !1601
  %55 = load double** @_ZN3pov2s1E, align 8, !dbg !2230, !tbaa !1570
  %56 = load double* %55, align 8, !dbg !2230, !tbaa !1601
  %s162.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.0.i, i64 0, i32 2, !dbg !2230
  store double %56, double* %s162.i, align 8, !dbg !2230, !tbaa !1601
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %curr.0.i}, i64 0, metadata !2231), !dbg !2232
  %incdec.ptr63.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.0.i, i64 1, !dbg !2233
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %incdec.ptr63.i}, i64 0, metadata !2214), !dbg !2233
  call void @llvm.dbg.value(metadata !{i32 %n.0.i}, i64 0, metadata !2212), !dbg !2234
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !2235), !dbg !2236
  %cmp66220.i = icmp sgt i32 %a.2.lcssa.i, 1, !dbg !2236
  br i1 %cmp66220.i, label %for.body67.i, label %for.end104.i, !dbg !2236

for.body67.i:                                     ; preds = %if.end57.i, %for.inc102.i
  %57 = phi double [ %.pre244.i, %for.inc102.i ], [ %56, %if.end57.i ], !dbg !2238
  %indvars.iv.i906 = phi i64 [ %indvars.iv.next.i907, %for.inc102.i ], [ 1, %if.end57.i ]
  %prev.0224.i = phi %"struct.pov::Lit_Interval_Struct"* [ %prev.1.i, %for.inc102.i ], [ %curr.0.i, %if.end57.i ]
  %curr.1223.i = phi %"struct.pov::Lit_Interval_Struct"* [ %curr.2.i, %for.inc102.i ], [ %incdec.ptr63.i, %if.end57.i ]
  %n.1222.i = phi i32 [ %n.2.i, %for.inc102.i ], [ %n.0.i, %if.end57.i ]
  %arrayidx69.i = getelementptr inbounds double* %51, i64 %indvars.iv.i906, !dbg !2238
  %58 = load double* %arrayidx69.i, align 8, !dbg !2238, !tbaa !1601
  %s170.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %prev.0224.i, i64 0, i32 2, !dbg !2238
  %cmp71.i = fcmp ogt double %58, %57, !dbg !2238
  br i1 %cmp71.i, label %if.then72.i, label %if.else.i, !dbg !2238

if.then72.i:                                      ; preds = %for.body67.i
  %lit73.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 0, i32 0, !dbg !2240
  store i32 0, i32* %lit73.i, align 4, !dbg !2240, !tbaa !1580
  %s075.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 0, i32 1, !dbg !2242
  store double %57, double* %s075.i, align 8, !dbg !2242, !tbaa !1601
  %59 = load double* %arrayidx69.i, align 8, !dbg !2243, !tbaa !1601
  %s178.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 0, i32 2, !dbg !2243
  store double %59, double* %s178.i, align 8, !dbg !2243, !tbaa !1601
  %lit82.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 1, i32 0, !dbg !2244
  store i32 1, i32* %lit82.i, align 4, !dbg !2244, !tbaa !1580
  %60 = load double* %arrayidx69.i, align 8, !dbg !2245, !tbaa !1601
  %s085.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 1, i32 1, !dbg !2245
  store double %60, double* %s085.i, align 8, !dbg !2245, !tbaa !1601
  %arrayidx87.i = getelementptr inbounds double* %55, i64 %indvars.iv.i906, !dbg !2246
  %61 = load double* %arrayidx87.i, align 8, !dbg !2246, !tbaa !1601
  %s188.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 1, i32 2, !dbg !2246
  store double %61, double* %s188.i, align 8, !dbg !2246, !tbaa !1601
  %incdec.ptr89.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %prev.0224.i, i64 2, !dbg !2247
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %incdec.ptr89.i}, i64 0, metadata !2231), !dbg !2247
  %incdec.ptr90.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1223.i, i64 2, !dbg !2248
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %incdec.ptr90.i}, i64 0, metadata !2214), !dbg !2248
  %inc91.i = add nsw i32 %n.1222.i, 2, !dbg !2249
  call void @llvm.dbg.value(metadata !{i32 %inc91.i}, i64 0, metadata !2212), !dbg !2249
  %s1105.phi.trans.insert.i.phi.trans.insert = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %prev.0224.i, i64 2, i32 2
  %.pre244.i.pre = load double* %s1105.phi.trans.insert.i.phi.trans.insert, align 8, !dbg !2250, !tbaa !1601
  br label %for.inc102.i, !dbg !2251

if.else.i:                                        ; preds = %for.body67.i
  %arrayidx93.i = getelementptr inbounds double* %55, i64 %indvars.iv.i906, !dbg !2252
  %62 = load double* %arrayidx93.i, align 8, !dbg !2252, !tbaa !1601
  %cmp95.i = fcmp ogt double %62, %57, !dbg !2252
  br i1 %cmp95.i, label %if.then96.i, label %for.inc102.i, !dbg !2252

if.then96.i:                                      ; preds = %if.else.i
  store double %62, double* %s170.i, align 8, !dbg !2254, !tbaa !1601
  br label %for.inc102.i, !dbg !2256

for.inc102.i:                                     ; preds = %if.then96.i, %if.else.i, %if.then72.i
  %.pre244.i = phi double [ %.pre244.i.pre, %if.then72.i ], [ %62, %if.then96.i ], [ %57, %if.else.i ], !dbg !2236
  %n.2.i = phi i32 [ %inc91.i, %if.then72.i ], [ %n.1222.i, %if.then96.i ], [ %n.1222.i, %if.else.i ]
  %curr.2.i = phi %"struct.pov::Lit_Interval_Struct"* [ %incdec.ptr90.i, %if.then72.i ], [ %curr.1223.i, %if.then96.i ], [ %curr.1223.i, %if.else.i ]
  %prev.1.i = phi %"struct.pov::Lit_Interval_Struct"* [ %incdec.ptr89.i, %if.then72.i ], [ %prev.0224.i, %if.then96.i ], [ %prev.0224.i, %if.else.i ]
  %indvars.iv.next.i907 = add i64 %indvars.iv.i906, 1, !dbg !2236
  %lftr.wideiv1029 = trunc i64 %indvars.iv.next.i907 to i32, !dbg !2236
  %exitcond1030 = icmp eq i32 %lftr.wideiv1029, %a.2.lcssa.i, !dbg !2236
  br i1 %exitcond1030, label %for.end104.i, label %for.body67.i, !dbg !2236

for.end104.i:                                     ; preds = %for.inc102.i, %if.end57.i
  %63 = phi double [ %56, %if.end57.i ], [ %.pre244.i, %for.inc102.i ]
  %curr.1.lcssa.i = phi %"struct.pov::Lit_Interval_Struct"* [ %incdec.ptr63.i, %if.end57.i ], [ %curr.2.i, %for.inc102.i ]
  %n.1.lcssa.i = phi i32 [ %n.0.i, %if.end57.i ], [ %n.2.i, %for.inc102.i ]
  %Depth.i = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 0, !dbg !2250
  %64 = load double* %Depth.i, align 8, !dbg !2250, !tbaa !1601
  %cmp106.i = fcmp olt double %63, %64, !dbg !2250
  br i1 %cmp106.i, label %if.then107.i, label %if.end123.i, !dbg !2250

if.then107.i:                                     ; preds = %for.end104.i
  %lit108.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1.lcssa.i, i64 0, i32 0, !dbg !2257
  store i32 0, i32* %lit108.i, align 4, !dbg !2257, !tbaa !1580
  %s0110.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1.lcssa.i, i64 0, i32 1, !dbg !2259
  store double %63, double* %s0110.i, align 8, !dbg !2259, !tbaa !1601
  %65 = load double* %Depth.i, align 8, !dbg !2260, !tbaa !1601
  %s1112.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.1.lcssa.i, i64 0, i32 2, !dbg !2260
  store double %65, double* %s1112.i, align 8, !dbg !2260, !tbaa !1601
  %inc114.i = add nsw i32 %n.1.lcssa.i, 1, !dbg !2261
  call void @llvm.dbg.value(metadata !{i32 %inc114.i}, i64 0, metadata !2212), !dbg !2261
  br label %if.end123.i, !dbg !2262

for.body127.lr.ph.i.thread:                       ; preds = %for.end40.i
  %lit117.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 0, !dbg !2263
  store i32 0, i32* %lit117.i, align 4, !dbg !2263, !tbaa !1580
  %s0118.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 1, !dbg !2265
  store double 0.000000e+00, double* %s0118.i, align 8, !dbg !2265, !tbaa !1601
  %Depth119.i = getelementptr inbounds %"struct.pov::istk_entry"* %Inter, i64 0, i32 0, !dbg !2266
  %66 = load double* %Depth119.i, align 8, !dbg !2266, !tbaa !1601
  %s1120.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 2, !dbg !2266
  store double %66, double* %s1120.i, align 8, !dbg !2266, !tbaa !1601
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !2212), !dbg !2267
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %29}, i64 0, metadata !2214), !dbg !2268
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !2235), !dbg !2269
  %ds.i10001041 = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 3, !dbg !2271
  store double %66, double* %ds.i10001041, align 8, !dbg !2271, !tbaa !1601
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !2235), !dbg !2269
  br label %if.end57, !dbg !2269

if.end123.i:                                      ; preds = %if.then107.i, %for.end104.i
  %n.3.i = phi i32 [ %inc114.i, %if.then107.i ], [ %n.1.lcssa.i, %for.end104.i ]
  call void @llvm.dbg.value(metadata !{%"struct.pov::Lit_Interval_Struct"* %29}, i64 0, metadata !2214), !dbg !2268
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !2235), !dbg !2269
  %cmp126217.i = icmp sgt i32 %n.3.i, 0, !dbg !2269
  br i1 %cmp126217.i, label %for.body127.lr.ph.i, label %if.end57, !dbg !2269

for.body127.lr.ph.i:                              ; preds = %if.end123.i
  %s1128.i997.phi.trans.insert = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 2
  %.pre1038 = load double* %s1128.i997.phi.trans.insert, align 8, !dbg !2271, !tbaa !1601
  %s0129.i998.phi.trans.insert = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 1
  %.pre1039 = load double* %s0129.i998.phi.trans.insert, align 8, !dbg !2271, !tbaa !1601
  %sub.i999 = fsub double %.pre1038, %.pre1039, !dbg !2271
  %ds.i1000 = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %29, i64 0, i32 3, !dbg !2271
  store double %sub.i999, double* %ds.i1000, align 8, !dbg !2271, !tbaa !1601
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !2235), !dbg !2269
  %exitcond.i1001 = icmp eq i32 %n.3.i, 1, !dbg !2269
  br i1 %exitcond.i1001, label %if.end57, label %for.body127.for.body127_crit_edge.i, !dbg !2269

for.body127.for.body127_crit_edge.i:              ; preds = %for.body127.lr.ph.i, %for.body127.for.body127_crit_edge.i
  %i.3218.i1003 = phi i32 [ %phitmp.i908, %for.body127.for.body127_crit_edge.i ], [ 1, %for.body127.lr.ph.i ]
  %curr.3219.i1002 = phi %"struct.pov::Lit_Interval_Struct"* [ %incdec.ptr130.i, %for.body127.for.body127_crit_edge.i ], [ %29, %for.body127.lr.ph.i ]
  %incdec.ptr130.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.3219.i1002, i64 1, !dbg !2273
  %phitmp.i908 = add i32 %i.3218.i1003, 1, !dbg !2269
  %s1128.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.3219.i1002, i64 1, i32 2, !dbg !2271
  %67 = load double* %s1128.i, align 8, !dbg !2271, !tbaa !1601
  %s0129.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.3219.i1002, i64 1, i32 1, !dbg !2271
  %68 = load double* %s0129.i, align 8, !dbg !2271, !tbaa !1601
  %sub.i = fsub double %67, %68, !dbg !2271
  %ds.i = getelementptr inbounds %"struct.pov::Lit_Interval_Struct"* %curr.3219.i1002, i64 1, i32 3, !dbg !2271
  store double %sub.i, double* %ds.i, align 8, !dbg !2271, !tbaa !1601
  call void @llvm.dbg.value(metadata !{i32 %i.3218.i1003}, i64 0, metadata !2235), !dbg !2269
  %exitcond.i = icmp eq i32 %phitmp.i908, %n.3.i, !dbg !2269
  br i1 %exitcond.i, label %if.end57, label %for.body127.for.body127_crit_edge.i, !dbg !2269

if.end57:                                         ; preds = %for.body127.lr.ph.i, %for.body127.lr.ph.i.thread, %for.body127.for.body127_crit_edge.i, %if.end123.i, %if.end48
  %n.3247.i963 = phi i32 [ 1, %if.end48 ], [ %n.3.i, %if.end123.i ], [ 1, %for.body127.lr.ph.i.thread ], [ 1, %for.body127.lr.ph.i ], [ %n.3.i, %for.body127.for.body127_crit_edge.i ]
  %local_light_list.0.load935955 = phi %"struct.pov::Light_List_Struct"* [ null, %if.end48 ], [ %local_light_list.0.load935956, %if.end123.i ], [ %local_light_list.0.load935956, %for.body127.lr.ph.i.thread ], [ %local_light_list.0.load935956, %for.body127.lr.ph.i ], [ %local_light_list.0.load935956, %for.body127.for.body127_crit_edge.i ]
  %inc13.i952 = phi i32 [ 0, %if.end48 ], [ %inc13.i953, %if.end123.i ], [ %inc13.i953, %for.body127.lr.ph.i.thread ], [ %inc13.i953, %for.body127.lr.ph.i ], [ %inc13.i953, %for.body127.for.body127_crit_edge.i ]
  %light_list.0 = phi %"struct.pov::Light_List_Struct"* [ null, %if.end48 ], [ %21, %if.end123.i ], [ %21, %for.body127.lr.ph.i.thread ], [ %21, %for.body127.lr.ph.i ], [ %21, %for.body127.for.body127_crit_edge.i ]
  %Lit_Interval.1 = phi %"struct.pov::Lit_Interval_Struct"* [ %Lit_Interval.0, %if.end48 ], [ %29, %if.end123.i ], [ %29, %for.body127.lr.ph.i.thread ], [ %29, %for.body127.lr.ph.i ], [ %29, %for.body127.for.body127_crit_edge.i ]
  %Intervals58 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 1, !dbg !2141
  %69 = load i32* %Intervals58, align 4, !dbg !2141, !tbaa !1580
  %cmp59 = icmp sgt i32 %n.3247.i963, %69, !dbg !2141
  %.899 = select i1 %cmp59, i32 %n.3247.i963, i32 %69, !dbg !2274
  %thesize.0 = mul i32 %.899, 96, !dbg !2274
  %70 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2275, !tbaa !1566
  %71 = load i64* @_ZN3pov17MaxMediaPoolDepthE, align 8, !dbg !2275, !tbaa !1566
  %cmp69 = icmp slt i64 %70, %71, !dbg !2275
  br i1 %cmp69, label %if.end72, label %if.then70, !dbg !2275

if.then70:                                        ; preds = %if.end57
  %mul71 = shl nsw i64 %71, 1, !dbg !2276
  call void @_ZN3pov22ResizeMediaMallocPoolsEl(i64 %mul71) #7, !dbg !2276
  %.pre1035 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2278, !tbaa !1566
  br label %if.end72, !dbg !2279

if.end72:                                         ; preds = %if.end57, %if.then70
  %72 = phi i64 [ %70, %if.end57 ], [ %.pre1035, %if.then70 ]
  %conv73 = sext i32 %thesize.0 to i64, !dbg !2278
  %73 = load i64** @_ZN3pov21MediaIntervalPoolSizeE, align 8, !dbg !2278, !tbaa !1570
  %arrayidx74 = getelementptr inbounds i64* %73, i64 %72, !dbg !2278
  %74 = load i64* %arrayidx74, align 8, !dbg !2278, !tbaa !1566
  %cmp75 = icmp sgt i64 %conv73, %74, !dbg !2278
  %75 = load %"struct.pov::Media_Interval_Struct"*** @_ZN3pov17MediaIntervalPoolE, align 8, !dbg !2280, !tbaa !1570
  %arrayidx77 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"** %75, i64 %72, !dbg !2280
  %76 = load %"struct.pov::Media_Interval_Struct"** %arrayidx77, align 8, !dbg !2280, !tbaa !1570
  br i1 %cmp75, label %if.else78, label %if.end85, !dbg !2278

if.else78:                                        ; preds = %if.end72
  %77 = bitcast %"struct.pov::Media_Interval_Struct"* %76 to i8*, !dbg !2281
  call void @_ZN3pov8pov_freeEPvPKci(i8* %77, i8* getelementptr inbounds ([54 x i8]* @.str, i64 0, i64 0), i32 542) #7, !dbg !2281
  %78 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2281, !tbaa !1566
  %79 = load %"struct.pov::Media_Interval_Struct"*** @_ZN3pov17MediaIntervalPoolE, align 8, !dbg !2281, !tbaa !1570
  %arrayidx80 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"** %79, i64 %78, !dbg !2281
  store %"struct.pov::Media_Interval_Struct"* null, %"struct.pov::Media_Interval_Struct"** %arrayidx80, align 8, !dbg !2281, !tbaa !1570
  %call = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %conv73, i8* getelementptr inbounds ([54 x i8]* @.str, i64 0, i64 0), i32 543, i8* getelementptr inbounds ([16 x i8]* @.str1, i64 0, i64 0)) #7, !dbg !2284
  %80 = bitcast i8* %call to %"struct.pov::Media_Interval_Struct"*, !dbg !2284
  %81 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2284, !tbaa !1566
  %82 = load %"struct.pov::Media_Interval_Struct"*** @_ZN3pov17MediaIntervalPoolE, align 8, !dbg !2284, !tbaa !1570
  %arrayidx82 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"** %82, i64 %81, !dbg !2284
  store %"struct.pov::Media_Interval_Struct"* %80, %"struct.pov::Media_Interval_Struct"** %arrayidx82, align 8, !dbg !2284, !tbaa !1570
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Interval_Struct"* %80}, i64 0, metadata !1060), !dbg !2284
  %83 = load i64** @_ZN3pov21MediaIntervalPoolSizeE, align 8, !dbg !2285, !tbaa !1570
  %arrayidx84 = getelementptr inbounds i64* %83, i64 %81, !dbg !2285
  store i64 %conv73, i64* %arrayidx84, align 8, !dbg !2285, !tbaa !1566
  br label %if.end85

if.end85:                                         ; preds = %if.end72, %if.else78
  %Media_Interval.0 = phi %"struct.pov::Media_Interval_Struct"* [ %80, %if.else78 ], [ %76, %if.end72 ]
  %call86 = call fastcc i32 @_ZN3povL25set_up_sampling_intervalsEPNS_21Media_Interval_StructEiPNS_19Lit_Interval_StructEPNS_12Media_StructE(%"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i32 %n.3247.i963, %"struct.pov::Lit_Interval_Struct"* %Lit_Interval.1, %"struct.pov::Media_Struct"* %IMedia.1.lcssa) #7, !dbg !2142
  call void @llvm.dbg.value(metadata !{i32 %call86}, i64 0, metadata !1039), !dbg !2142
  %Min_Samples = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 2, !dbg !2286
  %84 = load i32* %Min_Samples, align 4, !dbg !2286, !tbaa !1580
  call void @llvm.dbg.value(metadata !{i32 %84}, i64 0, metadata !1071), !dbg !2286
  %Sample_Method = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 4, !dbg !2287
  %85 = load i32* %Sample_Method, align 4, !dbg !2287, !tbaa !1580
  %cmp87.not = icmp ne i32 %85, 3, !dbg !2287
  %brmerge = or i1 %cmp87.not, %tobool24, !dbg !2287
  br i1 %brmerge, label %for.cond321.preheader, label %while.cond.preheader, !dbg !2287

while.cond.preheader:                             ; preds = %if.end85
  %AA_Search_Media.0992 = load %"struct.pov::Media_Struct"** %Media_List, align 8, !dbg !2288
  %tobool91993 = icmp eq %"struct.pov::Media_Struct"* %AA_Search_Media.0992, null, !dbg !2289
  br i1 %tobool91993, label %for.cond97.preheader, label %while.body, !dbg !2289

for.cond321.preheader:                            ; preds = %if.end85
  %cmp322984 = icmp sgt i32 %call86, 0, !dbg !2290
  br i1 %cmp322984, label %for.body323.lr.ph, label %for.end363, !dbg !2290

for.body323.lr.ph:                                ; preds = %for.cond321.preheader
  %cmp325982 = icmp sgt i32 %84, 0, !dbg !2291
  %conv332 = sitofp i32 %84 to double, !dbg !2292
  %Jitter337 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 5, !dbg !2293
  %arraydecay344 = getelementptr inbounds [5 x float]* %C0, i64 0, i64 0, !dbg !2079
  %arraydecay345 = getelementptr inbounds [5 x float]* %od0, i64 0, i64 0, !dbg !2079
  br label %for.body323, !dbg !2290

for.cond97.preheader:                             ; preds = %while.body, %while.cond.preheader
  %aa_threshold.0.lcssa = phi double [ 1.000000e+03, %while.cond.preheader ], [ %aa_threshold.1, %while.body ]
  %cmp98990 = icmp sgt i32 %call86, 0, !dbg !2294
  br i1 %cmp98990, label %for.body99.lr.ph, label %for.end585, !dbg !2294

for.body99.lr.ph:                                 ; preds = %for.cond97.preheader
  %conv100 = sitofp i32 %84 to double, !dbg !2295
  %div = fmul double %conv100, 5.000000e-01, !dbg !2295
  %conv101 = fptosi double %div to i32, !dbg !2295
  %add = add nsw i32 %conv101, 1, !dbg !2295
  %cmp102 = icmp slt i32 %add, 2, !dbg !2296
  %.add = select i1 %cmp102, i32 2, i32 %add, !dbg !2296
  %add155 = add nsw i32 %.add, 1, !dbg !2297
  %conv156 = sitofp i32 %add155 to double, !dbg !2297
  %div157 = fdiv double 1.000000e+00, %conv156, !dbg !2297
  %Jitter160 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 5, !dbg !2298
  %arraydecay168 = getelementptr inbounds [5 x float]* %C0, i64 0, i64 0, !dbg !2071
  %arraydecay169 = getelementptr inbounds [5 x float]* %od0, i64 0, i64 0, !dbg !2071
  %cmp196986 = icmp slt i32 %.add, 1, !dbg !2299
  %arraydecay208 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 0, !dbg !2075
  %arraydecay209 = getelementptr inbounds [5 x float]* %od1, i64 0, i64 0, !dbg !2075
  %arraydecay213 = getelementptr inbounds [5 x float]* %Result, i64 0, i64 0, !dbg !2078
  %arraydecay216 = getelementptr inbounds [5 x float]* %ODResult, i64 0, i64 0, !dbg !2078
  %AA_Level219 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 22, !dbg !2078
  %conv229 = sitofp i32 %.add to float, !dbg !2300
  %arrayidx241 = getelementptr inbounds [5 x float]* %Result, i64 0, i64 1, !dbg !2301
  %arrayidx260 = getelementptr inbounds [5 x float]* %Result, i64 0, i64 2, !dbg !2302
  %arrayidx281 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 1, !dbg !2303
  %arrayidx282 = getelementptr inbounds [5 x float]* %C0, i64 0, i64 1, !dbg !2303
  %arrayidx283 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 2, !dbg !2304
  %arrayidx284 = getelementptr inbounds [5 x float]* %C0, i64 0, i64 2, !dbg !2304
  %arrayidx291 = getelementptr inbounds [5 x float]* %ODResult, i64 0, i64 1, !dbg !2305
  %arrayidx297 = getelementptr inbounds [5 x float]* %ODResult, i64 0, i64 2, !dbg !2306
  %arrayidx305 = getelementptr inbounds [5 x float]* %od1, i64 0, i64 1, !dbg !2307
  %arrayidx306 = getelementptr inbounds [5 x float]* %od0, i64 0, i64 1, !dbg !2307
  %arrayidx307 = getelementptr inbounds [5 x float]* %od1, i64 0, i64 2, !dbg !2308
  %arrayidx308 = getelementptr inbounds [5 x float]* %od0, i64 0, i64 2, !dbg !2308
  br label %for.body99, !dbg !2294

while.body:                                       ; preds = %while.cond.preheader, %while.body
  %AA_Search_Media.0995 = phi %"struct.pov::Media_Struct"* [ %AA_Search_Media.0, %while.body ], [ %AA_Search_Media.0992, %while.cond.preheader ]
  %aa_threshold.0994 = phi double [ %aa_threshold.1, %while.body ], [ 1.000000e+03, %while.cond.preheader ]
  %AA_Threshold = getelementptr inbounds %"struct.pov::Media_Struct"* %AA_Search_Media.0995, i64 0, i32 21, !dbg !2309
  %86 = load double* %AA_Threshold, align 8, !dbg !2309, !tbaa !1601
  %cmp92 = fcmp olt double %86, %aa_threshold.0994, !dbg !2309
  call void @llvm.dbg.value(metadata !{double %86}, i64 0, metadata !1078), !dbg !2311
  %aa_threshold.1 = select i1 %cmp92, double %86, double %aa_threshold.0994, !dbg !2309
  %Next_Media96 = getelementptr inbounds %"struct.pov::Media_Struct"* %AA_Search_Media.0995, i64 0, i32 25, !dbg !2312
  %AA_Search_Media.0 = load %"struct.pov::Media_Struct"** %Next_Media96, align 8, !dbg !2288
  %tobool91 = icmp eq %"struct.pov::Media_Struct"* %AA_Search_Media.0, null, !dbg !2289
  br i1 %tobool91, label %for.cond97.preheader, label %while.body, !dbg !2289

for.cond504.preheader:                            ; preds = %for.end312, %if.end494, %for.end363, %land.lhs.true365
  %cmp505965 = icmp sgt i32 %call86, 0, !dbg !2313
  br i1 %cmp505965, label %for.body506, label %for.end585, !dbg !2313

for.body99:                                       ; preds = %for.end312, %for.body99.lr.ph
  %indvars.iv1025 = phi i64 [ 0, %for.body99.lr.ph ], [ %indvars.iv.next1026, %for.end312 ]
  tail call void @llvm.dbg.value(metadata !1656, i64 0, metadata !2315), !dbg !2317
  %87 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 100), align 8, !dbg !2318, !tbaa !1566
  %inc.i909 = add nsw i64 %87, 1, !dbg !2318
  store i64 %inc.i909, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 100), align 8, !dbg !2318, !tbaa !1566
  call void @llvm.dbg.value(metadata !{i32 %add}, i64 0, metadata !1075), !dbg !2295
  call void @llvm.dbg.value(metadata !{i32 %.add}, i64 0, metadata !1075), !dbg !2319
  call void @llvm.dbg.value(metadata !{double %div157}, i64 0, metadata !1063), !dbg !2297
  call void @llvm.dbg.value(metadata !1956, i64 0, metadata !1062), !dbg !2320
  %arrayidx159 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, !dbg !2298
  %88 = load double* %Jitter160, align 8, !dbg !2298, !tbaa !1601
  %mul161 = fmul double %div157, %88, !dbg !2298
  %call162 = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !2071
  %conv163 = sitofp i32 %call162 to double, !dbg !2071
  %mul164 = fmul double %conv163, 0x3F0000200040021E, !dbg !2071
  %sub165 = fadd double %mul164, -5.000000e-01, !dbg !2071
  %mul166 = fmul double %mul161, %sub165, !dbg !2071
  %add167 = fadd double %mul166, 0.000000e+00, !dbg !2071
  call fastcc void @_ZN3povL12sample_mediaEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEidPfS9_iS1_i(%"struct.pov::Light_List_Struct"* %light_list.0, i32 %global_light_list_cnt.0, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Media_Interval_Struct"* %arrayidx159, i32 %light_ray, double %add167, float* %arraydecay168, float* %arraydecay169, i32 3, %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i32 %inc13.i952) #7, !dbg !2071
  %arrayidx173 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 6, i64 2, !dbg !2321
  store float 0.000000e+00, float* %arrayidx173, align 4, !dbg !2321, !tbaa !1621
  %arrayidx177 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 6, i64 1, !dbg !2321
  store float 0.000000e+00, float* %arrayidx177, align 4, !dbg !2321, !tbaa !1621
  %arrayidx181 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 6, i64 0, !dbg !2321
  store float 0.000000e+00, float* %arrayidx181, align 4, !dbg !2321, !tbaa !1621
  %arrayidx185 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 5, i64 2, !dbg !2322
  store float 0.000000e+00, float* %arrayidx185, align 4, !dbg !2322, !tbaa !1621
  %arrayidx189 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 5, i64 1, !dbg !2322
  store float 0.000000e+00, float* %arrayidx189, align 4, !dbg !2322, !tbaa !1621
  %arrayidx193 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 5, i64 0, !dbg !2322
  store float 0.000000e+00, float* %arrayidx193, align 4, !dbg !2322, !tbaa !1621
  call void @llvm.dbg.value(metadata !1597, i64 0, metadata !1038), !dbg !2299
  br i1 %cmp196986, label %for.end312, label %for.body197, !dbg !2299

for.body197:                                      ; preds = %for.body99, %for.body197
  %j.0988 = phi i32 [ %inc310, %for.body197 ], [ 1, %for.body99 ]
  %d0.0987.pn = phi double [ %d0.0987, %for.body197 ], [ 0.000000e+00, %for.body99 ]
  %d0.0987 = fadd double %div157, %d0.0987.pn, !dbg !2299
  %89 = load double* %Jitter160, align 8, !dbg !2323, !tbaa !1601
  %mul201 = fmul double %div157, %89, !dbg !2323
  %call202 = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !2075
  %conv203 = sitofp i32 %call202 to double, !dbg !2075
  %mul204 = fmul double %conv203, 0x3F0000200040021E, !dbg !2075
  %sub205 = fadd double %mul204, -5.000000e-01, !dbg !2075
  %mul206 = fmul double %mul201, %sub205, !dbg !2075
  %add207 = fadd double %d0.0987, %mul206, !dbg !2075
  call fastcc void @_ZN3povL12sample_mediaEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEidPfS9_iS1_i(%"struct.pov::Light_List_Struct"* %light_list.0, i32 %global_light_list_cnt.0, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Media_Interval_Struct"* %arrayidx159, i32 %light_ray, double %add207, float* %arraydecay208, float* %arraydecay209, i32 3, %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i32 %inc13.i952) #7, !dbg !2075
  %sub212 = fsub double %d0.0987, %div157, !dbg !2078
  %90 = load i32* %AA_Level219, align 4, !dbg !2078, !tbaa !1580
  %sub220 = add nsw i32 %90, -1, !dbg !2078
  %91 = load double* %Jitter160, align 8, !dbg !2078, !tbaa !1601
  call fastcc void @_ZN3povL16sample_media_recEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEiddPfS9_S9_S9_S9_S9_iddS1_i(%"struct.pov::Light_List_Struct"* %light_list.0, i32 %global_light_list_cnt.0, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Media_Interval_Struct"* %arrayidx159, i32 %light_ray, double %sub212, double %d0.0987, float* %arraydecay213, float* %arraydecay168, float* %arraydecay208, float* %arraydecay216, float* %arraydecay169, float* %arraydecay209, i32 %sub220, double %91, double %aa_threshold.0.lcssa, %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i32 %inc13.i952) #7, !dbg !2078
  %92 = load float* %arraydecay213, align 16, !dbg !2300, !tbaa !1621
  %conv223 = fpext float %92 to double, !dbg !2300
  %93 = load float* %arrayidx193, align 4, !dbg !2300, !tbaa !1621
  %sub228 = fsub float -0.000000e+00, %93, !dbg !2300
  %div230 = fdiv float %sub228, %conv229, !dbg !2300
  %conv231 = fpext float %div230 to double, !dbg !2300
  %call232 = call double @exp(double %conv231) #8, !dbg !2300
  %mul233 = fmul double %conv223, %call232, !dbg !2300
  %94 = load float* %arrayidx181, align 4, !dbg !2300, !tbaa !1621
  %conv238 = fpext float %94 to double, !dbg !2300
  %add239 = fadd double %mul233, %conv238, !dbg !2300
  %conv240 = fptrunc double %add239 to float, !dbg !2300
  store float %conv240, float* %arrayidx181, align 4, !dbg !2300, !tbaa !1621
  %95 = load float* %arrayidx241, align 4, !dbg !2301, !tbaa !1621
  %conv242 = fpext float %95 to double, !dbg !2301
  %96 = load float* %arrayidx189, align 4, !dbg !2301, !tbaa !1621
  %sub247 = fsub float -0.000000e+00, %96, !dbg !2301
  %div249 = fdiv float %sub247, %conv229, !dbg !2301
  %conv250 = fpext float %div249 to double, !dbg !2301
  %call251 = call double @exp(double %conv250) #8, !dbg !2301
  %mul252 = fmul double %conv242, %call251, !dbg !2301
  %97 = load float* %arrayidx177, align 4, !dbg !2301, !tbaa !1621
  %conv257 = fpext float %97 to double, !dbg !2301
  %add258 = fadd double %mul252, %conv257, !dbg !2301
  %conv259 = fptrunc double %add258 to float, !dbg !2301
  store float %conv259, float* %arrayidx177, align 4, !dbg !2301, !tbaa !1621
  %98 = load float* %arrayidx260, align 8, !dbg !2302, !tbaa !1621
  %conv261 = fpext float %98 to double, !dbg !2302
  %99 = load float* %arrayidx185, align 4, !dbg !2302, !tbaa !1621
  %sub266 = fsub float -0.000000e+00, %99, !dbg !2302
  %div268 = fdiv float %sub266, %conv229, !dbg !2302
  %conv269 = fpext float %div268 to double, !dbg !2302
  %call270 = call double @exp(double %conv269) #8, !dbg !2302
  %mul271 = fmul double %conv261, %call270, !dbg !2302
  %100 = load float* %arrayidx173, align 4, !dbg !2302, !tbaa !1621
  %conv276 = fpext float %100 to double, !dbg !2302
  %add277 = fadd double %mul271, %conv276, !dbg !2302
  %conv278 = fptrunc double %add277 to float, !dbg !2302
  store float %conv278, float* %arrayidx173, align 4, !dbg !2302, !tbaa !1621
  %101 = load float* %arraydecay208, align 16, !dbg !2324, !tbaa !1621
  store float %101, float* %arraydecay168, align 16, !dbg !2324, !tbaa !1621
  %102 = load float* %arrayidx281, align 4, !dbg !2303, !tbaa !1621
  store float %102, float* %arrayidx282, align 4, !dbg !2303, !tbaa !1621
  %103 = load float* %arrayidx283, align 8, !dbg !2304, !tbaa !1621
  store float %103, float* %arrayidx284, align 8, !dbg !2304, !tbaa !1621
  %104 = load float* %arraydecay216, align 16, !dbg !2325, !tbaa !1621
  %105 = load float* %arrayidx193, align 4, !dbg !2325, !tbaa !1621
  %add290 = fadd float %104, %105, !dbg !2325
  store float %add290, float* %arrayidx193, align 4, !dbg !2325, !tbaa !1621
  %106 = load float* %arrayidx291, align 4, !dbg !2305, !tbaa !1621
  %107 = load float* %arrayidx189, align 4, !dbg !2305, !tbaa !1621
  %add296 = fadd float %106, %107, !dbg !2305
  store float %add296, float* %arrayidx189, align 4, !dbg !2305, !tbaa !1621
  %108 = load float* %arrayidx297, align 8, !dbg !2306, !tbaa !1621
  %109 = load float* %arrayidx185, align 4, !dbg !2306, !tbaa !1621
  %add302 = fadd float %108, %109, !dbg !2306
  store float %add302, float* %arrayidx185, align 4, !dbg !2306, !tbaa !1621
  %110 = load float* %arraydecay209, align 16, !dbg !2326, !tbaa !1621
  store float %110, float* %arraydecay169, align 16, !dbg !2326, !tbaa !1621
  %111 = load float* %arrayidx305, align 4, !dbg !2307, !tbaa !1621
  store float %111, float* %arrayidx306, align 4, !dbg !2307, !tbaa !1621
  %112 = load float* %arrayidx307, align 8, !dbg !2308, !tbaa !1621
  store float %112, float* %arrayidx308, align 8, !dbg !2308, !tbaa !1621
  %inc310 = add nsw i32 %j.0988, 1, !dbg !2299
  call void @llvm.dbg.value(metadata !{i32 %inc310}, i64 0, metadata !1038), !dbg !2299
  %cmp196 = icmp slt i32 %j.0988, %.add, !dbg !2299
  br i1 %cmp196, label %for.body197, label %for.end312, !dbg !2299

for.end312:                                       ; preds = %for.body197, %for.body99
  %samples315 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv1025, i32 1, !dbg !2327
  store i32 %.add, i32* %samples315, align 4, !dbg !2327, !tbaa !1580
  %indvars.iv.next1026 = add i64 %indvars.iv1025, 1, !dbg !2294
  %lftr.wideiv1027 = trunc i64 %indvars.iv.next1026 to i32, !dbg !2294
  %exitcond1028 = icmp eq i32 %lftr.wideiv1027, %call86, !dbg !2294
  br i1 %exitcond1028, label %for.cond504.preheader, label %for.body99, !dbg !2294

for.body323:                                      ; preds = %for.inc361, %for.body323.lr.ph
  %indvars.iv = phi i64 [ 0, %for.body323.lr.ph ], [ %indvars.iv.next, %for.inc361 ]
  tail call void @llvm.dbg.value(metadata !1656, i64 0, metadata !2328), !dbg !2330
  %113 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 100), align 8, !dbg !2331, !tbaa !1566
  %inc.i910 = add nsw i64 %113, 1, !dbg !2331
  store i64 %inc.i910, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 100), align 8, !dbg !2331, !tbaa !1566
  call void @llvm.dbg.value(metadata !204, i64 0, metadata !1038), !dbg !2291
  br i1 %cmp325982, label %for.body326.lr.ph, label %for.inc361, !dbg !2291

for.body326.lr.ph:                                ; preds = %for.body323
  %arrayidx343 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %Media_Interval.0, i64 %indvars.iv, !dbg !2079
  br label %for.body326, !dbg !2291

for.body326:                                      ; preds = %if.end354, %for.body326.lr.ph
  %j.1983 = phi i32 [ 0, %for.body326.lr.ph ], [ %inc359, %if.end354 ]
  %114 = load i32* %Sample_Method, align 4, !dbg !2332, !tbaa !1580
  %cmp328 = icmp eq i32 %114, 2, !dbg !2332
  br i1 %cmp328, label %if.then329, label %if.else346, !dbg !2332

if.then329:                                       ; preds = %for.body326
  %conv330 = sitofp i32 %j.1983 to double, !dbg !2292
  %add331 = fadd double %conv330, 5.000000e-01, !dbg !2292
  %div333 = fdiv double %add331, %conv332, !dbg !2292
  %call334 = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !2293
  %conv335 = sitofp i32 %call334 to double, !dbg !2293
  %mul336 = fmul double %conv335, 0x3F0000200040021E, !dbg !2293
  %115 = load double* %Jitter337, align 8, !dbg !2293, !tbaa !1601
  %mul338 = fmul double %115, %mul336, !dbg !2293
  %div340 = fdiv double %mul338, %conv332, !dbg !2293
  %add341 = fadd double %div333, %div340, !dbg !2293
  call void @llvm.dbg.value(metadata !{double %add341}, i64 0, metadata !1062), !dbg !2293
  call fastcc void @_ZN3povL12sample_mediaEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEidPfS9_iS1_i(%"struct.pov::Light_List_Struct"* %light_list.0, i32 %global_light_list_cnt.0, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Media_Interval_Struct"* %arrayidx343, i32 %light_ray, double %add341, float* %arraydecay344, float* %arraydecay345, i32 2, %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i32 %inc13.i952) #7, !dbg !2079
  br label %if.end354, !dbg !2333

if.else346:                                       ; preds = %for.body326
  %call347 = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !2334
  %conv348 = sitofp i32 %call347 to double, !dbg !2334
  %mul349 = fmul double %conv348, 0x3F0000200040021E, !dbg !2334
  call void @llvm.dbg.value(metadata !{double %mul349}, i64 0, metadata !1062), !dbg !2334
  call fastcc void @_ZN3povL12sample_mediaEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEidPfS9_iS1_i(%"struct.pov::Light_List_Struct"* %light_list.0, i32 %global_light_list_cnt.0, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Media_Interval_Struct"* %arrayidx343, i32 %light_ray, double %mul349, float* %arraydecay344, float* %arraydecay345, i32 1, %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i32 %inc13.i952) #7, !dbg !2086
  br label %if.end354

if.end354:                                        ; preds = %if.else346, %if.then329
  call void @llvm.dbg.value(metadata !{i32 %84}, i64 0, metadata !1038), !dbg !2335
  %.j.1 = select i1 %tobool24, i32 %84, i32 %j.1983, !dbg !2336
  %inc359 = add nsw i32 %.j.1, 1, !dbg !2291
  call void @llvm.dbg.value(metadata !{i32 %inc359}, i64 0, metadata !1038), !dbg !2291
  %cmp325 = icmp slt i32 %inc359, %84, !dbg !2291
  br i1 %cmp325, label %for.body326, label %for.inc361, !dbg !2291

for.inc361:                                       ; preds = %if.end354, %for.body323
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !2290
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !2290
  %exitcond1024 = icmp eq i32 %lftr.wideiv, %call86, !dbg !2290
  br i1 %exitcond1024, label %for.end363, label %for.body323, !dbg !2290

for.end363:                                       ; preds = %for.inc361, %for.cond321.preheader
  br i1 %tobool19, label %for.cond504.preheader, label %land.lhs.true365, !dbg !2337

land.lhs.true365:                                 ; preds = %for.end363
  %Max_Samples = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 3, !dbg !2337
  %116 = load i32* %Max_Samples, align 4, !dbg !2337, !tbaa !1580
  %cmp366 = icmp sgt i32 %116, %84, !dbg !2337
  br i1 %cmp366, label %for.cond369.preheader, label %for.cond504.preheader, !dbg !2337

for.cond369.preheader:                            ; preds = %land.lhs.true365
  br i1 %cmp322984, label %for.body371.lr.ph, label %for.end585, !dbg !2338

for.body371.lr.ph:                                ; preds = %for.cond369.preheader
  %Sample_Threshold = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.1.lcssa, i64 0, i32 20, !dbg !2339
  %arraydecay445 = getelementptr inbounds [5 x float]* %C0, i64 0, i64 0, !dbg !2088
  %arraydecay446 = getelementptr inbounds [5 x float]* %od0, i64 0, i64 0, !dbg !2088
  br label %for.body371, !dbg !2338

for.body371:                                      ; preds = %if.end494, %for.body371.lr.ph
  %117 = phi i32 [ %116, %for.body371.lr.ph ], [ %137, %if.end494 ], !dbg !2340
  %i.2981 = phi i32 [ 0, %for.body371.lr.ph ], [ %inc497, %if.end494 ]
  %curr.0980 = phi %"struct.pov::Media_Interval_Struct"* [ %Media_Interval.0, %for.body371.lr.ph ], [ %incdec.ptr495, %if.end494 ]
  %samples372 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 1, !dbg !2340
  %118 = load i32* %samples372, align 4, !dbg !2340, !tbaa !1580
  %cmp374 = icmp slt i32 %118, %117, !dbg !2340
  br i1 %cmp374, label %if.then375, label %if.end494, !dbg !2340

if.then375:                                       ; preds = %for.body371
  %conv377 = sitofp i32 %118 to double, !dbg !2341
  call void @llvm.dbg.value(metadata !{double %conv377}, i64 0, metadata !1042), !dbg !2341
  %arrayidx378 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 7, i64 0, !dbg !2342
  %119 = load float* %arrayidx378, align 4, !dbg !2342, !tbaa !1621
  %conv379 = fpext float %119 to double, !dbg !2342
  %div380 = fdiv double %conv379, %conv377, !dbg !2342
  %arrayidx382 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 6, i64 0, !dbg !2343
  %120 = load float* %arrayidx382, align 4, !dbg !2343, !tbaa !1621
  %conv383 = fpext float %120 to double, !dbg !2343
  %div384 = fdiv double %conv383, %conv377, !dbg !2343
  tail call void @llvm.dbg.value(metadata !{double %div384}, i64 0, metadata !2344), !dbg !2345
  %mul.i911 = fmul double %div384, %div384, !dbg !2346
  %sub386 = fsub double %div380, %mul.i911, !dbg !2343
  %div387 = fdiv double %sub386, %conv377, !dbg !2343
  %arrayidx391 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 7, i64 1, !dbg !2348
  %121 = load float* %arrayidx391, align 4, !dbg !2348, !tbaa !1621
  %conv392 = fpext float %121 to double, !dbg !2348
  %div393 = fdiv double %conv392, %conv377, !dbg !2348
  %arrayidx395 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 6, i64 1, !dbg !2349
  %122 = load float* %arrayidx395, align 4, !dbg !2349, !tbaa !1621
  %conv396 = fpext float %122 to double, !dbg !2349
  %div397 = fdiv double %conv396, %conv377, !dbg !2349
  tail call void @llvm.dbg.value(metadata !{double %div397}, i64 0, metadata !2350), !dbg !2351
  %mul.i912 = fmul double %div397, %div397, !dbg !2352
  %sub399 = fsub double %div393, %mul.i912, !dbg !2349
  %div400 = fdiv double %sub399, %conv377, !dbg !2349
  %arrayidx404 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 7, i64 2, !dbg !2353
  %123 = load float* %arrayidx404, align 4, !dbg !2353, !tbaa !1621
  %conv405 = fpext float %123 to double, !dbg !2353
  %div406 = fdiv double %conv405, %conv377, !dbg !2353
  %arrayidx408 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 0, i32 6, i64 2, !dbg !2354
  %124 = load float* %arrayidx408, align 4, !dbg !2354, !tbaa !1621
  %conv409 = fpext float %124 to double, !dbg !2354
  %div410 = fdiv double %conv409, %conv377, !dbg !2354
  tail call void @llvm.dbg.value(metadata !{double %div410}, i64 0, metadata !2355), !dbg !2356
  %mul.i913 = fmul double %div410, %div410, !dbg !2357
  %sub412 = fsub double %div406, %mul.i913, !dbg !2354
  %div413 = fdiv double %sub412, %conv377, !dbg !2354
  br label %while.cond416, !dbg !2339

while.cond416:                                    ; preds = %if.end451, %if.then375
  %125 = phi i32 [ %118, %if.then375 ], [ %129, %if.end451 ]
  %126 = phi i32 [ %117, %if.then375 ], [ %130, %if.end451 ]
  %Va.sroa.2.0.in = phi double [ %div413, %if.then375 ], [ %div490, %if.end451 ]
  %Va.sroa.1.0.in = phi double [ %div400, %if.then375 ], [ %div477, %if.end451 ]
  %Va.sroa.0.0.in = phi double [ %div387, %if.then375 ], [ %div464, %if.end451 ]
  %Va.sroa.0.0 = fptrunc double %Va.sroa.0.0.in to float, !dbg !2343
  %Va.sroa.2.0 = fptrunc double %Va.sroa.2.0.in to float, !dbg !2354
  %conv418 = fpext float %Va.sroa.0.0 to double, !dbg !2339
  %sub420 = add nsw i32 %125, -1, !dbg !2339
  %idxprom421 = sext i32 %sub420 to i64, !dbg !2339
  %127 = load double** %Sample_Threshold, align 8, !dbg !2339, !tbaa !1570
  %arrayidx422 = getelementptr inbounds double* %127, i64 %idxprom421, !dbg !2339
  %128 = load double* %arrayidx422, align 8, !dbg !2339, !tbaa !1601
  %cmp423 = fcmp ult double %conv418, %128, !dbg !2339
  br i1 %cmp423, label %lor.lhs.false424, label %while.body441, !dbg !2339

lor.lhs.false424:                                 ; preds = %while.cond416
  %Va.sroa.1.0 = fptrunc double %Va.sroa.1.0.in to float, !dbg !2349
  %conv426 = fpext float %Va.sroa.1.0 to double, !dbg !2339
  %cmp432 = fcmp ult double %conv426, %128, !dbg !2339
  br i1 %cmp432, label %lor.rhs, label %while.body441, !dbg !2339

lor.rhs:                                          ; preds = %lor.lhs.false424
  %conv434 = fpext float %Va.sroa.2.0 to double, !dbg !2339
  %cmp440 = fcmp ult double %conv434, %128, !dbg !2339
  br i1 %cmp440, label %if.end494, label %while.body441, !dbg !2339

while.body441:                                    ; preds = %lor.rhs, %lor.lhs.false424, %while.cond416
  %call442 = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !2088
  %conv443 = sitofp i32 %call442 to double, !dbg !2088
  %mul444 = fmul double %conv443, 0x3F0000200040021E, !dbg !2088
  call fastcc void @_ZN3povL12sample_mediaEPNS_17Light_List_StructEiPNS_10Ray_StructEPPNS_12Media_StructEPNS_21Media_Interval_StructEidPfS9_iS1_i(%"struct.pov::Light_List_Struct"* %light_list.0, i32 %global_light_list_cnt.0, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Media_Struct"** %Media_List, %"struct.pov::Media_Interval_Struct"* %curr.0980, i32 0, double %mul444, float* %arraydecay445, float* %arraydecay446, i32 1, %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i32 %inc13.i952) #7, !dbg !2088
  %129 = load i32* %samples372, align 4, !dbg !2358, !tbaa !1580
  %130 = load i32* %Max_Samples, align 4, !dbg !2358, !tbaa !1580
  %cmp449 = icmp sgt i32 %129, %130, !dbg !2358
  br i1 %cmp449, label %if.end494, label %if.end451, !dbg !2358

if.end451:                                        ; preds = %while.body441
  %conv453 = sitofp i32 %129 to double, !dbg !2359
  call void @llvm.dbg.value(metadata !{double %conv453}, i64 0, metadata !1042), !dbg !2359
  %131 = load float* %arrayidx378, align 4, !dbg !2360, !tbaa !1621
  %conv456 = fpext float %131 to double, !dbg !2360
  %div457 = fdiv double %conv456, %conv453, !dbg !2360
  %132 = load float* %arrayidx382, align 4, !dbg !2361, !tbaa !1621
  %conv460 = fpext float %132 to double, !dbg !2361
  %div461 = fdiv double %conv460, %conv453, !dbg !2361
  tail call void @llvm.dbg.value(metadata !{double %div461}, i64 0, metadata !2362), !dbg !2363
  %mul.i914 = fmul double %div461, %div461, !dbg !2364
  %sub463 = fsub double %div457, %mul.i914, !dbg !2361
  %div464 = fdiv double %sub463, %conv453, !dbg !2361
  %133 = load float* %arrayidx391, align 4, !dbg !2365, !tbaa !1621
  %conv469 = fpext float %133 to double, !dbg !2365
  %div470 = fdiv double %conv469, %conv453, !dbg !2365
  %134 = load float* %arrayidx395, align 4, !dbg !2366, !tbaa !1621
  %conv473 = fpext float %134 to double, !dbg !2366
  %div474 = fdiv double %conv473, %conv453, !dbg !2366
  tail call void @llvm.dbg.value(metadata !{double %div474}, i64 0, metadata !2367), !dbg !2368
  %mul.i920 = fmul double %div474, %div474, !dbg !2369
  %sub476 = fsub double %div470, %mul.i920, !dbg !2366
  %div477 = fdiv double %sub476, %conv453, !dbg !2366
  %135 = load float* %arrayidx404, align 4, !dbg !2370, !tbaa !1621
  %conv482 = fpext float %135 to double, !dbg !2370
  %div483 = fdiv double %conv482, %conv453, !dbg !2370
  %136 = load float* %arrayidx408, align 4, !dbg !2371, !tbaa !1621
  %conv486 = fpext float %136 to double, !dbg !2371
  %div487 = fdiv double %conv486, %conv453, !dbg !2371
  tail call void @llvm.dbg.value(metadata !{double %div487}, i64 0, metadata !2372), !dbg !2373
  %mul.i919 = fmul double %div487, %div487, !dbg !2374
  %sub489 = fsub double %div483, %mul.i919, !dbg !2371
  %div490 = fdiv double %sub489, %conv453, !dbg !2371
  br label %while.cond416, !dbg !2375

if.end494:                                        ; preds = %lor.rhs, %while.body441, %for.body371
  %137 = phi i32 [ %117, %for.body371 ], [ %130, %while.body441 ], [ %126, %lor.rhs ]
  %incdec.ptr495 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.0980, i64 1, !dbg !2376
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Interval_Struct"* %incdec.ptr495}, i64 0, metadata !1061), !dbg !2376
  %inc497 = add nsw i32 %i.2981, 1, !dbg !2338
  call void @llvm.dbg.value(metadata !{i32 %inc497}, i64 0, metadata !1037), !dbg !2338
  %exitcond1023 = icmp eq i32 %inc497, %call86, !dbg !2338
  br i1 %exitcond1023, label %for.cond504.preheader, label %for.body371, !dbg !2338

for.body506:                                      ; preds = %for.cond504.preheader, %for.body506
  %i.3973 = phi i32 [ %inc584, %for.body506 ], [ 0, %for.cond504.preheader ]
  %curr.1972 = phi %"struct.pov::Media_Interval_Struct"* [ %incdec.ptr582, %for.body506 ], [ %Media_Interval.0, %for.cond504.preheader ]
  %Te.sroa.0.0.load936957971 = phi float [ %conv521, %for.body506 ], [ 0.000000e+00, %for.cond504.preheader ]
  %Te.sroa.1.4.load937958970 = phi float [ %conv536, %for.body506 ], [ 0.000000e+00, %for.cond504.preheader ]
  %Te.sroa.2.8.load938959969 = phi float [ %conv551, %for.body506 ], [ 0.000000e+00, %for.cond504.preheader ]
  %Od.sroa.0.0.load942960968 = phi float [ %conv561, %for.body506 ], [ 0.000000e+00, %for.cond504.preheader ]
  %Od.sroa.1.4.load946961967 = phi float [ %conv571, %for.body506 ], [ 0.000000e+00, %for.cond504.preheader ]
  %Od.sroa.2.8.load950962966 = phi float [ %conv581, %for.body506 ], [ 0.000000e+00, %for.cond504.preheader ]
  %arrayidx508 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 6, i64 0, !dbg !2377
  %138 = load float* %arrayidx508, align 4, !dbg !2377, !tbaa !1621
  %conv509 = fpext float %138 to double, !dbg !2377
  %samples510 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 1, !dbg !2377
  %139 = load i32* %samples510, align 4, !dbg !2377, !tbaa !1580
  %conv511 = sitofp i32 %139 to double, !dbg !2377
  %div512 = fdiv double %conv509, %conv511, !dbg !2377
  %sub514 = fsub float -0.000000e+00, %Od.sroa.0.0.load942960968, !dbg !2377
  %conv515 = fpext float %sub514 to double, !dbg !2377
  %call516 = call double @exp(double %conv515) #8, !dbg !2377
  %mul517 = fmul double %div512, %call516, !dbg !2377
  %conv519 = fpext float %Te.sroa.0.0.load936957971 to double, !dbg !2377
  %add520 = fadd double %conv519, %mul517, !dbg !2377
  %conv521 = fptrunc double %add520 to float, !dbg !2377
  %arrayidx523 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 6, i64 1, !dbg !2379
  %140 = load float* %arrayidx523, align 4, !dbg !2379, !tbaa !1621
  %conv524 = fpext float %140 to double, !dbg !2379
  %141 = load i32* %samples510, align 4, !dbg !2379, !tbaa !1580
  %conv526 = sitofp i32 %141 to double, !dbg !2379
  %div527 = fdiv double %conv524, %conv526, !dbg !2379
  %sub529 = fsub float -0.000000e+00, %Od.sroa.1.4.load946961967, !dbg !2379
  %conv530 = fpext float %sub529 to double, !dbg !2379
  %call531 = call double @exp(double %conv530) #8, !dbg !2379
  %mul532 = fmul double %div527, %call531, !dbg !2379
  %conv534 = fpext float %Te.sroa.1.4.load937958970 to double, !dbg !2379
  %add535 = fadd double %conv534, %mul532, !dbg !2379
  %conv536 = fptrunc double %add535 to float, !dbg !2379
  %arrayidx538 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 6, i64 2, !dbg !2380
  %142 = load float* %arrayidx538, align 4, !dbg !2380, !tbaa !1621
  %conv539 = fpext float %142 to double, !dbg !2380
  %143 = load i32* %samples510, align 4, !dbg !2380, !tbaa !1580
  %conv541 = sitofp i32 %143 to double, !dbg !2380
  %div542 = fdiv double %conv539, %conv541, !dbg !2380
  %sub544 = fsub float -0.000000e+00, %Od.sroa.2.8.load950962966, !dbg !2380
  %conv545 = fpext float %sub544 to double, !dbg !2380
  %call546 = call double @exp(double %conv545) #8, !dbg !2380
  %mul547 = fmul double %div542, %call546, !dbg !2380
  %conv549 = fpext float %Te.sroa.2.8.load938959969 to double, !dbg !2380
  %add550 = fadd double %conv549, %mul547, !dbg !2380
  %conv551 = fptrunc double %add550 to float, !dbg !2380
  %arrayidx553 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 5, i64 0, !dbg !2381
  %144 = load float* %arrayidx553, align 4, !dbg !2381, !tbaa !1621
  %conv554 = fpext float %144 to double, !dbg !2381
  %145 = load i32* %samples510, align 4, !dbg !2381, !tbaa !1580
  %conv556 = sitofp i32 %145 to double, !dbg !2381
  %div557 = fdiv double %conv554, %conv556, !dbg !2381
  %conv559 = fpext float %Od.sroa.0.0.load942960968 to double, !dbg !2381
  %add560 = fadd double %conv559, %div557, !dbg !2381
  %conv561 = fptrunc double %add560 to float, !dbg !2381
  %arrayidx563 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 5, i64 1, !dbg !2382
  %146 = load float* %arrayidx563, align 4, !dbg !2382, !tbaa !1621
  %conv564 = fpext float %146 to double, !dbg !2382
  %div567 = fdiv double %conv564, %conv556, !dbg !2382
  %conv569 = fpext float %Od.sroa.1.4.load946961967 to double, !dbg !2382
  %add570 = fadd double %conv569, %div567, !dbg !2382
  %conv571 = fptrunc double %add570 to float, !dbg !2382
  %arrayidx573 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 0, i32 5, i64 2, !dbg !2383
  %147 = load float* %arrayidx573, align 4, !dbg !2383, !tbaa !1621
  %conv574 = fpext float %147 to double, !dbg !2383
  %div577 = fdiv double %conv574, %conv556, !dbg !2383
  %conv579 = fpext float %Od.sroa.2.8.load950962966 to double, !dbg !2383
  %add580 = fadd double %conv579, %div577, !dbg !2383
  %conv581 = fptrunc double %add580 to float, !dbg !2383
  %incdec.ptr582 = getelementptr inbounds %"struct.pov::Media_Interval_Struct"* %curr.1972, i64 1, !dbg !2384
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Interval_Struct"* %incdec.ptr582}, i64 0, metadata !1061), !dbg !2384
  %inc584 = add nsw i32 %i.3973, 1, !dbg !2313
  call void @llvm.dbg.value(metadata !{i32 %inc584}, i64 0, metadata !1037), !dbg !2313
  %exitcond = icmp eq i32 %inc584, %call86, !dbg !2313
  br i1 %exitcond, label %for.end585, label %for.body506, !dbg !2313

for.end585:                                       ; preds = %for.cond369.preheader, %for.cond97.preheader, %for.body506, %for.cond504.preheader
  %Te.sroa.0.0.load936957.lcssa = phi float [ 0.000000e+00, %for.cond504.preheader ], [ %conv521, %for.body506 ], [ 0.000000e+00, %for.cond97.preheader ], [ 0.000000e+00, %for.cond369.preheader ]
  %Te.sroa.1.4.load937958.lcssa = phi float [ 0.000000e+00, %for.cond504.preheader ], [ %conv536, %for.body506 ], [ 0.000000e+00, %for.cond97.preheader ], [ 0.000000e+00, %for.cond369.preheader ]
  %Te.sroa.2.8.load938959.lcssa = phi float [ 0.000000e+00, %for.cond504.preheader ], [ %conv551, %for.body506 ], [ 0.000000e+00, %for.cond97.preheader ], [ 0.000000e+00, %for.cond369.preheader ]
  %Od.sroa.0.0.load942960.lcssa = phi float [ 0.000000e+00, %for.cond504.preheader ], [ %conv561, %for.body506 ], [ 0.000000e+00, %for.cond97.preheader ], [ 0.000000e+00, %for.cond369.preheader ]
  %Od.sroa.1.4.load946961.lcssa = phi float [ 0.000000e+00, %for.cond504.preheader ], [ %conv571, %for.body506 ], [ 0.000000e+00, %for.cond97.preheader ], [ 0.000000e+00, %for.cond369.preheader ]
  %Od.sroa.2.8.load950962.lcssa = phi float [ 0.000000e+00, %for.cond504.preheader ], [ %conv581, %for.body506 ], [ 0.000000e+00, %for.cond97.preheader ], [ 0.000000e+00, %for.cond369.preheader ]
  %sub587 = fsub float -0.000000e+00, %Od.sroa.0.0.load942960.lcssa, !dbg !2385
  %conv588 = fpext float %sub587 to double, !dbg !2385
  %call589 = call double @exp(double %conv588) #8, !dbg !2385
  %conv590 = fptrunc double %call589 to float, !dbg !2385
  %sub593 = fsub float -0.000000e+00, %Od.sroa.1.4.load946961.lcssa, !dbg !2386
  %conv594 = fpext float %sub593 to double, !dbg !2386
  %call595 = call double @exp(double %conv594) #8, !dbg !2386
  %conv596 = fptrunc double %call595 to float, !dbg !2386
  %sub599 = fsub float -0.000000e+00, %Od.sroa.2.8.load950962.lcssa, !dbg !2387
  %conv600 = fpext float %sub599 to double, !dbg !2387
  %call601 = call double @exp(double %conv600) #8, !dbg !2387
  %conv602 = fptrunc double %call601 to float, !dbg !2387
  %148 = load float* %Colour, align 4, !dbg !2388, !tbaa !1621
  %mul606 = fmul float %conv590, %148, !dbg !2388
  %add608 = fadd float %Te.sroa.0.0.load936957.lcssa, %mul606, !dbg !2388
  store float %add608, float* %Colour, align 4, !dbg !2388, !tbaa !1621
  %arrayidx610 = getelementptr inbounds float* %Colour, i64 1, !dbg !2389
  %149 = load float* %arrayidx610, align 4, !dbg !2389, !tbaa !1621
  %mul612 = fmul float %conv596, %149, !dbg !2389
  %add614 = fadd float %Te.sroa.1.4.load937958.lcssa, %mul612, !dbg !2389
  store float %add614, float* %arrayidx610, align 4, !dbg !2389, !tbaa !1621
  %arrayidx616 = getelementptr inbounds float* %Colour, i64 2, !dbg !2390
  %150 = load float* %arrayidx616, align 4, !dbg !2390, !tbaa !1621
  %mul618 = fmul float %conv602, %150, !dbg !2390
  %add620 = fadd float %Te.sroa.2.8.load938959.lcssa, %mul618, !dbg !2390
  store float %add620, float* %arrayidx616, align 4, !dbg !2390, !tbaa !1621
  %conv623 = fpext float %conv590 to double, !dbg !2391
  %mul624 = fmul double %conv623, 2.970000e-01, !dbg !2391
  %conv626 = fpext float %conv596 to double, !dbg !2391
  %mul627 = fmul double %conv626, 5.890000e-01, !dbg !2391
  %add628 = fadd double %mul624, %mul627, !dbg !2391
  %conv630 = fpext float %conv602 to double, !dbg !2391
  %mul631 = fmul double %conv630, 1.140000e-01, !dbg !2391
  %add632 = fadd double %add628, %mul631, !dbg !2391
  %arrayidx633 = getelementptr inbounds float* %Colour, i64 4, !dbg !2391
  %151 = load float* %arrayidx633, align 4, !dbg !2391, !tbaa !1621
  %conv634 = fpext float %151 to double, !dbg !2391
  %mul635 = fmul double %add632, %conv634, !dbg !2391
  %conv636 = fptrunc double %mul635 to float, !dbg !2391
  store float %conv636, float* %arrayidx633, align 4, !dbg !2391, !tbaa !1621
  %152 = load i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2392, !tbaa !1566
  %dec637 = add nsw i64 %152, -1, !dbg !2392
  store i64 %dec637, i64* @_ZN3pov14MediaPoolIndexE, align 8, !dbg !2392, !tbaa !1566
  %cmp638 = icmp eq %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, null, !dbg !2094
  br i1 %cmp638, label %if.end640, label %if.then639, !dbg !2094

if.then639:                                       ; preds = %for.end585
  %153 = getelementptr inbounds %"struct.pov::Light_List_Struct"* %local_light_list.0.load935955, i64 0, i32 0, !dbg !2393
  call void @_ZN3pov8pov_freeEPvPKci(i8* %153, i8* getelementptr inbounds ([54 x i8]* @.str, i64 0, i64 0), i32 780) #7, !dbg !2393
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2393
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !2066), !dbg !2069
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2070
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2071
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2075
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2078
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2079
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2086
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2088
  call void @llvm.dbg.value(metadata !2063, i64 0, metadata !1055), !dbg !2094
  br label %if.end640, !dbg !2393

if.end640:                                        ; preds = %for.end585, %if.then, %if.then21, %if.then639
  ret void, !dbg !2395
}
