define void @_ZN3pov10Post_MediaEPNS_12Media_StructE(%"struct.pov::Media_Struct"* %IMedia) #0 {
  tail call void @llvm.dbg.value(metadata %"struct.pov::Media_Struct"* %IMedia, i64 0, metadata !1090, metadata !1851), !dbg !3780
  %1 = icmp eq %"struct.pov::Media_Struct"* %IMedia, null, !dbg !3781
  br i1 %1, label %tailrecurse._crit_edge, label %.lr.ph3, !dbg !3783

.lr.ph3:                                          ; preds = %0, %tailrecurse
  %IMedia.tr2 = phi %"struct.pov::Media_Struct"* [ %117, %tailrecurse ], [ %IMedia, %0 ]
  %2 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 15, i64 0, !dbg !3784
  %3 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 13, i64 0, !dbg !3785
  %4 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 8, !dbg !3786
  %5 = load double* %4, align 8, !dbg !3786, !tbaa !3787
  %6 = fptrunc double %5 to float, !dbg !3788
  %7 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 16, i64 0, !dbg !3789
  tail call void @llvm.dbg.value(metadata float* %2, i64 0, metadata !1477, metadata !1851), !dbg !3790
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1478, metadata !1851), !dbg !3792
  tail call void @llvm.dbg.value(metadata float* %3, i64 0, metadata !1479, metadata !1851), !dbg !3793
  tail call void @llvm.dbg.value(metadata float %6, i64 0, metadata !1480, metadata !1851), !dbg !3794
  tail call void @llvm.dbg.value(metadata float* %7, i64 0, metadata !1481, metadata !1851), !dbg !3795
  %8 = bitcast float* %3 to <4 x float>*, !dbg !3796
  %9 = load <4 x float>* %8, align 4, !dbg !3796, !tbaa !1991
  %10 = bitcast float* %7 to <4 x float>*, !dbg !3797
  %11 = load <4 x float>* %10, align 4, !dbg !3797, !tbaa !1991
  %12 = insertelement <4 x float> undef, float %6, i32 0, !dbg !3798
  %13 = insertelement <4 x float> %12, float %6, i32 1, !dbg !3798
  %14 = insertelement <4 x float> %13, float %6, i32 2, !dbg !3798
  %15 = insertelement <4 x float> %14, float %6, i32 3, !dbg !3798
  %16 = fmul <4 x float> %11, %15, !dbg !3798
  %17 = fadd <4 x float> %9, %16, !dbg !3799
  %18 = bitcast float* %2 to <4 x float>*, !dbg !3800
  store <4 x float> %17, <4 x float>* %18, align 4, !dbg !3800, !tbaa !1991
  %19 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 13, i64 4, !dbg !3801
  %20 = load float* %19, align 4, !dbg !3801, !tbaa !1991
  %21 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 16, i64 4, !dbg !3802
  %22 = load float* %21, align 4, !dbg !3802, !tbaa !1991
  %23 = fmul float %6, %22, !dbg !3803
  %24 = fadd float %20, %23, !dbg !3804
  %25 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 15, i64 4, !dbg !3805
  store float %24, float* %25, align 4, !dbg !3806, !tbaa !1991
  %26 = extractelement <4 x float> %9, i32 0, !dbg !3807
  %27 = fcmp une float %26, 0.000000e+00, !dbg !3807
  %28 = extractelement <4 x float> %9, i32 1, !dbg !3808
  %29 = fcmp une float %28, 0.000000e+00, !dbg !3808
  %or.cond = or i1 %27, %29, !dbg !3809
  br i1 %or.cond, label %33, label %30, !dbg !3809

; <label>:30                                      ; preds = %.lr.ph3
  %31 = extractelement <4 x float> %9, i32 2, !dbg !3810
  %32 = fcmp une float %31, 0.000000e+00, !dbg !3810
  br label %33, !dbg !3811

; <label>:33                                      ; preds = %30, %.lr.ph3
  %34 = phi i1 [ true, %.lr.ph3 ], [ %32, %30 ]
  %35 = zext i1 %34 to i32, !dbg !3812
  %36 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 9, !dbg !3813
  store i32 %35, i32* %36, align 4, !dbg !3814, !tbaa !3815
  %37 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 14, i64 0, !dbg !3816
  %38 = load float* %37, align 4, !dbg !3816, !tbaa !1991
  %39 = fcmp une float %38, 0.000000e+00, !dbg !3817
  br i1 %39, label %48, label %40, !dbg !3818

; <label>:40                                      ; preds = %33
  %41 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 14, i64 1, !dbg !3819
  %42 = load float* %41, align 4, !dbg !3819, !tbaa !1991
  %43 = fcmp une float %42, 0.000000e+00, !dbg !3820
  br i1 %43, label %48, label %44, !dbg !3821

; <label>:44                                      ; preds = %40
  %45 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 14, i64 2, !dbg !3822
  %46 = load float* %45, align 4, !dbg !3822, !tbaa !1991
  %47 = fcmp une float %46, 0.000000e+00, !dbg !3823
  br label %48, !dbg !3821

; <label>:48                                      ; preds = %44, %40, %33
  %49 = phi i1 [ true, %40 ], [ true, %33 ], [ %47, %44 ]
  %50 = zext i1 %49 to i32, !dbg !3824
  %51 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 10, !dbg !3825
  store i32 %50, i32* %51, align 4, !dbg !3826, !tbaa !3827
  %52 = extractelement <4 x float> %11, i32 0, !dbg !3828
  %53 = fcmp une float %52, 0.000000e+00, !dbg !3828
  %54 = extractelement <4 x float> %11, i32 1, !dbg !3829
  %55 = fcmp une float %54, 0.000000e+00, !dbg !3829
  %or.cond4 = or i1 %53, %55, !dbg !3830
  br i1 %or.cond4, label %59, label %56, !dbg !3830

; <label>:56                                      ; preds = %48
  %57 = extractelement <4 x float> %11, i32 2, !dbg !3831
  %58 = fcmp une float %57, 0.000000e+00, !dbg !3831
  br label %59, !dbg !3832

; <label>:59                                      ; preds = %56, %48
  %60 = phi i1 [ true, %48 ], [ %58, %56 ]
  %61 = zext i1 %60 to i32, !dbg !3833
  %62 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 12, !dbg !3834
  store i32 %61, i32* %62, align 4, !dbg !3835, !tbaa !1900
  %. = or i1 %60, %34, !dbg !3836
  %63 = zext i1 %. to i32, !dbg !3837
  %64 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 11, !dbg !3838
  store i32 %63, i32* %64, align 4, !dbg !3839, !tbaa !1896
  %65 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 24, !dbg !3840
  %66 = load %"struct.pov::Pigment_Struct"** %65, align 8, !dbg !3840, !tbaa !2496
  %67 = icmp eq %"struct.pov::Pigment_Struct"* %66, null, !dbg !3841
  %68 = zext i1 %67 to i32, !dbg !3842
  %69 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 6, !dbg !3843
  store i32 %68, i32* %69, align 4, !dbg !3844, !tbaa !2226
  %70 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 20, !dbg !3845
  %71 = load double** %70, align 8, !dbg !3845, !tbaa !3454
  %72 = icmp eq double* %71, null, !dbg !3847
  br i1 %72, label %75, label %73, !dbg !3848

; <label>:73                                      ; preds = %59
  %74 = bitcast double* %71 to i8*, !dbg !3849
  tail call void @_ZN3pov8pov_freeEPvPKci(i8* %74, i8* getelementptr inbounds ([66 x i8]* @.str, i64 0, i64 0), i32 2129) #7, !dbg !3849
  store double* null, double** %70, align 8, !dbg !3849, !tbaa !3454
  br label %75, !dbg !3852

; <label>:75                                      ; preds = %59, %73
  %76 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 3, !dbg !3853
  %77 = load i32* %76, align 4, !dbg !3853, !tbaa !3408
  %78 = sext i32 %77 to i64, !dbg !3853
  %79 = shl nsw i64 %78, 3, !dbg !3853
  %80 = tail call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %79, i8* getelementptr inbounds ([66 x i8]* @.str, i64 0, i64 0), i32 2134, i8* getelementptr inbounds ([22 x i8]* @.str2, i64 0, i64 0)) #7, !dbg !3853
  %81 = bitcast double** %70 to i8**, !dbg !3854
  store i8* %80, i8** %81, align 8, !dbg !3854, !tbaa !3454
  %82 = load i32* %76, align 4, !dbg !3855, !tbaa !3408
  %83 = icmp sgt i32 %82, 1, !dbg !3857
  br i1 %83, label %84, label %110, !dbg !3858

; <label>:84                                      ; preds = %75
  %85 = add nsw i32 %82, -1, !dbg !3859
  %86 = sitofp i32 %85 to double, !dbg !3861
  %87 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 18, !dbg !3862
  %88 = load double* %87, align 8, !dbg !3862, !tbaa !3863
  %89 = tail call double @_ZN3pov6chdtriEdd(double %86, double %88) #7, !dbg !3864
  tail call void @llvm.dbg.value(metadata double %89, i64 0, metadata !1092, metadata !1851), !dbg !3865
  %90 = fcmp ogt double %89, 0.000000e+00, !dbg !3866
  %91 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 19, !dbg !3868
  %92 = load double* %91, align 8, !dbg !3868, !tbaa !3870
  br i1 %90, label %93, label %95, !dbg !3871

; <label>:93                                      ; preds = %84
  %94 = fdiv double %92, %89, !dbg !3872
  tail call void @llvm.dbg.value(metadata double %94, i64 0, metadata !1092, metadata !1851), !dbg !3865
  br label %97, !dbg !3873

; <label>:95                                      ; preds = %84
  %96 = fmul double %92, 1.000000e-07, !dbg !3874
  tail call void @llvm.dbg.value(metadata double %96, i64 0, metadata !1092, metadata !1851), !dbg !3865
  br label %97

; <label>:97                                      ; preds = %95, %93
  %t.0 = phi double [ %94, %93 ], [ %96, %95 ]
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1091, metadata !1851), !dbg !3876
  %98 = load i32* %76, align 4, !dbg !3877, !tbaa !3408
  %99 = icmp sgt i32 %98, 0, !dbg !3880
  br i1 %99, label %.lr.ph, label %.loopexit, !dbg !3881

.lr.ph:                                           ; preds = %97, %.lr.ph
  %indvars.iv = phi i64 [ %indvars.iv.next, %.lr.ph ], [ 0, %97 ]
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1, !dbg !3881
  %100 = trunc i64 %indvars.iv.next to i32, !dbg !3882
  %101 = sitofp i32 %100 to double, !dbg !3882
  %102 = load double* %87, align 8, !dbg !3884, !tbaa !3863
  %103 = tail call double @_ZN3pov6chdtriEdd(double %101, double %102) #7, !dbg !3885
  %104 = fmul double %t.0, %103, !dbg !3886
  %105 = load double** %70, align 8, !dbg !3887, !tbaa !3454
  %106 = getelementptr inbounds double* %105, i64 %indvars.iv, !dbg !3888
  store double %104, double* %106, align 8, !dbg !3889, !tbaa !2166
  %107 = load i32* %76, align 4, !dbg !3877, !tbaa !3408
  %108 = sext i32 %107 to i64, !dbg !3880
  %109 = icmp slt i64 %indvars.iv.next, %108, !dbg !3880
  br i1 %109, label %.lr.ph, label %.loopexit, !dbg !3881

; <label>:110                                     ; preds = %75
  %111 = bitcast i8* %80 to double*, !dbg !3890
  store double 0.000000e+00, double* %111, align 8, !dbg !3891, !tbaa !2166
  br label %.loopexit

.loopexit:                                        ; preds = %.lr.ph, %97, %110
  %112 = load %"struct.pov::Pigment_Struct"** %65, align 8, !dbg !3893, !tbaa !2496
  %113 = icmp eq %"struct.pov::Pigment_Struct"* %112, null, !dbg !3895
  br i1 %113, label %tailrecurse, label %114, !dbg !3896

; <label>:114                                     ; preds = %.loopexit
  %115 = tail call i32 @_ZN3pov12Post_PigmentEPNS_14Pigment_StructE(%"struct.pov::Pigment_Struct"* %112) #7, !dbg !3897
  br label %tailrecurse, !dbg !3899

tailrecurse:                                      ; preds = %.loopexit, %114
  %116 = getelementptr inbounds %"struct.pov::Media_Struct"* %IMedia.tr2, i64 0, i32 25, !dbg !3900
  %117 = load %"struct.pov::Media_Struct"** %116, align 8, !dbg !3900, !tbaa !1908
  tail call void @llvm.dbg.value(metadata %"struct.pov::Media_Struct"* %117, i64 0, metadata !1090, metadata !1851), !dbg !3780
  %118 = icmp eq %"struct.pov::Media_Struct"* %117, null, !dbg !3781
  br i1 %118, label %tailrecurse._crit_edge, label %.lr.ph3, !dbg !3783

tailrecurse._crit_edge:                           ; preds = %tailrecurse, %0
  ret void, !dbg !3901
}
