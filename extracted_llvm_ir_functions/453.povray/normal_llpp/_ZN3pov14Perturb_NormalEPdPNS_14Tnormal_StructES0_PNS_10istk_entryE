define void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %Layer_Normal, %"struct.pov::Tnormal_Struct"* %Tnormal, double* %EPoint, %"struct.pov::istk_entry"* %Intersection) #0 {
entry:
  %t1.i = alloca [3 x double], align 16
  %newnormal.i = alloca [3 x double], align 16
  %pert.i = alloca [3 x double], align 16
  %value2.i = alloca [3 x double], align 16
  %bump_turb.i = alloca [3 x double], align 16
  %Prev.i = alloca %"struct.pov::Blend_Map_Entry"*, align 8
  %Cur.i = alloca %"struct.pov::Blend_Map_Entry"*, align 8
  %TPoint = alloca [3 x double], align 16
  %P1 = alloca [3 x double], align 16
  %Prev = alloca %"struct.pov::Blend_Map_Entry"*, align 8
  %Cur = alloca %"struct.pov::Blend_Map_Entry"*, align 8
  %UV_Coords = alloca [2 x double], align 16
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !852), !dbg !1246
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !853), !dbg !1246
  call void @llvm.dbg.value(metadata !{double* %EPoint}, i64 0, metadata !854), !dbg !1246
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersection}, i64 0, metadata !855), !dbg !1246
  call void @llvm.dbg.declare(metadata !{[3 x double]* %TPoint}, metadata !856), !dbg !1247
  call void @llvm.dbg.declare(metadata !{[3 x double]* %P1}, metadata !857), !dbg !1247
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Blend_Map_Entry"** %Prev}, metadata !863), !dbg !1248
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur}, metadata !864), !dbg !1248
  %cmp = icmp eq %"struct.pov::Tnormal_Struct"* %Tnormal, null, !dbg !1249
  br i1 %cmp, label %if.end150, label %if.end, !dbg !1249

if.end:                                           ; preds = %entry
  %Blend_Map1 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 9, !dbg !1250
  %0 = load %"struct.pov::Blend_Map_Struct"** %Blend_Map1, align 8, !dbg !1250, !tbaa !1229
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Struct"* %0}, i64 0, metadata !862), !dbg !1250
  %cmp2 = icmp eq %"struct.pov::Blend_Map_Struct"* %0, null, !dbg !1250
  br i1 %cmp2, label %if.end62, label %if.then3, !dbg !1250

if.then3:                                         ; preds = %if.end
  %Type = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %0, i64 0, i32 3, !dbg !1251
  %1 = load i8* %Type, align 1, !dbg !1251, !tbaa !1191
  %cmp4 = icmp eq i8 %1, 1, !dbg !1251
  br i1 %cmp4, label %land.lhs.true, label %if.end62, !dbg !1251

land.lhs.true:                                    ; preds = %if.then3
  %Type5 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 0, !dbg !1251
  %2 = load i16* %Type5, align 2, !dbg !1251, !tbaa !1222
  switch i16 %2, label %if.then26 [
    i16 3, label %if.then8
    i16 2, label %if.end62
  ], !dbg !1251

if.then8:                                         ; preds = %land.lhs.true
  call void @llvm.dbg.declare(metadata !{[2 x double]* %UV_Coords}, metadata !865), !dbg !1252
  %Blend_Map_Entries = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %0, i64 0, i32 4, !dbg !1253
  %3 = load %"struct.pov::Blend_Map_Entry"** %Blend_Map_Entries, align 8, !dbg !1253, !tbaa !1229
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"* %3}, i64 0, metadata !864), !dbg !1253
  store %"struct.pov::Blend_Map_Entry"* %3, %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !1253, !tbaa !1229
  %Object = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 5, !dbg !1254
  %4 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !1254, !tbaa !1229
  %Methods = getelementptr inbounds %"struct.pov::Object_Struct"* %4, i64 0, i32 0, !dbg !1254
  %5 = load %"struct.pov::Method_Struct"** %Methods, align 8, !dbg !1254, !tbaa !1229
  %UVCoord_Method = getelementptr inbounds %"struct.pov::Method_Struct"* %5, i64 0, i32 3, !dbg !1254
  %6 = load void (double*, %"struct.pov::Object_Struct"*, %"struct.pov::istk_entry"*)** %UVCoord_Method, align 8, !dbg !1254, !tbaa !1229
  %arraydecay = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 0, !dbg !1254
  call void %6(double* %arraydecay, %"struct.pov::Object_Struct"* %4, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1254
  %7 = load double* %arraydecay, align 16, !dbg !1255, !tbaa !1256
  %arrayidx12 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !1255
  store double %7, double* %arrayidx12, align 16, !dbg !1255, !tbaa !1256
  %arrayidx13 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 1, !dbg !1257
  %8 = load double* %arrayidx13, align 8, !dbg !1257, !tbaa !1256
  %arrayidx14 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1257
  store double %8, double* %arrayidx14, align 8, !dbg !1257, !tbaa !1256
  %arrayidx15 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1258
  store double 0.000000e+00, double* %arrayidx15, align 16, !dbg !1258, !tbaa !1256
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur}, i64 0, metadata !864), !dbg !1259
  %9 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !1259, !tbaa !1229
  %Vals = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %9, i64 0, i32 2, !dbg !1259
  %Tnormal16 = bitcast %union.anon* %Vals to %"struct.pov::Tnormal_Struct"**, !dbg !1259
  %10 = load %"struct.pov::Tnormal_Struct"** %Tnormal16, align 8, !dbg !1259, !tbaa !1229
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %Layer_Normal, %"struct.pov::Tnormal_Struct"* %10, double* %arrayidx12, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1259
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1260) #5, !dbg !1262
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1263) #5, !dbg !1265
  %11 = load double* %Layer_Normal, align 8, !dbg !1266, !tbaa !1256
  %mul.i.i246 = fmul double %11, %11, !dbg !1266
  %arrayidx2.i.i247 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1266
  %12 = load double* %arrayidx2.i.i247, align 8, !dbg !1266, !tbaa !1256
  %mul4.i.i248 = fmul double %12, %12, !dbg !1266
  %add.i.i249 = fadd double %mul.i.i246, %mul4.i.i248, !dbg !1266
  %arrayidx5.i.i250 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1266
  %13 = load double* %arrayidx5.i.i250, align 8, !dbg !1266, !tbaa !1256
  %mul7.i.i251 = fmul double %13, %13, !dbg !1266
  %add8.i.i252 = fadd double %add.i.i249, %mul7.i.i251, !dbg !1266
  %call.i.i253 = call double @sqrt(double %add8.i.i252) #7, !dbg !1266
  call void @llvm.dbg.value(metadata !{double %call.i.i253}, i64 0, metadata !1267) #5, !dbg !1266
  call void @llvm.dbg.value(metadata !{double %call.i.i253}, i64 0, metadata !1268) #5, !dbg !1265
  call void @llvm.dbg.value(metadata !{double %call.i.i253}, i64 0, metadata !1269) #5, !dbg !1270
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1271) #5, !dbg !1272
  call void @llvm.dbg.value(metadata !{double %call.i.i253}, i64 0, metadata !1273) #5, !dbg !1272
  %div.i.i254 = fdiv double 1.000000e+00, %call.i.i253, !dbg !1274
  call void @llvm.dbg.value(metadata !{double %div.i.i254}, i64 0, metadata !1275) #5, !dbg !1274
  %14 = load double* %Layer_Normal, align 8, !dbg !1276, !tbaa !1256
  %mul.i2.i255 = fmul double %div.i.i254, %14, !dbg !1276
  store double %mul.i2.i255, double* %Layer_Normal, align 8, !dbg !1276, !tbaa !1256
  %15 = load double* %arrayidx2.i.i247, align 8, !dbg !1277, !tbaa !1256
  %mul2.i.i256 = fmul double %div.i.i254, %15, !dbg !1277
  store double %mul2.i.i256, double* %arrayidx2.i.i247, align 8, !dbg !1277, !tbaa !1256
  %16 = load double* %arrayidx5.i.i250, align 8, !dbg !1278, !tbaa !1256
  %mul4.i3.i257 = fmul double %div.i.i254, %16, !dbg !1278
  store double %mul4.i3.i257, double* %arrayidx5.i.i250, align 8, !dbg !1278, !tbaa !1256
  %arraydecay18 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 0, !dbg !1279
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay18}, i64 0, metadata !1280), !dbg !1281
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1282), !dbg !1281
  store double %mul.i2.i255, double* %arraydecay18, align 8, !dbg !1283, !tbaa !1256
  %17 = load double* %arrayidx2.i.i247, align 8, !dbg !1285, !tbaa !1256
  %arrayidx3.i259 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 1, !dbg !1285
  store double %17, double* %arrayidx3.i259, align 8, !dbg !1285, !tbaa !1256
  %18 = load double* %arrayidx5.i.i250, align 8, !dbg !1286, !tbaa !1256
  %arrayidx5.i261 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 2, !dbg !1286
  store double %18, double* %arrayidx5.i261, align 8, !dbg !1286, !tbaa !1256
  br label %if.end150, !dbg !1287

if.then26:                                        ; preds = %land.lhs.true
  %arraydecay27 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !1288
  %19 = bitcast %"struct.pov::Tnormal_Struct"* %Tnormal to %"struct.pov::Pattern_Struct"*, !dbg !1288
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %arraydecay27, double* %EPoint, %"struct.pov::Pattern_Struct"* %19) #6, !dbg !1288
  %call = call double @_ZN3pov13Evaluate_TPatEPNS_14Pattern_StructEPdPNS_10istk_entryE(%"struct.pov::Pattern_Struct"* %19, double* %arraydecay27, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1290
  call void @llvm.dbg.value(metadata !{double %call}, i64 0, metadata !858), !dbg !1290
  call void @_ZN3pov16Search_Blend_MapEdPNS_16Blend_Map_StructEPPNS_15Blend_Map_EntryES4_(double %call, %"struct.pov::Blend_Map_Struct"* %0, %"struct.pov::Blend_Map_Entry"** %Prev, %"struct.pov::Blend_Map_Entry"** %Cur) #6, !dbg !1291
  %20 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1292, !tbaa !1293
  %cmp29 = icmp sgt i32 %20, 310, !dbg !1292
  br i1 %cmp29, label %if.then30, label %if.end32, !dbg !1292

if.then30:                                        ; preds = %if.then26
  %Flags = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 2, !dbg !1294
  %21 = load i16* %Flags, align 2, !dbg !1294, !tbaa !1222
  %conv31 = zext i16 %21 to i32, !dbg !1294
  %and = and i32 %conv31, 8, !dbg !1294
  call void @_ZN3pov11Warp_NormalEPdS0_PNS_14Pattern_StructEi(double* %Layer_Normal, double* %Layer_Normal, %"struct.pov::Pattern_Struct"* %19, i32 %and) #6, !dbg !1294
  br label %if.end32, !dbg !1294

if.end32:                                         ; preds = %if.then30, %if.then26
  %arraydecay33 = getelementptr inbounds [3 x double]* %P1, i64 0, i64 0, !dbg !1295
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay33}, i64 0, metadata !1296), !dbg !1297
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1298), !dbg !1297
  %22 = load double* %Layer_Normal, align 8, !dbg !1299, !tbaa !1256
  store double %22, double* %arraydecay33, align 16, !dbg !1299, !tbaa !1256
  %arrayidx2.i262 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1300
  %23 = load double* %arrayidx2.i262, align 8, !dbg !1300, !tbaa !1256
  %arrayidx3.i263 = getelementptr inbounds [3 x double]* %P1, i64 0, i64 1, !dbg !1300
  store double %23, double* %arrayidx3.i263, align 8, !dbg !1300, !tbaa !1256
  %arrayidx4.i264 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1301
  %24 = load double* %arrayidx4.i264, align 8, !dbg !1301, !tbaa !1256
  %arrayidx5.i265 = getelementptr inbounds [3 x double]* %P1, i64 0, i64 2, !dbg !1301
  store double %24, double* %arrayidx5.i265, align 16, !dbg !1301, !tbaa !1256
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %arraydecay27, double* %EPoint, %"struct.pov::Pattern_Struct"* %19) #6, !dbg !1302
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur}, i64 0, metadata !864), !dbg !1303
  %25 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !1303, !tbaa !1229
  %Vals35 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %25, i64 0, i32 2, !dbg !1303
  %Tnormal36 = bitcast %union.anon* %Vals35 to %"struct.pov::Tnormal_Struct"**, !dbg !1303
  %26 = load %"struct.pov::Tnormal_Struct"** %Tnormal36, align 8, !dbg !1303, !tbaa !1229
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %Layer_Normal, %"struct.pov::Tnormal_Struct"* %26, double* %arraydecay27, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1303
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Prev}, i64 0, metadata !863), !dbg !1304
  %27 = load %"struct.pov::Blend_Map_Entry"** %Prev, align 8, !dbg !1304, !tbaa !1229
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur}, i64 0, metadata !864), !dbg !1304
  %28 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !1304, !tbaa !1229
  %cmp38 = icmp eq %"struct.pov::Blend_Map_Entry"* %27, %28, !dbg !1304
  br i1 %cmp38, label %if.end51, label %if.then39, !dbg !1304

if.then39:                                        ; preds = %if.end32
  %Vals41 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %27, i64 0, i32 2, !dbg !1305
  %Tnormal42 = bitcast %union.anon* %Vals41 to %"struct.pov::Tnormal_Struct"**, !dbg !1305
  %29 = load %"struct.pov::Tnormal_Struct"** %Tnormal42, align 8, !dbg !1305, !tbaa !1229
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %arraydecay33, %"struct.pov::Tnormal_Struct"* %29, double* %arraydecay27, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1305
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Prev}, i64 0, metadata !863), !dbg !1307
  %30 = load %"struct.pov::Blend_Map_Entry"** %Prev, align 8, !dbg !1307, !tbaa !1229
  %value = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %30, i64 0, i32 0, !dbg !1307
  %31 = load float* %value, align 4, !dbg !1307, !tbaa !1190
  %conv44 = fpext float %31 to double, !dbg !1307
  %sub = fsub double %call, %conv44, !dbg !1307
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur}, i64 0, metadata !864), !dbg !1307
  %32 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !1307, !tbaa !1229
  %value45 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %32, i64 0, i32 0, !dbg !1307
  %33 = load float* %value45, align 4, !dbg !1307, !tbaa !1190
  %sub47 = fsub float %33, %31, !dbg !1307
  %conv48 = fpext float %sub47 to double, !dbg !1307
  %div = fdiv double %sub, %conv48, !dbg !1307
  call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !859), !dbg !1307
  %sub49 = fsub double 1.000000e+00, %div, !dbg !1308
  call void @llvm.dbg.value(metadata !{double %sub49}, i64 0, metadata !858), !dbg !1308
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1309), !dbg !1311
  tail call void @llvm.dbg.value(metadata !{double %sub49}, i64 0, metadata !1312), !dbg !1311
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay33}, i64 0, metadata !1313), !dbg !1311
  tail call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !1314), !dbg !1311
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1315), !dbg !1311
  %34 = load double* %arraydecay33, align 16, !dbg !1316, !tbaa !1256
  %mul.i272 = fmul double %34, %sub49, !dbg !1316
  %35 = load double* %Layer_Normal, align 8, !dbg !1316, !tbaa !1256
  %mul2.i = fmul double %div, %35, !dbg !1316
  %add.i273 = fadd double %mul.i272, %mul2.i, !dbg !1316
  store double %add.i273, double* %Layer_Normal, align 8, !dbg !1316, !tbaa !1256
  %36 = load double* %arrayidx3.i263, align 8, !dbg !1318, !tbaa !1256
  %mul5.i = fmul double %sub49, %36, !dbg !1318
  %37 = load double* %arrayidx2.i262, align 8, !dbg !1318, !tbaa !1256
  %mul7.i276 = fmul double %div, %37, !dbg !1318
  %add8.i = fadd double %mul5.i, %mul7.i276, !dbg !1318
  store double %add8.i, double* %arrayidx2.i262, align 8, !dbg !1318, !tbaa !1256
  %38 = load double* %arrayidx5.i265, align 16, !dbg !1319, !tbaa !1256
  %mul11.i = fmul double %sub49, %38, !dbg !1319
  %39 = load double* %arrayidx4.i264, align 8, !dbg !1319, !tbaa !1256
  %mul13.i = fmul double %div, %39, !dbg !1319
  %add14.i = fadd double %mul11.i, %mul13.i, !dbg !1319
  store double %add14.i, double* %arrayidx4.i264, align 8, !dbg !1319, !tbaa !1256
  br label %if.end51, !dbg !1320

if.end51:                                         ; preds = %if.end32, %if.then39
  %40 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1321, !tbaa !1293
  %cmp52 = icmp sgt i32 %40, 310, !dbg !1321
  br i1 %cmp52, label %if.then53, label %if.end57, !dbg !1321

if.then53:                                        ; preds = %if.end51
  %Flags54 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 2, !dbg !1322
  %41 = load i16* %Flags54, align 2, !dbg !1322, !tbaa !1222
  %conv55 = zext i16 %41 to i32, !dbg !1322
  %and56 = and i32 %conv55, 8, !dbg !1322
  call void @_ZN3pov13UnWarp_NormalEPdS0_PNS_14Pattern_StructEi(double* %Layer_Normal, double* %Layer_Normal, %"struct.pov::Pattern_Struct"* %19, i32 %and56) #6, !dbg !1322
  br label %if.end57, !dbg !1322

if.end57:                                         ; preds = %if.end51, %if.then53
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1323) #5, !dbg !1325
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1326) #5, !dbg !1328
  %42 = load double* %Layer_Normal, align 8, !dbg !1329, !tbaa !1256
  %mul.i.i277 = fmul double %42, %42, !dbg !1329
  %43 = load double* %arrayidx2.i262, align 8, !dbg !1329, !tbaa !1256
  %mul4.i.i279 = fmul double %43, %43, !dbg !1329
  %add.i.i280 = fadd double %mul.i.i277, %mul4.i.i279, !dbg !1329
  %44 = load double* %arrayidx4.i264, align 8, !dbg !1329, !tbaa !1256
  %mul7.i.i282 = fmul double %44, %44, !dbg !1329
  %add8.i.i283 = fadd double %add.i.i280, %mul7.i.i282, !dbg !1329
  %call.i.i284 = call double @sqrt(double %add8.i.i283) #7, !dbg !1329
  call void @llvm.dbg.value(metadata !{double %call.i.i284}, i64 0, metadata !1330) #5, !dbg !1329
  call void @llvm.dbg.value(metadata !{double %call.i.i284}, i64 0, metadata !1331) #5, !dbg !1328
  call void @llvm.dbg.value(metadata !{double %call.i.i284}, i64 0, metadata !1332) #5, !dbg !1333
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1334) #5, !dbg !1335
  call void @llvm.dbg.value(metadata !{double %call.i.i284}, i64 0, metadata !1336) #5, !dbg !1335
  %div.i.i285 = fdiv double 1.000000e+00, %call.i.i284, !dbg !1337
  call void @llvm.dbg.value(metadata !{double %div.i.i285}, i64 0, metadata !1338) #5, !dbg !1337
  %45 = load double* %Layer_Normal, align 8, !dbg !1339, !tbaa !1256
  %mul.i2.i286 = fmul double %div.i.i285, %45, !dbg !1339
  store double %mul.i2.i286, double* %Layer_Normal, align 8, !dbg !1339, !tbaa !1256
  %46 = load double* %arrayidx2.i262, align 8, !dbg !1340, !tbaa !1256
  %mul2.i.i287 = fmul double %div.i.i285, %46, !dbg !1340
  store double %mul2.i.i287, double* %arrayidx2.i262, align 8, !dbg !1340, !tbaa !1256
  %47 = load double* %arrayidx4.i264, align 8, !dbg !1341, !tbaa !1256
  %mul4.i3.i288 = fmul double %div.i.i285, %47, !dbg !1341
  store double %mul4.i3.i288, double* %arrayidx4.i264, align 8, !dbg !1341, !tbaa !1256
  %arraydecay59 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 0, !dbg !1342
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay59}, i64 0, metadata !1343), !dbg !1344
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1345), !dbg !1344
  store double %mul.i2.i286, double* %arraydecay59, align 8, !dbg !1346, !tbaa !1256
  %48 = load double* %arrayidx2.i262, align 8, !dbg !1347, !tbaa !1256
  %arrayidx3.i290 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 1, !dbg !1347
  store double %48, double* %arrayidx3.i290, align 8, !dbg !1347, !tbaa !1256
  %49 = load double* %arrayidx4.i264, align 8, !dbg !1348, !tbaa !1256
  %arrayidx5.i292 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 2, !dbg !1348
  store double %49, double* %arrayidx5.i292, align 8, !dbg !1348, !tbaa !1256
  br label %if.end150, !dbg !1349

if.end62:                                         ; preds = %land.lhs.true, %if.then3, %if.end
  %Type63 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 0, !dbg !1350
  %50 = load i16* %Type63, align 2, !dbg !1350, !tbaa !1222
  %cmp65 = icmp ult i16 %50, 12, !dbg !1350
  %51 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1351, !tbaa !1293
  %cmp67 = icmp sgt i32 %51, 310, !dbg !1351
  br i1 %cmp65, label %if.then66, label %if.else100, !dbg !1350

if.then66:                                        ; preds = %if.end62
  %52 = bitcast %"struct.pov::Tnormal_Struct"* %Tnormal to %"struct.pov::Pattern_Struct"*, !dbg !1353
  br i1 %cmp67, label %if.then68, label %if.end72, !dbg !1351

if.then68:                                        ; preds = %if.then66
  %Flags69 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 2, !dbg !1353
  %53 = load i16* %Flags69, align 2, !dbg !1353, !tbaa !1222
  %conv70 = zext i16 %53 to i32, !dbg !1353
  %and71 = and i32 %conv70, 8, !dbg !1353
  call void @_ZN3pov11Warp_NormalEPdS0_PNS_14Pattern_StructEi(double* %Layer_Normal, double* %Layer_Normal, %"struct.pov::Pattern_Struct"* %52, i32 %and71) #6, !dbg !1353
  br label %if.end72, !dbg !1355

if.end72:                                         ; preds = %if.then66, %if.then68
  %arraydecay73 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !1356
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %arraydecay73, double* %EPoint, %"struct.pov::Pattern_Struct"* %52) #6, !dbg !1356
  %54 = load i16* %Type63, align 2, !dbg !1357, !tbaa !1222
  %conv75 = zext i16 %54 to i32, !dbg !1357
  switch i32 %conv75, label %sw.default [
    i32 4, label %sw.bb
    i32 8, label %sw.bb77
    i32 11, label %sw.bb79
    i32 6, label %sw.bb81
    i32 5, label %sw.bb83
    i32 7, label %sw.bb85
    i32 9, label %sw.bb87
    i32 10, label %sw.bb89
    i32 2, label %sw.bb91
  ], !dbg !1357

sw.bb:                                            ; preds = %if.end72
  call void @_ZN3pov8bump_mapEPdPNS_14Tnormal_StructES0_(double* %arraydecay73, %"struct.pov::Tnormal_Struct"* %Tnormal, double* %Layer_Normal) #6, !dbg !1358
  br label %sw.epilog, !dbg !1358

sw.bb77:                                          ; preds = %if.end72
  %55 = bitcast [3 x double]* %bump_turb.i to i8*, !dbg !1360
  call void @llvm.lifetime.start(i64 24, i8* %55), !dbg !1360
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1362), !dbg !1360
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1363), !dbg !1360
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1364), !dbg !1360
  call void @llvm.dbg.declare(metadata !{[3 x double]* %bump_turb.i}, metadata !1065), !dbg !1365
  %arraydecay.i293 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 0, !dbg !1366
  call void @_ZN3pov6DNoiseEPdS0_(double* %arraydecay.i293, double* %arraydecay73) #6, !dbg !1366
  %Amount.i = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1367
  %56 = load float* %Amount.i, align 4, !dbg !1367, !tbaa !1190
  %conv.i294 = fpext float %56 to double, !dbg !1367
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1368), !dbg !1369
  call void @llvm.dbg.value(metadata !{double %conv.i294}, i64 0, metadata !1370), !dbg !1369
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i293}, i64 0, metadata !1371), !dbg !1369
  %57 = load double* %arraydecay.i293, align 16, !dbg !1372, !tbaa !1256
  %mul.i.i295 = fmul double %57, %conv.i294, !dbg !1372
  %58 = load double* %Layer_Normal, align 8, !dbg !1372, !tbaa !1256
  %add.i.i296 = fadd double %58, %mul.i.i295, !dbg !1372
  store double %add.i.i296, double* %Layer_Normal, align 8, !dbg !1372, !tbaa !1256
  %arrayidx2.i.i297 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 1, !dbg !1374
  %59 = load double* %arrayidx2.i.i297, align 8, !dbg !1374, !tbaa !1256
  %mul3.i.i = fmul double %conv.i294, %59, !dbg !1374
  %arrayidx4.i.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1374
  %60 = load double* %arrayidx4.i.i, align 8, !dbg !1374, !tbaa !1256
  %add5.i.i = fadd double %60, %mul3.i.i, !dbg !1374
  store double %add5.i.i, double* %arrayidx4.i.i, align 8, !dbg !1374, !tbaa !1256
  %arrayidx6.i.i = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 2, !dbg !1375
  %61 = load double* %arrayidx6.i.i, align 16, !dbg !1375, !tbaa !1256
  %mul7.i.i298 = fmul double %conv.i294, %61, !dbg !1375
  %arrayidx8.i.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1375
  %62 = load double* %arrayidx8.i.i, align 8, !dbg !1375, !tbaa !1256
  %add9.i.i = fadd double %62, %mul7.i.i298, !dbg !1375
  store double %add9.i.i, double* %arrayidx8.i.i, align 8, !dbg !1375, !tbaa !1256
  call void @llvm.lifetime.end(i64 24, i8* %55), !dbg !1376
  br label %sw.epilog, !dbg !1361

sw.bb79:                                          ; preds = %if.end72
  %63 = bitcast [3 x double]* %bump_turb.i to i8*, !dbg !1377
  call void @llvm.lifetime.start(i64 24, i8* %63), !dbg !1377
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1379), !dbg !1377
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1380), !dbg !1377
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1381), !dbg !1377
  call void @llvm.dbg.declare(metadata !{[3 x double]* %bump_turb.i}, metadata !1059), !dbg !1382
  %call.i = call double @_ZN3pov5NoiseEPdPNS_14Pattern_StructE(double* %arraydecay73, %"struct.pov::Pattern_Struct"* %52) #6, !dbg !1383
  call void @llvm.dbg.value(metadata !{double %call.i}, i64 0, metadata !1384), !dbg !1383
  %mul.i299 = fmul double %call.i, %call.i, !dbg !1385
  %mul1.i = fmul double %call.i, %mul.i299, !dbg !1385
  %Amount.i300 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1385
  %64 = load float* %Amount.i300, align 4, !dbg !1385, !tbaa !1190
  %conv.i301 = fpext float %64 to double, !dbg !1385
  %mul2.i302 = fmul double %mul1.i, %conv.i301, !dbg !1385
  call void @llvm.dbg.value(metadata !{double %mul2.i302}, i64 0, metadata !1384), !dbg !1385
  %arraydecay.i303 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 0, !dbg !1386
  call void @_ZN3pov6DNoiseEPdS0_(double* %arraydecay.i303, double* %arraydecay73) #6, !dbg !1386
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1387), !dbg !1389
  call void @llvm.dbg.value(metadata !{double %mul2.i302}, i64 0, metadata !1390), !dbg !1389
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i303}, i64 0, metadata !1391), !dbg !1389
  %65 = load double* %arraydecay.i303, align 16, !dbg !1392, !tbaa !1256
  %mul.i.i304 = fmul double %65, %mul2.i302, !dbg !1392
  %66 = load double* %Layer_Normal, align 8, !dbg !1392, !tbaa !1256
  %add.i.i305 = fadd double %66, %mul.i.i304, !dbg !1392
  store double %add.i.i305, double* %Layer_Normal, align 8, !dbg !1392, !tbaa !1256
  %arrayidx2.i.i306 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 1, !dbg !1393
  %67 = load double* %arrayidx2.i.i306, align 8, !dbg !1393, !tbaa !1256
  %mul3.i.i307 = fmul double %mul2.i302, %67, !dbg !1393
  %arrayidx4.i.i308 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1393
  %68 = load double* %arrayidx4.i.i308, align 8, !dbg !1393, !tbaa !1256
  %add5.i.i309 = fadd double %68, %mul3.i.i307, !dbg !1393
  store double %add5.i.i309, double* %arrayidx4.i.i308, align 8, !dbg !1393, !tbaa !1256
  %arrayidx6.i.i310 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 2, !dbg !1394
  %69 = load double* %arrayidx6.i.i310, align 16, !dbg !1394, !tbaa !1256
  %mul7.i.i311 = fmul double %mul2.i302, %69, !dbg !1394
  %arrayidx8.i.i312 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1394
  %70 = load double* %arrayidx8.i.i312, align 8, !dbg !1394, !tbaa !1256
  %add9.i.i313 = fadd double %70, %mul7.i.i311, !dbg !1394
  store double %add9.i.i313, double* %arrayidx8.i.i312, align 8, !dbg !1394, !tbaa !1256
  call void @llvm.lifetime.end(i64 24, i8* %63), !dbg !1395
  br label %sw.epilog, !dbg !1378

sw.bb81:                                          ; preds = %if.end72
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1396), !dbg !1398
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1399), !dbg !1398
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1400), !dbg !1398
  call void @llvm.dbg.declare(metadata !1401, metadata !1052), !dbg !1402
  call void @llvm.dbg.value(metadata !70, i64 0, metadata !1403), !dbg !1404
  %71 = load i32* @_ZN3pov15Number_Of_WavesE, align 4, !dbg !1404, !tbaa !1293
  %cmp27.i = icmp eq i32 %71, 0, !dbg !1404
  br i1 %cmp27.i, label %sw.epilog, label %for.body.lr.ph.i, !dbg !1404

for.body.lr.ph.i:                                 ; preds = %sw.bb81
  %arrayidx3.i.i = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1406
  %arrayidx7.i.i = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1409
  %Frequency.i = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 4, !dbg !1410
  %Phase.i = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 5, !dbg !1410
  %Amount.i314 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1411
  %arrayidx4.i14.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1412
  %arrayidx8.i16.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1414
  br label %for.body.i, !dbg !1404

for.body.i:                                       ; preds = %for.body.i, %for.body.lr.ph.i
  %i.028.i = phi i32 [ 0, %for.body.lr.ph.i ], [ %inc.i, %for.body.i ]
  %idxprom.i = zext i32 %i.028.i to i64, !dbg !1407
  %72 = load [3 x double]** @_ZN3pov12Wave_SourcesE, align 8, !dbg !1407, !tbaa !1229
  %arraydecay1.i = getelementptr inbounds [3 x double]* %72, i64 %idxprom.i, i64 0, !dbg !1407
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1416), !dbg !1417
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1418), !dbg !1417
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i}, i64 0, metadata !1419), !dbg !1417
  %73 = load double* %arraydecay73, align 16, !dbg !1420, !tbaa !1256
  %74 = load double* %arraydecay1.i, align 8, !dbg !1420, !tbaa !1256
  %sub.i.i315 = fsub double %73, %74, !dbg !1420
  %75 = load double* %arrayidx3.i.i, align 8, !dbg !1406, !tbaa !1256
  %arrayidx4.i.i316 = getelementptr inbounds [3 x double]* %72, i64 %idxprom.i, i64 1, !dbg !1406
  %76 = load double* %arrayidx4.i.i316, align 8, !dbg !1406, !tbaa !1256
  %sub5.i.i = fsub double %75, %76, !dbg !1406
  %77 = load double* %arrayidx7.i.i, align 16, !dbg !1409, !tbaa !1256
  %arrayidx8.i.i317 = getelementptr inbounds [3 x double]* %72, i64 %idxprom.i, i64 2, !dbg !1409
  %78 = load double* %arrayidx8.i.i317, align 8, !dbg !1409, !tbaa !1256
  %sub9.i.i = fsub double %77, %78, !dbg !1409
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1421) #5, !dbg !1423
  %mul.i17.i = fmul double %sub.i.i315, %sub.i.i315, !dbg !1424
  %mul4.i.i318 = fmul double %sub5.i.i, %sub5.i.i, !dbg !1424
  %add.i19.i = fadd double %mul.i17.i, %mul4.i.i318, !dbg !1424
  %mul7.i20.i = fmul double %sub9.i.i, %sub9.i.i, !dbg !1424
  %add8.i.i319 = fadd double %add.i19.i, %mul7.i20.i, !dbg !1424
  %call.i.i320 = call double @sqrt(double %add8.i.i319) #7, !dbg !1424
  call void @llvm.dbg.value(metadata !{double %call.i.i320}, i64 0, metadata !1425), !dbg !1424
  call void @llvm.dbg.value(metadata !{double %call.i.i320}, i64 0, metadata !1426), !dbg !1423
  call void @llvm.dbg.value(metadata !{double %call.i.i320}, i64 0, metadata !1427), !dbg !1428
  call void @llvm.dbg.value(metadata !{double %call.i.i320}, i64 0, metadata !1427), !dbg !1410
  call void @llvm.dbg.value(metadata !{double %call.i.i320}, i64 0, metadata !1427), !dbg !1413
  %cmp3.i = fcmp oeq double %call.i.i320, 0.000000e+00, !dbg !1428
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1427), !dbg !1430
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1426), !dbg !1423
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1427), !dbg !1428
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1427), !dbg !1410
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1427), !dbg !1413
  %call.i26.i = select i1 %cmp3.i, double 1.000000e+00, double %call.i.i320, !dbg !1428
  %79 = load float* %Frequency.i, align 4, !dbg !1410, !tbaa !1190
  %conv.i321 = fpext float %79 to double, !dbg !1410
  %mul.i322 = fmul double %call.i26.i, %conv.i321, !dbg !1410
  %80 = load float* %Phase.i, align 4, !dbg !1410, !tbaa !1190
  %conv4.i = fpext float %80 to double, !dbg !1410
  %add.i323 = fadd double %mul.i322, %conv4.i, !dbg !1410
  call void @llvm.dbg.value(metadata !{double %add.i323}, i64 0, metadata !1431), !dbg !1410
  %call.i324 = call double @_ZN3pov9cycloidalEd(double %add.i323) #6, !dbg !1411
  %81 = load float* %Amount.i314, align 4, !dbg !1411, !tbaa !1190
  %conv5.i = fpext float %81 to double, !dbg !1411
  %mul6.i = fmul double %call.i324, %conv5.i, !dbg !1411
  call void @llvm.dbg.value(metadata !{double %mul6.i}, i64 0, metadata !1432), !dbg !1411
  %82 = load i32* @_ZN3pov15Number_Of_WavesE, align 4, !dbg !1413, !tbaa !1293
  %conv7.i = uitofp i32 %82 to double, !dbg !1413
  %mul8.i = fmul double %call.i26.i, %conv7.i, !dbg !1413
  %div.i325 = fdiv double %mul6.i, %mul8.i, !dbg !1413
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1433), !dbg !1434
  call void @llvm.dbg.value(metadata !{double %div.i325}, i64 0, metadata !1435), !dbg !1434
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1436), !dbg !1434
  %mul.i.i326 = fmul double %sub.i.i315, %div.i325, !dbg !1437
  %83 = load double* %Layer_Normal, align 8, !dbg !1437, !tbaa !1256
  %add.i.i327 = fadd double %83, %mul.i.i326, !dbg !1437
  store double %add.i.i327, double* %Layer_Normal, align 8, !dbg !1437, !tbaa !1256
  %mul3.i.i328 = fmul double %sub5.i.i, %div.i325, !dbg !1412
  %84 = load double* %arrayidx4.i14.i, align 8, !dbg !1412, !tbaa !1256
  %add5.i.i329 = fadd double %mul3.i.i328, %84, !dbg !1412
  store double %add5.i.i329, double* %arrayidx4.i14.i, align 8, !dbg !1412, !tbaa !1256
  %mul7.i.i330 = fmul double %sub9.i.i, %div.i325, !dbg !1414
  %85 = load double* %arrayidx8.i16.i, align 8, !dbg !1414, !tbaa !1256
  %add9.i.i331 = fadd double %mul7.i.i330, %85, !dbg !1414
  store double %add9.i.i331, double* %arrayidx8.i16.i, align 8, !dbg !1414, !tbaa !1256
  %inc.i = add i32 %i.028.i, 1, !dbg !1404
  call void @llvm.dbg.value(metadata !{i32 %inc.i}, i64 0, metadata !1403), !dbg !1404
  %cmp.i332 = icmp ult i32 %inc.i, %82, !dbg !1404
  br i1 %cmp.i332, label %for.body.i, label %sw.epilog, !dbg !1404

sw.bb83:                                          ; preds = %if.end72
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1438), !dbg !1440
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1441), !dbg !1440
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1442), !dbg !1440
  call void @llvm.dbg.declare(metadata !1401, metadata !1042), !dbg !1443
  call void @llvm.dbg.value(metadata !70, i64 0, metadata !1444), !dbg !1445
  %86 = load i32* @_ZN3pov15Number_Of_WavesE, align 4, !dbg !1445, !tbaa !1293
  %cmp35.i = icmp eq i32 %86, 0, !dbg !1445
  br i1 %cmp35.i, label %sw.epilog, label %for.body.lr.ph.i338, !dbg !1445

for.body.lr.ph.i338:                              ; preds = %sw.bb83
  %arrayidx3.i.i333 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1447
  %arrayidx7.i.i334 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1450
  %Frequency.i335 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 4, !dbg !1451
  %Phase.i336 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 5, !dbg !1451
  %Amount.i337 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1452
  %arrayidx4.i22.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1453
  %arrayidx8.i24.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1455
  br label %for.body.i368, !dbg !1445

for.body.i368:                                    ; preds = %for.body.i368, %for.body.lr.ph.i338
  %i.036.i = phi i32 [ 0, %for.body.lr.ph.i338 ], [ %inc.i366, %for.body.i368 ]
  %idxprom.i339 = zext i32 %i.036.i to i64, !dbg !1448
  %87 = load [3 x double]** @_ZN3pov12Wave_SourcesE, align 8, !dbg !1448, !tbaa !1229
  %arraydecay1.i340 = getelementptr inbounds [3 x double]* %87, i64 %idxprom.i339, i64 0, !dbg !1448
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1456), !dbg !1457
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1458), !dbg !1457
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i340}, i64 0, metadata !1459), !dbg !1457
  %88 = load double* %arraydecay73, align 16, !dbg !1460, !tbaa !1256
  %89 = load double* %arraydecay1.i340, align 8, !dbg !1460, !tbaa !1256
  %sub.i.i341 = fsub double %88, %89, !dbg !1460
  %90 = load double* %arrayidx3.i.i333, align 8, !dbg !1447, !tbaa !1256
  %arrayidx4.i.i342 = getelementptr inbounds [3 x double]* %87, i64 %idxprom.i339, i64 1, !dbg !1447
  %91 = load double* %arrayidx4.i.i342, align 8, !dbg !1447, !tbaa !1256
  %sub5.i.i343 = fsub double %90, %91, !dbg !1447
  %92 = load double* %arrayidx7.i.i334, align 16, !dbg !1450, !tbaa !1256
  %arrayidx8.i.i344 = getelementptr inbounds [3 x double]* %87, i64 %idxprom.i339, i64 2, !dbg !1450
  %93 = load double* %arrayidx8.i.i344, align 8, !dbg !1450, !tbaa !1256
  %sub9.i.i345 = fsub double %92, %93, !dbg !1450
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1461) #5, !dbg !1463
  %mul.i25.i = fmul double %sub.i.i341, %sub.i.i341, !dbg !1464
  %mul4.i.i346 = fmul double %sub5.i.i343, %sub5.i.i343, !dbg !1464
  %add.i27.i = fadd double %mul.i25.i, %mul4.i.i346, !dbg !1464
  %mul7.i28.i = fmul double %sub9.i.i345, %sub9.i.i345, !dbg !1464
  %add8.i.i347 = fadd double %add.i27.i, %mul7.i28.i, !dbg !1464
  %call.i.i348 = call double @sqrt(double %add8.i.i347) #7, !dbg !1464
  call void @llvm.dbg.value(metadata !{double %call.i.i348}, i64 0, metadata !1465), !dbg !1464
  call void @llvm.dbg.value(metadata !{double %call.i.i348}, i64 0, metadata !1466), !dbg !1463
  call void @llvm.dbg.value(metadata !{double %call.i.i348}, i64 0, metadata !1467), !dbg !1468
  call void @llvm.dbg.value(metadata !{double %call.i.i348}, i64 0, metadata !1467), !dbg !1451
  call void @llvm.dbg.value(metadata !{double %call.i.i348}, i64 0, metadata !1467), !dbg !1454
  %cmp3.i349 = fcmp oeq double %call.i.i348, 0.000000e+00, !dbg !1468
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1467), !dbg !1469
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1466), !dbg !1463
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1467), !dbg !1468
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1467), !dbg !1451
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1467), !dbg !1454
  %call.i34.i = select i1 %cmp3.i349, double 1.000000e+00, double %call.i.i348, !dbg !1468
  %94 = load float* %Frequency.i335, align 4, !dbg !1451, !tbaa !1190
  %conv.i350 = fpext float %94 to double, !dbg !1451
  %mul.i351 = fmul double %call.i34.i, %conv.i350, !dbg !1451
  %95 = load double** @_ZN3pov9frequencyE, align 8, !dbg !1451, !tbaa !1229
  %arrayidx5.i352 = getelementptr inbounds double* %95, i64 %idxprom.i339, !dbg !1451
  %96 = load double* %arrayidx5.i352, align 8, !dbg !1451, !tbaa !1256
  %mul6.i353 = fmul double %mul.i351, %96, !dbg !1451
  %97 = load float* %Phase.i336, align 4, !dbg !1451, !tbaa !1190
  %conv7.i354 = fpext float %97 to double, !dbg !1451
  %add.i355 = fadd double %mul6.i353, %conv7.i354, !dbg !1451
  call void @llvm.dbg.value(metadata !{double %add.i355}, i64 0, metadata !1471), !dbg !1451
  %call.i356 = call double @_ZN3pov9cycloidalEd(double %add.i355) #6, !dbg !1472
  call void @llvm.dbg.value(metadata !{double %call.i356}, i64 0, metadata !1473), !dbg !1472
  %98 = load float* %Amount.i337, align 4, !dbg !1452, !tbaa !1190
  %conv8.i357 = fpext float %98 to double, !dbg !1452
  %mul9.i = fmul double %call.i356, %conv8.i357, !dbg !1452
  %99 = load double** @_ZN3pov9frequencyE, align 8, !dbg !1452, !tbaa !1229
  %arrayidx11.i = getelementptr inbounds double* %99, i64 %idxprom.i339, !dbg !1452
  %100 = load double* %arrayidx11.i, align 8, !dbg !1452, !tbaa !1256
  %div.i358 = fdiv double %mul9.i, %100, !dbg !1452
  call void @llvm.dbg.value(metadata !{double %div.i358}, i64 0, metadata !1474), !dbg !1452
  %101 = load i32* @_ZN3pov15Number_Of_WavesE, align 4, !dbg !1454, !tbaa !1293
  %conv12.i = uitofp i32 %101 to double, !dbg !1454
  %mul13.i359 = fmul double %call.i34.i, %conv12.i, !dbg !1454
  %div14.i = fdiv double %div.i358, %mul13.i359, !dbg !1454
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1475), !dbg !1476
  call void @llvm.dbg.value(metadata !{double %div14.i}, i64 0, metadata !1477), !dbg !1476
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1478), !dbg !1476
  %mul.i.i360 = fmul double %sub.i.i341, %div14.i, !dbg !1479
  %102 = load double* %Layer_Normal, align 8, !dbg !1479, !tbaa !1256
  %add.i.i361 = fadd double %102, %mul.i.i360, !dbg !1479
  store double %add.i.i361, double* %Layer_Normal, align 8, !dbg !1479, !tbaa !1256
  %mul3.i.i362 = fmul double %sub5.i.i343, %div14.i, !dbg !1453
  %103 = load double* %arrayidx4.i22.i, align 8, !dbg !1453, !tbaa !1256
  %add5.i.i363 = fadd double %mul3.i.i362, %103, !dbg !1453
  store double %add5.i.i363, double* %arrayidx4.i22.i, align 8, !dbg !1453, !tbaa !1256
  %mul7.i.i364 = fmul double %sub9.i.i345, %div14.i, !dbg !1455
  %104 = load double* %arrayidx8.i24.i, align 8, !dbg !1455, !tbaa !1256
  %add9.i.i365 = fadd double %mul7.i.i364, %104, !dbg !1455
  store double %add9.i.i365, double* %arrayidx8.i24.i, align 8, !dbg !1455, !tbaa !1256
  %inc.i366 = add i32 %i.036.i, 1, !dbg !1445
  call void @llvm.dbg.value(metadata !{i32 %inc.i366}, i64 0, metadata !1444), !dbg !1445
  %cmp.i367 = icmp ult i32 %inc.i366, %101, !dbg !1445
  br i1 %cmp.i367, label %for.body.i368, label %sw.epilog, !dbg !1445

sw.bb85:                                          ; preds = %if.end72
  %105 = bitcast [3 x double]* %bump_turb.i to i8*, !dbg !1480
  call void @llvm.lifetime.start(i64 24, i8* %105), !dbg !1480
  %106 = bitcast [3 x double]* %value2.i to i8*, !dbg !1480
  call void @llvm.lifetime.start(i64 24, i8* %106), !dbg !1480
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1482), !dbg !1480
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1483), !dbg !1480
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1484), !dbg !1480
  call void @llvm.dbg.value(metadata !1429, i64 0, metadata !1485), !dbg !1486
  call void @llvm.dbg.declare(metadata !1401, metadata !1029), !dbg !1487
  call void @llvm.dbg.declare(metadata !{[3 x double]* %bump_turb.i}, metadata !1030), !dbg !1487
  call void @llvm.dbg.declare(metadata !{[3 x double]* %value2.i}, metadata !1031), !dbg !1487
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1488), !dbg !1490
  call void @llvm.dbg.value(metadata !1491, i64 0, metadata !1492), !dbg !1490
  call void @llvm.dbg.value(metadata !1491, i64 0, metadata !1493), !dbg !1490
  call void @llvm.dbg.value(metadata !1491, i64 0, metadata !1494), !dbg !1490
  call void @llvm.dbg.value(metadata !70, i64 0, metadata !1495), !dbg !1496
  %arraydecay1.i369 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 0, !dbg !1498
  %arrayidx2.i23.i = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1500
  %arrayidx4.i25.i = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 1, !dbg !1500
  %arrayidx5.i.i370 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1501
  %arrayidx7.i.i371 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 2, !dbg !1501
  %arraydecay2.i = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 0, !dbg !1502
  %arrayidx5.i372 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 1, !dbg !1503
  %arrayidx10.i373 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 2, !dbg !1504
  br label %for.body.i381, !dbg !1496

for.body.i381:                                    ; preds = %for.body.i381, %sw.bb85
  %scale.036.i = phi double [ 1.000000e+00, %sw.bb85 ], [ %mul.i379, %for.body.i381 ]
  %i.035.i = phi i32 [ 0, %sw.bb85 ], [ %inc.i380, %for.body.i381 ]
  %add2934.i = phi double [ 0.000000e+00, %sw.bb85 ], [ %add.i376, %for.body.i381 ]
  %add93033.i = phi double [ 0.000000e+00, %sw.bb85 ], [ %add9.i377, %for.body.i381 ]
  %add143132.i = phi double [ 0.000000e+00, %sw.bb85 ], [ %add14.i378, %for.body.i381 ]
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i369}, i64 0, metadata !1505), !dbg !1506
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1507), !dbg !1506
  call void @llvm.dbg.value(metadata !{double %scale.036.i}, i64 0, metadata !1508), !dbg !1506
  %107 = load double* %arraydecay73, align 16, !dbg !1509, !tbaa !1256
  %mul.i22.i = fmul double %scale.036.i, %107, !dbg !1509
  store double %mul.i22.i, double* %arraydecay1.i369, align 16, !dbg !1509, !tbaa !1256
  %108 = load double* %arrayidx2.i23.i, align 8, !dbg !1500, !tbaa !1256
  %mul3.i24.i = fmul double %scale.036.i, %108, !dbg !1500
  store double %mul3.i24.i, double* %arrayidx4.i25.i, align 8, !dbg !1500, !tbaa !1256
  %109 = load double* %arrayidx5.i.i370, align 16, !dbg !1501, !tbaa !1256
  %mul6.i.i = fmul double %scale.036.i, %109, !dbg !1501
  store double %mul6.i.i, double* %arrayidx7.i.i371, align 16, !dbg !1501, !tbaa !1256
  call void @_ZN3pov6DNoiseEPdS0_(double* %arraydecay2.i, double* %arraydecay1.i369) #6, !dbg !1502
  %110 = load double* %arraydecay2.i, align 16, !dbg !1510, !tbaa !1256
  %div.i374 = fdiv double %110, %scale.036.i, !dbg !1510
  %call.i375 = call double @fabs(double %div.i374) #8, !dbg !1510
  %add.i376 = fadd double %add2934.i, %call.i375, !dbg !1510
  %111 = load double* %arrayidx5.i372, align 8, !dbg !1503, !tbaa !1256
  %div6.i = fdiv double %111, %scale.036.i, !dbg !1503
  %call7.i = call double @fabs(double %div6.i) #8, !dbg !1503
  %add9.i377 = fadd double %add93033.i, %call7.i, !dbg !1503
  %112 = load double* %arrayidx10.i373, align 16, !dbg !1504, !tbaa !1256
  %div11.i = fdiv double %112, %scale.036.i, !dbg !1504
  %call12.i = call double @fabs(double %div11.i) #8, !dbg !1504
  %add14.i378 = fadd double %add143132.i, %call12.i, !dbg !1504
  %mul.i379 = fmul double %scale.036.i, 2.000000e+00, !dbg !1496
  call void @llvm.dbg.value(metadata !{double %mul.i379}, i64 0, metadata !1485), !dbg !1496
  %inc.i380 = add nsw i32 %i.035.i, 1, !dbg !1496
  call void @llvm.dbg.value(metadata !{i32 %inc.i380}, i64 0, metadata !1495), !dbg !1496
  %exitcond.i = icmp eq i32 %inc.i380, 10, !dbg !1496
  br i1 %exitcond.i, label %_ZN3povL8wrinklesEPdPNS_14Tnormal_StructES0_.exit, label %for.body.i381, !dbg !1496

_ZN3povL8wrinklesEPdPNS_14Tnormal_StructES0_.exit: ; preds = %for.body.i381
  %Amount.i382 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1511
  %113 = load float* %Amount.i382, align 4, !dbg !1511, !tbaa !1190
  %conv.i383 = fpext float %113 to double, !dbg !1511
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1512), !dbg !1513
  call void @llvm.dbg.value(metadata !{double %conv.i383}, i64 0, metadata !1514), !dbg !1513
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1515), !dbg !1513
  %mul.i.i384 = fmul double %add.i376, %conv.i383, !dbg !1516
  %114 = load double* %Layer_Normal, align 8, !dbg !1516, !tbaa !1256
  %add.i.i385 = fadd double %114, %mul.i.i384, !dbg !1516
  store double %add.i.i385, double* %Layer_Normal, align 8, !dbg !1516, !tbaa !1256
  %mul3.i.i386 = fmul double %add9.i377, %conv.i383, !dbg !1517
  %arrayidx4.i.i387 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1517
  %115 = load double* %arrayidx4.i.i387, align 8, !dbg !1517, !tbaa !1256
  %add5.i.i388 = fadd double %115, %mul3.i.i386, !dbg !1517
  store double %add5.i.i388, double* %arrayidx4.i.i387, align 8, !dbg !1517, !tbaa !1256
  %mul7.i.i389 = fmul double %add14.i378, %conv.i383, !dbg !1518
  %arrayidx8.i.i390 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1518
  %116 = load double* %arrayidx8.i.i390, align 8, !dbg !1518, !tbaa !1256
  %add9.i.i391 = fadd double %mul7.i.i389, %116, !dbg !1518
  store double %add9.i.i391, double* %arrayidx8.i.i390, align 8, !dbg !1518, !tbaa !1256
  call void @llvm.lifetime.end(i64 24, i8* %105), !dbg !1519
  call void @llvm.lifetime.end(i64 24, i8* %106), !dbg !1519
  br label %sw.epilog, !dbg !1481

sw.bb87:                                          ; preds = %if.end72
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1520), !dbg !1522
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1523), !dbg !1522
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1524), !dbg !1522
  call void @llvm.dbg.declare(metadata !1401, metadata !1019), !dbg !1525
  %117 = load double* %arraydecay73, align 16, !dbg !1526, !tbaa !1256
  %cmp.i392 = fcmp ult double %117, 0.000000e+00, !dbg !1526
  br i1 %cmp.i392, label %cond.false.i, label %cond.true.i, !dbg !1526

cond.true.i:                                      ; preds = %sw.bb87
  %call.i393 = call double @floor(double %117) #8, !dbg !1526
  br label %cond.end.i, !dbg !1526

cond.false.i:                                     ; preds = %sw.bb87
  %sub.i394 = fsub double 0.000000e+00, %117, !dbg !1526
  %call4.i = call double @floor(double %sub.i394) #8, !dbg !1526
  %sub5.i = fsub double 0.000000e+00, %call4.i, !dbg !1526
  %sub6.i = fadd double %sub5.i, -1.000000e+00, !dbg !1526
  br label %cond.end.i, !dbg !1526

cond.end.i:                                       ; preds = %cond.false.i, %cond.true.i
  %cond.i = phi double [ %call.i393, %cond.true.i ], [ %sub6.i, %cond.false.i ], !dbg !1526
  %sub7.i395 = fsub double %117, %cond.i, !dbg !1526
  %sub8.i = fadd double %sub7.i395, -5.000000e-01, !dbg !1526
  %arrayidx10.i396 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1527
  %118 = load double* %arrayidx10.i396, align 8, !dbg !1527, !tbaa !1256
  %cmp12.i = fcmp ult double %118, 0.000000e+00, !dbg !1527
  br i1 %cmp12.i, label %cond.false16.i, label %cond.true13.i, !dbg !1527

cond.true13.i:                                    ; preds = %cond.end.i
  %call15.i = call double @floor(double %118) #8, !dbg !1527
  br label %cond.end22.i, !dbg !1527

cond.false16.i:                                   ; preds = %cond.end.i
  %sub18.i = fsub double 0.000000e+00, %118, !dbg !1527
  %call19.i = call double @floor(double %sub18.i) #8, !dbg !1527
  %sub20.i = fsub double 0.000000e+00, %call19.i, !dbg !1527
  %sub21.i = fadd double %sub20.i, -1.000000e+00, !dbg !1527
  br label %cond.end22.i, !dbg !1527

cond.end22.i:                                     ; preds = %cond.false16.i, %cond.true13.i
  %cond23.i = phi double [ %call15.i, %cond.true13.i ], [ %sub21.i, %cond.false16.i ], !dbg !1527
  %sub24.i = fsub double %118, %cond23.i, !dbg !1527
  %sub25.i = fadd double %sub24.i, -5.000000e-01, !dbg !1527
  %arrayidx27.i = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1528
  %119 = load double* %arrayidx27.i, align 16, !dbg !1528, !tbaa !1256
  %cmp29.i = fcmp ult double %119, 0.000000e+00, !dbg !1528
  br i1 %cmp29.i, label %cond.false33.i, label %cond.true30.i, !dbg !1528

cond.true30.i:                                    ; preds = %cond.end22.i
  %call32.i = call double @floor(double %119) #8, !dbg !1528
  br label %_ZN3povL7quiltedEPdPNS_14Tnormal_StructES0_.exit, !dbg !1528

cond.false33.i:                                   ; preds = %cond.end22.i
  %sub35.i = fsub double 0.000000e+00, %119, !dbg !1528
  %call36.i = call double @floor(double %sub35.i) #8, !dbg !1528
  %sub37.i = fsub double 0.000000e+00, %call36.i, !dbg !1528
  %sub38.i = fadd double %sub37.i, -1.000000e+00, !dbg !1528
  br label %_ZN3povL7quiltedEPdPNS_14Tnormal_StructES0_.exit, !dbg !1528

_ZN3povL7quiltedEPdPNS_14Tnormal_StructES0_.exit: ; preds = %cond.true30.i, %cond.false33.i
  %cond40.i = phi double [ %call32.i, %cond.true30.i ], [ %sub38.i, %cond.false33.i ], !dbg !1528
  %sub41.i = fsub double %119, %cond40.i, !dbg !1528
  %sub42.i = fadd double %sub41.i, -5.000000e-01, !dbg !1528
  %mul.i397 = fmul double %sub8.i, %sub8.i, !dbg !1529
  %mul48.i = fmul double %sub25.i, %sub25.i, !dbg !1529
  %add.i398 = fadd double %mul.i397, %mul48.i, !dbg !1529
  %mul51.i = fmul double %sub42.i, %sub42.i, !dbg !1529
  %add52.i = fadd double %add.i398, %mul51.i, !dbg !1529
  %call53.i = call double @sqrt(double %add52.i) #7, !dbg !1529
  call void @llvm.dbg.value(metadata !{double %call53.i}, i64 0, metadata !1530), !dbg !1529
  %Vals.i = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 10, !dbg !1531
  %Quilted.i = bitcast %union.anon.25* %Vals.i to %struct.anon.27*, !dbg !1531
  %Control0.i = bitcast %union.anon.25* %Vals.i to float*, !dbg !1531
  %120 = load float* %Control0.i, align 4, !dbg !1531, !tbaa !1190
  %conv.i399 = fpext float %120 to double, !dbg !1531
  %Control1.i = getelementptr inbounds %struct.anon.27* %Quilted.i, i64 0, i32 1, !dbg !1531
  %121 = load float* %Control1.i, align 4, !dbg !1531, !tbaa !1190
  %conv56.i = fpext float %121 to double, !dbg !1531
  %call57.i = call double @_ZN3pov11quilt_cubicEddd(double %call53.i, double %conv.i399, double %conv56.i) #6, !dbg !1531
  call void @llvm.dbg.value(metadata !{double %call57.i}, i64 0, metadata !1530), !dbg !1531
  %mul59.i = fmul double %sub8.i, %call57.i, !dbg !1532
  %mul61.i = fmul double %sub25.i, %call57.i, !dbg !1533
  %mul63.i = fmul double %sub42.i, %call57.i, !dbg !1534
  %Amount.i400 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1535
  %122 = load float* %Amount.i400, align 4, !dbg !1535, !tbaa !1190
  %conv64.i = fpext float %122 to double, !dbg !1535
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1536), !dbg !1537
  call void @llvm.dbg.value(metadata !{double %conv64.i}, i64 0, metadata !1538), !dbg !1537
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1539), !dbg !1537
  %mul.i.i401 = fmul double %mul59.i, %conv64.i, !dbg !1540
  %123 = load double* %Layer_Normal, align 8, !dbg !1540, !tbaa !1256
  %add.i.i402 = fadd double %123, %mul.i.i401, !dbg !1540
  store double %add.i.i402, double* %Layer_Normal, align 8, !dbg !1540, !tbaa !1256
  %mul3.i.i403 = fmul double %mul61.i, %conv64.i, !dbg !1541
  %arrayidx4.i.i404 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1541
  %124 = load double* %arrayidx4.i.i404, align 8, !dbg !1541, !tbaa !1256
  %add5.i.i405 = fadd double %124, %mul3.i.i403, !dbg !1541
  store double %add5.i.i405, double* %arrayidx4.i.i404, align 8, !dbg !1541, !tbaa !1256
  %mul7.i.i406 = fmul double %mul63.i, %conv64.i, !dbg !1542
  %arrayidx8.i.i407 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1542
  %125 = load double* %arrayidx8.i.i407, align 8, !dbg !1542, !tbaa !1256
  %add9.i.i408 = fadd double %mul7.i.i406, %125, !dbg !1542
  store double %add9.i.i408, double* %arrayidx8.i.i407, align 8, !dbg !1542, !tbaa !1256
  br label %sw.epilog, !dbg !1521

sw.bb89:                                          ; preds = %if.end72
  %126 = bitcast [3 x double]* %bump_turb.i to i8*, !dbg !1543
  call void @llvm.lifetime.start(i64 24, i8* %126), !dbg !1543
  %127 = bitcast [3 x double]* %value2.i to i8*, !dbg !1543
  call void @llvm.lifetime.start(i64 24, i8* %127), !dbg !1543
  %128 = bitcast [3 x double]* %t1.i to i8*, !dbg !1543
  call void @llvm.lifetime.start(i64 24, i8* %128), !dbg !1543
  %129 = bitcast [3 x double]* %newnormal.i to i8*, !dbg !1543
  call void @llvm.lifetime.start(i64 24, i8* %129), !dbg !1543
  %130 = bitcast [3 x double]* %pert.i to i8*, !dbg !1543
  call void @llvm.lifetime.start(i64 24, i8* %130), !dbg !1543
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1545), !dbg !1543
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1546), !dbg !1543
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1547), !dbg !1543
  call void @llvm.dbg.declare(metadata !{[3 x double]* %bump_turb.i}, metadata !950), !dbg !1548
  call void @llvm.dbg.declare(metadata !{[3 x double]* %value2.i}, metadata !951), !dbg !1548
  call void @llvm.dbg.declare(metadata !1401, metadata !952), !dbg !1548
  call void @llvm.dbg.declare(metadata !{[3 x double]* %t1.i}, metadata !953), !dbg !1548
  call void @llvm.dbg.declare(metadata !1401, metadata !954), !dbg !1548
  call void @llvm.dbg.declare(metadata !{[3 x double]* %newnormal.i}, metadata !955), !dbg !1548
  call void @llvm.dbg.declare(metadata !{[3 x double]* %pert.i}, metadata !956), !dbg !1548
  %Metric1.i = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 10, i32 0, i32 0, i64 2, !dbg !1549
  %131 = load double* %Metric1.i, align 8, !dbg !1549, !tbaa !1256
  call void @llvm.dbg.value(metadata !{double %131}, i64 0, metadata !1550), !dbg !1549
  %cmp.i409 = fcmp oeq double %131, 2.000000e+00, !dbg !1551
  %cmp2.i = fcmp oeq double %131, 1.000000e+00, !dbg !1552
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1553) #5, !dbg !1555
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1556) #5, !dbg !1555
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1557) #5, !dbg !1559
  %132 = load double* %Layer_Normal, align 8, !dbg !1560, !tbaa !1256
  %mul.i.i.i = fmul double %132, %132, !dbg !1560
  %arrayidx2.i.i.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1560
  %133 = load double* %arrayidx2.i.i.i, align 8, !dbg !1560, !tbaa !1256
  %mul4.i.i.i = fmul double %133, %133, !dbg !1560
  %add.i.i.i = fadd double %mul.i.i.i, %mul4.i.i.i, !dbg !1560
  %arrayidx5.i.i.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1560
  %134 = load double* %arrayidx5.i.i.i, align 8, !dbg !1560, !tbaa !1256
  %mul7.i.i.i = fmul double %134, %134, !dbg !1560
  %add8.i.i.i = fadd double %add.i.i.i, %mul7.i.i.i, !dbg !1560
  %call.i.i.i = call double @sqrt(double %add8.i.i.i) #7, !dbg !1560
  call void @llvm.dbg.value(metadata !{double %call.i.i.i}, i64 0, metadata !1561) #5, !dbg !1560
  call void @llvm.dbg.value(metadata !{double %call.i.i.i}, i64 0, metadata !1562) #5, !dbg !1559
  call void @llvm.dbg.value(metadata !{double %call.i.i.i}, i64 0, metadata !1563) #5, !dbg !1564
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1565) #5, !dbg !1566
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1567) #5, !dbg !1566
  call void @llvm.dbg.value(metadata !{double %call.i.i.i}, i64 0, metadata !1568) #5, !dbg !1566
  %div.i.i.i = fdiv double 1.000000e+00, %call.i.i.i, !dbg !1569
  call void @llvm.dbg.value(metadata !{double %div.i.i.i}, i64 0, metadata !1570) #5, !dbg !1569
  %135 = load double* %Layer_Normal, align 8, !dbg !1571, !tbaa !1256
  %mul.i2.i.i = fmul double %div.i.i.i, %135, !dbg !1571
  store double %mul.i2.i.i, double* %Layer_Normal, align 8, !dbg !1571, !tbaa !1256
  %136 = load double* %arrayidx2.i.i.i, align 8, !dbg !1572, !tbaa !1256
  %mul3.i.i.i = fmul double %div.i.i.i, %136, !dbg !1572
  store double %mul3.i.i.i, double* %arrayidx2.i.i.i, align 8, !dbg !1572, !tbaa !1256
  %137 = load double* %arrayidx5.i.i.i, align 8, !dbg !1573, !tbaa !1256
  %mul6.i.i.i = fmul double %div.i.i.i, %137, !dbg !1573
  store double %mul6.i.i.i, double* %arrayidx5.i.i.i, align 8, !dbg !1573, !tbaa !1256
  %138 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 10, i32 0, i32 0, i64 1, !dbg !1574
  %139 = load double* %138, align 8, !dbg !1574, !tbaa !1256
  %tobool.i = fcmp une double %139, 0.000000e+00, !dbg !1574
  %arraydecay.i410 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 0, !dbg !1575
  br i1 %tobool.i, label %if.then.i, label %if.else.i, !dbg !1574

if.then.i:                                        ; preds = %sw.bb89
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i410}, i64 0, metadata !1577), !dbg !1578
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1579), !dbg !1578
  %140 = load double* %arraydecay73, align 16, !dbg !1580, !tbaa !1256
  store double %140, double* %arraydecay.i410, align 16, !dbg !1580, !tbaa !1256
  %arrayidx2.i.i411 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1581
  %141 = load double* %arrayidx2.i.i411, align 8, !dbg !1581, !tbaa !1256
  %arrayidx3.i.i412 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 1, !dbg !1581
  store double %141, double* %arrayidx3.i.i412, align 8, !dbg !1581, !tbaa !1256
  %arrayidx4.i.i413 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1582
  %142 = load double* %arrayidx4.i.i413, align 16, !dbg !1582, !tbaa !1256
  %arrayidx5.i.i414 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 2, !dbg !1582
  store double %142, double* %arrayidx5.i.i414, align 16, !dbg !1582, !tbaa !1256
  br label %if.end.i415, !dbg !1583

if.else.i:                                        ; preds = %sw.bb89
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i410}, i64 0, metadata !1584), !dbg !1587
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1588), !dbg !1587
  store double %mul.i2.i.i, double* %arraydecay.i410, align 16, !dbg !1589, !tbaa !1256
  %arrayidx3.i217.i = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 1, !dbg !1590
  store double %mul3.i.i.i, double* %arrayidx3.i217.i, align 8, !dbg !1590, !tbaa !1256
  %arrayidx5.i219.i = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 2, !dbg !1591
  store double %mul6.i.i.i, double* %arrayidx5.i219.i, align 16, !dbg !1591, !tbaa !1256
  br label %if.end.i415

if.end.i415:                                      ; preds = %if.else.i, %if.then.i
  %143 = phi double [ %mul6.i.i.i, %if.else.i ], [ %142, %if.then.i ]
  %144 = phi double [ %mul3.i.i.i, %if.else.i ], [ %141, %if.then.i ]
  %145 = phi double [ %mul.i2.i.i, %if.else.i ], [ %140, %if.then.i ]
  %Size.i = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 10, i32 0, i32 0, i64 0, !dbg !1592
  %146 = load double* %Size.i, align 8, !dbg !1592, !tbaa !1256
  %cmp9.i = fcmp olt double %146, 1.000000e-06, !dbg !1592
  br i1 %cmp9.i, label %if.end15.i, label %if.else11.i, !dbg !1592

if.else11.i:                                      ; preds = %if.end.i415
  %div.i416 = fdiv double 1.000000e+00, %146, !dbg !1593
  call void @llvm.dbg.value(metadata !{double %div.i416}, i64 0, metadata !1595), !dbg !1593
  br label %if.end15.i

if.end15.i:                                       ; preds = %if.else11.i, %if.end.i415
  %scale.0.i = phi double [ %div.i416, %if.else11.i ], [ 1.000000e+06, %if.end.i415 ]
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i410}, i64 0, metadata !1596), !dbg !1598
  call void @llvm.dbg.value(metadata !{double %scale.0.i}, i64 0, metadata !1599), !dbg !1598
  %mul.i284.i = fmul double %145, %scale.0.i, !dbg !1600
  store double %mul.i284.i, double* %arraydecay.i410, align 16, !dbg !1600, !tbaa !1256
  %arrayidx1.i.i = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 1, !dbg !1601
  %mul2.i.i417 = fmul double %144, %scale.0.i, !dbg !1601
  store double %mul2.i.i417, double* %arrayidx1.i.i, align 8, !dbg !1601, !tbaa !1256
  %arrayidx3.i285.i = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 2, !dbg !1602
  %mul4.i286.i = fmul double %143, %scale.0.i, !dbg !1602
  store double %mul4.i286.i, double* %arrayidx3.i285.i, align 16, !dbg !1602, !tbaa !1256
  %arraydecay18.i = getelementptr inbounds [3 x double]* %t1.i, i64 0, i64 0, !dbg !1603
  %call.i418 = call i32 @_ZN3pov10PickInCubeEPdS0_(double* %arraydecay.i410, double* %arraydecay18.i) #6, !dbg !1603
  call void @llvm.dbg.value(metadata !{i32 %call.i418}, i64 0, metadata !1604), !dbg !1603
  %147 = load i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E8lastseed, align 4, !dbg !1605, !tbaa !1293
  %cmp19.i = icmp eq i32 %call.i418, %147, !dbg !1605
  br i1 %cmp19.i, label %if.end79.i, label %if.then20.i, !dbg !1605

if.then20.i:                                      ; preds = %if.end15.i
  store i32 0, i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E3cvc, align 4, !dbg !1606, !tbaa !1293
  %arraydecay51.i = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 0, !dbg !1608
  %arrayidx6.i279.i = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 1, !dbg !1616
  %arrayidx10.i283.i = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 2, !dbg !1617
  %arrayidx60.i = getelementptr inbounds [3 x double]* %t1.i, i64 0, i64 1, !dbg !1618
  %arrayidx64.i = getelementptr inbounds [3 x double]* %t1.i, i64 0, i64 2, !dbg !1619
  br label %for.cond25.preheader.i, !dbg !1620

for.cond25.preheader.i:                           ; preds = %for.inc75.i, %if.then20.i
  %storemerge200313.i = phi double [ -2.000000e+00, %if.then20.i ], [ %add77.i, %for.inc75.i ]
  br label %for.cond30.preheader.i, !dbg !1621

for.cond30.preheader.i:                           ; preds = %for.inc71.i, %for.cond25.preheader.i
  %storemerge312.i = phi double [ -2.000000e+00, %for.cond25.preheader.i ], [ %add73.i, %for.inc71.i ]
  br label %for.body33.i, !dbg !1622

for.body33.i:                                     ; preds = %for.inc.i, %for.cond30.preheader.i
  %storemerge201311.i = phi double [ -2.000000e+00, %for.cond30.preheader.i ], [ %add70.i, %for.inc.i ]
  %call35.i = call double @fabs(double %storemerge200313.i) #8, !dbg !1623
  %cmp36.i = fcmp ogt double %call35.i, 1.500000e+00, !dbg !1623
  %conv37.i = zext i1 %cmp36.i to i32, !dbg !1623
  %call39.i = call double @fabs(double %storemerge312.i) #8, !dbg !1623
  %cmp40.i = fcmp ogt double %call39.i, 1.500000e+00, !dbg !1623
  %conv41.i = zext i1 %cmp40.i to i32, !dbg !1623
  %add42.i = add nsw i32 %conv41.i, %conv37.i, !dbg !1623
  %call44.i = call double @fabs(double %storemerge201311.i) #8, !dbg !1623
  %cmp45.i = fcmp ogt double %call44.i, 1.500000e+00, !dbg !1623
  %conv46.i = zext i1 %cmp45.i to i32, !dbg !1623
  %add47.i = add nsw i32 %add42.i, %conv46.i, !dbg !1623
  %cmp49.i = icmp slt i32 %add47.i, 2, !dbg !1623
  br i1 %cmp49.i, label %if.then50.i, label %for.inc.i, !dbg !1623

if.then50.i:                                      ; preds = %for.body33.i
  call void @llvm.dbg.value(metadata !{double* %arraydecay51.i}, i64 0, metadata !1624), !dbg !1625
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i410}, i64 0, metadata !1626), !dbg !1625
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1627), !dbg !1625
  %148 = load double* %arraydecay.i410, align 16, !dbg !1628, !tbaa !1256
  %add.i275.i = fadd double %storemerge200313.i, %148, !dbg !1628
  store double %add.i275.i, double* %arraydecay51.i, align 16, !dbg !1628, !tbaa !1256
  %149 = load double* %arrayidx1.i.i, align 8, !dbg !1616, !tbaa !1256
  %add5.i278.i = fadd double %storemerge312.i, %149, !dbg !1616
  store double %add5.i278.i, double* %arrayidx6.i279.i, align 8, !dbg !1616, !tbaa !1256
  %150 = load double* %arrayidx3.i285.i, align 16, !dbg !1617, !tbaa !1256
  %add9.i282.i = fadd double %storemerge201311.i, %150, !dbg !1617
  store double %add9.i282.i, double* %arrayidx10.i283.i, align 16, !dbg !1617, !tbaa !1256
  %call56.i = call i32 @_ZN3pov10PickInCubeEPdS0_(double* %arraydecay51.i, double* %arraydecay18.i) #6, !dbg !1629
  %151 = load double* %arraydecay18.i, align 16, !dbg !1630, !tbaa !1256
  %152 = load i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E3cvc, align 4, !dbg !1630, !tbaa !1293
  %idxprom.i419 = sext i32 %152 to i64, !dbg !1630
  %arrayidx59.i = getelementptr inbounds [81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 %idxprom.i419, i64 0, !dbg !1630
  store double %151, double* %arrayidx59.i, align 8, !dbg !1630, !tbaa !1256
  %153 = load double* %arrayidx60.i, align 8, !dbg !1618, !tbaa !1256
  %arrayidx63.i = getelementptr inbounds [81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 %idxprom.i419, i64 1, !dbg !1618
  store double %153, double* %arrayidx63.i, align 8, !dbg !1618, !tbaa !1256
  %154 = load double* %arrayidx64.i, align 16, !dbg !1619, !tbaa !1256
  %arrayidx67.i = getelementptr inbounds [81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 %idxprom.i419, i64 2, !dbg !1619
  store double %154, double* %arrayidx67.i, align 8, !dbg !1619, !tbaa !1256
  %inc.i420 = add nsw i32 %152, 1, !dbg !1631
  store i32 %inc.i420, i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E3cvc, align 4, !dbg !1631, !tbaa !1293
  br label %for.inc.i, !dbg !1632

for.inc.i:                                        ; preds = %if.then50.i, %for.body33.i
  %add70.i = fadd double %storemerge201311.i, 1.000000e+00, !dbg !1622
  %cmp32.i = fcmp olt double %add70.i, 2.500000e+00, !dbg !1622
  br i1 %cmp32.i, label %for.body33.i, label %for.inc71.i, !dbg !1622

for.inc71.i:                                      ; preds = %for.inc.i
  %add73.i = fadd double %storemerge312.i, 1.000000e+00, !dbg !1621
  %cmp27.i421 = fcmp olt double %add73.i, 2.500000e+00, !dbg !1621
  br i1 %cmp27.i421, label %for.cond30.preheader.i, label %for.inc75.i, !dbg !1621

for.inc75.i:                                      ; preds = %for.inc71.i
  %add77.i = fadd double %storemerge200313.i, 1.000000e+00, !dbg !1620
  %cmp23.i = fcmp olt double %add77.i, 2.500000e+00, !dbg !1620
  br i1 %cmp23.i, label %for.cond25.preheader.i, label %for.end78.i, !dbg !1620

for.end78.i:                                      ; preds = %for.inc75.i
  store i32 %call.i418, i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E8lastseed, align 4, !dbg !1633, !tbaa !1293
  br label %if.end79.i, !dbg !1634

if.end79.i:                                       ; preds = %for.end78.i, %if.end15.i
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1635), !dbg !1637
  call void @llvm.dbg.value(metadata !1638, i64 0, metadata !1639), !dbg !1637
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i410}, i64 0, metadata !1640), !dbg !1637
  %155 = load double* getelementptr inbounds ([81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 0, i64 0), align 16, !dbg !1641, !tbaa !1256
  %156 = load double* %arraydecay.i410, align 16, !dbg !1641, !tbaa !1256
  %sub.i268.i = fsub double %155, %156, !dbg !1641
  %157 = load double* getelementptr inbounds ([81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 0, i64 1), align 8, !dbg !1642, !tbaa !1256
  %158 = load double* %arrayidx1.i.i, align 8, !dbg !1642, !tbaa !1256
  %sub5.i270.i = fsub double %157, %158, !dbg !1642
  %159 = load double* getelementptr inbounds ([81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 0, i64 2), align 16, !dbg !1643, !tbaa !1256
  %160 = load double* %arrayidx3.i285.i, align 16, !dbg !1643, !tbaa !1256
  %sub9.i273.i = fsub double %159, %160, !dbg !1643
  br i1 %cmp.i409, label %if.then83.i, label %if.else86.i, !dbg !1644

if.then83.i:                                      ; preds = %if.end79.i
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1645), !dbg !1648
  %mul.i261.i = fmul double %sub.i268.i, %sub.i268.i, !dbg !1649
  %mul4.i263.i = fmul double %sub5.i270.i, %sub5.i270.i, !dbg !1649
  %add.i264.i = fadd double %mul.i261.i, %mul4.i263.i, !dbg !1649
  %mul7.i266.i = fmul double %sub9.i273.i, %sub9.i273.i, !dbg !1649
  %add8.i267.i = fadd double %add.i264.i, %mul7.i266.i, !dbg !1649
  call void @llvm.dbg.value(metadata !{double %add8.i267.i}, i64 0, metadata !1650), !dbg !1646
  br label %if.end107.i, !dbg !1651

if.else86.i:                                      ; preds = %if.end79.i
  br i1 %cmp2.i, label %if.then88.i, label %if.else94.i, !dbg !1652

if.then88.i:                                      ; preds = %if.else86.i
  %add91.i = fadd double %sub.i268.i, %sub5.i270.i, !dbg !1654
  %add93.i = fadd double %add91.i, %sub9.i273.i, !dbg !1654
  call void @llvm.dbg.value(metadata !{double %add93.i}, i64 0, metadata !1650), !dbg !1654
  br label %if.end107.i, !dbg !1656

if.else94.i:                                      ; preds = %if.else86.i
  %call96.i = call double @fabs(double %sub.i268.i) #8, !dbg !1657
  %call97.i = call double @pow(double %call96.i, double %131) #7, !dbg !1657
  %call99.i = call double @fabs(double %sub5.i270.i) #8, !dbg !1659
  %call100.i = call double @pow(double %call99.i, double %131) #7, !dbg !1659
  %add101.i = fadd double %call97.i, %call100.i, !dbg !1659
  %call103.i = call double @fabs(double %sub9.i273.i) #8, !dbg !1660
  %call104.i = call double @pow(double %call103.i, double %131) #7, !dbg !1660
  %add105.i = fadd double %add101.i, %call104.i, !dbg !1660
  call void @llvm.dbg.value(metadata !{double %add105.i}, i64 0, metadata !1650), !dbg !1660
  %.pre.i = load double* getelementptr inbounds ([81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 0, i64 0), align 16, !dbg !1661, !tbaa !1256
  %.pre314.i = load double* getelementptr inbounds ([81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 0, i64 1), align 8, !dbg !1663, !tbaa !1256
  %.pre315.i = load double* getelementptr inbounds ([81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 0, i64 2), align 16, !dbg !1664, !tbaa !1256
  br label %if.end107.i

if.end107.i:                                      ; preds = %if.else94.i, %if.then88.i, %if.then83.i
  %161 = phi double [ %159, %if.then83.i ], [ %159, %if.then88.i ], [ %.pre315.i, %if.else94.i ]
  %162 = phi double [ %157, %if.then83.i ], [ %157, %if.then88.i ], [ %.pre314.i, %if.else94.i ]
  %163 = phi double [ %155, %if.then83.i ], [ %155, %if.then88.i ], [ %.pre.i, %if.else94.i ]
  %minsum.0.i = phi double [ %add8.i267.i, %if.then83.i ], [ %add93.i, %if.then88.i ], [ %add105.i, %if.else94.i ]
  %arraydecay108.i = getelementptr inbounds [3 x double]* %newnormal.i, i64 0, i64 0, !dbg !1662
  call void @llvm.dbg.value(metadata !{double* %arraydecay108.i}, i64 0, metadata !1665), !dbg !1666
  call void @llvm.dbg.value(metadata !1638, i64 0, metadata !1667), !dbg !1666
  store double %163, double* %arraydecay108.i, align 16, !dbg !1661, !tbaa !1256
  %arrayidx3.i259.i = getelementptr inbounds [3 x double]* %newnormal.i, i64 0, i64 1, !dbg !1663
  store double %162, double* %arrayidx3.i259.i, align 8, !dbg !1663, !tbaa !1256
  %arrayidx5.i260.i = getelementptr inbounds [3 x double]* %newnormal.i, i64 0, i64 2, !dbg !1664
  store double %161, double* %arrayidx5.i260.i, align 16, !dbg !1664, !tbaa !1256
  call void @llvm.dbg.value(metadata !1668, i64 0, metadata !1669), !dbg !1670
  %164 = load i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E3cvc, align 4, !dbg !1670, !tbaa !1293
  %cmp110308.i = icmp sgt i32 %164, 1, !dbg !1670
  br i1 %cmp110308.i, label %for.body111.i, label %for.end152.i, !dbg !1670

for.body111.i:                                    ; preds = %for.inc150.i, %if.end107.i
  %indvars.iv.i = phi i64 [ 1, %if.end107.i ], [ %indvars.iv.next.i, %for.inc150.i ]
  %minsum.1309.i = phi double [ %minsum.0.i, %if.end107.i ], [ %minsum.2.i, %for.inc150.i ]
  %arraydecay115.i = getelementptr inbounds [81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 %indvars.iv.i, i64 0, !dbg !1672
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1674), !dbg !1675
  call void @llvm.dbg.value(metadata !{double* %arraydecay115.i}, i64 0, metadata !1676), !dbg !1675
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i410}, i64 0, metadata !1677), !dbg !1675
  %165 = load double* %arraydecay115.i, align 8, !dbg !1678, !tbaa !1256
  %166 = load double* %arraydecay.i410, align 16, !dbg !1678, !tbaa !1256
  %sub.i253.i = fsub double %165, %166, !dbg !1678
  %arrayidx3.i254.i = getelementptr inbounds [81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 %indvars.iv.i, i64 1, !dbg !1679
  %167 = load double* %arrayidx3.i254.i, align 8, !dbg !1679, !tbaa !1256
  %168 = load double* %arrayidx1.i.i, align 8, !dbg !1679, !tbaa !1256
  %sub5.i.i422 = fsub double %167, %168, !dbg !1679
  %arrayidx7.i257.i = getelementptr inbounds [81 x [3 x double]]* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E2cv, i64 0, i64 %indvars.iv.i, i64 2, !dbg !1680
  %169 = load double* %arrayidx7.i257.i, align 8, !dbg !1680, !tbaa !1256
  %170 = load double* %arrayidx3.i285.i, align 16, !dbg !1680, !tbaa !1256
  %sub9.i.i423 = fsub double %169, %170, !dbg !1680
  br i1 %cmp.i409, label %if.then118.i, label %if.else121.i, !dbg !1681

if.then118.i:                                     ; preds = %for.body111.i
  call void @llvm.dbg.value(metadata !1415, i64 0, metadata !1682), !dbg !1685
  %mul.i246.i = fmul double %sub.i253.i, %sub.i253.i, !dbg !1686
  %mul4.i248.i = fmul double %sub5.i.i422, %sub5.i.i422, !dbg !1686
  %add.i249.i = fadd double %mul.i246.i, %mul4.i248.i, !dbg !1686
  %mul7.i251.i = fmul double %sub9.i.i423, %sub9.i.i423, !dbg !1686
  %add8.i252.i = fadd double %add.i249.i, %mul7.i251.i, !dbg !1686
  call void @llvm.dbg.value(metadata !{double %add8.i252.i}, i64 0, metadata !1687), !dbg !1683
  call void @llvm.dbg.value(metadata !{double %add8.i252.i}, i64 0, metadata !1688), !dbg !1691
  call void @llvm.dbg.value(metadata !{double %add8.i252.i}, i64 0, metadata !1687), !dbg !1692
  call void @llvm.dbg.value(metadata !{double %add8.i252.i}, i64 0, metadata !1687), !dbg !1693
  br label %if.end142.i, !dbg !1694

if.else121.i:                                     ; preds = %for.body111.i
  br i1 %cmp2.i, label %if.then123.i, label %if.else129.i, !dbg !1695

if.then123.i:                                     ; preds = %if.else121.i
  %add126.i = fadd double %sub.i253.i, %sub5.i.i422, !dbg !1697
  %add128.i = fadd double %add126.i, %sub9.i.i423, !dbg !1697
  call void @llvm.dbg.value(metadata !{double %add128.i}, i64 0, metadata !1687), !dbg !1697
  call void @llvm.dbg.value(metadata !{double %add128.i}, i64 0, metadata !1688), !dbg !1691
  call void @llvm.dbg.value(metadata !{double %add128.i}, i64 0, metadata !1687), !dbg !1692
  call void @llvm.dbg.value(metadata !{double %add128.i}, i64 0, metadata !1687), !dbg !1693
  br label %if.end142.i, !dbg !1699

if.else129.i:                                     ; preds = %if.else121.i
  %call131.i = call double @fabs(double %sub.i253.i) #8, !dbg !1700
  %call132.i = call double @pow(double %call131.i, double %131) #7, !dbg !1700
  %call134.i = call double @fabs(double %sub5.i.i422) #8, !dbg !1702
  %call135.i = call double @pow(double %call134.i, double %131) #7, !dbg !1702
  %add136.i = fadd double %call132.i, %call135.i, !dbg !1702
  %call138.i = call double @fabs(double %sub9.i.i423) #8, !dbg !1703
  %call139.i = call double @pow(double %call138.i, double %131) #7, !dbg !1703
  %add140.i = fadd double %add136.i, %call139.i, !dbg !1703
  call void @llvm.dbg.value(metadata !{double %add140.i}, i64 0, metadata !1687), !dbg !1703
  call void @llvm.dbg.value(metadata !{double %add140.i}, i64 0, metadata !1688), !dbg !1691
  call void @llvm.dbg.value(metadata !{double %add140.i}, i64 0, metadata !1687), !dbg !1692
  call void @llvm.dbg.value(metadata !{double %add140.i}, i64 0, metadata !1687), !dbg !1693
  br label %if.end142.i

if.end142.i:                                      ; preds = %if.else129.i, %if.then123.i, %if.then118.i
  %add8.i306.i = phi double [ %add128.i, %if.then123.i ], [ %add140.i, %if.else129.i ], [ %add8.i252.i, %if.then118.i ]
  %cmp143.i = fcmp olt double %add8.i306.i, %minsum.1309.i, !dbg !1692
  br i1 %cmp143.i, label %if.then144.i, label %for.inc150.i, !dbg !1692

if.then144.i:                                     ; preds = %if.end142.i
  call void @llvm.dbg.value(metadata !{double %add8.i306.i}, i64 0, metadata !1650), !dbg !1704
  call void @llvm.dbg.value(metadata !{double* %arraydecay108.i}, i64 0, metadata !1706), !dbg !1708
  call void @llvm.dbg.value(metadata !{double* %arraydecay115.i}, i64 0, metadata !1709), !dbg !1708
  %171 = load double* %arraydecay115.i, align 8, !dbg !1710, !tbaa !1256
  store double %171, double* %arraydecay108.i, align 16, !dbg !1710, !tbaa !1256
  %172 = load double* %arrayidx3.i254.i, align 8, !dbg !1711, !tbaa !1256
  store double %172, double* %arrayidx3.i259.i, align 8, !dbg !1711, !tbaa !1256
  %173 = load double* %arrayidx7.i257.i, align 8, !dbg !1712, !tbaa !1256
  store double %173, double* %arrayidx5.i260.i, align 16, !dbg !1712, !tbaa !1256
  br label %for.inc150.i, !dbg !1713

for.inc150.i:                                     ; preds = %if.end142.i, %if.then144.i
  %minsum.2.i = phi double [ %add8.i306.i, %if.then144.i ], [ %minsum.1309.i, %if.end142.i ]
  %indvars.iv.next.i = add i64 %indvars.iv.i, 1, !dbg !1670
  %174 = load i32* @_ZZN3povL6facetsEPdPNS_14Tnormal_StructES0_E3cvc, align 4, !dbg !1670, !tbaa !1293
  %175 = trunc i64 %indvars.iv.next.i to i32, !dbg !1670
  %cmp110.i = icmp slt i32 %175, %174, !dbg !1670
  br i1 %cmp110.i, label %for.body111.i, label %for.end152.i, !dbg !1670

for.end152.i:                                     ; preds = %for.inc150.i, %if.end107.i
  %176 = load double* %138, align 8, !dbg !1714, !tbaa !1256
  %tobool156.i = fcmp une double %176, 0.000000e+00, !dbg !1714
  br i1 %tobool156.i, label %if.then157.i, label %if.else168.i, !dbg !1714

if.then157.i:                                     ; preds = %for.end152.i
  %arraydecay158.i = getelementptr inbounds [3 x double]* %pert.i, i64 0, i64 0, !dbg !1715
  call void @_ZN3pov6DNoiseEPdS0_(double* %arraydecay158.i, double* %arraydecay108.i) #6, !dbg !1715
  call void @llvm.dbg.value(metadata !{double* %arraydecay158.i}, i64 0, metadata !1716), !dbg !1691
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1717), !dbg !1691
  %177 = load double* %arraydecay158.i, align 16, !dbg !1718, !tbaa !1256
  %178 = load double* %Layer_Normal, align 8, !dbg !1718, !tbaa !1256
  %mul.i235.i = fmul double %177, %178, !dbg !1718
  %arrayidx2.i236.i = getelementptr inbounds [3 x double]* %pert.i, i64 0, i64 1, !dbg !1718
  %179 = load double* %arrayidx2.i236.i, align 8, !dbg !1718, !tbaa !1256
  %180 = load double* %arrayidx2.i.i.i, align 8, !dbg !1718, !tbaa !1256
  %mul4.i.i424 = fmul double %179, %180, !dbg !1718
  %add.i238.i = fadd double %mul.i235.i, %mul4.i.i424, !dbg !1718
  %arrayidx5.i239.i = getelementptr inbounds [3 x double]* %pert.i, i64 0, i64 2, !dbg !1718
  %181 = load double* %arrayidx5.i239.i, align 16, !dbg !1718, !tbaa !1256
  %182 = load double* %arrayidx5.i.i.i, align 8, !dbg !1718, !tbaa !1256
  %mul7.i241.i = fmul double %181, %182, !dbg !1718
  %add8.i.i425 = fadd double %add.i238.i, %mul7.i241.i, !dbg !1718
  call void @llvm.dbg.value(metadata !{double %add8.i.i425}, i64 0, metadata !1719), !dbg !1718
  call void @llvm.dbg.value(metadata !{double %add8.i.i425}, i64 0, metadata !1688), !dbg !1691
  call void @llvm.dbg.value(metadata !{double %add8.i.i425}, i64 0, metadata !1687), !dbg !1692
  call void @llvm.dbg.value(metadata !{double %add8.i.i425}, i64 0, metadata !1687), !dbg !1693
  call void @llvm.dbg.value(metadata !{double* %arraydecay108.i}, i64 0, metadata !1720), !dbg !1721
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1722), !dbg !1721
  call void @llvm.dbg.value(metadata !{double %add8.i.i425}, i64 0, metadata !1723), !dbg !1721
  %mul.i230.i = fmul double %178, %add8.i.i425, !dbg !1724
  store double %mul.i230.i, double* %arraydecay108.i, align 16, !dbg !1724, !tbaa !1256
  %mul3.i232.i = fmul double %180, %add8.i.i425, !dbg !1725
  store double %mul3.i232.i, double* %arrayidx3.i259.i, align 8, !dbg !1725, !tbaa !1256
  %mul6.i.i426 = fmul double %182, %add8.i.i425, !dbg !1726
  store double %mul6.i.i426, double* %arrayidx5.i260.i, align 16, !dbg !1726, !tbaa !1256
  call void @llvm.dbg.value(metadata !{double* %arraydecay158.i}, i64 0, metadata !1727), !dbg !1729
  call void @llvm.dbg.value(metadata !{double* %arraydecay108.i}, i64 0, metadata !1730), !dbg !1729
  %sub.i.i427 = fsub double %177, %mul.i230.i, !dbg !1731
  store double %sub.i.i427, double* %arraydecay158.i, align 16, !dbg !1731, !tbaa !1256
  %sub4.i.i = fsub double %179, %mul3.i232.i, !dbg !1733
  store double %sub4.i.i, double* %arrayidx2.i236.i, align 8, !dbg !1733, !tbaa !1256
  %sub7.i.i = fsub double %181, %mul6.i.i426, !dbg !1734
  store double %sub7.i.i, double* %arrayidx5.i239.i, align 16, !dbg !1734, !tbaa !1256
  %183 = load double* %138, align 8, !dbg !1735, !tbaa !1256
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1736), !dbg !1737
  call void @llvm.dbg.value(metadata !{double %183}, i64 0, metadata !1738), !dbg !1737
  call void @llvm.dbg.value(metadata !{double* %arraydecay158.i}, i64 0, metadata !1739), !dbg !1737
  %mul.i.i428 = fmul double %183, %sub.i.i427, !dbg !1740
  %add.i.i429 = fadd double %178, %mul.i.i428, !dbg !1740
  store double %add.i.i429, double* %Layer_Normal, align 8, !dbg !1740, !tbaa !1256
  %mul3.i.i430 = fmul double %183, %sub4.i.i, !dbg !1741
  %add5.i.i431 = fadd double %180, %mul3.i.i430, !dbg !1741
  store double %add5.i.i431, double* %arrayidx2.i.i.i, align 8, !dbg !1741, !tbaa !1256
  %mul7.i.i432 = fmul double %183, %sub7.i.i, !dbg !1742
  %add9.i.i433 = fadd double %182, %mul7.i.i432, !dbg !1742
  br label %if.end170.i, !dbg !1743

if.else168.i:                                     ; preds = %for.end152.i
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1744), !dbg !1747
  call void @llvm.dbg.value(metadata !{double* %arraydecay108.i}, i64 0, metadata !1748), !dbg !1747
  %184 = load double* %arraydecay108.i, align 16, !dbg !1749, !tbaa !1256
  store double %184, double* %Layer_Normal, align 8, !dbg !1749, !tbaa !1256
  %185 = load double* %arrayidx3.i259.i, align 8, !dbg !1750, !tbaa !1256
  store double %185, double* %arrayidx2.i.i.i, align 8, !dbg !1750, !tbaa !1256
  %186 = load double* %arrayidx5.i260.i, align 16, !dbg !1751, !tbaa !1256
  br label %if.end170.i

if.end170.i:                                      ; preds = %if.else168.i, %if.then157.i
  %187 = phi double [ %185, %if.else168.i ], [ %add5.i.i431, %if.then157.i ]
  %188 = phi double [ %184, %if.else168.i ], [ %add.i.i429, %if.then157.i ]
  %189 = phi double [ %186, %if.else168.i ], [ %add9.i.i433, %if.then157.i ]
  store double %189, double* %arrayidx5.i.i.i, align 8, !dbg !1742, !tbaa !1256
  %190 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1752, !tbaa !1293
  %cmp171.i = icmp slt i32 %190, 311, !dbg !1752
  br i1 %cmp171.i, label %if.then172.i, label %if.then95, !dbg !1752

if.then172.i:                                     ; preds = %if.end170.i
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1753) #5, !dbg !1755
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1756) #5, !dbg !1755
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1757) #5, !dbg !1759
  %mul.i.i202.i = fmul double %188, %188, !dbg !1760
  %mul4.i.i204.i = fmul double %187, %187, !dbg !1760
  %add.i.i205.i = fadd double %mul4.i.i204.i, %mul.i.i202.i, !dbg !1760
  %mul7.i.i207.i = fmul double %189, %189, !dbg !1760
  %add8.i.i208.i = fadd double %add.i.i205.i, %mul7.i.i207.i, !dbg !1760
  %call.i.i209.i = call double @sqrt(double %add8.i.i208.i) #7, !dbg !1760
  call void @llvm.dbg.value(metadata !{double %call.i.i209.i}, i64 0, metadata !1761) #5, !dbg !1760
  call void @llvm.dbg.value(metadata !{double %call.i.i209.i}, i64 0, metadata !1762) #5, !dbg !1759
  call void @llvm.dbg.value(metadata !{double %call.i.i209.i}, i64 0, metadata !1763) #5, !dbg !1764
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1765) #5, !dbg !1766
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1767) #5, !dbg !1766
  call void @llvm.dbg.value(metadata !{double %call.i.i209.i}, i64 0, metadata !1768) #5, !dbg !1766
  %div.i.i210.i = fdiv double 1.000000e+00, %call.i.i209.i, !dbg !1769
  call void @llvm.dbg.value(metadata !{double %div.i.i210.i}, i64 0, metadata !1770) #5, !dbg !1769
  %191 = load double* %Layer_Normal, align 8, !dbg !1771, !tbaa !1256
  %mul.i2.i211.i = fmul double %div.i.i210.i, %191, !dbg !1771
  store double %mul.i2.i211.i, double* %Layer_Normal, align 8, !dbg !1771, !tbaa !1256
  %192 = load double* %arrayidx2.i.i.i, align 8, !dbg !1772, !tbaa !1256
  %mul3.i.i212.i = fmul double %div.i.i210.i, %192, !dbg !1772
  store double %mul3.i.i212.i, double* %arrayidx2.i.i.i, align 8, !dbg !1772, !tbaa !1256
  %193 = load double* %arrayidx5.i.i.i, align 8, !dbg !1773, !tbaa !1256
  %mul6.i.i214.i = fmul double %div.i.i210.i, %193, !dbg !1773
  store double %mul6.i.i214.i, double* %arrayidx5.i.i.i, align 8, !dbg !1773, !tbaa !1256
  br label %sw.epilog, !dbg !1754

sw.bb91:                                          ; preds = %if.end72
  %194 = bitcast [3 x double]* %bump_turb.i to i8*, !dbg !1774
  call void @llvm.lifetime.start(i64 24, i8* %194), !dbg !1774
  %195 = bitcast [3 x double]* %value2.i to i8*, !dbg !1774
  call void @llvm.lifetime.start(i64 24, i8* %195), !dbg !1774
  call void @llvm.dbg.value(metadata !{double* %arraydecay73}, i64 0, metadata !1776), !dbg !1774
  call void @llvm.dbg.value(metadata !{%"struct.pov::Tnormal_Struct"* %Tnormal}, i64 0, metadata !1777), !dbg !1774
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1778), !dbg !1774
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersection}, i64 0, metadata !1779), !dbg !1774
  %196 = load %"struct.pov::Blend_Map_Struct"** %Blend_Map1, align 8, !dbg !1780, !tbaa !1229
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Struct"* %196}, i64 0, metadata !1781), !dbg !1780
  call void @llvm.dbg.value(metadata !1782, i64 0, metadata !1783), !dbg !1784
  call void @llvm.dbg.declare(metadata !{[3 x double]* %bump_turb.i}, metadata !878), !dbg !1785
  call void @llvm.dbg.declare(metadata !{[3 x double]* %value2.i}, metadata !879), !dbg !1785
  %arraydecay.i446 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 0, !dbg !1786
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i446}, i64 0, metadata !1787), !dbg !1788
  call void @llvm.dbg.value(metadata !1491, i64 0, metadata !1789), !dbg !1788
  call void @llvm.dbg.value(metadata !1491, i64 0, metadata !1790), !dbg !1788
  call void @llvm.dbg.value(metadata !1491, i64 0, metadata !1791), !dbg !1788
  %arrayidx1.i.i447 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 1, !dbg !1792
  %arrayidx2.i.i448 = getelementptr inbounds [3 x double]* %bump_turb.i, i64 0, i64 2, !dbg !1794
  call void @llvm.dbg.value(metadata !70, i64 0, metadata !1795), !dbg !1796
  %Number_Of_Entries.i = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %196, i64 0, i32 1, !dbg !1796
  %197 = bitcast [3 x double]* %bump_turb.i to i8*, !dbg !1796
  call void @llvm.memset.p0i8.i64(i8* %197, i8 0, i64 24, i32 16, i1 false), !dbg !1792
  %198 = load i16* %Number_Of_Entries.i, align 2, !dbg !1796, !tbaa !1222
  %cmp.i450478 = icmp sgt i16 %198, 0, !dbg !1796
  br i1 %cmp.i450478, label %for.body.i469.lr.ph, label %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge, !dbg !1796

sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge: ; preds = %sw.bb91
  %arrayidx4.i26.i.pre = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1798
  %arrayidx7.i.i472.pre = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1800
  br label %_ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit, !dbg !1796

for.body.i469.lr.ph:                              ; preds = %sw.bb91
  %Blend_Map_Entries.i = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %196, i64 0, i32 4, !dbg !1801
  %arraydecay1.i452 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 0, !dbg !1803
  %arrayidx2.i20.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1804
  %arrayidx3.i.i453 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 1, !dbg !1804
  %arrayidx4.i.i454 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1805
  %arrayidx5.i.i455 = getelementptr inbounds [3 x double]* %value2.i, i64 0, i64 2, !dbg !1805
  br label %for.body.i469, !dbg !1796

for.body.i469:                                    ; preds = %for.body.i469.lr.ph, %for.body.i469
  %indvars.iv = phi i64 [ 0, %for.body.i469.lr.ph ], [ %indvars.iv.next, %for.body.i469 ]
  %Total.0.i480 = phi float [ 0.000000e+00, %for.body.i469.lr.ph ], [ %add.i467, %for.body.i469 ]
  %199 = load %"struct.pov::Blend_Map_Entry"** %Blend_Map_Entries.i, align 8, !dbg !1801, !tbaa !1229
  %value.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %199, i64 %indvars.iv, i32 0, !dbg !1801
  %200 = load float* %value.i, align 4, !dbg !1801, !tbaa !1190
  call void @llvm.dbg.value(metadata !{float %200}, i64 0, metadata !1806), !dbg !1801
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i452}, i64 0, metadata !1807), !dbg !1808
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1809), !dbg !1808
  %201 = load double* %Layer_Normal, align 8, !dbg !1810, !tbaa !1256
  store double %201, double* %arraydecay1.i452, align 16, !dbg !1810, !tbaa !1256
  %202 = load double* %arrayidx2.i20.i, align 8, !dbg !1804, !tbaa !1256
  store double %202, double* %arrayidx3.i.i453, align 8, !dbg !1804, !tbaa !1256
  %203 = load double* %arrayidx4.i.i454, align 8, !dbg !1805, !tbaa !1256
  store double %203, double* %arrayidx5.i.i455, align 16, !dbg !1805, !tbaa !1256
  %Vals.i456 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %199, i64 %indvars.iv, i32 2, !dbg !1811
  %Tnormal6.i = bitcast %union.anon* %Vals.i456 to %"struct.pov::Tnormal_Struct"**, !dbg !1811
  %204 = load %"struct.pov::Tnormal_Struct"** %Tnormal6.i, align 8, !dbg !1811, !tbaa !1229
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %arraydecay1.i452, %"struct.pov::Tnormal_Struct"* %204, double* %arraydecay73, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1811
  %conv8.i457 = fpext float %200 to double, !dbg !1812
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i446}, i64 0, metadata !1813), !dbg !1814
  call void @llvm.dbg.value(metadata !{double %conv8.i457}, i64 0, metadata !1815), !dbg !1814
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i452}, i64 0, metadata !1816), !dbg !1814
  %205 = load double* %arraydecay1.i452, align 16, !dbg !1817, !tbaa !1256
  %mul.i.i458 = fmul double %conv8.i457, %205, !dbg !1817
  %206 = load double* %arraydecay.i446, align 16, !dbg !1817, !tbaa !1256
  %add.i.i459 = fadd double %206, %mul.i.i458, !dbg !1817
  store double %add.i.i459, double* %arraydecay.i446, align 16, !dbg !1817, !tbaa !1256
  %207 = load double* %arrayidx3.i.i453, align 8, !dbg !1818, !tbaa !1256
  %mul3.i.i460 = fmul double %conv8.i457, %207, !dbg !1818
  %208 = load double* %arrayidx1.i.i447, align 8, !dbg !1818, !tbaa !1256
  %add5.i.i462 = fadd double %208, %mul3.i.i460, !dbg !1818
  store double %add5.i.i462, double* %arrayidx1.i.i447, align 8, !dbg !1818, !tbaa !1256
  %209 = load double* %arrayidx5.i.i455, align 16, !dbg !1819, !tbaa !1256
  %mul7.i.i464 = fmul double %conv8.i457, %209, !dbg !1819
  %210 = load double* %arrayidx2.i.i448, align 16, !dbg !1819, !tbaa !1256
  %add9.i.i466 = fadd double %210, %mul7.i.i464, !dbg !1819
  store double %add9.i.i466, double* %arrayidx2.i.i448, align 16, !dbg !1819, !tbaa !1256
  %add.i467 = fadd float %Total.0.i480, %200, !dbg !1820
  call void @llvm.dbg.value(metadata !{float %add.i467}, i64 0, metadata !1783), !dbg !1820
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !1796
  %211 = load i16* %Number_Of_Entries.i, align 2, !dbg !1796, !tbaa !1222
  %conv.i449 = sext i16 %211 to i32, !dbg !1796
  %212 = trunc i64 %indvars.iv.next to i32, !dbg !1796
  %cmp.i450 = icmp slt i32 %212, %conv.i449, !dbg !1796
  br i1 %cmp.i450, label %for.body.i469, label %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge, !dbg !1796

for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge: ; preds = %for.body.i469
  %phitmp = fpext float %add.i467 to double, !dbg !1796
  br label %_ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit, !dbg !1796

_ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit: ; preds = %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge
  %arrayidx7.i.i472.pre-phi = phi double* [ %arrayidx7.i.i472.pre, %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], [ %arrayidx4.i.i454, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], !dbg !1800
  %arrayidx4.i26.i.pre-phi = phi double* [ %arrayidx4.i26.i.pre, %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], [ %arrayidx2.i20.i, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], !dbg !1798
  %213 = phi double [ 0.000000e+00, %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], [ %add9.i.i466, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ]
  %214 = phi double [ 0.000000e+00, %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], [ %add5.i.i462, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ]
  %215 = phi double [ 0.000000e+00, %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], [ %add.i.i459, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ]
  %Total.0.i.lcssa = phi double [ 0.000000e+00, %sw.bb91._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ], [ %phitmp, %for.cond.i._ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit_crit_edge ]
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1821), !dbg !1822
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i446}, i64 0, metadata !1823), !dbg !1822
  call void @llvm.dbg.value(metadata !{double %Total.0.i.lcssa}, i64 0, metadata !1824), !dbg !1822
  %div.i.i470 = fdiv double 1.000000e+00, %Total.0.i.lcssa, !dbg !1825
  call void @llvm.dbg.value(metadata !{double %div.i.i470}, i64 0, metadata !1826), !dbg !1825
  %mul.i23.i = fmul double %div.i.i470, %215, !dbg !1827
  store double %mul.i23.i, double* %Layer_Normal, align 8, !dbg !1827, !tbaa !1256
  %mul3.i25.i = fmul double %div.i.i470, %214, !dbg !1798
  store double %mul3.i25.i, double* %arrayidx4.i26.i.pre-phi, align 8, !dbg !1798, !tbaa !1256
  %mul6.i.i471 = fmul double %div.i.i470, %213, !dbg !1800
  store double %mul6.i.i471, double* %arrayidx7.i.i472.pre-phi, align 8, !dbg !1800, !tbaa !1256
  call void @llvm.lifetime.end(i64 24, i8* %194), !dbg !1828
  call void @llvm.lifetime.end(i64 24, i8* %195), !dbg !1828
  br label %sw.epilog, !dbg !1775

sw.default:                                       ; preds = %if.end72
  %call93 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([36 x i8]* @.str4, i64 0, i64 0)) #6, !dbg !1829
  br label %sw.epilog, !dbg !1830

sw.epilog:                                        ; preds = %for.body.i368, %for.body.i, %sw.bb83, %sw.bb81, %if.then172.i, %sw.default, %_ZN3povL18Do_Average_NormalsEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE.exit, %_ZN3povL7quiltedEPdPNS_14Tnormal_StructES0_.exit, %_ZN3povL8wrinklesEPdPNS_14Tnormal_StructES0_.exit, %sw.bb79, %sw.bb77, %sw.bb
  %.pr = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1831, !tbaa !1293
  %cmp94 = icmp sgt i32 %.pr, 310, !dbg !1831
  br i1 %cmp94, label %if.then95, label %if.then145, !dbg !1831

if.then95:                                        ; preds = %if.end170.i, %sw.epilog
  %Flags96 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 2, !dbg !1832
  %216 = load i16* %Flags96, align 2, !dbg !1832, !tbaa !1222
  %conv97 = zext i16 %216 to i32, !dbg !1832
  %and98 = and i32 %conv97, 8, !dbg !1832
  call void @_ZN3pov13UnWarp_NormalEPdS0_PNS_14Pattern_StructEi(double* %Layer_Normal, double* %Layer_Normal, %"struct.pov::Pattern_Struct"* %52, i32 %and98) #6, !dbg !1832
  br label %if.end143, !dbg !1834

if.else100:                                       ; preds = %if.end62
  br i1 %cmp67, label %if.then102, label %if.end106, !dbg !1835

if.then102:                                       ; preds = %if.else100
  %217 = bitcast %"struct.pov::Tnormal_Struct"* %Tnormal to %"struct.pov::Pattern_Struct"*, !dbg !1837
  %Flags103 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 2, !dbg !1837
  %218 = load i16* %Flags103, align 2, !dbg !1837, !tbaa !1222
  %conv104 = zext i16 %218 to i32, !dbg !1837
  %and105 = and i32 %conv104, 8, !dbg !1837
  call void @_ZN3pov11Warp_NormalEPdS0_PNS_14Pattern_StructEi(double* %Layer_Normal, double* %Layer_Normal, %"struct.pov::Pattern_Struct"* %217, i32 %and105) #6, !dbg !1837
  %.pre = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1839, !tbaa !1293
  br label %if.end106, !dbg !1840

if.end106:                                        ; preds = %if.then102, %if.else100
  %219 = phi i32 [ %.pre, %if.then102 ], [ %51, %if.else100 ]
  %Amount107 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 11, !dbg !1841
  %220 = load float* %Amount107, align 4, !dbg !1841, !tbaa !1190
  %conv108 = fpext float %220 to double, !dbg !1841
  %mul = fmul double %conv108, -5.000000e+00, !dbg !1841
  call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !860), !dbg !1841
  %Delta = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 12, !dbg !1842
  %221 = load float* %Delta, align 4, !dbg !1842, !tbaa !1190
  %conv109 = fpext float %221 to double, !dbg !1842
  %div110 = fdiv double 2.000000e-02, %conv109, !dbg !1842
  %mul111 = fmul double %mul, %div110, !dbg !1842
  call void @llvm.dbg.value(metadata !{double %mul111}, i64 0, metadata !860), !dbg !1842
  %cmp112 = icmp sgt i32 %219, 310, !dbg !1839
  %arraydecay114 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !1843
  br i1 %cmp112, label %if.then113, label %if.else115, !dbg !1839

if.then113:                                       ; preds = %if.end106
  %222 = bitcast %"struct.pov::Tnormal_Struct"* %Tnormal to %"struct.pov::Pattern_Struct"*, !dbg !1843
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %arraydecay114, double* %EPoint, %"struct.pov::Pattern_Struct"* %222) #6, !dbg !1843
  %arrayidx3.i436.pre = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1844
  %arrayidx8.i439.pre = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1848
  br label %for.cond.preheader, !dbg !1843

if.else115:                                       ; preds = %if.end106
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay114}, i64 0, metadata !1849), !dbg !1851
  tail call void @llvm.dbg.value(metadata !{double* %EPoint}, i64 0, metadata !1852), !dbg !1851
  %223 = load double* %EPoint, align 8, !dbg !1853, !tbaa !1256
  store double %223, double* %arraydecay114, align 16, !dbg !1853, !tbaa !1256
  %arrayidx2.i442 = getelementptr inbounds double* %EPoint, i64 1, !dbg !1854
  %224 = load double* %arrayidx2.i442, align 8, !dbg !1854, !tbaa !1256
  %arrayidx3.i443 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 1, !dbg !1854
  store double %224, double* %arrayidx3.i443, align 8, !dbg !1854, !tbaa !1256
  %arrayidx4.i444 = getelementptr inbounds double* %EPoint, i64 2, !dbg !1855
  %225 = load double* %arrayidx4.i444, align 8, !dbg !1855, !tbaa !1256
  %arrayidx5.i445 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !1855
  store double %225, double* %arrayidx5.i445, align 16, !dbg !1855, !tbaa !1256
  %.pre484 = bitcast %"struct.pov::Tnormal_Struct"* %Tnormal to %"struct.pov::Pattern_Struct"*, !dbg !1856
  br label %for.cond.preheader

for.cond.preheader:                               ; preds = %if.else115, %if.then113
  %.pre-phi = phi %"struct.pov::Pattern_Struct"* [ %.pre484, %if.else115 ], [ %222, %if.then113 ], !dbg !1856
  %arrayidx8.i439.pre-phi = phi double* [ %arrayidx5.i445, %if.else115 ], [ %arrayidx8.i439.pre, %if.then113 ], !dbg !1848
  %arrayidx3.i436.pre-phi = phi double* [ %arrayidx3.i443, %if.else115 ], [ %arrayidx3.i436.pre, %if.then113 ], !dbg !1844
  %arraydecay119 = getelementptr inbounds [3 x double]* %P1, i64 0, i64 0, !dbg !1845
  %arrayidx7.i = getelementptr inbounds [3 x double]* %P1, i64 0, i64 1, !dbg !1844
  %arrayidx12.i441 = getelementptr inbounds [3 x double]* %P1, i64 0, i64 2, !dbg !1848
  %226 = bitcast %"struct.pov::Blend_Map_Entry"** %Prev.i to i8*, !dbg !1857
  %227 = bitcast %"struct.pov::Blend_Map_Entry"** %Cur.i to i8*, !dbg !1857
  %arrayidx4.i267 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1859
  %arrayidx8.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1861
  br label %for.body, !dbg !1862

for.body:                                         ; preds = %_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit, %for.cond.preheader
  %indvars.iv482 = phi i64 [ 0, %for.cond.preheader ], [ %indvars.iv.next483, %_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit ]
  %228 = load float* %Delta, align 4, !dbg !1845, !tbaa !1190
  %conv122 = fpext float %228 to double, !dbg !1845
  %arraydecay124 = getelementptr inbounds [4 x [3 x double]]* @_ZN3povL12Pyramid_VectE, i64 0, i64 %indvars.iv482, i64 0, !dbg !1845
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay119}, i64 0, metadata !1863), !dbg !1864
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay114}, i64 0, metadata !1865), !dbg !1864
  tail call void @llvm.dbg.value(metadata !{double %conv122}, i64 0, metadata !1866), !dbg !1864
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay124}, i64 0, metadata !1867), !dbg !1864
  %229 = load double* %arraydecay114, align 16, !dbg !1868, !tbaa !1256
  %230 = load double* %arraydecay124, align 8, !dbg !1868, !tbaa !1256
  %mul.i434 = fmul double %conv122, %230, !dbg !1868
  %add.i435 = fadd double %229, %mul.i434, !dbg !1868
  store double %add.i435, double* %arraydecay119, align 16, !dbg !1868, !tbaa !1256
  %231 = load double* %arrayidx3.i436.pre-phi, align 8, !dbg !1844, !tbaa !1256
  %arrayidx4.i437 = getelementptr inbounds [4 x [3 x double]]* @_ZN3povL12Pyramid_VectE, i64 0, i64 %indvars.iv482, i64 1, !dbg !1844
  %232 = load double* %arrayidx4.i437, align 8, !dbg !1844, !tbaa !1256
  %mul5.i438 = fmul double %conv122, %232, !dbg !1844
  %add6.i = fadd double %231, %mul5.i438, !dbg !1844
  store double %add6.i, double* %arrayidx7.i, align 8, !dbg !1844, !tbaa !1256
  %233 = load double* %arrayidx8.i439.pre-phi, align 16, !dbg !1848, !tbaa !1256
  %arrayidx9.i440 = getelementptr inbounds [4 x [3 x double]]* @_ZN3povL12Pyramid_VectE, i64 0, i64 %indvars.iv482, i64 2, !dbg !1848
  %234 = load double* %arrayidx9.i440, align 8, !dbg !1848, !tbaa !1256
  %mul10.i = fmul double %conv122, %234, !dbg !1848
  %add11.i = fadd double %233, %mul10.i, !dbg !1848
  store double %add11.i, double* %arrayidx12.i441, align 16, !dbg !1848, !tbaa !1256
  %235 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1869, !tbaa !1293
  %cmp125 = icmp slt i32 %235, 311, !dbg !1869
  br i1 %cmp125, label %if.then126, label %if.end129, !dbg !1869

if.then126:                                       ; preds = %for.body
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %arraydecay119, double* %arraydecay119, %"struct.pov::Pattern_Struct"* %.pre-phi) #6, !dbg !1856
  br label %if.end129, !dbg !1856

if.end129:                                        ; preds = %if.then126, %for.body
  %call131 = call double @_ZN3pov13Evaluate_TPatEPNS_14Pattern_StructEPdPNS_10istk_entryE(%"struct.pov::Pattern_Struct"* %.pre-phi, double* %arraydecay119, %"struct.pov::istk_entry"* %Intersection) #6, !dbg !1858
  call void @llvm.lifetime.start(i64 8, i8* %226), !dbg !1857
  call void @llvm.lifetime.start(i64 8, i8* %227), !dbg !1857
  call void @llvm.dbg.value(metadata !{double %call131}, i64 0, metadata !1870), !dbg !1857
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Struct"* %0}, i64 0, metadata !1871), !dbg !1857
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Blend_Map_Entry"** %Prev.i}, metadata !911), !dbg !1872
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur.i}, metadata !912), !dbg !1872
  br i1 %cmp2, label %_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit, label %if.end.i, !dbg !1873

if.end.i:                                         ; preds = %if.end129
  call void @_ZN3pov16Search_Blend_MapEdPNS_16Blend_Map_StructEPPNS_15Blend_Map_EntryES4_(double %call131, %"struct.pov::Blend_Map_Struct"* %0, %"struct.pov::Blend_Map_Entry"** %Prev.i, %"struct.pov::Blend_Map_Entry"** %Cur.i) #6, !dbg !1874
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Prev.i}, i64 0, metadata !1875), !dbg !1876
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Prev.i}, i64 0, metadata !911), !dbg !1876
  %236 = load %"struct.pov::Blend_Map_Entry"** %Prev.i, align 8, !dbg !1876, !tbaa !1229
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur.i}, i64 0, metadata !1877), !dbg !1876
  call void @llvm.dbg.value(metadata !{%"struct.pov::Blend_Map_Entry"** %Cur.i}, i64 0, metadata !912), !dbg !1876
  %237 = load %"struct.pov::Blend_Map_Entry"** %Cur.i, align 8, !dbg !1876, !tbaa !1229
  %cmp1.i = icmp eq %"struct.pov::Blend_Map_Entry"* %236, %237, !dbg !1876
  br i1 %cmp1.i, label %if.then2.i, label %if.end3.i, !dbg !1876

if.then2.i:                                       ; preds = %if.end.i
  %arrayidx.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %236, i64 0, i32 2, i32 0, i64 0, !dbg !1878
  %238 = load double* %arrayidx.i, align 8, !dbg !1878, !tbaa !1256
  br label %_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit, !dbg !1878

if.end3.i:                                        ; preds = %if.end.i
  %value4.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %236, i64 0, i32 0, !dbg !1880
  %239 = load float* %value4.i, align 4, !dbg !1880, !tbaa !1190
  %conv.i = fpext float %239 to double, !dbg !1880
  %sub.i = fsub double %call131, %conv.i, !dbg !1880
  %value5.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %237, i64 0, i32 0, !dbg !1880
  %240 = load float* %value5.i, align 4, !dbg !1880, !tbaa !1190
  %sub7.i = fsub float %240, %239, !dbg !1880
  %conv8.i = fpext float %sub7.i to double, !dbg !1880
  %div.i = fdiv double %sub.i, %conv8.i, !dbg !1880
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1881), !dbg !1880
  %arraydecay.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %236, i64 0, i32 2, i32 0, i64 0, !dbg !1882
  %arraydecay13.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %237, i64 0, i32 2, i32 0, i64 0, !dbg !1882
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1883), !dbg !1884
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i}, i64 0, metadata !1885), !dbg !1884
  call void @llvm.dbg.value(metadata !{double* %arraydecay13.i}, i64 0, metadata !1886), !dbg !1884
  %mul.i.i268 = fmul double %div.i, %div.i, !dbg !1887
  call void @llvm.dbg.value(metadata !{double %mul.i.i268}, i64 0, metadata !1888), !dbg !1887
  %mul1.i.i = fmul double %div.i, %mul.i.i268, !dbg !1889
  call void @llvm.dbg.value(metadata !{double %mul1.i.i}, i64 0, metadata !1890), !dbg !1889
  %arrayidx.i.i = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %236, i64 0, i32 2, i32 0, i64 1, !dbg !1891
  %241 = load double* %arrayidx.i.i, align 8, !dbg !1891, !tbaa !1256
  %arrayidx2.i.i269 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %237, i64 0, i32 2, i32 0, i64 1, !dbg !1891
  %242 = load double* %arrayidx2.i.i269, align 8, !dbg !1891, !tbaa !1256
  %add.i.i270 = fadd double %241, %242, !dbg !1891
  %243 = load double* %arraydecay.i, align 8, !dbg !1891, !tbaa !1256
  %244 = load double* %arraydecay13.i, align 8, !dbg !1891, !tbaa !1256
  %sub.i.i = fsub double %243, %244, !dbg !1891
  %mul5.i.i = fmul double %sub.i.i, 2.000000e+00, !dbg !1891
  %add6.i.i = fadd double %add.i.i270, %mul5.i.i, !dbg !1891
  %mul7.i.i271 = fmul double %mul1.i.i, %add6.i.i, !dbg !1891
  call void @llvm.dbg.value(metadata !{double %mul7.i.i271}, i64 0, metadata !1892), !dbg !1891
  %mul10.i.i = fmul double %241, 2.000000e+00, !dbg !1893
  %add12.i.i = fadd double %mul10.i.i, %242, !dbg !1893
  %mul16.i.i = fmul double %sub.i.i, 3.000000e+00, !dbg !1893
  %add17.i.i = fadd double %add12.i.i, %mul16.i.i, !dbg !1893
  %245 = fmul double %mul.i.i268, %add17.i.i, !dbg !1893
  %add19.i.i = fsub double %mul7.i.i271, %245, !dbg !1893
  call void @llvm.dbg.value(metadata !{double %add19.i.i}, i64 0, metadata !1892), !dbg !1893
  %mul21.i.i = fmul double %div.i, %241, !dbg !1894
  %add23.i.i = fadd double %mul21.i.i, %243, !dbg !1894
  %add24.i.i = fadd double %add23.i.i, %add19.i.i, !dbg !1894
  call void @llvm.dbg.value(metadata !{double %add24.i.i}, i64 0, metadata !1892), !dbg !1894
  br label %_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit, !dbg !1882

_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit: ; preds = %if.end129, %if.then2.i, %if.end3.i
  %retval.0.i = phi double [ %238, %if.then2.i ], [ %add24.i.i, %if.end3.i ], [ %call131, %if.end129 ]
  call void @llvm.lifetime.end(i64 8, i8* %226), !dbg !1895
  call void @llvm.lifetime.end(i64 8, i8* %227), !dbg !1895
  call void @llvm.dbg.value(metadata !{double %retval.0.i}, i64 0, metadata !858), !dbg !1858
  %mul133 = fmul double %mul111, %retval.0.i, !dbg !1860
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1896), !dbg !1897
  tail call void @llvm.dbg.value(metadata !{double %mul133}, i64 0, metadata !1898), !dbg !1897
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay124}, i64 0, metadata !1899), !dbg !1897
  %mul.i = fmul double %mul133, %230, !dbg !1900
  %246 = load double* %Layer_Normal, align 8, !dbg !1900, !tbaa !1256
  %add.i = fadd double %246, %mul.i, !dbg !1900
  store double %add.i, double* %Layer_Normal, align 8, !dbg !1900, !tbaa !1256
  %mul3.i = fmul double %mul133, %232, !dbg !1859
  %247 = load double* %arrayidx4.i267, align 8, !dbg !1859, !tbaa !1256
  %add5.i = fadd double %247, %mul3.i, !dbg !1859
  store double %add5.i, double* %arrayidx4.i267, align 8, !dbg !1859, !tbaa !1256
  %mul7.i = fmul double %mul133, %234, !dbg !1861
  %248 = load double* %arrayidx8.i, align 8, !dbg !1861, !tbaa !1256
  %add9.i = fadd double %248, %mul7.i, !dbg !1861
  store double %add9.i, double* %arrayidx8.i, align 8, !dbg !1861, !tbaa !1256
  %indvars.iv.next483 = add i64 %indvars.iv482, 1, !dbg !1862
  %lftr.wideiv = trunc i64 %indvars.iv.next483 to i32, !dbg !1862
  %exitcond = icmp eq i32 %lftr.wideiv, 4, !dbg !1862
  br i1 %exitcond, label %for.end, label %for.body, !dbg !1862

for.end:                                          ; preds = %_ZN3povL12Do_Slope_MapEdPNS_16Blend_Map_StructE.exit
  %249 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1901, !tbaa !1293
  %cmp137 = icmp sgt i32 %249, 310, !dbg !1901
  br i1 %cmp137, label %if.then138, label %if.then145, !dbg !1901

if.then138:                                       ; preds = %for.end
  %Flags139 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %Tnormal, i64 0, i32 2, !dbg !1902
  %250 = load i16* %Flags139, align 2, !dbg !1902, !tbaa !1222
  %conv140 = zext i16 %250 to i32, !dbg !1902
  %and141 = and i32 %conv140, 8, !dbg !1902
  call void @_ZN3pov13UnWarp_NormalEPdS0_PNS_14Pattern_StructEi(double* %Layer_Normal, double* %Layer_Normal, %"struct.pov::Pattern_Struct"* %.pre-phi, i32 %and141) #6, !dbg !1902
  br label %if.end143, !dbg !1904

if.end143:                                        ; preds = %if.then138, %if.then95
  %.pr474 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !1905, !tbaa !1293
  %cmp144 = icmp slt i32 %.pr474, 311, !dbg !1905
  br i1 %cmp144, label %if.then145, label %if.end146, !dbg !1905

if.then145:                                       ; preds = %if.end143, %sw.epilog, %for.end
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1906) #5, !dbg !1908
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1909) #5, !dbg !1911
  %251 = load double* %Layer_Normal, align 8, !dbg !1912, !tbaa !1256
  %mul.i.i = fmul double %251, %251, !dbg !1912
  %arrayidx2.i.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1912
  %252 = load double* %arrayidx2.i.i, align 8, !dbg !1912, !tbaa !1256
  %mul4.i.i = fmul double %252, %252, !dbg !1912
  %add.i.i = fadd double %mul.i.i, %mul4.i.i, !dbg !1912
  %arrayidx5.i.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1912
  %253 = load double* %arrayidx5.i.i, align 8, !dbg !1912, !tbaa !1256
  %mul7.i.i = fmul double %253, %253, !dbg !1912
  %add8.i.i = fadd double %add.i.i, %mul7.i.i, !dbg !1912
  %call.i.i = call double @sqrt(double %add8.i.i) #7, !dbg !1912
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !1913) #5, !dbg !1912
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !1914) #5, !dbg !1911
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !1915) #5, !dbg !1916
  call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1917) #5, !dbg !1918
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !1919) #5, !dbg !1918
  %div.i.i = fdiv double 1.000000e+00, %call.i.i, !dbg !1920
  call void @llvm.dbg.value(metadata !{double %div.i.i}, i64 0, metadata !1921) #5, !dbg !1920
  %254 = load double* %Layer_Normal, align 8, !dbg !1922, !tbaa !1256
  %mul.i2.i = fmul double %div.i.i, %254, !dbg !1922
  store double %mul.i2.i, double* %Layer_Normal, align 8, !dbg !1922, !tbaa !1256
  %255 = load double* %arrayidx2.i.i, align 8, !dbg !1923, !tbaa !1256
  %mul2.i.i = fmul double %div.i.i, %255, !dbg !1923
  store double %mul2.i.i, double* %arrayidx2.i.i, align 8, !dbg !1923, !tbaa !1256
  %256 = load double* %arrayidx5.i.i, align 8, !dbg !1924, !tbaa !1256
  %mul4.i3.i = fmul double %div.i.i, %256, !dbg !1924
  store double %mul4.i3.i, double* %arrayidx5.i.i, align 8, !dbg !1924, !tbaa !1256
  br label %if.end146, !dbg !1907

if.end146:                                        ; preds = %if.then145, %if.end143
  %tobool = icmp eq %"struct.pov::istk_entry"* %Intersection, null, !dbg !1925
  br i1 %tobool, label %if.end150, label %if.then147, !dbg !1925

if.then147:                                       ; preds = %if.end146
  %arraydecay149 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 0, !dbg !1926
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay149}, i64 0, metadata !1927), !dbg !1928
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1929), !dbg !1928
  %257 = load double* %Layer_Normal, align 8, !dbg !1930, !tbaa !1256
  store double %257, double* %arraydecay149, align 8, !dbg !1930, !tbaa !1256
  %arrayidx2.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !1931
  %258 = load double* %arrayidx2.i, align 8, !dbg !1931, !tbaa !1256
  %arrayidx3.i = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 1, !dbg !1931
  store double %258, double* %arrayidx3.i, align 8, !dbg !1931, !tbaa !1256
  %arrayidx4.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !1932
  %259 = load double* %arrayidx4.i, align 8, !dbg !1932, !tbaa !1256
  %arrayidx5.i = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 3, i64 2, !dbg !1932
  store double %259, double* %arrayidx5.i, align 8, !dbg !1932, !tbaa !1256
  br label %if.end150, !dbg !1926

if.end150:                                        ; preds = %if.end146, %entry, %if.then8, %if.end57, %if.then147
  ret void, !dbg !1926
}
