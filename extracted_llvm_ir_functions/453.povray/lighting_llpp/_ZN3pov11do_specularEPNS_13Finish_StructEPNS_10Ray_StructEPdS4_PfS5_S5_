define void @_ZN3pov11do_specularEPNS_13Finish_StructEPNS_10Ray_StructEPdS4_PfS5_S5_(%"struct.pov::Finish_Struct"* nocapture %Finish, %"struct.pov::Ray_Struct"* nocapture %Light_Source_Ray, double* nocapture %REye, double* nocapture %Layer_Normal, float* nocapture %Colour, float* nocapture %Light_Colour, float* nocapture %Layer_Pigment_Colour) #1 {
entry:
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Finish_Struct"* %Finish}, i64 0, metadata !1066), !dbg !3529
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Light_Source_Ray}, i64 0, metadata !1067), !dbg !3529
  tail call void @llvm.dbg.value(metadata !{double* %REye}, i64 0, metadata !1068), !dbg !3529
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1069), !dbg !3529
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1070), !dbg !3529
  tail call void @llvm.dbg.value(metadata !{float* %Light_Colour}, i64 0, metadata !1071), !dbg !3529
  tail call void @llvm.dbg.value(metadata !{float* %Layer_Pigment_Colour}, i64 0, metadata !1072), !dbg !3529
  tail call void @llvm.dbg.declare(metadata !3106, metadata !1076), !dbg !3530
  tail call void @llvm.dbg.declare(metadata !2878, metadata !1080), !dbg !3531
  %arraydecay1 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 0, !dbg !3532
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3533), !dbg !3534
  tail call void @llvm.dbg.value(metadata !{double* %REye}, i64 0, metadata !3535), !dbg !3534
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay1}, i64 0, metadata !3536), !dbg !3534
  %0 = load double* %REye, align 8, !dbg !3537, !tbaa !2552
  %1 = load double* %arraydecay1, align 8, !dbg !3537, !tbaa !2552
  %add.i = fadd double %0, %1, !dbg !3537
  %mul.i = fmul double %add.i, 5.000000e-01, !dbg !3537
  %arrayidx3.i = getelementptr inbounds double* %REye, i64 1, !dbg !3538
  %2 = load double* %arrayidx3.i, align 8, !dbg !3538, !tbaa !2552
  %arrayidx4.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 1, !dbg !3538
  %3 = load double* %arrayidx4.i, align 8, !dbg !3538, !tbaa !2552
  %add5.i = fadd double %2, %3, !dbg !3538
  %mul6.i = fmul double %add5.i, 5.000000e-01, !dbg !3538
  %arrayidx8.i = getelementptr inbounds double* %REye, i64 2, !dbg !3539
  %4 = load double* %arrayidx8.i, align 8, !dbg !3539, !tbaa !2552
  %arrayidx9.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 2, !dbg !3539
  %5 = load double* %arrayidx9.i, align 8, !dbg !3539, !tbaa !2552
  %add10.i = fadd double %4, %5, !dbg !3539
  %mul11.i = fmul double %add10.i, 5.000000e-01, !dbg !3539
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3540) #6, !dbg !3542
  %mul.i129 = fmul double %mul.i, %mul.i, !dbg !3543
  %mul4.i131 = fmul double %mul6.i, %mul6.i, !dbg !3543
  %add.i132 = fadd double %mul.i129, %mul4.i131, !dbg !3543
  %mul7.i134 = fmul double %mul11.i, %mul11.i, !dbg !3543
  %add8.i135 = fadd double %add.i132, %mul7.i134, !dbg !3543
  %call.i = tail call double @sqrt(double %add8.i135) #8, !dbg !3543
  tail call void @llvm.dbg.value(metadata !{double %call.i}, i64 0, metadata !1075), !dbg !3543
  tail call void @llvm.dbg.value(metadata !{double %call.i}, i64 0, metadata !3544), !dbg !3542
  tail call void @llvm.dbg.value(metadata !{double %call.i}, i64 0, metadata !1075), !dbg !3545
  tail call void @llvm.dbg.value(metadata !{double %call.i}, i64 0, metadata !1075), !dbg !3546
  %cmp = fcmp ogt double %call.i, 0.000000e+00, !dbg !3545
  br i1 %cmp, label %if.then, label %if.end85, !dbg !3545

if.then:                                          ; preds = %entry
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3548), !dbg !3550
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !3551), !dbg !3550
  %6 = load double* %Layer_Normal, align 8, !dbg !3552, !tbaa !2552
  %mul.i120 = fmul double %mul.i, %6, !dbg !3552
  %arrayidx3.i122 = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !3552
  %7 = load double* %arrayidx3.i122, align 8, !dbg !3552, !tbaa !2552
  %mul4.i123 = fmul double %mul6.i, %7, !dbg !3552
  %add.i124 = fadd double %mul.i120, %mul4.i123, !dbg !3552
  %arrayidx6.i126 = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !3552
  %8 = load double* %arrayidx6.i126, align 8, !dbg !3552, !tbaa !2552
  %mul7.i127 = fmul double %mul11.i, %8, !dbg !3552
  %add8.i128 = fadd double %add.i124, %mul7.i127, !dbg !3552
  tail call void @llvm.dbg.value(metadata !{double %add8.i128}, i64 0, metadata !1073), !dbg !3552
  tail call void @llvm.dbg.value(metadata !{double %add8.i128}, i64 0, metadata !3553), !dbg !3550
  tail call void @llvm.dbg.value(metadata !{double %add8.i128}, i64 0, metadata !1073), !dbg !3546
  %div = fdiv double %add8.i128, %call.i, !dbg !3546
  tail call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !1073), !dbg !3546
  tail call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !3553), !dbg !3550
  tail call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !1073), !dbg !3546
  %cmp4 = fcmp ogt double %div, 0.000000e+00, !dbg !3554
  br i1 %cmp4, label %if.then5, label %if.end85, !dbg !3554

if.then5:                                         ; preds = %if.then
  %Specular = getelementptr inbounds %"struct.pov::Finish_Struct"* %Finish, i64 0, i32 2, !dbg !3555
  %9 = load float* %Specular, align 4, !dbg !3555, !tbaa !2644
  %conv = fpext float %9 to double, !dbg !3555
  %Roughness = getelementptr inbounds %"struct.pov::Finish_Struct"* %Finish, i64 0, i32 3, !dbg !3555
  %10 = load float* %Roughness, align 4, !dbg !3555, !tbaa !2644
  %conv6 = fpext float %10 to double, !dbg !3555
  %call = tail call double @pow(double %div, double %conv6) #8, !dbg !3555
  %mul = fmul double %conv, %call, !dbg !3555
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1074), !dbg !3555
  %Metallic = getelementptr inbounds %"struct.pov::Finish_Struct"* %Finish, i64 0, i32 15, !dbg !3557
  %11 = load float* %Metallic, align 4, !dbg !3557, !tbaa !2644
  %cmp8 = fcmp ogt float %11, 0.000000e+00, !dbg !3557
  br i1 %cmp8, label %if.then9, label %if.else, !dbg !3557

if.then9:                                         ; preds = %if.then5
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !3558), !dbg !3561
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay1}, i64 0, metadata !3562), !dbg !3561
  %12 = load double* %Layer_Normal, align 8, !dbg !3563, !tbaa !2552
  %13 = load double* %arraydecay1, align 8, !dbg !3563, !tbaa !2552
  %mul.i114 = fmul double %12, %13, !dbg !3563
  %14 = load double* %arrayidx3.i122, align 8, !dbg !3563, !tbaa !2552
  %15 = load double* %arrayidx4.i, align 8, !dbg !3563, !tbaa !2552
  %mul4.i = fmul double %14, %15, !dbg !3563
  %add.i117 = fadd double %mul.i114, %mul4.i, !dbg !3563
  %16 = load double* %arrayidx6.i126, align 8, !dbg !3563, !tbaa !2552
  %17 = load double* %arrayidx9.i, align 8, !dbg !3563, !tbaa !2552
  %mul7.i119 = fmul double %16, %17, !dbg !3563
  %add8.i = fadd double %add.i117, %mul7.i119, !dbg !3563
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1077), !dbg !3563
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !3564), !dbg !3561
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1077), !dbg !3565
  %call12 = tail call double @acos(double %add8.i) #8, !dbg !3565
  %call13 = tail call double @fabs(double %call12) #9, !dbg !3565
  %div14 = fdiv double %call13, 0x3FF921FB54442D18, !dbg !3565
  tail call void @llvm.dbg.value(metadata !{double %div14}, i64 0, metadata !1078), !dbg !3565
  %sub = fadd double %div14, -1.120000e+00, !dbg !3566
  tail call void @llvm.dbg.value(metadata !{double %sub}, i64 0, metadata !3567), !dbg !3568
  %mul.i113 = fmul double %sub, %sub, !dbg !3569
  %div16 = fdiv double 0x3F8DD56BD7BF6F16, %mul.i113, !dbg !3566
  %sub17 = fadd double %div16, 0xBF87C88174C5E0DC, !dbg !3566
  tail call void @llvm.dbg.value(metadata !{double %sub17}, i64 0, metadata !1079), !dbg !3566
  tail call void @llvm.dbg.value(metadata !{double %sub17}, i64 0, metadata !3570), !dbg !3572
  tail call void @llvm.dbg.value(metadata !{double %sub17}, i64 0, metadata !1079), !dbg !3573
  tail call void @llvm.dbg.value(metadata !{double %sub17}, i64 0, metadata !1079), !dbg !3574
  tail call void @llvm.dbg.value(metadata !3477, i64 0, metadata !3575), !dbg !3576
  %cmp.i111 = fcmp ogt double %sub17, 0.000000e+00, !dbg !3577
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3578), !dbg !3576
  %.sroa.speculated138 = select i1 %cmp.i111, double %sub17, double 0.000000e+00, !dbg !3579
  %cmp.i = fcmp olt double %.sroa.speculated138, 1.000000e+00, !dbg !3579
  %.sroa.speculated = select i1 %cmp.i, double %.sroa.speculated138, double 1.000000e+00, !dbg !3571
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1079), !dbg !3571
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !3570), !dbg !3572
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1079), !dbg !3573
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1079), !dbg !3574
  %18 = load float* %Light_Colour, align 4, !dbg !3580, !tbaa !2644
  %conv21 = fpext float %18 to double, !dbg !3580
  %19 = load float* %Metallic, align 4, !dbg !3580, !tbaa !2644
  %conv23 = fpext float %19 to double, !dbg !3580
  %sub24 = fsub double 1.000000e+00, %.sroa.speculated, !dbg !3580
  %mul25 = fmul double %conv23, %sub24, !dbg !3580
  %20 = load float* %Layer_Pigment_Colour, align 4, !dbg !3580, !tbaa !2644
  %conv27 = fpext float %20 to double, !dbg !3580
  %sub28 = fadd double %conv27, -1.000000e+00, !dbg !3580
  %mul29 = fmul double %sub28, %mul25, !dbg !3580
  %add = fadd double %mul29, 1.000000e+00, !dbg !3580
  %mul30 = fmul double %conv21, %add, !dbg !3580
  %conv31 = fptrunc double %mul30 to float, !dbg !3580
  %arrayidx33 = getelementptr inbounds float* %Light_Colour, i64 1, !dbg !3573
  %21 = load float* %arrayidx33, align 4, !dbg !3573, !tbaa !2644
  %conv34 = fpext float %21 to double, !dbg !3573
  %arrayidx39 = getelementptr inbounds float* %Layer_Pigment_Colour, i64 1, !dbg !3573
  %22 = load float* %arrayidx39, align 4, !dbg !3573, !tbaa !2644
  %conv40 = fpext float %22 to double, !dbg !3573
  %sub41 = fadd double %conv40, -1.000000e+00, !dbg !3573
  %mul42 = fmul double %mul25, %sub41, !dbg !3573
  %add43 = fadd double %mul42, 1.000000e+00, !dbg !3573
  %mul44 = fmul double %conv34, %add43, !dbg !3573
  %conv45 = fptrunc double %mul44 to float, !dbg !3573
  %arrayidx47 = getelementptr inbounds float* %Light_Colour, i64 2, !dbg !3574
  %23 = load float* %arrayidx47, align 4, !dbg !3574, !tbaa !2644
  %conv48 = fpext float %23 to double, !dbg !3574
  %arrayidx53 = getelementptr inbounds float* %Layer_Pigment_Colour, i64 2, !dbg !3574
  %24 = load float* %arrayidx53, align 4, !dbg !3574, !tbaa !2644
  %conv54 = fpext float %24 to double, !dbg !3574
  %sub55 = fadd double %conv54, -1.000000e+00, !dbg !3574
  %mul56 = fmul double %mul25, %sub55, !dbg !3574
  %add57 = fadd double %mul56, 1.000000e+00, !dbg !3574
  %mul58 = fmul double %conv48, %add57, !dbg !3574
  %conv59 = fptrunc double %mul58 to float, !dbg !3574
  %conv61 = fptrunc double %mul to float, !dbg !3581
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !3582), !dbg !3583
  tail call void @llvm.dbg.value(metadata !{float %conv61}, i64 0, metadata !3584), !dbg !3583
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !3585), !dbg !3583
  %mul.i106 = fmul float %conv61, %conv31, !dbg !3586
  %25 = load float* %Colour, align 4, !dbg !3586, !tbaa !2644
  %add.i107 = fadd float %25, %mul.i106, !dbg !3586
  store float %add.i107, float* %Colour, align 4, !dbg !3586, !tbaa !2644
  %mul3.i = fmul float %conv61, %conv45, !dbg !3587
  %arrayidx4.i108 = getelementptr inbounds float* %Colour, i64 1, !dbg !3587
  %26 = load float* %arrayidx4.i108, align 4, !dbg !3587, !tbaa !2644
  %add5.i109 = fadd float %26, %mul3.i, !dbg !3587
  store float %add5.i109, float* %arrayidx4.i108, align 4, !dbg !3587, !tbaa !2644
  %mul7.i = fmul float %conv61, %conv59, !dbg !3588
  %arrayidx8.i110 = getelementptr inbounds float* %Colour, i64 2, !dbg !3588
  %27 = load float* %arrayidx8.i110, align 4, !dbg !3588, !tbaa !2644
  %add9.i = fadd float %27, %mul7.i, !dbg !3588
  store float %add9.i, float* %arrayidx8.i110, align 4, !dbg !3588, !tbaa !2644
  br label %if.end85, !dbg !3589

if.else:                                          ; preds = %if.then5
  %28 = load float* %Light_Colour, align 4, !dbg !3590, !tbaa !2644
  %conv64 = fpext float %28 to double, !dbg !3590
  %mul65 = fmul double %mul, %conv64, !dbg !3590
  %29 = load float* %Colour, align 4, !dbg !3590, !tbaa !2644
  %conv67 = fpext float %29 to double, !dbg !3590
  %add68 = fadd double %conv67, %mul65, !dbg !3590
  %conv69 = fptrunc double %add68 to float, !dbg !3590
  store float %conv69, float* %Colour, align 4, !dbg !3590, !tbaa !2644
  %arrayidx70 = getelementptr inbounds float* %Light_Colour, i64 1, !dbg !3592
  %30 = load float* %arrayidx70, align 4, !dbg !3592, !tbaa !2644
  %conv71 = fpext float %30 to double, !dbg !3592
  %mul72 = fmul double %mul, %conv71, !dbg !3592
  %arrayidx73 = getelementptr inbounds float* %Colour, i64 1, !dbg !3592
  %31 = load float* %arrayidx73, align 4, !dbg !3592, !tbaa !2644
  %conv74 = fpext float %31 to double, !dbg !3592
  %add75 = fadd double %conv74, %mul72, !dbg !3592
  %conv76 = fptrunc double %add75 to float, !dbg !3592
  store float %conv76, float* %arrayidx73, align 4, !dbg !3592, !tbaa !2644
  %arrayidx77 = getelementptr inbounds float* %Light_Colour, i64 2, !dbg !3593
  %32 = load float* %arrayidx77, align 4, !dbg !3593, !tbaa !2644
  %conv78 = fpext float %32 to double, !dbg !3593
  %mul79 = fmul double %mul, %conv78, !dbg !3593
  %arrayidx80 = getelementptr inbounds float* %Colour, i64 2, !dbg !3593
  %33 = load float* %arrayidx80, align 4, !dbg !3593, !tbaa !2644
  %conv81 = fpext float %33 to double, !dbg !3593
  %add82 = fadd double %conv81, %mul79, !dbg !3593
  %conv83 = fptrunc double %add82 to float, !dbg !3593
  store float %conv83, float* %arrayidx80, align 4, !dbg !3593, !tbaa !2644
  br label %if.end85

if.end85:                                         ; preds = %if.then, %if.else, %if.then9, %entry
  ret void, !dbg !3594
}
