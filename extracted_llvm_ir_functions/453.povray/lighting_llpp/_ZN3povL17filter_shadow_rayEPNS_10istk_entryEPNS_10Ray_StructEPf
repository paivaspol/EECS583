define internal fastcc void @_ZN3povL17filter_shadow_rayEPNS_10istk_entryEPNS_10Ray_StructEPf(%"struct.pov::istk_entry"* %Ray_Intersection, %"struct.pov::Ray_Struct"* %Light_Source_Ray, float* %Colour) #0 {
entry:
  %IPoint = alloca [3 x double], align 16
  %Raw_Normal = alloca [3 x double], align 16
  %FC1 = alloca [5 x float], align 16
  %UV_Coords = alloca [2 x double], align 16
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Ray_Intersection}, i64 0, metadata !1212), !dbg !4645
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Light_Source_Ray}, i64 0, metadata !1213), !dbg !4645
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1214), !dbg !4645
  call void @llvm.dbg.declare(metadata !{[3 x double]* %IPoint}, metadata !1217), !dbg !4646
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Raw_Normal}, metadata !1218), !dbg !4647
  call void @llvm.dbg.declare(metadata !{[5 x float]* %FC1}, metadata !1219), !dbg !4648
  call void @llvm.dbg.declare(metadata !2878, metadata !1220), !dbg !4648
  call void @llvm.dbg.value(metadata !4649, i64 0, metadata !1221), !dbg !4650
  call void @llvm.dbg.value(metadata !2541, i64 0, metadata !1223), !dbg !4651
  call void @llvm.dbg.value(metadata !2547, i64 0, metadata !1224), !dbg !4652
  call void @llvm.dbg.declare(metadata !{[2 x double]* %UV_Coords}, metadata !1225), !dbg !4653
  %0 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 0), align 8, !dbg !4654, !tbaa !2301
  %tobool = icmp eq i32 %0, 0, !dbg !4654
  br i1 %tobool, label %if.end25, label %land.lhs.true, !dbg !4654

land.lhs.true:                                    ; preds = %entry
  %Object = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 5, !dbg !4654
  %1 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !4654, !tbaa !2295
  %Flags = getelementptr inbounds %"struct.pov::Object_Struct"* %1, i64 0, i32 13, !dbg !4654
  %2 = load i32* %Flags, align 4, !dbg !4654, !tbaa !2301
  %conv = zext i32 %2 to i64, !dbg !4654
  %and = and i64 %conv, 524288, !dbg !4654
  %tobool1 = icmp eq i64 %and, 0, !dbg !4654
  br i1 %tobool1, label %if.end25, label %land.lhs.true2, !dbg !4654

land.lhs.true2:                                   ; preds = %land.lhs.true
  %3 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 26), align 4, !dbg !4654, !tbaa !2301
  %and4 = and i32 %3, 33554432, !dbg !4654
  %tobool5 = icmp eq i32 %and4, 0, !dbg !4654
  br i1 %tobool5, label %if.then, label %if.end25, !dbg !4654

if.then:                                          ; preds = %land.lhs.true2
  %and9 = and i64 %conv, 8388608, !dbg !4655
  %tobool10 = icmp eq i64 %and9, 0, !dbg !4655
  br i1 %tobool10, label %lor.lhs.false, label %land.lhs.true11, !dbg !4655

land.lhs.true11:                                  ; preds = %if.then
  %4 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !4655, !tbaa !2301
  %and13 = and i32 %4, 16777216, !dbg !4655
  %tobool14 = icmp eq i32 %and13, 0, !dbg !4655
  br i1 %tobool14, label %if.then24, label %lor.lhs.false, !dbg !4655

lor.lhs.false:                                    ; preds = %land.lhs.true11, %if.then
  %and18 = and i32 %2, 16777216, !dbg !4655
  %tobool19 = icmp eq i32 %and18, 0, !dbg !4655
  br i1 %tobool19, label %land.lhs.true20, label %if.end25, !dbg !4655

land.lhs.true20:                                  ; preds = %lor.lhs.false
  %5 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !4655, !tbaa !2301
  %and22 = and i32 %5, 8388608, !dbg !4655
  %tobool23 = icmp eq i32 %and22, 0, !dbg !4655
  br i1 %tobool23, label %if.end25, label %if.then24, !dbg !4655

if.then24:                                        ; preds = %land.lhs.true11, %land.lhs.true20
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !4657), !dbg !4660
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4661), !dbg !4660
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4662), !dbg !4660
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4663), !dbg !4660
  %6 = bitcast float* %Colour to i8*, !dbg !4664
  call void @llvm.memset.p0i8.i64(i8* %6, i8 0, i64 20, i32 4, i1 false), !dbg !4665
  br label %return, !dbg !4664

if.end25:                                         ; preds = %land.lhs.true20, %lor.lhs.false, %land.lhs.true2, %land.lhs.true, %entry
  %arraydecay = getelementptr inbounds [3 x double]* %IPoint, i64 0, i64 0, !dbg !4666
  %arraydecay27 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 1, i64 0, !dbg !4666
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !4667), !dbg !4668
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay27}, i64 0, metadata !4669), !dbg !4668
  %7 = load double* %arraydecay27, align 8, !dbg !4670, !tbaa !2552
  store double %7, double* %arraydecay, align 16, !dbg !4670, !tbaa !2552
  %arrayidx2.i223 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 1, i64 1, !dbg !4671
  %8 = load double* %arrayidx2.i223, align 8, !dbg !4671, !tbaa !2552
  %arrayidx3.i224 = getelementptr inbounds [3 x double]* %IPoint, i64 0, i64 1, !dbg !4671
  store double %8, double* %arrayidx3.i224, align 8, !dbg !4671, !tbaa !2552
  %arrayidx4.i225 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 1, i64 2, !dbg !4672
  %9 = load double* %arrayidx4.i225, align 8, !dbg !4672, !tbaa !2552
  %arrayidx5.i = getelementptr inbounds [3 x double]* %IPoint, i64 0, i64 2, !dbg !4672
  store double %9, double* %arrayidx5.i, align 16, !dbg !4672, !tbaa !2552
  %10 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !4673, !tbaa !2301
  %and29 = and i32 %10, 4, !dbg !4673
  %tobool30 = icmp eq i32 %and29, 0, !dbg !4673
  br i1 %tobool30, label %return, label %if.end32, !dbg !4673

if.end32:                                         ; preds = %if.end25
  %Object33 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 5, !dbg !4674
  %11 = load %"struct.pov::Object_Struct"** %Object33, align 8, !dbg !4674, !tbaa !2295
  %Flags34 = getelementptr inbounds %"struct.pov::Object_Struct"* %11, i64 0, i32 13, !dbg !4674
  %12 = load i32* %Flags34, align 4, !dbg !4674, !tbaa !2301
  %and36 = and i32 %12, 128, !dbg !4674
  %tobool37 = icmp eq i32 %and36, 0, !dbg !4674
  br i1 %tobool37, label %if.end39, label %if.then38, !dbg !4674

if.then38:                                        ; preds = %if.end32
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !4675), !dbg !4678
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4679), !dbg !4678
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4680), !dbg !4678
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4681), !dbg !4678
  %13 = bitcast float* %Colour to i8*, !dbg !4682
  call void @llvm.memset.p0i8.i64(i8* %13, i8 0, i64 20, i32 4, i1 false), !dbg !4683
  br label %return, !dbg !4682

if.end39:                                         ; preds = %if.end32
  %Methods = getelementptr inbounds %"struct.pov::Object_Struct"* %11, i64 0, i32 0, !dbg !4684
  %14 = load %"struct.pov::Method_Struct"** %Methods, align 8, !dbg !4684, !tbaa !2295
  %Normal_Method = getelementptr inbounds %"struct.pov::Method_Struct"* %14, i64 0, i32 2, !dbg !4684
  %15 = load void (double*, %"struct.pov::Object_Struct"*, %"struct.pov::istk_entry"*)** %Normal_Method, align 8, !dbg !4684, !tbaa !2295
  %arraydecay41 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 0, !dbg !4684
  call void %15(double* %arraydecay41, %"struct.pov::Object_Struct"* %11, %"struct.pov::istk_entry"* %Ray_Intersection) #7, !dbg !4684
  %16 = load %"struct.pov::Object_Struct"** %Object33, align 8, !dbg !4685, !tbaa !2295
  %Flags44 = getelementptr inbounds %"struct.pov::Object_Struct"* %16, i64 0, i32 13, !dbg !4685
  %17 = load i32* %Flags44, align 4, !dbg !4685, !tbaa !2301
  %and46 = and i32 %17, 4, !dbg !4685
  %tobool47 = icmp eq i32 %and46, 0, !dbg !4685
  %.pre289 = load double* %arraydecay41, align 16, !dbg !4686, !tbaa !2552
  br i1 %tobool47, label %if.end39.if.end56_crit_edge, label %if.then48, !dbg !4685

if.end39.if.end56_crit_edge:                      ; preds = %if.end39
  %arrayidx2.i230.phi.trans.insert = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 1
  %.pre290 = load double* %arrayidx2.i230.phi.trans.insert, align 8, !dbg !4686, !tbaa !2552
  %arrayidx5.i232.phi.trans.insert = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 2
  %.pre291 = load double* %arrayidx5.i232.phi.trans.insert, align 16, !dbg !4686, !tbaa !2552
  br label %if.end56, !dbg !4685

if.then48:                                        ; preds = %if.end39
  %sub = fsub double -0.000000e+00, %.pre289, !dbg !4688
  store double %sub, double* %arraydecay41, align 16, !dbg !4688, !tbaa !2552
  %arrayidx50 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 1, !dbg !4690
  %18 = load double* %arrayidx50, align 8, !dbg !4690, !tbaa !2552
  %sub51 = fsub double -0.000000e+00, %18, !dbg !4690
  store double %sub51, double* %arrayidx50, align 8, !dbg !4690, !tbaa !2552
  %arrayidx53 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 2, !dbg !4691
  %19 = load double* %arrayidx53, align 16, !dbg !4691, !tbaa !2552
  %sub54 = fsub double -0.000000e+00, %19, !dbg !4691
  store double %sub54, double* %arrayidx53, align 16, !dbg !4691, !tbaa !2552
  br label %if.end56, !dbg !4692

if.end56:                                         ; preds = %if.end39.if.end56_crit_edge, %if.then48
  %20 = phi double [ %.pre291, %if.end39.if.end56_crit_edge ], [ %sub54, %if.then48 ]
  %21 = phi double [ %.pre290, %if.end39.if.end56_crit_edge ], [ %sub51, %if.then48 ]
  %22 = phi double [ %.pre289, %if.end39.if.end56_crit_edge ], [ %sub, %if.then48 ]
  %arraydecay58 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 0, !dbg !4687
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay41}, i64 0, metadata !4693), !dbg !4694
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay58}, i64 0, metadata !4695), !dbg !4694
  %23 = load double* %arraydecay58, align 8, !dbg !4686, !tbaa !2552
  %mul.i = fmul double %22, %23, !dbg !4686
  %arrayidx3.i231 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 1, !dbg !4686
  %24 = load double* %arrayidx3.i231, align 8, !dbg !4686, !tbaa !2552
  %mul4.i = fmul double %21, %24, !dbg !4686
  %add.i = fadd double %mul.i, %mul4.i, !dbg !4686
  %arrayidx6.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 2, !dbg !4686
  %25 = load double* %arrayidx6.i, align 8, !dbg !4686, !tbaa !2552
  %mul7.i = fmul double %20, %25, !dbg !4686
  %add8.i = fadd double %add.i, %mul7.i, !dbg !4686
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1226), !dbg !4686
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !4696), !dbg !4694
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1226), !dbg !4697
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1226), !dbg !4698
  %cmp = fcmp ogt double %add8.i, 0.000000e+00, !dbg !4697
  br i1 %cmp, label %if.then59, label %if.end61, !dbg !4697

if.then59:                                        ; preds = %if.end56
  %arrayidx5.i232 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 2, !dbg !4686
  %arrayidx2.i230 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 1, !dbg !4686
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay41}, i64 0, metadata !4699), !dbg !4702
  tail call void @llvm.dbg.value(metadata !2590, i64 0, metadata !4703), !dbg !4702
  %mul.i233 = fmul double %22, -1.000000e+00, !dbg !4704
  store double %mul.i233, double* %arraydecay41, align 16, !dbg !4704, !tbaa !2552
  %mul2.i = fmul double %21, -1.000000e+00, !dbg !4705
  store double %mul2.i, double* %arrayidx2.i230, align 8, !dbg !4705, !tbaa !2552
  %mul4.i236 = fmul double %20, -1.000000e+00, !dbg !4706
  store double %mul4.i236, double* %arrayidx5.i232, align 16, !dbg !4706, !tbaa !2552
  br label %if.end61, !dbg !4707

if.end61:                                         ; preds = %if.then59, %if.end56
  %26 = phi double [ %mul4.i236, %if.then59 ], [ %20, %if.end56 ]
  %27 = phi double [ %mul2.i, %if.then59 ], [ %21, %if.end56 ]
  %28 = phi double [ %mul.i233, %if.then59 ], [ %22, %if.end56 ]
  %arraydecay62 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 2, i64 0, !dbg !4708
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay62}, i64 0, metadata !4709), !dbg !4710
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay41}, i64 0, metadata !4711), !dbg !4710
  store double %28, double* %arraydecay62, align 8, !dbg !4712, !tbaa !2552
  %arrayidx3.i238 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 2, i64 1, !dbg !4713
  store double %27, double* %arrayidx3.i238, align 8, !dbg !4713, !tbaa !2552
  %arrayidx5.i240 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 2, i64 2, !dbg !4714
  store double %26, double* %arrayidx5.i240, align 8, !dbg !4714, !tbaa !2552
  %arraydecay64 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 3, i64 0, !dbg !4715
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay64}, i64 0, metadata !4716), !dbg !4717
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay41}, i64 0, metadata !4718), !dbg !4717
  store double %28, double* %arraydecay64, align 8, !dbg !4719, !tbaa !2552
  %arrayidx3.i242 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 3, i64 1, !dbg !4720
  store double %27, double* %arrayidx3.i242, align 8, !dbg !4720, !tbaa !2552
  %arrayidx5.i244 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 3, i64 2, !dbg !4721
  store double %26, double* %arrayidx5.i244, align 8, !dbg !4721, !tbaa !2552
  %and69 = and i32 %17, 8192, !dbg !4722
  %tobool70 = icmp eq i32 %and69, 0, !dbg !4722
  br i1 %tobool70, label %if.end78, label %if.then71, !dbg !4722

if.then71:                                        ; preds = %if.end61
  %Methods73 = getelementptr inbounds %"struct.pov::Object_Struct"* %16, i64 0, i32 0, !dbg !4723
  %29 = load %"struct.pov::Method_Struct"** %Methods73, align 8, !dbg !4723, !tbaa !2295
  %UVCoord_Method = getelementptr inbounds %"struct.pov::Method_Struct"* %29, i64 0, i32 3, !dbg !4723
  %30 = load void (double*, %"struct.pov::Object_Struct"*, %"struct.pov::istk_entry"*)** %UVCoord_Method, align 8, !dbg !4723, !tbaa !2295
  %arraydecay74 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 0, !dbg !4723
  call void %30(double* %arraydecay74, %"struct.pov::Object_Struct"* %16, %"struct.pov::istk_entry"* %Ray_Intersection) #7, !dbg !4723
  %arraydecay76 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 4, i64 0, !dbg !4725
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay76}, i64 0, metadata !4726), !dbg !4727
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay74}, i64 0, metadata !4728), !dbg !4727
  %31 = load double* %arraydecay74, align 16, !dbg !4729, !tbaa !2552
  store double %31, double* %arraydecay76, align 8, !dbg !4729, !tbaa !2552
  %arrayidx2.i245 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 1, !dbg !4730
  %32 = load double* %arrayidx2.i245, align 8, !dbg !4730, !tbaa !2552
  %arrayidx3.i246 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 4, i64 1, !dbg !4730
  store double %32, double* %arrayidx3.i246, align 8, !dbg !4730, !tbaa !2552
  %.pre = load %"struct.pov::Object_Struct"** %Object33, align 8, !dbg !4731, !tbaa !2295
  %Flags80.phi.trans.insert = getelementptr inbounds %"struct.pov::Object_Struct"* %.pre, i64 0, i32 13
  %.pre286 = load i32* %Flags80.phi.trans.insert, align 4, !dbg !4731, !tbaa !2301
  br label %if.end78, !dbg !4732

if.end78:                                         ; preds = %if.end61, %if.then71
  %33 = phi i32 [ %17, %if.end61 ], [ %.pre286, %if.then71 ]
  %and82 = and i32 %33, 8192, !dbg !4731
  %tobool83 = icmp eq i32 %and82, 0, !dbg !4731
  br i1 %tobool83, label %if.end90, label %if.then84, !dbg !4731

if.then84:                                        ; preds = %if.end78
  %arrayidx85 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 0, !dbg !4733
  %34 = load double* %arrayidx85, align 16, !dbg !4733, !tbaa !2552
  store double %34, double* %arraydecay, align 16, !dbg !4733, !tbaa !2552
  %arrayidx87 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 1, !dbg !4735
  %35 = load double* %arrayidx87, align 8, !dbg !4735, !tbaa !2552
  store double %35, double* %arrayidx3.i224, align 8, !dbg !4735, !tbaa !2552
  store double 0.000000e+00, double* %arrayidx5.i, align 16, !dbg !4736, !tbaa !2552
  br label %if.end90, !dbg !4737

if.end90:                                         ; preds = %if.end78, %if.then84
  %36 = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !4738, !tbaa !2311
  %inc = add nsw i64 %36, 1, !dbg !4738
  store i64 %inc, i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !4738, !tbaa !2311
  %37 = load i64* @_ZN3pov17MaxLightPoolDepthE, align 8, !dbg !4739, !tbaa !2311
  %cmp91 = icmp slt i64 %inc, %37, !dbg !4739
  br i1 %cmp91, label %if.end93, label %if.then92, !dbg !4739

if.then92:                                        ; preds = %if.end90
  %mul = shl nsw i64 %37, 1, !dbg !4740
  call void @_ZN3pov22ResizeLightMallocPoolsEl(i64 %mul) #7, !dbg !4740
  %.pre287 = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !4742, !tbaa !2311
  br label %if.end93, !dbg !4743

if.end93:                                         ; preds = %if.end90, %if.then92
  %38 = phi i64 [ %inc, %if.end90 ], [ %.pre287, %if.then92 ]
  %39 = load double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !4742, !tbaa !2295
  %arrayidx94 = getelementptr inbounds double** %39, i64 %38, !dbg !4742
  %40 = load double** %arrayidx94, align 8, !dbg !4742, !tbaa !2295
  store double* %40, double** @_ZN3pov11Weight_ListE, align 8, !dbg !4742, !tbaa !2295
  %41 = load %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !4744, !tbaa !2295
  %arrayidx95 = getelementptr inbounds %"struct.pov::Light_Tested_Struct"** %41, i64 %38, !dbg !4744
  %42 = load %"struct.pov::Light_Tested_Struct"** %arrayidx95, align 8, !dbg !4744, !tbaa !2295
  store %"struct.pov::Light_Tested_Struct"* %42, %"struct.pov::Light_Tested_Struct"** @_ZN3pov10Light_ListE, align 8, !dbg !4744, !tbaa !2295
  %43 = load %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !4745, !tbaa !2295
  %arrayidx96 = getelementptr inbounds %"struct.pov::Texture_Struct"*** %43, i64 %38, !dbg !4745
  %44 = load %"struct.pov::Texture_Struct"*** %arrayidx96, align 8, !dbg !4745, !tbaa !2295
  store %"struct.pov::Texture_Struct"** %44, %"struct.pov::Texture_Struct"*** @_ZN3pov12Texture_ListE, align 8, !dbg !4745, !tbaa !2295
  %call = call fastcc i32 @_ZN3povL19create_texture_listEPNS_10istk_entryEd(%"struct.pov::istk_entry"* %Ray_Intersection, double %add8.i) #7, !dbg !4698
  call void @llvm.dbg.value(metadata !{i32 %call}, i64 0, metadata !1216), !dbg !4698
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !4746), !dbg !4748
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4749), !dbg !4748
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4750), !dbg !4748
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4751), !dbg !4748
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4752), !dbg !4748
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4753), !dbg !4748
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1215), !dbg !4754
  %cmp98275 = icmp sgt i32 %call, 0, !dbg !4754
  br i1 %cmp98275, label %for.body.lr.ph, label %for.end, !dbg !4754

for.body.lr.ph:                                   ; preds = %if.end93
  %arraydecay105 = getelementptr inbounds [5 x float]* %FC1, i64 0, i64 0, !dbg !4756
  %arrayidx118 = getelementptr inbounds [5 x float]* %FC1, i64 0, i64 1, !dbg !4758
  %arrayidx127 = getelementptr inbounds [5 x float]* %FC1, i64 0, i64 2, !dbg !4759
  %arrayidx136 = getelementptr inbounds [5 x float]* %FC1, i64 0, i64 3, !dbg !4760
  %arrayidx145 = getelementptr inbounds [5 x float]* %FC1, i64 0, i64 4, !dbg !4761
  %.pre288 = load double** @_ZN3pov11Weight_ListE, align 8, !dbg !4762, !tbaa !2295
  br label %for.body, !dbg !4754

for.body:                                         ; preds = %for.inc, %for.body.lr.ph
  %45 = phi double* [ %.pre288, %for.body.lr.ph ], [ %57, %for.inc ], !dbg !4762
  %indvars.iv = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next, %for.inc ]
  %Temp_Colour.sroa.0.0.load256266280 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %Temp_Colour.sroa.0.0.load256265, %for.inc ]
  %Temp_Colour.sroa.1.4.load257268279 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %Temp_Colour.sroa.1.4.load257267, %for.inc ]
  %Temp_Colour.sroa.2.8.load258270278 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %Temp_Colour.sroa.2.8.load258269, %for.inc ]
  %Temp_Colour.sroa.3.12.load261272277 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %Temp_Colour.sroa.3.12.load261271, %for.inc ]
  %Temp_Colour.sroa.4.16.load264274276 = phi float [ 0.000000e+00, %for.body.lr.ph ], [ %Temp_Colour.sroa.4.16.load264273, %for.inc ]
  %arrayidx99 = getelementptr inbounds double* %45, i64 %indvars.iv, !dbg !4762
  %46 = load double* %arrayidx99, align 8, !dbg !4762, !tbaa !2552
  %47 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !4762, !tbaa !2552
  %cmp100 = fcmp olt double %46, %47, !dbg !4762
  br i1 %cmp100, label %for.inc, label %if.end102, !dbg !4762

if.end102:                                        ; preds = %for.body
  %48 = load %"struct.pov::Texture_Struct"*** @_ZN3pov12Texture_ListE, align 8, !dbg !4763, !tbaa !2295
  %arrayidx104 = getelementptr inbounds %"struct.pov::Texture_Struct"** %48, i64 %indvars.iv, !dbg !4763
  %49 = load %"struct.pov::Texture_Struct"** %arrayidx104, align 8, !dbg !4763, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Texture_Struct"* %49}, i64 0, metadata !1221), !dbg !4763
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %arraydecay105, %"struct.pov::Texture_Struct"* %49, double* %arraydecay, double* %arraydecay41, %"struct.pov::Ray_Struct"* %Light_Source_Ray, double 0.000000e+00, %"struct.pov::istk_entry"* %Ray_Intersection, i32 1) #7, !dbg !4756
  %50 = load double** @_ZN3pov11Weight_ListE, align 8, !dbg !4764, !tbaa !2295
  %arrayidx109 = getelementptr inbounds double* %50, i64 %indvars.iv, !dbg !4764
  %51 = load double* %arrayidx109, align 8, !dbg !4764, !tbaa !2552
  %52 = load float* %arraydecay105, align 16, !dbg !4764, !tbaa !2644
  %conv111 = fpext float %52 to double, !dbg !4764
  %mul112 = fmul double %51, %conv111, !dbg !4764
  %conv114 = fpext float %Temp_Colour.sroa.0.0.load256266280 to double, !dbg !4764
  %add = fadd double %conv114, %mul112, !dbg !4764
  %conv115 = fptrunc double %add to float, !dbg !4764
  %53 = load float* %arrayidx118, align 4, !dbg !4758, !tbaa !2644
  %conv119 = fpext float %53 to double, !dbg !4758
  %mul120 = fmul double %51, %conv119, !dbg !4758
  %conv122 = fpext float %Temp_Colour.sroa.1.4.load257268279 to double, !dbg !4758
  %add123 = fadd double %conv122, %mul120, !dbg !4758
  %conv124 = fptrunc double %add123 to float, !dbg !4758
  %54 = load float* %arrayidx127, align 8, !dbg !4759, !tbaa !2644
  %conv128 = fpext float %54 to double, !dbg !4759
  %mul129 = fmul double %51, %conv128, !dbg !4759
  %conv131 = fpext float %Temp_Colour.sroa.2.8.load258270278 to double, !dbg !4759
  %add132 = fadd double %conv131, %mul129, !dbg !4759
  %conv133 = fptrunc double %add132 to float, !dbg !4759
  %55 = load float* %arrayidx136, align 4, !dbg !4760, !tbaa !2644
  %conv137 = fpext float %55 to double, !dbg !4760
  %mul138 = fmul double %51, %conv137, !dbg !4760
  %conv140 = fpext float %Temp_Colour.sroa.3.12.load261272277 to double, !dbg !4760
  %add141 = fadd double %conv140, %mul138, !dbg !4760
  %conv142 = fptrunc double %add141 to float, !dbg !4760
  %56 = load float* %arrayidx145, align 16, !dbg !4761, !tbaa !2644
  %conv146 = fpext float %56 to double, !dbg !4761
  %mul147 = fmul double %51, %conv146, !dbg !4761
  %conv149 = fpext float %Temp_Colour.sroa.4.16.load264274276 to double, !dbg !4761
  %add150 = fadd double %conv149, %mul147, !dbg !4761
  %conv151 = fptrunc double %add150 to float, !dbg !4761
  br label %for.inc, !dbg !4765

for.inc:                                          ; preds = %for.body, %if.end102
  %57 = phi double* [ %45, %for.body ], [ %50, %if.end102 ]
  %Temp_Colour.sroa.4.16.load264273 = phi float [ %Temp_Colour.sroa.4.16.load264274276, %for.body ], [ %conv151, %if.end102 ]
  %Temp_Colour.sroa.3.12.load261271 = phi float [ %Temp_Colour.sroa.3.12.load261272277, %for.body ], [ %conv142, %if.end102 ]
  %Temp_Colour.sroa.2.8.load258269 = phi float [ %Temp_Colour.sroa.2.8.load258270278, %for.body ], [ %conv133, %if.end102 ]
  %Temp_Colour.sroa.1.4.load257267 = phi float [ %Temp_Colour.sroa.1.4.load257268279, %for.body ], [ %conv124, %if.end102 ]
  %Temp_Colour.sroa.0.0.load256265 = phi float [ %Temp_Colour.sroa.0.0.load256266280, %for.body ], [ %conv115, %if.end102 ]
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !4754
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !4754
  %exitcond = icmp eq i32 %lftr.wideiv, %call, !dbg !4754
  br i1 %exitcond, label %for.end, label %for.body, !dbg !4754

for.end:                                          ; preds = %for.inc, %if.end93
  %Temp_Colour.sroa.0.0.load256266.lcssa = phi float [ 0.000000e+00, %if.end93 ], [ %Temp_Colour.sroa.0.0.load256265, %for.inc ]
  %Temp_Colour.sroa.1.4.load257268.lcssa = phi float [ 0.000000e+00, %if.end93 ], [ %Temp_Colour.sroa.1.4.load257267, %for.inc ]
  %Temp_Colour.sroa.2.8.load258270.lcssa = phi float [ 0.000000e+00, %if.end93 ], [ %Temp_Colour.sroa.2.8.load258269, %for.inc ]
  %Temp_Colour.sroa.3.12.load261272.lcssa = phi float [ 0.000000e+00, %if.end93 ], [ %Temp_Colour.sroa.3.12.load261271, %for.inc ]
  %Temp_Colour.sroa.4.16.load264274.lcssa = phi float [ 0.000000e+00, %if.end93 ], [ %Temp_Colour.sroa.4.16.load264273, %for.inc ]
  %58 = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !4766, !tbaa !2311
  %dec = add nsw i64 %58, -1, !dbg !4766
  store i64 %dec, i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !4766, !tbaa !2311
  %59 = load double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !4767, !tbaa !2295
  %arrayidx153 = getelementptr inbounds double** %59, i64 %dec, !dbg !4767
  %60 = load double** %arrayidx153, align 8, !dbg !4767, !tbaa !2295
  store double* %60, double** @_ZN3pov11Weight_ListE, align 8, !dbg !4767, !tbaa !2295
  %61 = load %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !4768, !tbaa !2295
  %arrayidx154 = getelementptr inbounds %"struct.pov::Light_Tested_Struct"** %61, i64 %dec, !dbg !4768
  %62 = load %"struct.pov::Light_Tested_Struct"** %arrayidx154, align 8, !dbg !4768, !tbaa !2295
  store %"struct.pov::Light_Tested_Struct"* %62, %"struct.pov::Light_Tested_Struct"** @_ZN3pov10Light_ListE, align 8, !dbg !4768, !tbaa !2295
  %63 = load %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !4769, !tbaa !2295
  %arrayidx155 = getelementptr inbounds %"struct.pov::Texture_Struct"*** %63, i64 %dec, !dbg !4769
  %64 = load %"struct.pov::Texture_Struct"*** %arrayidx155, align 8, !dbg !4769, !tbaa !2295
  store %"struct.pov::Texture_Struct"** %64, %"struct.pov::Texture_Struct"*** @_ZN3pov12Texture_ListE, align 8, !dbg !4769, !tbaa !2295
  %fabsf = call float @fabsf(float %Temp_Colour.sroa.3.12.load261272.lcssa) #4, !dbg !4770
  %65 = fpext float %fabsf to double, !dbg !4770
  %fabsf222 = call float @fabsf(float %Temp_Colour.sroa.4.16.load264274.lcssa) #4, !dbg !4770
  %66 = fpext float %fabsf222 to double, !dbg !4770
  %add162 = fadd double %65, %66, !dbg !4770
  %67 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !4770, !tbaa !2552
  %cmp163 = fcmp olt double %add162, %67, !dbg !4770
  br i1 %cmp163, label %if.then164, label %if.else, !dbg !4770

if.then164:                                       ; preds = %for.end
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !4771), !dbg !4774
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4775), !dbg !4774
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4776), !dbg !4774
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4777), !dbg !4774
  %68 = bitcast float* %Colour to i8*, !dbg !4778
  call void @llvm.memset.p0i8.i64(i8* %68, i8 0, i64 20, i32 4, i1 false), !dbg !4779
  br label %if.end186, !dbg !4778

if.else:                                          ; preds = %for.end
  %mul167 = fmul float %Temp_Colour.sroa.3.12.load261272.lcssa, %Temp_Colour.sroa.0.0.load256266.lcssa, !dbg !4780
  %add169 = fadd float %Temp_Colour.sroa.4.16.load264274.lcssa, %mul167, !dbg !4780
  %69 = load float* %Colour, align 4, !dbg !4780, !tbaa !2644
  %mul171 = fmul float %add169, %69, !dbg !4780
  store float %mul171, float* %Colour, align 4, !dbg !4780, !tbaa !2644
  %mul174 = fmul float %Temp_Colour.sroa.3.12.load261272.lcssa, %Temp_Colour.sroa.1.4.load257268.lcssa, !dbg !4782
  %add176 = fadd float %Temp_Colour.sroa.4.16.load264274.lcssa, %mul174, !dbg !4782
  %arrayidx177 = getelementptr inbounds float* %Colour, i64 1, !dbg !4782
  %70 = load float* %arrayidx177, align 4, !dbg !4782, !tbaa !2644
  %mul178 = fmul float %add176, %70, !dbg !4782
  store float %mul178, float* %arrayidx177, align 4, !dbg !4782, !tbaa !2644
  %mul181 = fmul float %Temp_Colour.sroa.3.12.load261272.lcssa, %Temp_Colour.sroa.2.8.load258270.lcssa, !dbg !4783
  %add183 = fadd float %Temp_Colour.sroa.4.16.load264274.lcssa, %mul181, !dbg !4783
  %arrayidx184 = getelementptr inbounds float* %Colour, i64 2, !dbg !4783
  %71 = load float* %arrayidx184, align 4, !dbg !4783, !tbaa !2644
  %mul185 = fmul float %add183, %71, !dbg !4783
  store float %mul185, float* %arrayidx184, align 4, !dbg !4783, !tbaa !2644
  br label %if.end186

if.end186:                                        ; preds = %if.else, %if.then164
  call fastcc void @_ZN3povL23do_light_ray_atmosphereEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Ray_Struct"* %Light_Source_Ray, %"struct.pov::istk_entry"* %Ray_Intersection, float* %Colour, i32 1) #7, !dbg !4784
  br label %return, !dbg !4784

return:                                           ; preds = %if.end25, %if.end186, %if.then38, %if.then24
  ret void, !dbg !4784
}
