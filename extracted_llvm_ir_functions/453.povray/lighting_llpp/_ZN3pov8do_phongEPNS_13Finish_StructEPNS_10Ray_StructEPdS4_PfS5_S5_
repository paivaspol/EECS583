define void @_ZN3pov8do_phongEPNS_13Finish_StructEPNS_10Ray_StructEPdS4_PfS5_S5_(%"struct.pov::Finish_Struct"* nocapture %Finish, %"struct.pov::Ray_Struct"* nocapture %Light_Source_Ray, double* nocapture %Eye, double* nocapture %Layer_Normal, float* nocapture %Colour, float* nocapture %Light_Colour, float* nocapture %Layer_Pigment_Colour) #1 {
entry:
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Finish_Struct"* %Finish}, i64 0, metadata !1050), !dbg !3458
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Light_Source_Ray}, i64 0, metadata !1051), !dbg !3458
  tail call void @llvm.dbg.value(metadata !{double* %Eye}, i64 0, metadata !1052), !dbg !3458
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !1053), !dbg !3458
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1054), !dbg !3458
  tail call void @llvm.dbg.value(metadata !{float* %Light_Colour}, i64 0, metadata !1055), !dbg !3458
  tail call void @llvm.dbg.value(metadata !{float* %Layer_Pigment_Colour}, i64 0, metadata !1056), !dbg !3458
  tail call void @llvm.dbg.declare(metadata !3106, metadata !1059), !dbg !3459
  tail call void @llvm.dbg.declare(metadata !2878, metadata !1063), !dbg !3460
  tail call void @llvm.dbg.value(metadata !{double* %Eye}, i64 0, metadata !3461), !dbg !3463
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !3464), !dbg !3463
  %0 = load double* %Eye, align 8, !dbg !3465, !tbaa !2552
  %1 = load double* %Layer_Normal, align 8, !dbg !3465, !tbaa !2552
  %mul.i = fmul double %0, %1, !dbg !3465
  %arrayidx2.i = getelementptr inbounds double* %Eye, i64 1, !dbg !3465
  %2 = load double* %arrayidx2.i, align 8, !dbg !3465, !tbaa !2552
  %arrayidx3.i = getelementptr inbounds double* %Layer_Normal, i64 1, !dbg !3465
  %3 = load double* %arrayidx3.i, align 8, !dbg !3465, !tbaa !2552
  %mul4.i = fmul double %2, %3, !dbg !3465
  %add.i = fadd double %mul.i, %mul4.i, !dbg !3465
  %arrayidx5.i = getelementptr inbounds double* %Eye, i64 2, !dbg !3465
  %4 = load double* %arrayidx5.i, align 8, !dbg !3465, !tbaa !2552
  %arrayidx6.i = getelementptr inbounds double* %Layer_Normal, i64 2, !dbg !3465
  %5 = load double* %arrayidx6.i, align 8, !dbg !3465, !tbaa !2552
  %mul7.i = fmul double %4, %5, !dbg !3465
  %add8.i = fadd double %add.i, %mul7.i, !dbg !3465
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1057), !dbg !3465
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !3466), !dbg !3468
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !3469), !dbg !3463
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1057), !dbg !3470
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1057), !dbg !3471
  tail call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1057), !dbg !3472
  %mul = fmul double %add8.i, -2.000000e+00, !dbg !3470
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1057), !dbg !3470
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !3466), !dbg !3468
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !3469), !dbg !3463
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1057), !dbg !3470
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1057), !dbg !3471
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1057), !dbg !3472
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3474), !dbg !3476
  tail call void @llvm.dbg.value(metadata !3477, i64 0, metadata !3478), !dbg !3476
  tail call void @llvm.dbg.value(metadata !{double* %Eye}, i64 0, metadata !3479), !dbg !3476
  tail call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !3480), !dbg !3476
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !3481), !dbg !3476
  %mul2.i = fmul double %1, %mul, !dbg !3482
  %add.i137 = fadd double %0, %mul2.i, !dbg !3482
  %mul7.i140 = fmul double %3, %mul, !dbg !3483
  %add8.i141 = fadd double %2, %mul7.i140, !dbg !3483
  %mul13.i = fmul double %5, %mul, !dbg !3484
  %add14.i = fadd double %4, %mul13.i, !dbg !3484
  %arraydecay2 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 0, !dbg !3467
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3485), !dbg !3468
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay2}, i64 0, metadata !3486), !dbg !3468
  %6 = load double* %arraydecay2, align 8, !dbg !3487, !tbaa !2552
  %mul.i128 = fmul double %6, %add.i137, !dbg !3487
  %arrayidx3.i130 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 1, !dbg !3487
  %7 = load double* %arrayidx3.i130, align 8, !dbg !3487, !tbaa !2552
  %mul4.i131 = fmul double %7, %add8.i141, !dbg !3487
  %add.i132 = fadd double %mul.i128, %mul4.i131, !dbg !3487
  %arrayidx6.i134 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, i32 1, i64 2, !dbg !3487
  %8 = load double* %arrayidx6.i134, align 8, !dbg !3487, !tbaa !2552
  %mul7.i135 = fmul double %8, %add14.i, !dbg !3487
  %add8.i136 = fadd double %mul7.i135, %add.i132, !dbg !3487
  tail call void @llvm.dbg.value(metadata !{double %add8.i136}, i64 0, metadata !1057), !dbg !3487
  tail call void @llvm.dbg.value(metadata !{double %add8.i136}, i64 0, metadata !3466), !dbg !3468
  tail call void @llvm.dbg.value(metadata !{double %add8.i136}, i64 0, metadata !3469), !dbg !3463
  tail call void @llvm.dbg.value(metadata !{double %add8.i136}, i64 0, metadata !1057), !dbg !3470
  tail call void @llvm.dbg.value(metadata !{double %add8.i136}, i64 0, metadata !1057), !dbg !3471
  tail call void @llvm.dbg.value(metadata !{double %add8.i136}, i64 0, metadata !1057), !dbg !3472
  %cmp = fcmp ogt double %add8.i136, 0.000000e+00, !dbg !3471
  br i1 %cmp, label %if.then, label %if.end87, !dbg !3471

if.then:                                          ; preds = %entry
  %Phong_Size = getelementptr inbounds %"struct.pov::Finish_Struct"* %Finish, i64 0, i32 5, !dbg !3488
  %9 = load float* %Phong_Size, align 4, !dbg !3488, !tbaa !2644
  %cmp3 = fcmp olt float %9, 6.000000e+01, !dbg !3488
  %cmp4 = fcmp ogt double %add8.i136, 8.000000e-04, !dbg !3488
  %or.cond = or i1 %cmp3, %cmp4, !dbg !3488
  br i1 %or.cond, label %if.then5, label %if.end, !dbg !3488

if.then5:                                         ; preds = %if.then
  %Phong = getelementptr inbounds %"struct.pov::Finish_Struct"* %Finish, i64 0, i32 4, !dbg !3472
  %10 = load float* %Phong, align 4, !dbg !3472, !tbaa !2644
  %conv = fpext float %10 to double, !dbg !3472
  %conv7 = fpext float %9 to double, !dbg !3472
  %call = tail call double @pow(double %add8.i136, double %conv7) #8, !dbg !3472
  %mul8 = fmul double %conv, %call, !dbg !3472
  tail call void @llvm.dbg.value(metadata !{double %mul8}, i64 0, metadata !1058), !dbg !3472
  br label %if.end, !dbg !3472

if.end:                                           ; preds = %if.then, %if.then5
  %Intensity.0 = phi double [ %mul8, %if.then5 ], [ 0.000000e+00, %if.then ]
  %Metallic = getelementptr inbounds %"struct.pov::Finish_Struct"* %Finish, i64 0, i32 15, !dbg !3489
  %11 = load float* %Metallic, align 4, !dbg !3489, !tbaa !2644
  %cmp10 = fcmp ogt float %11, 0.000000e+00, !dbg !3489
  br i1 %cmp10, label %if.then11, label %if.else64, !dbg !3489

if.then11:                                        ; preds = %if.end
  tail call void @llvm.dbg.value(metadata !{double* %Layer_Normal}, i64 0, metadata !3490), !dbg !3493
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay2}, i64 0, metadata !3494), !dbg !3493
  %12 = load double* %Layer_Normal, align 8, !dbg !3495, !tbaa !2552
  %13 = load double* %arraydecay2, align 8, !dbg !3495, !tbaa !2552
  %mul.i119 = fmul double %12, %13, !dbg !3495
  %14 = load double* %arrayidx3.i, align 8, !dbg !3495, !tbaa !2552
  %15 = load double* %arrayidx3.i130, align 8, !dbg !3495, !tbaa !2552
  %mul4.i122 = fmul double %14, %15, !dbg !3495
  %add.i123 = fadd double %mul.i119, %mul4.i122, !dbg !3495
  %16 = load double* %arrayidx6.i, align 8, !dbg !3495, !tbaa !2552
  %17 = load double* %arrayidx6.i134, align 8, !dbg !3495, !tbaa !2552
  %mul7.i126 = fmul double %16, %17, !dbg !3495
  %add8.i127 = fadd double %add.i123, %mul7.i126, !dbg !3495
  tail call void @llvm.dbg.value(metadata !{double %add8.i127}, i64 0, metadata !1060), !dbg !3495
  tail call void @llvm.dbg.value(metadata !{double %add8.i127}, i64 0, metadata !3496), !dbg !3493
  tail call void @llvm.dbg.value(metadata !{double %add8.i127}, i64 0, metadata !1060), !dbg !3497
  %call14 = tail call double @acos(double %add8.i127) #8, !dbg !3497
  %call15 = tail call double @fabs(double %call14) #9, !dbg !3497
  %div = fdiv double %call15, 0x3FF921FB54442D18, !dbg !3497
  tail call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !1061), !dbg !3497
  %sub = fadd double %div, -1.120000e+00, !dbg !3498
  tail call void @llvm.dbg.value(metadata !{double %sub}, i64 0, metadata !3499), !dbg !3500
  %mul.i118 = fmul double %sub, %sub, !dbg !3501
  %div17 = fdiv double 0x3F8DD56BD7BF6F16, %mul.i118, !dbg !3498
  %sub18 = fadd double %div17, 0xBF87C88174C5E0DC, !dbg !3498
  tail call void @llvm.dbg.value(metadata !{double %sub18}, i64 0, metadata !1062), !dbg !3498
  tail call void @llvm.dbg.value(metadata !{double %sub18}, i64 0, metadata !3503), !dbg !3505
  tail call void @llvm.dbg.value(metadata !{double %sub18}, i64 0, metadata !1062), !dbg !3506
  tail call void @llvm.dbg.value(metadata !{double %sub18}, i64 0, metadata !1062), !dbg !3507
  tail call void @llvm.dbg.value(metadata !3477, i64 0, metadata !3508), !dbg !3509
  %cmp.i116 = fcmp ogt double %sub18, 0.000000e+00, !dbg !3510
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !3511), !dbg !3509
  %.sroa.speculated144 = select i1 %cmp.i116, double %sub18, double 0.000000e+00, !dbg !3512
  %cmp.i = fcmp olt double %.sroa.speculated144, 1.000000e+00, !dbg !3512
  %.sroa.speculated = select i1 %cmp.i, double %.sroa.speculated144, double 1.000000e+00, !dbg !3504
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1062), !dbg !3504
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !3503), !dbg !3505
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1062), !dbg !3506
  tail call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1062), !dbg !3507
  %18 = load float* %Light_Colour, align 4, !dbg !3513, !tbaa !2644
  %conv22 = fpext float %18 to double, !dbg !3513
  %19 = load float* %Metallic, align 4, !dbg !3513, !tbaa !2644
  %conv24 = fpext float %19 to double, !dbg !3513
  %sub25 = fsub double 1.000000e+00, %.sroa.speculated, !dbg !3513
  %mul26 = fmul double %conv24, %sub25, !dbg !3513
  %20 = load float* %Layer_Pigment_Colour, align 4, !dbg !3513, !tbaa !2644
  %conv28 = fpext float %20 to double, !dbg !3513
  %sub29 = fadd double %conv28, -1.000000e+00, !dbg !3513
  %mul30 = fmul double %sub29, %mul26, !dbg !3513
  %add = fadd double %mul30, 1.000000e+00, !dbg !3513
  %mul31 = fmul double %conv22, %add, !dbg !3513
  %conv32 = fptrunc double %mul31 to float, !dbg !3513
  %arrayidx34 = getelementptr inbounds float* %Light_Colour, i64 1, !dbg !3506
  %21 = load float* %arrayidx34, align 4, !dbg !3506, !tbaa !2644
  %conv35 = fpext float %21 to double, !dbg !3506
  %arrayidx40 = getelementptr inbounds float* %Layer_Pigment_Colour, i64 1, !dbg !3506
  %22 = load float* %arrayidx40, align 4, !dbg !3506, !tbaa !2644
  %conv41 = fpext float %22 to double, !dbg !3506
  %sub42 = fadd double %conv41, -1.000000e+00, !dbg !3506
  %mul43 = fmul double %mul26, %sub42, !dbg !3506
  %add44 = fadd double %mul43, 1.000000e+00, !dbg !3506
  %mul45 = fmul double %conv35, %add44, !dbg !3506
  %conv46 = fptrunc double %mul45 to float, !dbg !3506
  %arrayidx48 = getelementptr inbounds float* %Light_Colour, i64 2, !dbg !3507
  %23 = load float* %arrayidx48, align 4, !dbg !3507, !tbaa !2644
  %conv49 = fpext float %23 to double, !dbg !3507
  %arrayidx54 = getelementptr inbounds float* %Layer_Pigment_Colour, i64 2, !dbg !3507
  %24 = load float* %arrayidx54, align 4, !dbg !3507, !tbaa !2644
  %conv55 = fpext float %24 to double, !dbg !3507
  %sub56 = fadd double %conv55, -1.000000e+00, !dbg !3507
  %mul57 = fmul double %mul26, %sub56, !dbg !3507
  %add58 = fadd double %mul57, 1.000000e+00, !dbg !3507
  %mul59 = fmul double %conv49, %add58, !dbg !3507
  %conv60 = fptrunc double %mul59 to float, !dbg !3507
  %conv62 = fptrunc double %Intensity.0 to float, !dbg !3514
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !3515), !dbg !3516
  tail call void @llvm.dbg.value(metadata !{float %conv62}, i64 0, metadata !3517), !dbg !3516
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !3518), !dbg !3516
  %mul.i111 = fmul float %conv62, %conv32, !dbg !3519
  %25 = load float* %Colour, align 4, !dbg !3519, !tbaa !2644
  %add.i112 = fadd float %25, %mul.i111, !dbg !3519
  store float %add.i112, float* %Colour, align 4, !dbg !3519, !tbaa !2644
  %mul3.i = fmul float %conv62, %conv46, !dbg !3521
  %arrayidx4.i = getelementptr inbounds float* %Colour, i64 1, !dbg !3521
  %26 = load float* %arrayidx4.i, align 4, !dbg !3521, !tbaa !2644
  %add5.i = fadd float %26, %mul3.i, !dbg !3521
  store float %add5.i, float* %arrayidx4.i, align 4, !dbg !3521, !tbaa !2644
  %mul7.i115 = fmul float %conv62, %conv60, !dbg !3522
  %arrayidx8.i = getelementptr inbounds float* %Colour, i64 2, !dbg !3522
  %27 = load float* %arrayidx8.i, align 4, !dbg !3522, !tbaa !2644
  %add9.i = fadd float %27, %mul7.i115, !dbg !3522
  store float %add9.i, float* %arrayidx8.i, align 4, !dbg !3522, !tbaa !2644
  br label %if.end87, !dbg !3523

if.else64:                                        ; preds = %if.end
  %28 = load float* %Light_Colour, align 4, !dbg !3524, !tbaa !2644
  %conv66 = fpext float %28 to double, !dbg !3524
  %mul67 = fmul double %Intensity.0, %conv66, !dbg !3524
  %29 = load float* %Colour, align 4, !dbg !3524, !tbaa !2644
  %conv69 = fpext float %29 to double, !dbg !3524
  %add70 = fadd double %conv69, %mul67, !dbg !3524
  %conv71 = fptrunc double %add70 to float, !dbg !3524
  store float %conv71, float* %Colour, align 4, !dbg !3524, !tbaa !2644
  %arrayidx72 = getelementptr inbounds float* %Light_Colour, i64 1, !dbg !3526
  %30 = load float* %arrayidx72, align 4, !dbg !3526, !tbaa !2644
  %conv73 = fpext float %30 to double, !dbg !3526
  %mul74 = fmul double %Intensity.0, %conv73, !dbg !3526
  %arrayidx75 = getelementptr inbounds float* %Colour, i64 1, !dbg !3526
  %31 = load float* %arrayidx75, align 4, !dbg !3526, !tbaa !2644
  %conv76 = fpext float %31 to double, !dbg !3526
  %add77 = fadd double %conv76, %mul74, !dbg !3526
  %conv78 = fptrunc double %add77 to float, !dbg !3526
  store float %conv78, float* %arrayidx75, align 4, !dbg !3526, !tbaa !2644
  %arrayidx79 = getelementptr inbounds float* %Light_Colour, i64 2, !dbg !3527
  %32 = load float* %arrayidx79, align 4, !dbg !3527, !tbaa !2644
  %conv80 = fpext float %32 to double, !dbg !3527
  %mul81 = fmul double %Intensity.0, %conv80, !dbg !3527
  %arrayidx82 = getelementptr inbounds float* %Colour, i64 2, !dbg !3527
  %33 = load float* %arrayidx82, align 4, !dbg !3527, !tbaa !2644
  %conv83 = fpext float %33 to double, !dbg !3527
  %add84 = fadd double %conv83, %mul81, !dbg !3527
  %conv85 = fptrunc double %add84 to float, !dbg !3527
  store float %conv85, float* %arrayidx82, align 4, !dbg !3527, !tbaa !2644
  br label %if.end87

if.end87:                                         ; preds = %if.then11, %if.else64, %entry
  ret void, !dbg !3528
}
