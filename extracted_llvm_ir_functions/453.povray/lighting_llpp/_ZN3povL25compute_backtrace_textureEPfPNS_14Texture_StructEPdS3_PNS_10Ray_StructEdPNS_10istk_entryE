define internal fastcc void @_ZN3povL25compute_backtrace_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryE(float* %LightCol, %"struct.pov::Texture_Struct"* %Texture, double* %IPoint, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Intersection) #0 {
entry:
  %Local_Normal.i = alloca [3 x double], align 16
  %NRay.i = alloca %"struct.pov::Ray_Struct", align 8
  %Hue.i = alloca [5 x float], align 16
  %Elem.i = alloca [5 x float], align 16
  %lc.i = alloca [5 x float], align 16
  %lc106.i = alloca [5 x float], align 16
  %LayNormal = alloca [3 x double], align 16
  %TopNormal = alloca [3 x double], align 16
  %LayCol = alloca [5 x float], align 16
  %TmpCol = alloca [5 x float], align 16
  %CurLightCol = alloca [5 x float], align 16
  %NewRay = alloca %"struct.pov::Ray_Struct", align 8
  %NRay = alloca %"struct.pov::Ray_Struct", align 8
  call void @llvm.dbg.value(metadata !{float* %LightCol}, i64 0, metadata !1798), !dbg !4785
  call void @llvm.dbg.value(metadata !{%"struct.pov::Texture_Struct"* %Texture}, i64 0, metadata !1799), !dbg !4785
  call void @llvm.dbg.value(metadata !{double* %IPoint}, i64 0, metadata !1800), !dbg !4785
  call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !1801), !dbg !4785
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1802), !dbg !4785
  call void @llvm.dbg.value(metadata !{double %Weight}, i64 0, metadata !1803), !dbg !4785
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersection}, i64 0, metadata !1804), !dbg !4785
  call void @llvm.dbg.declare(metadata !{[3 x double]* %LayNormal}, metadata !1815), !dbg !4786
  call void @llvm.dbg.declare(metadata !{[3 x double]* %TopNormal}, metadata !1816), !dbg !4786
  call void @llvm.dbg.declare(metadata !{[5 x float]* %LayCol}, metadata !1817), !dbg !4787
  call void @llvm.dbg.declare(metadata !2878, metadata !1818), !dbg !4787
  call void @llvm.dbg.declare(metadata !2878, metadata !1819), !dbg !4788
  call void @llvm.dbg.declare(metadata !{[5 x float]* %TmpCol}, metadata !1820), !dbg !4788
  call void @llvm.dbg.declare(metadata !2878, metadata !1821), !dbg !4788
  call void @llvm.dbg.declare(metadata !{[5 x float]* %CurLightCol}, metadata !1822), !dbg !4788
  %0 = bitcast %"struct.pov::Ray_Struct"* %NewRay to i8*, !dbg !4789
  call void @llvm.lifetime.start(i64 856, i8* %0) #6, !dbg !4789
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Ray_Struct"* %NewRay}, metadata !1825), !dbg !4789
  %call = call %"struct.pov::ComTexData_Struct"* @_ZN3pov13NewComTexDataEv() #7, !dbg !4790
  call void @llvm.dbg.value(metadata !{%"struct.pov::ComTexData_Struct"* %call}, i64 0, metadata !1840), !dbg !4790
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !4791), !dbg !4793
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4794), !dbg !4793
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4795), !dbg !4793
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4796), !dbg !4793
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4797), !dbg !4793
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4798), !dbg !4793
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !4799), !dbg !4801
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !4802), !dbg !4801
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !4803), !dbg !4801
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !4804), !dbg !4801
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !4805), !dbg !4801
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !4806), !dbg !4801
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !1814), !dbg !4807
  %arraydecay10 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NewRay, i64 0, i32 0, i64 0, !dbg !4808
  %arraydecay12 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 1, i64 0, !dbg !4808
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay10}, i64 0, metadata !4809), !dbg !4810
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !4811), !dbg !4810
  %1 = load double* %arraydecay12, align 8, !dbg !4812, !tbaa !2552
  store double %1, double* %arraydecay10, align 8, !dbg !4812, !tbaa !2552
  %arrayidx2.i1073 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 1, i64 1, !dbg !4813
  %2 = load double* %arrayidx2.i1073, align 8, !dbg !4813, !tbaa !2552
  %arrayidx3.i1074 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NewRay, i64 0, i32 0, i64 1, !dbg !4813
  store double %2, double* %arrayidx3.i1074, align 8, !dbg !4813, !tbaa !2552
  %arrayidx4.i1075 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 1, i64 2, !dbg !4814
  %3 = load double* %arrayidx4.i1075, align 8, !dbg !4814, !tbaa !2552
  %arrayidx5.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NewRay, i64 0, i32 0, i64 2, !dbg !4814
  store double %3, double* %arrayidx5.i, align 8, !dbg !4814, !tbaa !2552
  call void @_ZN3pov19Copy_Ray_ContainersEPNS_10Ray_StructES1_(%"struct.pov::Ray_Struct"* %NewRay, %"struct.pov::Ray_Struct"* %Ray) #7, !dbg !4815
  %4 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !4816, !tbaa !2301
  %and = and i32 %4, 128, !dbg !4816
  %tobool = icmp eq i32 %and, 0, !dbg !4816
  br i1 %tobool, label %if.end54, label %land.lhs.true, !dbg !4816

land.lhs.true:                                    ; preds = %entry
  %Index = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 2, !dbg !4816
  %5 = load i32* %Index, align 4, !dbg !4816, !tbaa !2301
  %cmp = icmp sgt i32 %5, -1, !dbg !4816
  br i1 %cmp, label %for.body, label %if.end54, !dbg !4816

for.cond:                                         ; preds = %for.body
  %indvars.iv.next1335 = add i64 %indvars.iv1334, 1, !dbg !4817
  %6 = trunc i64 %indvars.iv1334 to i32, !dbg !4817
  %cmp14 = icmp slt i32 %6, %5, !dbg !4817
  br i1 %cmp14, label %for.body, label %if.then18.critedge, !dbg !4817

for.body:                                         ; preds = %land.lhs.true, %for.cond
  %indvars.iv1334 = phi i64 [ %indvars.iv.next1335, %for.cond ], [ 0, %land.lhs.true ]
  %arrayidx = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv1334, !dbg !4820
  %7 = load %"struct.pov::Interior_Struct"** %arrayidx, align 8, !dbg !4820, !tbaa !2295
  %hollow = getelementptr inbounds %"struct.pov::Interior_Struct"* %7, i64 0, i32 1, !dbg !4820
  %8 = load i32* %hollow, align 4, !dbg !4820, !tbaa !2301
  %tobool15 = icmp eq i32 %8, 0, !dbg !4820
  br i1 %tobool15, label %if.end54, label %for.cond, !dbg !4820

if.then18.critedge:                               ; preds = %for.cond
  %add = add nsw i32 %5, 2, !dbg !4822
  %conv20 = sext i32 %add to i64, !dbg !4822
  %mul = shl nsw i64 %conv20, 3, !dbg !4822
  %call21 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 4629, i8* getelementptr inbounds ([16 x i8]* @.str3, i64 0, i64 0)) #7, !dbg !4822
  %9 = bitcast i8* %call21 to %"struct.pov::Media_Struct"**, !dbg !4822
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %9}, i64 0, metadata !1836), !dbg !4822
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %9}, i64 0, metadata !1837), !dbg !4824
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1805), !dbg !4825
  %10 = load i32* %Index, align 4, !dbg !4825, !tbaa !2301
  %cmp241319 = icmp slt i32 %10, 0, !dbg !4825
  br i1 %cmp241319, label %for.end45, label %for.body25, !dbg !4825

for.body25:                                       ; preds = %if.then18.critedge, %for.inc43
  %indvars.iv1331 = phi i64 [ %indvars.iv.next1332, %for.inc43 ], [ 0, %if.then18.critedge ]
  %TmpMedia.01320 = phi %"struct.pov::Media_Struct"** [ %TmpMedia.1, %for.inc43 ], [ %9, %if.then18.critedge ]
  %arrayidx28 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv1331, !dbg !4827
  %11 = load %"struct.pov::Interior_Struct"** %arrayidx28, align 8, !dbg !4827, !tbaa !2295
  %hollow29 = getelementptr inbounds %"struct.pov::Interior_Struct"* %11, i64 0, i32 1, !dbg !4827
  %12 = load i32* %hollow29, align 4, !dbg !4827, !tbaa !2301
  %tobool30 = icmp eq i32 %12, 0, !dbg !4827
  br i1 %tobool30, label %for.inc43, label %if.then31, !dbg !4827

if.then31:                                        ; preds = %for.body25
  %IMedia = getelementptr inbounds %"struct.pov::Interior_Struct"* %11, i64 0, i32 10, !dbg !4829
  %13 = load %"struct.pov::Media_Struct"** %IMedia, align 8, !dbg !4829, !tbaa !2295
  %cmp35 = icmp eq %"struct.pov::Media_Struct"* %13, null, !dbg !4829
  br i1 %cmp35, label %for.inc43, label %if.then36, !dbg !4829

if.then36:                                        ; preds = %if.then31
  store %"struct.pov::Media_Struct"* %13, %"struct.pov::Media_Struct"** %TmpMedia.01320, align 8, !dbg !4831, !tbaa !2295
  %incdec.ptr = getelementptr inbounds %"struct.pov::Media_Struct"** %TmpMedia.01320, i64 1, !dbg !4833
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %incdec.ptr}, i64 0, metadata !1837), !dbg !4833
  br label %for.inc43, !dbg !4834

for.inc43:                                        ; preds = %if.then31, %for.body25, %if.then36
  %TmpMedia.1 = phi %"struct.pov::Media_Struct"** [ %incdec.ptr, %if.then36 ], [ %TmpMedia.01320, %if.then31 ], [ %TmpMedia.01320, %for.body25 ]
  %indvars.iv.next1332 = add i64 %indvars.iv1331, 1, !dbg !4825
  %14 = trunc i64 %indvars.iv1331 to i32, !dbg !4825
  %cmp24 = icmp slt i32 %14, %10, !dbg !4825
  br i1 %cmp24, label %for.body25, label %for.end45, !dbg !4825

for.end45:                                        ; preds = %for.inc43, %if.then18.critedge
  %TmpMedia.0.lcssa = phi %"struct.pov::Media_Struct"** [ %9, %if.then18.critedge ], [ %TmpMedia.1, %for.inc43 ]
  store %"struct.pov::Media_Struct"* null, %"struct.pov::Media_Struct"** %TmpMedia.0.lcssa, align 8, !dbg !4835, !tbaa !2295
  %15 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4836, !tbaa !2301
  %16 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4836, !tbaa !2301
  %notlhs = icmp sgt i32 %15, 1, !dbg !4836
  %notrhs = icmp eq i32 %16, 0, !dbg !4836
  %or.cond.not = and i1 %notrhs, %notlhs, !dbg !4836
  %17 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 31), align 8, !dbg !4836, !tbaa !2301
  %cmp50 = icmp sgt i32 %17, 0, !dbg !4836
  %or.cond831 = and i1 %or.cond.not, %cmp50, !dbg !4836
  br i1 %or.cond831, label %if.then51, label %if.else, !dbg !4836

if.then51:                                        ; preds = %for.end45
  call void @_ZN3pov24Backtrace_Simulate_MediaEPPNS_12Media_StructEPNS_10Ray_StructEPNS_10istk_entryEPf(%"struct.pov::Media_Struct"** %9, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Intersection, float* %LightCol) #7, !dbg !4837
  br label %if.end52, !dbg !4839

if.else:                                          ; preds = %for.end45
  call void @_ZN3pov14Simulate_MediaEPPNS_12Media_StructEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Media_Struct"** %9, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Intersection, float* %LightCol, i32 1) #7, !dbg !4840
  br label %if.end52

if.end52:                                         ; preds = %if.else, %if.then51
  call void @_ZN3pov8pov_freeEPvPKci(i8* %call21, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 4664) #7, !dbg !4842
  call void @llvm.dbg.value(metadata !4844, i64 0, metadata !1836), !dbg !4842
  br label %if.end54, !dbg !4845

if.end54:                                         ; preds = %for.body, %entry, %if.end52, %land.lhs.true
  %Object = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 5, !dbg !4846
  %18 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !4846, !tbaa !2295
  %Interior55 = getelementptr inbounds %"struct.pov::Object_Struct"* %18, i64 0, i32 5, !dbg !4846
  %19 = load %"struct.pov::Interior_Struct"** %Interior55, align 8, !dbg !4846, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Interior_Struct"* %19}, i64 0, metadata !1823), !dbg !4846
  %Old_Refract = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 6, !dbg !4847
  %20 = load float* %Old_Refract, align 4, !dbg !4847, !tbaa !2644
  %cmp59 = icmp eq %"struct.pov::Interior_Struct"* %19, null, !dbg !4848
  br i1 %cmp59, label %if.end166, label %if.then60, !dbg !4848

if.then60:                                        ; preds = %if.end54
  %call61 = call i32 @_ZN3pov25Interior_In_Ray_ContainerEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Interior_Struct"* %19) #7, !dbg !4849
  %cmp62 = icmp sgt i32 %call61, -1, !dbg !4849
  br i1 %cmp62, label %if.then63, label %if.end166, !dbg !4849

if.then63:                                        ; preds = %if.then60
  %Fade_Power = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 8, !dbg !4851
  %21 = load float* %Fade_Power, align 4, !dbg !4851, !tbaa !2644
  %conv64 = fpext float %21 to double, !dbg !4851
  %cmp65 = fcmp ogt float %21, 0.000000e+00, !dbg !4851
  br i1 %cmp65, label %land.lhs.true66, label %if.end166, !dbg !4851

land.lhs.true66:                                  ; preds = %if.then63
  %Fade_Distance = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 7, !dbg !4851
  %22 = load float* %Fade_Distance, align 4, !dbg !4851, !tbaa !2644
  %conv67 = fpext float %22 to double, !dbg !4851
  %fabsf1065 = call float @fabsf(float %22) #4, !dbg !4851
  %23 = fpext float %fabsf1065 to double, !dbg !4851
  %cmp69 = fcmp ogt double %23, 1.000000e-07, !dbg !4851
  br i1 %cmp69, label %if.then70, label %if.end166, !dbg !4851

if.then70:                                        ; preds = %land.lhs.true66
  %cmp72 = fcmp ult float %21, 1.000000e+03, !dbg !4853
  br i1 %cmp72, label %if.else115, label %if.then73, !dbg !4853

if.then73:                                        ; preds = %if.then70
  %arrayidx74 = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 9, i64 0, !dbg !4855
  %24 = load float* %arrayidx74, align 4, !dbg !4855, !tbaa !2644
  %conv75 = fpext float %24 to double, !dbg !4855
  %sub = fsub double 1.000000e+00, %conv75, !dbg !4855
  %Depth = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 0, !dbg !4855
  %25 = load double* %Depth, align 8, !dbg !4855, !tbaa !2552
  %26 = fmul double %25, %sub, !dbg !4855
  %mul77 = fsub double -0.000000e+00, %26, !dbg !4855
  %div = fdiv double %mul77, %conv67, !dbg !4855
  %call80 = call double @exp(double %div) #8, !dbg !4855
  %conv82 = fpext float %20 to double, !dbg !4855
  %mul83 = fmul double %conv82, %call80, !dbg !4855
  %conv84 = fptrunc double %mul83 to float, !dbg !4855
  %arrayidx86 = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 9, i64 1, !dbg !4857
  %27 = load float* %arrayidx86, align 4, !dbg !4857, !tbaa !2644
  %conv87 = fpext float %27 to double, !dbg !4857
  %sub88 = fsub double 1.000000e+00, %conv87, !dbg !4857
  %28 = load double* %Depth, align 8, !dbg !4857, !tbaa !2552
  %29 = fmul double %28, %sub88, !dbg !4857
  %mul91 = fsub double -0.000000e+00, %29, !dbg !4857
  %30 = load float* %Fade_Distance, align 4, !dbg !4857, !tbaa !2644
  %conv93 = fpext float %30 to double, !dbg !4857
  %div94 = fdiv double %mul91, %conv93, !dbg !4857
  %call95 = call double @exp(double %div94) #8, !dbg !4857
  %mul98 = fmul double %conv82, %call95, !dbg !4857
  %conv99 = fptrunc double %mul98 to float, !dbg !4857
  %arrayidx101 = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 9, i64 2, !dbg !4858
  %31 = load float* %arrayidx101, align 4, !dbg !4858, !tbaa !2644
  %conv102 = fpext float %31 to double, !dbg !4858
  %sub103 = fsub double 1.000000e+00, %conv102, !dbg !4858
  %32 = load double* %Depth, align 8, !dbg !4858, !tbaa !2552
  %33 = fmul double %32, %sub103, !dbg !4858
  %mul106 = fsub double -0.000000e+00, %33, !dbg !4858
  %34 = load float* %Fade_Distance, align 4, !dbg !4858, !tbaa !2644
  %conv108 = fpext float %34 to double, !dbg !4858
  %div109 = fdiv double %mul106, %conv108, !dbg !4858
  %call110 = call double @exp(double %div109) #8, !dbg !4858
  %mul113 = fmul double %conv82, %call110, !dbg !4858
  %conv114 = fptrunc double %mul113 to float, !dbg !4858
  br label %if.end166, !dbg !4859

if.else115:                                       ; preds = %if.then70
  %Depth116 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 0, !dbg !4860
  %35 = load double* %Depth116, align 8, !dbg !4860, !tbaa !2552
  %div119 = fdiv double %35, %conv67, !dbg !4860
  %call122 = call double @pow(double %div119, double %conv64) #8, !dbg !4860
  %add123 = fadd double %call122, 1.000000e+00, !dbg !4860
  call void @llvm.dbg.value(metadata !{double %add123}, i64 0, metadata !1813), !dbg !4860
  %arrayidx125 = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 9, i64 0, !dbg !4862
  %36 = load float* %arrayidx125, align 4, !dbg !4862, !tbaa !2644
  %conv126 = fpext float %36 to double, !dbg !4862
  %sub130 = fsub double 1.000000e+00, %conv126, !dbg !4862
  %div131 = fdiv double %sub130, %add123, !dbg !4862
  %add132 = fadd double %conv126, %div131, !dbg !4862
  %conv134 = fpext float %20 to double, !dbg !4862
  %mul135 = fmul double %conv134, %add132, !dbg !4862
  %conv136 = fptrunc double %mul135 to float, !dbg !4862
  %arrayidx138 = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 9, i64 1, !dbg !4863
  %37 = load float* %arrayidx138, align 4, !dbg !4863, !tbaa !2644
  %conv139 = fpext float %37 to double, !dbg !4863
  %sub143 = fsub double 1.000000e+00, %conv139, !dbg !4863
  %div144 = fdiv double %sub143, %add123, !dbg !4863
  %add145 = fadd double %conv139, %div144, !dbg !4863
  %mul148 = fmul double %conv134, %add145, !dbg !4863
  %conv149 = fptrunc double %mul148 to float, !dbg !4863
  %arrayidx151 = getelementptr inbounds %"struct.pov::Interior_Struct"* %19, i64 0, i32 9, i64 2, !dbg !4864
  %38 = load float* %arrayidx151, align 4, !dbg !4864, !tbaa !2644
  %conv152 = fpext float %38 to double, !dbg !4864
  %sub156 = fsub double 1.000000e+00, %conv152, !dbg !4864
  %div157 = fdiv double %sub156, %add123, !dbg !4864
  %add158 = fadd double %conv152, %div157, !dbg !4864
  %mul161 = fmul double %conv134, %add158, !dbg !4864
  %conv162 = fptrunc double %mul161 to float, !dbg !4864
  br label %if.end166

if.end166:                                        ; preds = %if.end54, %if.then60, %if.then73, %if.else115, %land.lhs.true66, %if.then63
  %AttCol.sroa.0.0 = phi float [ %conv84, %if.then73 ], [ %conv136, %if.else115 ], [ %20, %land.lhs.true66 ], [ %20, %if.then63 ], [ %20, %if.then60 ], [ %20, %if.end54 ]
  %AttCol.sroa.1.0 = phi float [ %conv99, %if.then73 ], [ %conv149, %if.else115 ], [ %20, %land.lhs.true66 ], [ %20, %if.then63 ], [ %20, %if.then60 ], [ %20, %if.end54 ]
  %AttCol.sroa.2.0 = phi float [ %conv114, %if.then73 ], [ %conv162, %if.else115 ], [ %20, %land.lhs.true66 ], [ %20, %if.then63 ], [ %20, %if.then60 ], [ %20, %if.end54 ]
  %39 = load float* %LightCol, align 4, !dbg !4865, !tbaa !2644
  %mul169 = fmul float %AttCol.sroa.0.0, %39, !dbg !4865
  store float %mul169, float* %LightCol, align 4, !dbg !4865, !tbaa !2644
  %arrayidx171 = getelementptr inbounds float* %LightCol, i64 1, !dbg !4866
  %40 = load float* %arrayidx171, align 4, !dbg !4866, !tbaa !2644
  %mul172 = fmul float %AttCol.sroa.1.0, %40, !dbg !4866
  store float %mul172, float* %arrayidx171, align 4, !dbg !4866, !tbaa !2644
  %arrayidx174 = getelementptr inbounds float* %LightCol, i64 2, !dbg !4867
  %41 = load float* %arrayidx174, align 4, !dbg !4867, !tbaa !2644
  %mul175 = fmul float %AttCol.sroa.2.0, %41, !dbg !4867
  store float %mul175, float* %arrayidx174, align 4, !dbg !4867, !tbaa !2644
  %Depth176 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 0, !dbg !4868
  %42 = load double* %Depth176, align 8, !dbg !4868, !tbaa !2552
  %43 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !4868, !tbaa !2552
  %add177 = fadd double %42, %43, !dbg !4868
  store double %add177, double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !4868, !tbaa !2552
  %44 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4869, !tbaa !2301
  %cmp178 = icmp slt i32 %44, 2, !dbg !4869
  %45 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4869, !tbaa !2301
  %tobool180 = icmp ne i32 %45, 0, !dbg !4869
  %or.cond832 = or i1 %cmp178, %tobool180, !dbg !4869
  br i1 %or.cond832, label %if.end194, label %land.lhs.true181, !dbg !4869

land.lhs.true181:                                 ; preds = %if.end166
  %46 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !4869, !tbaa !2295
  %Flags = getelementptr inbounds %"struct.pov::Object_Struct"* %46, i64 0, i32 13, !dbg !4869
  %47 = load i32* %Flags, align 4, !dbg !4869, !tbaa !2301
  %and184 = and i32 %47, 33554432, !dbg !4869
  %tobool185 = icmp eq i32 %and184, 0, !dbg !4869
  br i1 %tobool185, label %land.lhs.true186, label %if.end194, !dbg !4869

land.lhs.true186:                                 ; preds = %land.lhs.true181
  %call188 = call zeroext i1 @_ZN3pov24Check_Photon_Light_GroupEPNS_13Object_StructE(%"struct.pov::Object_Struct"* %46) #7, !dbg !4870
  br i1 %call188, label %if.then189, label %if.end194, !dbg !4870

if.then189:                                       ; preds = %land.lhs.true186
  %arraydecay193 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 0, !dbg !4871
  call void @_ZN3pov16addSurfacePhotonEPdS0_PfS0_(double* %arraydecay12, double* %arraydecay193, float* %LightCol, double* %Raw_Normal) #7, !dbg !4871
  br label %if.end194, !dbg !4873

if.end194:                                        ; preds = %land.lhs.true181, %if.end166, %if.then189, %land.lhs.true186
  %48 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4874, !tbaa !2301
  %tobool195 = icmp eq i32 %48, 0, !dbg !4874
  br i1 %tobool195, label %for.cond205.preheader, label %if.then196, !dbg !4874

if.then196:                                       ; preds = %if.end194
  %49 = bitcast %"struct.pov::Ray_Struct"* %NRay to i8*, !dbg !4875
  call void @llvm.lifetime.start(i64 856, i8* %49) #6, !dbg !4875
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Ray_Struct"* %NRay}, metadata !1845), !dbg !4875
  call void @_ZN3pov19Copy_Ray_ContainersEPNS_10Ray_StructES1_(%"struct.pov::Ray_Struct"* %NRay, %"struct.pov::Ray_Struct"* %Ray) #7, !dbg !4876
  %arraydecay198 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 0, i64 0, !dbg !4877
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay198}, i64 0, metadata !4878), !dbg !4879
  tail call void @llvm.dbg.value(metadata !{double* %IPoint}, i64 0, metadata !4880), !dbg !4879
  %50 = load double* %IPoint, align 8, !dbg !4881, !tbaa !2552
  store double %50, double* %arraydecay198, align 8, !dbg !4881, !tbaa !2552
  %arrayidx2.i1079 = getelementptr inbounds double* %IPoint, i64 1, !dbg !4882
  %51 = load double* %arrayidx2.i1079, align 8, !dbg !4882, !tbaa !2552
  %arrayidx3.i1080 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 0, i64 1, !dbg !4882
  store double %51, double* %arrayidx3.i1080, align 8, !dbg !4882, !tbaa !2552
  %arrayidx4.i1081 = getelementptr inbounds double* %IPoint, i64 2, !dbg !4883
  %52 = load double* %arrayidx4.i1081, align 8, !dbg !4883, !tbaa !2552
  %arrayidx5.i1082 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 0, i64 2, !dbg !4883
  store double %52, double* %arrayidx5.i1082, align 8, !dbg !4883, !tbaa !2552
  %arraydecay199 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 1, i64 0, !dbg !4884
  %arraydecay201 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !4884
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay199}, i64 0, metadata !4885), !dbg !4886
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay201}, i64 0, metadata !4887), !dbg !4886
  %53 = load double* %arraydecay201, align 8, !dbg !4888, !tbaa !2552
  store double %53, double* %arraydecay199, align 8, !dbg !4888, !tbaa !2552
  %arrayidx2.i1083 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !4889
  %54 = load double* %arrayidx2.i1083, align 8, !dbg !4889, !tbaa !2552
  %arrayidx3.i1084 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 1, i64 1, !dbg !4889
  store double %54, double* %arrayidx3.i1084, align 8, !dbg !4889, !tbaa !2552
  %arrayidx4.i1085 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !4890
  %55 = load double* %arrayidx4.i1085, align 8, !dbg !4890, !tbaa !2552
  %arrayidx5.i1086 = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 1, i64 2, !dbg !4890
  store double %55, double* %arrayidx5.i1086, align 8, !dbg !4890, !tbaa !2552
  %56 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4891, !tbaa !2301
  %inc202 = add nsw i32 %56, 1, !dbg !4891
  store i32 %inc202, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4891, !tbaa !2301
  %call203 = call double @_ZN3pov5TraceEPNS_10Ray_StructEPfd(%"struct.pov::Ray_Struct"* %NRay, float* %LightCol, double %Weight) #7, !dbg !4892
  %57 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4893, !tbaa !2301
  %dec = add nsw i32 %57, -1, !dbg !4893
  store i32 %dec, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4893, !tbaa !2301
  call void @llvm.lifetime.end(i64 856, i8* %49) #6, !dbg !4894
  br label %for.cond205.preheader, !dbg !4894

for.cond205.preheader:                            ; preds = %if.end194, %if.then196
  %cmp2061300 = icmp ne %"struct.pov::Texture_Struct"* %Texture, null, !dbg !4895
  %58 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !4895, !tbaa !2552
  %cmp2071301 = fcmp olt double %58, 1.000000e+00, !dbg !4895
  %or.cond1302 = and i1 %cmp2061300, %cmp2071301, !dbg !4895
  br i1 %or.cond1302, label %for.body208.lr.ph, label %for.end477, !dbg !4895

for.body208.lr.ph:                                ; preds = %for.cond205.preheader
  %arraydecay209 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 0, !dbg !4896
  %arrayidx2.i1087 = getelementptr inbounds double* %Raw_Normal, i64 1, !dbg !4897
  %arrayidx3.i1088 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 1, !dbg !4897
  %arrayidx4.i1089 = getelementptr inbounds double* %Raw_Normal, i64 2, !dbg !4898
  %arrayidx5.i1090 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 2, !dbg !4898
  %arraydecay266 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 0, !dbg !4899
  %arrayidx3.i1101 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 1, !dbg !4901
  %arrayidx5.i1103 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 2, !dbg !4902
  %arraydecay270 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 0, !dbg !4903
  %arrayidx272 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 3, !dbg !4904
  %arrayidx273 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 4, !dbg !4904
  %arrayidx284 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 1, !dbg !4905
  %arrayidx287 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 2, !dbg !4906
  %arraydecay308 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !4907
  %arrayidx2.i1115 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !4908
  %arrayidx5.i1118 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !4908
  br label %for.body208, !dbg !4895

for.body208:                                      ; preds = %if.end456.for.body208_crit_edge, %for.body208.lr.ph
  %59 = phi double [ undef, %for.body208.lr.ph ], [ %95, %if.end456.for.body208_crit_edge ]
  %60 = phi double [ undef, %for.body208.lr.ph ], [ %96, %if.end456.for.body208_crit_edge ]
  %61 = phi double [ undef, %for.body208.lr.ph ], [ %97, %if.end456.for.body208_crit_edge ]
  %indvars.iv1329 = phi i64 [ 0, %for.body208.lr.ph ], [ %indvars.iv.next1330, %if.end456.for.body208_crit_edge ]
  %layer_number.01311 = phi i32 [ 1, %for.body208.lr.ph ], [ %phitmp, %if.end456.for.body208_crit_edge ]
  %Trans.01310 = phi double [ 1.000000e+00, %for.body208.lr.ph ], [ %.sroa.speculated1172, %if.end456.for.body208_crit_edge ]
  %Layer.01309 = phi %"struct.pov::Texture_Struct"* [ %Texture, %for.body208.lr.ph ], [ %139, %if.end456.for.body208_crit_edge ]
  %ResCol.sroa.0.0.load120012571308 = phi float [ 0.000000e+00, %for.body208.lr.ph ], [ %add.i1107, %if.end456.for.body208_crit_edge ]
  %ResCol.sroa.1.4.load120312591307 = phi float [ 0.000000e+00, %for.body208.lr.ph ], [ %add5.i, %if.end456.for.body208_crit_edge ]
  %ResCol.sroa.2.8.load120612611306 = phi float [ 0.000000e+00, %for.body208.lr.ph ], [ %add9.i, %if.end456.for.body208_crit_edge ]
  %FilCol.sroa.0.0.load121512641305 = phi float [ 1.000000e+00, %for.body208.lr.ph ], [ %FilCol.sroa.0.0.load12151263, %if.end456.for.body208_crit_edge ]
  %FilCol.sroa.2.0.load124312671304 = phi float [ 1.000000e+00, %for.body208.lr.ph ], [ %FilCol.sroa.2.0.load12431266, %if.end456.for.body208_crit_edge ]
  %FilCol.sroa.1.0.load125112701303 = phi float [ 1.000000e+00, %for.body208.lr.ph ], [ %FilCol.sroa.1.0.load12511269, %if.end456.for.body208_crit_edge ]
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4909), !dbg !4910
  tail call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !4911), !dbg !4910
  %62 = load double* %Raw_Normal, align 8, !dbg !4912, !tbaa !2552
  store double %62, double* %arraydecay209, align 16, !dbg !4912, !tbaa !2552
  %63 = load double* %arrayidx2.i1087, align 8, !dbg !4897, !tbaa !2552
  store double %63, double* %arrayidx3.i1088, align 8, !dbg !4897, !tbaa !2552
  %64 = load double* %arrayidx4.i1089, align 8, !dbg !4898, !tbaa !2552
  store double %64, double* %arrayidx5.i1090, align 16, !dbg !4898, !tbaa !2552
  %65 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !4913, !tbaa !2301
  %and211 = and i32 %65, 64, !dbg !4913
  %tobool212 = icmp eq i32 %and211, 0, !dbg !4913
  br i1 %tobool212, label %if.end263, label %land.lhs.true213, !dbg !4913

land.lhs.true213:                                 ; preds = %for.body208
  %Tnormal = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01309, i64 0, i32 13, !dbg !4913
  %66 = load %"struct.pov::Tnormal_Struct"** %Tnormal, align 8, !dbg !4913, !tbaa !2295
  %cmp214 = icmp eq %"struct.pov::Tnormal_Struct"* %66, null, !dbg !4913
  br i1 %cmp214, label %if.end263, label %if.then215, !dbg !4913

if.then215:                                       ; preds = %land.lhs.true213
  %67 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !4914, !tbaa !2301
  %cmp216 = icmp sgt i32 %67, 310, !dbg !4914
  br i1 %cmp216, label %for.cond218.preheader, label %if.else259, !dbg !4914

for.cond218.preheader:                            ; preds = %if.then215
  %68 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !4916, !tbaa !2301
  %cmp2191294 = icmp sgt i32 %68, 0, !dbg !4916
  br i1 %cmp2191294, label %for.body220, label %for.end232, !dbg !4916

for.body220:                                      ; preds = %for.cond218.preheader, %for.body220
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.body220 ], [ 0, %for.cond218.preheader ]
  %69 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !4919, !tbaa !2295
  %arrayidx224 = getelementptr inbounds %"struct.pov::Texture_Struct"** %69, i64 %indvars.iv, !dbg !4919
  %70 = load %"struct.pov::Texture_Struct"** %arrayidx224, align 8, !dbg !4919, !tbaa !2295
  %71 = bitcast %"struct.pov::Texture_Struct"* %70 to %"struct.pov::Pattern_Struct"*, !dbg !4919
  %Flags227 = getelementptr inbounds %"struct.pov::Texture_Struct"* %70, i64 0, i32 2, !dbg !4919
  %72 = load i16* %Flags227, align 2, !dbg !4919, !tbaa !2755
  %conv228 = zext i16 %72 to i32, !dbg !4919
  %and229 = and i32 %conv228, 8, !dbg !4919
  call void @_ZN3pov11Warp_NormalEPdS0_PNS_14Pattern_StructEi(double* %arraydecay209, double* %arraydecay209, %"struct.pov::Pattern_Struct"* %71, i32 %and229) #7, !dbg !4919
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !4916
  %73 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !4916, !tbaa !2301
  %74 = trunc i64 %indvars.iv.next to i32, !dbg !4916
  %cmp219 = icmp slt i32 %74, %73, !dbg !4916
  br i1 %cmp219, label %for.body220, label %for.cond218.for.end232_crit_edge, !dbg !4916

for.cond218.for.end232_crit_edge:                 ; preds = %for.body220
  %.pre = load %"struct.pov::Tnormal_Struct"** %Tnormal, align 8, !dbg !4920, !tbaa !2295
  br label %for.end232, !dbg !4916

for.end232:                                       ; preds = %for.cond218.for.end232_crit_edge, %for.cond218.preheader
  %75 = phi %"struct.pov::Tnormal_Struct"* [ %.pre, %for.cond218.for.end232_crit_edge ], [ %66, %for.cond218.preheader ]
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %arraydecay209, %"struct.pov::Tnormal_Struct"* %75, double* %IPoint, %"struct.pov::istk_entry"* %Intersection) #7, !dbg !4920
  %76 = load %"struct.pov::Tnormal_Struct"** %Tnormal, align 8, !dbg !4921, !tbaa !2295
  %Flags236 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %76, i64 0, i32 2, !dbg !4921
  %77 = load i16* %Flags236, align 2, !dbg !4921, !tbaa !2755
  %and238 = and i16 %77, 8, !dbg !4921
  %tobool239 = icmp eq i16 %and238, 0, !dbg !4921
  br i1 %tobool239, label %if.end242, label %if.then240, !dbg !4921

if.then240:                                       ; preds = %for.end232
  call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4922) #6, !dbg !4924
  call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4925) #6, !dbg !4927
  %78 = load double* %arraydecay209, align 16, !dbg !4928, !tbaa !2552
  %mul.i.i1091 = fmul double %78, %78, !dbg !4928
  %79 = load double* %arrayidx3.i1088, align 8, !dbg !4928, !tbaa !2552
  %mul4.i.i1093 = fmul double %79, %79, !dbg !4928
  %add.i.i1094 = fadd double %mul.i.i1091, %mul4.i.i1093, !dbg !4928
  %80 = load double* %arrayidx5.i1090, align 16, !dbg !4928, !tbaa !2552
  %mul7.i.i1096 = fmul double %80, %80, !dbg !4928
  %add8.i.i1097 = fadd double %add.i.i1094, %mul7.i.i1096, !dbg !4928
  %call.i.i1098 = call double @sqrt(double %add8.i.i1097) #8, !dbg !4928
  call void @llvm.dbg.value(metadata !{double %call.i.i1098}, i64 0, metadata !4929) #6, !dbg !4928
  call void @llvm.dbg.value(metadata !{double %call.i.i1098}, i64 0, metadata !4930) #6, !dbg !4927
  call void @llvm.dbg.value(metadata !{double %call.i.i1098}, i64 0, metadata !4931) #6, !dbg !4932
  call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4933) #6, !dbg !4934
  call void @llvm.dbg.value(metadata !{double %call.i.i1098}, i64 0, metadata !4935) #6, !dbg !4934
  %div.i.i1099 = fdiv double 1.000000e+00, %call.i.i1098, !dbg !4936
  call void @llvm.dbg.value(metadata !{double %div.i.i1099}, i64 0, metadata !4937) #6, !dbg !4936
  %81 = load double* %arraydecay209, align 16, !dbg !4938, !tbaa !2552
  %mul.i2.i = fmul double %div.i.i1099, %81, !dbg !4938
  store double %mul.i2.i, double* %arraydecay209, align 16, !dbg !4938, !tbaa !2552
  %82 = load double* %arrayidx3.i1088, align 8, !dbg !4939, !tbaa !2552
  %mul2.i.i = fmul double %div.i.i1099, %82, !dbg !4939
  store double %mul2.i.i, double* %arrayidx3.i1088, align 8, !dbg !4939, !tbaa !2552
  %83 = load double* %arrayidx5.i1090, align 16, !dbg !4940, !tbaa !2552
  %mul4.i3.i = fmul double %div.i.i1099, %83, !dbg !4940
  store double %mul4.i3.i, double* %arrayidx5.i1090, align 16, !dbg !4940, !tbaa !2552
  br label %if.end242, !dbg !4923

if.end242:                                        ; preds = %for.end232, %if.then240
  %84 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !4941, !tbaa !2301
  %cmp2451297 = icmp sgt i32 %84, 0, !dbg !4941
  br i1 %cmp2451297, label %for.body246.lr.ph, label %if.end263, !dbg !4941

for.body246.lr.ph:                                ; preds = %if.end242
  %85 = sext i32 %84 to i64
  br label %for.body246, !dbg !4941

for.body246:                                      ; preds = %for.body246.lr.ph, %for.body246
  %indvars.iv1327 = phi i64 [ %85, %for.body246.lr.ph ], [ %indvars.iv.next1328, %for.body246 ]
  %indvars.iv.next1328 = add i64 %indvars.iv1327, -1, !dbg !4941
  %86 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !4943, !tbaa !2295
  %arrayidx250 = getelementptr inbounds %"struct.pov::Texture_Struct"** %86, i64 %indvars.iv.next1328, !dbg !4943
  %87 = load %"struct.pov::Texture_Struct"** %arrayidx250, align 8, !dbg !4943, !tbaa !2295
  %88 = bitcast %"struct.pov::Texture_Struct"* %87 to %"struct.pov::Pattern_Struct"*, !dbg !4943
  %Flags253 = getelementptr inbounds %"struct.pov::Texture_Struct"* %87, i64 0, i32 2, !dbg !4943
  %89 = load i16* %Flags253, align 2, !dbg !4943, !tbaa !2755
  %conv254 = zext i16 %89 to i32, !dbg !4943
  %and255 = and i32 %conv254, 8, !dbg !4943
  call void @_ZN3pov13UnWarp_NormalEPdS0_PNS_14Pattern_StructEi(double* %arraydecay209, double* %arraydecay209, %"struct.pov::Pattern_Struct"* %88, i32 %and255) #7, !dbg !4943
  %90 = trunc i64 %indvars.iv.next1328 to i32, !dbg !4941
  %cmp245 = icmp sgt i32 %90, 0, !dbg !4941
  br i1 %cmp245, label %for.body246, label %if.end263, !dbg !4941

if.else259:                                       ; preds = %if.then215
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %arraydecay209, %"struct.pov::Tnormal_Struct"* %66, double* %IPoint, %"struct.pov::istk_entry"* %Intersection) #7, !dbg !4944
  br label %if.end263

if.end263:                                        ; preds = %if.end242, %for.body246, %land.lhs.true213, %for.body208, %if.else259
  %91 = trunc i64 %indvars.iv1329 to i32, !dbg !4945
  %tobool264 = icmp eq i32 %91, 0, !dbg !4945
  br i1 %tobool264, label %if.then265, label %if.end268, !dbg !4945

if.then265:                                       ; preds = %if.end263
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay266}, i64 0, metadata !4946), !dbg !4947
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4948), !dbg !4947
  %92 = load double* %arraydecay209, align 16, !dbg !4949, !tbaa !2552
  store double %92, double* %arraydecay266, align 16, !dbg !4949, !tbaa !2552
  %93 = load double* %arrayidx3.i1088, align 8, !dbg !4901, !tbaa !2552
  store double %93, double* %arrayidx3.i1101, align 8, !dbg !4901, !tbaa !2552
  %94 = load double* %arrayidx5.i1090, align 16, !dbg !4902, !tbaa !2552
  store double %94, double* %arrayidx5.i1103, align 16, !dbg !4902, !tbaa !2552
  br label %if.end268, !dbg !4950

if.end268:                                        ; preds = %if.end263, %if.then265
  %95 = phi double [ %59, %if.end263 ], [ %94, %if.then265 ]
  %96 = phi double [ %60, %if.end263 ], [ %93, %if.then265 ]
  %97 = phi double [ %61, %if.end263 ], [ %92, %if.then265 ]
  %mul269 = fmul double %Trans.01310, %Weight, !dbg !4951
  call void @llvm.dbg.value(metadata !{double %mul269}, i64 0, metadata !1811), !dbg !4951
  %Pigment = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01309, i64 0, i32 12, !dbg !4903
  %98 = load %"struct.pov::Pigment_Struct"** %Pigment, align 8, !dbg !4903, !tbaa !2295
  %call271 = call i32 @_ZN3pov15Compute_PigmentEPfPNS_14Pigment_StructEPdPNS_10istk_entryE(float* %arraydecay270, %"struct.pov::Pigment_Struct"* %98, double* %IPoint, %"struct.pov::istk_entry"* %Intersection) #7, !dbg !4903
  call void @llvm.dbg.value(metadata !{i32 %call271}, i64 0, metadata !1808), !dbg !4903
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !4952), !dbg !4953
  %99 = load float* %arrayidx272, align 4, !dbg !4904, !tbaa !2644
  %100 = load float* %arrayidx273, align 16, !dbg !4904, !tbaa !2644
  %add274 = fadd float %99, %100, !dbg !4904
  %conv275 = fpext float %add274 to double, !dbg !4904
  call void @llvm.dbg.value(metadata !{double %conv275}, i64 0, metadata !4954), !dbg !4953
  %cmp.i1104 = fcmp olt float %add274, 1.000000e+00, !dbg !4955
  %.sroa.speculated1193 = select i1 %cmp.i1104, double %conv275, double 1.000000e+00, !dbg !4904
  %sub278 = fsub double 1.000000e+00, %.sroa.speculated1193, !dbg !4904
  %mul279 = fmul double %Trans.01310, %sub278, !dbg !4904
  call void @llvm.dbg.value(metadata !{double %mul279}, i64 0, metadata !1813), !dbg !4904
  %101 = load float* %arraydecay270, align 16, !dbg !4956, !tbaa !2644
  %mul282 = fmul float %FilCol.sroa.0.0.load121512641305, %101, !dbg !4956
  store float %mul282, float* %arraydecay270, align 16, !dbg !4956, !tbaa !2644
  %102 = load float* %arrayidx284, align 4, !dbg !4905, !tbaa !2644
  %mul285 = fmul float %FilCol.sroa.1.0.load125112701303, %102, !dbg !4905
  store float %mul285, float* %arrayidx284, align 4, !dbg !4905, !tbaa !2644
  %103 = load float* %arrayidx287, align 8, !dbg !4906, !tbaa !2644
  %mul288 = fmul float %FilCol.sroa.2.0.load124312671304, %103, !dbg !4906
  store float %mul288, float* %arrayidx287, align 8, !dbg !4906, !tbaa !2644
  %conv290 = fptrunc double %mul279 to float, !dbg !4957
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !4958), !dbg !4959
  tail call void @llvm.dbg.value(metadata !{float %conv290}, i64 0, metadata !4960), !dbg !4959
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay270}, i64 0, metadata !4961), !dbg !4959
  %mul.i1106 = fmul float %mul282, %conv290, !dbg !4962
  %add.i1107 = fadd float %ResCol.sroa.0.0.load120012571308, %mul.i1106, !dbg !4962
  %mul3.i = fmul float %mul285, %conv290, !dbg !4963
  %add5.i = fadd float %ResCol.sroa.1.4.load120312591307, %mul3.i, !dbg !4963
  %mul7.i = fmul float %mul288, %conv290, !dbg !4964
  %add9.i = fadd float %ResCol.sroa.2.8.load120612611306, %mul7.i, !dbg !4964
  %tobool292 = icmp eq i32 %call271, 0, !dbg !4965
  %cmp295 = icmp eq i32 %91, 100, !dbg !4966
  br i1 %cmp295, label %if.then296, label %if.end298, !dbg !4966

if.then296:                                       ; preds = %if.end268
  %call297 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([25 x i8]* @.str12, i64 0, i64 0)) #7, !dbg !4967
  br label %if.end298, !dbg !4969

if.end298:                                        ; preds = %if.then296, %if.end268
  %Finish = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01309, i64 0, i32 14, !dbg !4970
  %104 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !4970, !tbaa !2295
  %Reflect_Exp = getelementptr inbounds %"struct.pov::Finish_Struct"* %104, i64 0, i32 13, !dbg !4970
  %105 = load float* %Reflect_Exp, align 4, !dbg !4970, !tbaa !2644
  %arrayidx300 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 5, i64 %indvars.iv1329, !dbg !4970
  store float %105, float* %arrayidx300, align 4, !dbg !4970, !tbaa !2644
  %arrayidx302 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 2, i64 %indvars.iv1329, !dbg !4971
  store double %mul269, double* %arrayidx302, align 8, !dbg !4971, !tbaa !2552
  %arraydecay305 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1329, i64 0, !dbg !4972
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay305}, i64 0, metadata !4973), !dbg !4974
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4975), !dbg !4974
  %106 = load double* %arraydecay209, align 16, !dbg !4976, !tbaa !2552
  store double %106, double* %arraydecay305, align 8, !dbg !4976, !tbaa !2552
  %107 = load double* %arrayidx3.i1088, align 8, !dbg !4977, !tbaa !2552
  %arrayidx3.i1111 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1329, i64 1, !dbg !4977
  store double %107, double* %arrayidx3.i1111, align 8, !dbg !4977, !tbaa !2552
  %108 = load double* %arrayidx5.i1090, align 16, !dbg !4978, !tbaa !2552
  %arrayidx5.i1113 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1329, i64 2, !dbg !4978
  store double %108, double* %arrayidx5.i1113, align 8, !dbg !4978, !tbaa !2552
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay308}, i64 0, metadata !4979), !dbg !4980
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay209}, i64 0, metadata !4981), !dbg !4980
  %109 = load double* %arraydecay308, align 8, !dbg !4908, !tbaa !2552
  %110 = load double* %arraydecay209, align 16, !dbg !4908, !tbaa !2552
  %mul.i1114 = fmul double %109, %110, !dbg !4908
  %111 = load double* %arrayidx2.i1115, align 8, !dbg !4908, !tbaa !2552
  %112 = load double* %arrayidx3.i1088, align 8, !dbg !4908, !tbaa !2552
  %mul4.i = fmul double %111, %112, !dbg !4908
  %add.i1117 = fadd double %mul.i1114, %mul4.i, !dbg !4908
  %113 = load double* %arrayidx5.i1118, align 8, !dbg !4908, !tbaa !2552
  %114 = load double* %arrayidx5.i1090, align 16, !dbg !4908, !tbaa !2552
  %mul7.i1120 = fmul double %113, %114, !dbg !4908
  %add8.i = fadd double %add.i1117, %mul7.i1120, !dbg !4908
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1838), !dbg !4908
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !4982), !dbg !4980
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1838), !dbg !4983
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1838), !dbg !4984
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1838), !dbg !4986
  %mul310 = fmul double %add8.i, -1.000000e+00, !dbg !4983
  call void @llvm.dbg.value(metadata !{double %mul310}, i64 0, metadata !1838), !dbg !4983
  call void @llvm.dbg.value(metadata !{double %mul310}, i64 0, metadata !4982), !dbg !4980
  call void @llvm.dbg.value(metadata !{double %mul310}, i64 0, metadata !1838), !dbg !4983
  call void @llvm.dbg.value(metadata !{double %mul310}, i64 0, metadata !1838), !dbg !4984
  call void @llvm.dbg.value(metadata !{double %mul310}, i64 0, metadata !1838), !dbg !4986
  %115 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !4987, !tbaa !2295
  %Interior312 = getelementptr inbounds %"struct.pov::Object_Struct"* %115, i64 0, i32 5, !dbg !4987
  %116 = load %"struct.pov::Interior_Struct"** %Interior312, align 8, !dbg !4987, !tbaa !2295
  %tobool313 = icmp eq %"struct.pov::Interior_Struct"* %116, null, !dbg !4987
  %Reflection_Type = getelementptr inbounds %"struct.pov::Finish_Struct"* %104, i64 0, i32 20, !dbg !4987
  %117 = load i32* %Reflection_Type, align 4, !dbg !4987, !tbaa !2301
  %cmp315 = icmp eq i32 %117, 1, !dbg !4987
  %or.cond1338 = and i1 %tobool313, %cmp315, !dbg !4987
  br i1 %or.cond1338, label %if.else332, label %if.then316, !dbg !4987

if.then316:                                       ; preds = %if.end298
  %arraydecay321 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 0, !dbg !4984
  %arraydecay323 = getelementptr inbounds %"struct.pov::Finish_Struct"* %104, i64 0, i32 17, i64 0, !dbg !4984
  %arraydecay325 = getelementptr inbounds %"struct.pov::Finish_Struct"* %104, i64 0, i32 18, i64 0, !dbg !4984
  %Reflection_Falloff = getelementptr inbounds %"struct.pov::Finish_Struct"* %104, i64 0, i32 19, !dbg !4984
  %118 = load float* %Reflection_Falloff, align 4, !dbg !4984, !tbaa !2644
  %conv329 = fpext float %118 to double, !dbg !4984
  call fastcc void @_ZN3povL22determine_reflectivityEPdPfS1_S1_iddPNS_10Ray_StructEPNS_15Interior_StructE(double* %arrayidx302, float* %arraydecay321, float* %arraydecay323, float* %arraydecay325, i32 %117, double %conv329, double %mul310, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Interior_Struct"* %116) #7, !dbg !4984
  br label %if.end334, !dbg !4988

if.else332:                                       ; preds = %if.end298
  %call333 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([41 x i8]* @.str13, i64 0, i64 0)) #7, !dbg !4989
  br label %if.end334

if.end334:                                        ; preds = %if.else332, %if.then316
  %119 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !4991, !tbaa !2295
  %Reflect_Metallic = getelementptr inbounds %"struct.pov::Finish_Struct"* %119, i64 0, i32 21, !dbg !4991
  %120 = load float* %Reflect_Metallic, align 4, !dbg !4991, !tbaa !2644
  %cmp337 = fcmp une float %120, 0.000000e+00, !dbg !4991
  br i1 %cmp337, label %if.then338, label %if.end392, !dbg !4991

if.then338:                                       ; preds = %if.end334
  %conv336 = fpext float %120 to double, !dbg !4991
  call void @llvm.dbg.value(metadata !{double %conv336}, i64 0, metadata !1847), !dbg !4992
  %call342 = call double @acos(double %mul310) #8, !dbg !4986
  %call343 = call double @fabs(double %call342) #9, !dbg !4986
  %div344 = fdiv double %call343, 0x3FF921FB54442D18, !dbg !4986
  call void @llvm.dbg.value(metadata !{double %div344}, i64 0, metadata !1851), !dbg !4986
  %sub345 = fadd double %div344, -1.120000e+00, !dbg !4993
  tail call void @llvm.dbg.value(metadata !{double %sub345}, i64 0, metadata !4994), !dbg !4995
  %mul.i1121 = fmul double %sub345, %sub345, !dbg !4996
  %div347 = fdiv double 0x3F8DD56BD7BF6F16, %mul.i1121, !dbg !4993
  %sub348 = fadd double %div347, 0xBF87C88174C5E0DC, !dbg !4993
  call void @llvm.dbg.value(metadata !{double %sub348}, i64 0, metadata !1852), !dbg !4993
  call void @llvm.dbg.value(metadata !{double %sub348}, i64 0, metadata !4997), !dbg !4999
  call void @llvm.dbg.value(metadata !{double %sub348}, i64 0, metadata !1852), !dbg !5000
  call void @llvm.dbg.value(metadata !{double %sub348}, i64 0, metadata !1852), !dbg !5001
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5002), !dbg !5003
  %cmp.i1122 = fcmp ogt double %sub348, 0.000000e+00, !dbg !5004
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !5005), !dbg !5003
  %.sroa.speculated1187 = select i1 %cmp.i1122, double %sub348, double 0.000000e+00, !dbg !5006
  %cmp.i1124 = fcmp olt double %.sroa.speculated1187, 1.000000e+00, !dbg !5006
  %.sroa.speculated1184 = select i1 %cmp.i1124, double %.sroa.speculated1187, double 1.000000e+00, !dbg !4998
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1184}, i64 0, metadata !1852), !dbg !4998
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1184}, i64 0, metadata !4997), !dbg !4999
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1184}, i64 0, metadata !1852), !dbg !5000
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1184}, i64 0, metadata !1852), !dbg !5001
  %sub353 = fsub double 1.000000e+00, %.sroa.speculated1184, !dbg !5007
  %mul354 = fmul double %conv336, %sub353, !dbg !5007
  %121 = load float* %arraydecay270, align 16, !dbg !5007, !tbaa !2644
  %conv356 = fpext float %121 to double, !dbg !5007
  %sub357 = fadd double %conv356, -1.000000e+00, !dbg !5007
  %mul358 = fmul double %sub357, %mul354, !dbg !5007
  %add359 = fadd double %mul358, 1.000000e+00, !dbg !5007
  %arrayidx362 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 0, !dbg !5007
  %122 = load float* %arrayidx362, align 4, !dbg !5007, !tbaa !2644
  %conv363 = fpext float %122 to double, !dbg !5007
  %mul364 = fmul double %conv363, %add359, !dbg !5007
  %conv365 = fptrunc double %mul364 to float, !dbg !5007
  store float %conv365, float* %arrayidx362, align 4, !dbg !5007, !tbaa !2644
  %123 = load float* %arrayidx284, align 4, !dbg !5000, !tbaa !2644
  %conv369 = fpext float %123 to double, !dbg !5000
  %sub370 = fadd double %conv369, -1.000000e+00, !dbg !5000
  %mul371 = fmul double %sub370, %mul354, !dbg !5000
  %add372 = fadd double %mul371, 1.000000e+00, !dbg !5000
  %arrayidx375 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 1, !dbg !5000
  %124 = load float* %arrayidx375, align 4, !dbg !5000, !tbaa !2644
  %conv376 = fpext float %124 to double, !dbg !5000
  %mul377 = fmul double %conv376, %add372, !dbg !5000
  %conv378 = fptrunc double %mul377 to float, !dbg !5000
  store float %conv378, float* %arrayidx375, align 4, !dbg !5000, !tbaa !2644
  %125 = load float* %arrayidx287, align 8, !dbg !5001, !tbaa !2644
  %conv382 = fpext float %125 to double, !dbg !5001
  %sub383 = fadd double %conv382, -1.000000e+00, !dbg !5001
  %mul384 = fmul double %mul354, %sub383, !dbg !5001
  %add385 = fadd double %mul384, 1.000000e+00, !dbg !5001
  %arrayidx388 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 2, !dbg !5001
  %126 = load float* %arrayidx388, align 4, !dbg !5001, !tbaa !2644
  %conv389 = fpext float %126 to double, !dbg !5001
  %mul390 = fmul double %conv389, %add385, !dbg !5001
  %conv391 = fptrunc double %mul390 to float, !dbg !5001
  store float %conv391, float* %arrayidx388, align 4, !dbg !5001, !tbaa !2644
  br label %if.end392, !dbg !5008

if.end392:                                        ; preds = %if.then338, %if.end334
  br i1 %tobool292, label %if.end456, label %if.then394, !dbg !5009

if.then394:                                       ; preds = %if.end392
  %127 = load float* %arraydecay270, align 16, !dbg !5010, !tbaa !2644
  %128 = load float* %arrayidx272, align 4, !dbg !5010, !tbaa !2644
  %mul397 = fmul float %127, %128, !dbg !5010
  %129 = load float* %arrayidx273, align 16, !dbg !5010, !tbaa !2644
  %add399 = fadd float %mul397, %129, !dbg !5010
  %mul401 = fmul float %FilCol.sroa.0.0.load121512641305, %add399, !dbg !5010
  %130 = load float* %arrayidx284, align 4, !dbg !5012, !tbaa !2644
  %mul404 = fmul float %128, %130, !dbg !5012
  %add406 = fadd float %129, %mul404, !dbg !5012
  %mul408 = fmul float %FilCol.sroa.1.0.load125112701303, %add406, !dbg !5012
  %131 = load float* %arrayidx287, align 8, !dbg !5013, !tbaa !2644
  %mul411 = fmul float %128, %131, !dbg !5013
  %add413 = fadd float %129, %mul411, !dbg !5013
  %mul415 = fmul float %FilCol.sroa.2.0.load124312671304, %add413, !dbg !5013
  %132 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5014, !tbaa !2295
  %Conserve_Energy = getelementptr inbounds %"struct.pov::Finish_Struct"* %132, i64 0, i32 22, !dbg !5014
  %133 = load i32* %Conserve_Energy, align 4, !dbg !5014, !tbaa !2301
  %tobool417 = icmp eq i32 %133, 0, !dbg !5014
  br i1 %tobool417, label %if.end456, label %if.then418, !dbg !5014

if.then418:                                       ; preds = %if.then394
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5015), !dbg !5018
  %arrayidx422 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 0, !dbg !5016
  %134 = load float* %arrayidx422, align 4, !dbg !5016, !tbaa !2644
  %conv423 = fpext float %134 to double, !dbg !5016
  %sub424 = fsub double 1.000000e+00, %conv423, !dbg !5016
  call void @llvm.dbg.value(metadata !{double %sub424}, i64 0, metadata !5019), !dbg !5018
  %cmp.i1126 = fcmp olt double %sub424, 1.000000e+00, !dbg !5020
  %.sroa.speculated1181 = select i1 %cmp.i1126, double %sub424, double 1.000000e+00, !dbg !5016
  %conv428 = fpext float %mul401 to double, !dbg !5016
  %mul429 = fmul double %conv428, %.sroa.speculated1181, !dbg !5016
  %conv430 = fptrunc double %mul429 to float, !dbg !5016
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5021), !dbg !5023
  %arrayidx434 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 1, !dbg !5022
  %135 = load float* %arrayidx434, align 4, !dbg !5022, !tbaa !2644
  %conv435 = fpext float %135 to double, !dbg !5022
  %sub436 = fsub double 1.000000e+00, %conv435, !dbg !5022
  call void @llvm.dbg.value(metadata !{double %sub436}, i64 0, metadata !5024), !dbg !5023
  %cmp.i1128 = fcmp olt double %sub436, 1.000000e+00, !dbg !5025
  %.sroa.speculated1178 = select i1 %cmp.i1128, double %sub436, double 1.000000e+00, !dbg !5022
  %conv440 = fpext float %mul408 to double, !dbg !5022
  %mul441 = fmul double %conv440, %.sroa.speculated1178, !dbg !5022
  %conv442 = fptrunc double %mul441 to float, !dbg !5022
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5026), !dbg !5028
  %arrayidx446 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1329, i64 2, !dbg !5027
  %136 = load float* %arrayidx446, align 4, !dbg !5027, !tbaa !2644
  %conv447 = fpext float %136 to double, !dbg !5027
  %sub448 = fsub double 1.000000e+00, %conv447, !dbg !5027
  call void @llvm.dbg.value(metadata !{double %sub448}, i64 0, metadata !5029), !dbg !5028
  %cmp.i1130 = fcmp olt double %sub448, 1.000000e+00, !dbg !5030
  %.sroa.speculated1175 = select i1 %cmp.i1130, double %sub448, double 1.000000e+00, !dbg !5027
  %conv452 = fpext float %mul415 to double, !dbg !5027
  %mul453 = fmul double %conv452, %.sroa.speculated1175, !dbg !5027
  %conv454 = fptrunc double %mul453 to float, !dbg !5027
  br label %if.end456, !dbg !5031

if.end456:                                        ; preds = %if.end392, %if.then394, %if.then418
  %FilCol.sroa.1.0.load12511269 = phi float [ %mul408, %if.then394 ], [ %conv442, %if.then418 ], [ %FilCol.sroa.1.0.load125112701303, %if.end392 ]
  %FilCol.sroa.2.0.load12431266 = phi float [ %mul415, %if.then394 ], [ %conv454, %if.then418 ], [ %FilCol.sroa.2.0.load124312671304, %if.end392 ]
  %FilCol.sroa.0.0.load12151263 = phi float [ %mul401, %if.then394 ], [ %conv430, %if.then418 ], [ %FilCol.sroa.0.0.load121512641305, %if.end392 ]
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5032), !dbg !5034
  %conv461 = fpext float %FilCol.sroa.0.0.load12151263 to double, !dbg !5033
  %mul462 = fmul double %conv461, 2.970000e-01, !dbg !5033
  %conv464 = fpext float %FilCol.sroa.1.0.load12511269 to double, !dbg !5033
  %mul465 = fmul double %conv464, 5.890000e-01, !dbg !5033
  %add466 = fadd double %mul465, %mul462, !dbg !5033
  %conv468 = fpext float %FilCol.sroa.2.0.load12431266 to double, !dbg !5033
  %mul469 = fmul double %conv468, 1.140000e-01, !dbg !5033
  %add470 = fadd double %mul469, %add466, !dbg !5033
  %call472 = call double @fabs(double %add470) #9, !dbg !5033
  call void @llvm.dbg.value(metadata !{double %call472}, i64 0, metadata !5035), !dbg !5034
  %cmp.i1132 = fcmp olt double %call472, 1.000000e+00, !dbg !5036
  %.sroa.speculated1172 = select i1 %cmp.i1132, double %call472, double 1.000000e+00, !dbg !5033
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1172}, i64 0, metadata !1814), !dbg !5033
  call void @llvm.dbg.value(metadata !{i32 %layer_number.01311}, i64 0, metadata !1806), !dbg !5037
  %Next = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01309, i64 0, i32 8, !dbg !5037
  %137 = load %"struct.pov::Pattern_Struct"** %Next, align 8, !dbg !5037, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Texture_Struct"* %139}, i64 0, metadata !1824), !dbg !5037
  %cmp206 = icmp ne %"struct.pov::Pattern_Struct"* %137, null, !dbg !4895
  %138 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !4895, !tbaa !2552
  %cmp207 = fcmp ogt double %.sroa.speculated1172, %138, !dbg !4895
  %or.cond = and i1 %cmp206, %cmp207, !dbg !4895
  br i1 %or.cond, label %if.end456.for.body208_crit_edge, label %for.end477, !dbg !4895

if.end456.for.body208_crit_edge:                  ; preds = %if.end456
  %139 = bitcast %"struct.pov::Pattern_Struct"* %137 to %"struct.pov::Texture_Struct"*, !dbg !5037
  %indvars.iv.next1330 = add i64 %indvars.iv1329, 1, !dbg !4895
  %phitmp = add i32 %layer_number.01311, 1, !dbg !4895
  br label %for.body208, !dbg !4895

for.end477:                                       ; preds = %if.end456, %for.cond205.preheader
  %140 = phi double [ undef, %for.cond205.preheader ], [ %95, %if.end456 ]
  %141 = phi double [ undef, %for.cond205.preheader ], [ %96, %if.end456 ]
  %142 = phi double [ undef, %for.cond205.preheader ], [ %97, %if.end456 ]
  %143 = phi double [ %58, %for.cond205.preheader ], [ %138, %if.end456 ]
  %layer_number.0.lcssa = phi i32 [ 0, %for.cond205.preheader ], [ %layer_number.01311, %if.end456 ]
  %Trans.0.lcssa = phi double [ 1.000000e+00, %for.cond205.preheader ], [ %.sroa.speculated1172, %if.end456 ]
  %ResCol.sroa.0.0.load12001257.lcssa = phi float [ 0.000000e+00, %for.cond205.preheader ], [ %add.i1107, %if.end456 ]
  %ResCol.sroa.1.4.load12031259.lcssa = phi float [ 0.000000e+00, %for.cond205.preheader ], [ %add5.i, %if.end456 ]
  %ResCol.sroa.2.8.load12061261.lcssa = phi float [ 0.000000e+00, %for.cond205.preheader ], [ %add9.i, %if.end456 ]
  %FilCol.sroa.0.0.load12151264.lcssa = phi float [ 1.000000e+00, %for.cond205.preheader ], [ %FilCol.sroa.0.0.load12151263, %if.end456 ]
  %FilCol.sroa.2.0.load12431267.lcssa = phi float [ 1.000000e+00, %for.cond205.preheader ], [ %FilCol.sroa.2.0.load12431266, %if.end456 ]
  %FilCol.sroa.1.0.load12511270.lcssa = phi float [ 1.000000e+00, %for.cond205.preheader ], [ %FilCol.sroa.1.0.load12511269, %if.end456 ]
  %144 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 18), align 8, !dbg !5038, !tbaa !2295
  %tobool478 = icmp eq %"struct.pov::Object_Struct"* %144, null, !dbg !5038
  br i1 %tobool478, label %if.else480, label %if.then590, !dbg !5038

if.else480:                                       ; preds = %for.end477
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !5039), !dbg !5042
  %conv483 = fpext float %ResCol.sroa.0.0.load12001257.lcssa to double, !dbg !5040
  %mul484 = fmul double %conv483, 2.970000e-01, !dbg !5040
  %conv486 = fpext float %ResCol.sroa.1.4.load12031259.lcssa to double, !dbg !5040
  %mul487 = fmul double %conv486, 5.890000e-01, !dbg !5040
  %add488 = fadd double %mul487, %mul484, !dbg !5040
  %conv490 = fpext float %ResCol.sroa.2.8.load12061261.lcssa to double, !dbg !5040
  %mul491 = fmul double %conv490, 1.140000e-01, !dbg !5040
  %add492 = fadd double %mul491, %add488, !dbg !5040
  %call493 = call double @fabs(double %add492) #9, !dbg !5040
  call void @llvm.dbg.value(metadata !{double %call493}, i64 0, metadata !5043), !dbg !5042
  %cmp.i1162 = fcmp one double %add492, 0.000000e+00, !dbg !5044
  %.sroa.speculated1169 = select i1 %cmp.i1162, double %call493, double 0.000000e+00, !dbg !5040
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1169}, i64 0, metadata !1831), !dbg !5040
  %Finish496 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Texture, i64 0, i32 14, !dbg !5045
  %145 = load %"struct.pov::Finish_Struct"** %Finish496, align 8, !dbg !5045, !tbaa !2295
  %tobool497 = icmp eq %"struct.pov::Finish_Struct"* %145, null, !dbg !5045
  br i1 %tobool497, label %if.end502, label %if.then498, !dbg !5045

if.then498:                                       ; preds = %if.else480
  %Diffuse = getelementptr inbounds %"struct.pov::Finish_Struct"* %145, i64 0, i32 0, !dbg !5046
  %146 = load float* %Diffuse, align 4, !dbg !5046, !tbaa !2644
  %conv500 = fpext float %146 to double, !dbg !5046
  %mul501 = fmul double %.sroa.speculated1169, %conv500, !dbg !5046
  call void @llvm.dbg.value(metadata !{double %mul501}, i64 0, metadata !1831), !dbg !5046
  br label %if.end502, !dbg !5046

if.end502:                                        ; preds = %if.else480, %if.then498
  %diffuseWeight.0 = phi double [ %mul501, %if.then498 ], [ %.sroa.speculated1169, %if.else480 ]
  call void @llvm.dbg.value(metadata !{double %Trans.0.lcssa}, i64 0, metadata !1830), !dbg !5047
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !5048), !dbg !5050
  %arrayidx505 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 0, i64 0, !dbg !5049
  %147 = load float* %arrayidx505, align 4, !dbg !5049, !tbaa !2644
  %conv506 = fpext float %147 to double, !dbg !5049
  %mul507 = fmul double %conv506, 2.970000e-01, !dbg !5049
  %arrayidx509 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 0, i64 1, !dbg !5049
  %148 = load float* %arrayidx509, align 4, !dbg !5049, !tbaa !2644
  %conv510 = fpext float %148 to double, !dbg !5049
  %mul511 = fmul double %conv510, 5.890000e-01, !dbg !5049
  %add512 = fadd double %mul507, %mul511, !dbg !5049
  %arrayidx514 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 0, i64 2, !dbg !5049
  %149 = load float* %arrayidx514, align 4, !dbg !5049, !tbaa !2644
  %conv515 = fpext float %149 to double, !dbg !5049
  %mul516 = fmul double %conv515, 1.140000e-01, !dbg !5049
  %add517 = fadd double %add512, %mul516, !dbg !5049
  %call518 = call double @fabs(double %add517) #9, !dbg !5049
  call void @llvm.dbg.value(metadata !{double %call518}, i64 0, metadata !5051), !dbg !5050
  %cmp.i1160 = fcmp one double %add517, 0.000000e+00, !dbg !5052
  %.sroa.speculated1166 = select i1 %cmp.i1160, double %call518, double 0.000000e+00, !dbg !5049
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1166}, i64 0, metadata !1829), !dbg !5049
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !5053), !dbg !5055
  %sub522 = fsub double 1.000000e+00, %diffuseWeight.0, !dbg !5054
  call void @llvm.dbg.value(metadata !{double %sub522}, i64 0, metadata !5056), !dbg !5055
  %cmp.i1158 = fcmp ogt double %sub522, 0.000000e+00, !dbg !5057
  %.sroa.speculated = select i1 %cmp.i1158, double %sub522, double 0.000000e+00, !dbg !5054
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated}, i64 0, metadata !1832), !dbg !5054
  %add525 = fadd double %Trans.0.lcssa, %.sroa.speculated1166, !dbg !5058
  %add526 = fadd double %diffuseWeight.0, %add525, !dbg !5058
  %add527 = fadd double %.sroa.speculated, %add526, !dbg !5058
  call void @llvm.dbg.value(metadata !{double %add527}, i64 0, metadata !1833), !dbg !5058
  %cmp530 = fcmp ogt double %add526, %143, !dbg !5059
  br i1 %cmp530, label %if.then531, label %if.end828, !dbg !5059

if.then531:                                       ; preds = %if.end502
  %div532 = fdiv double %diffuseWeight.0, %add527, !dbg !5060
  call void @llvm.dbg.value(metadata !{double %div532}, i64 0, metadata !1831), !dbg !5060
  %div533 = fdiv double %Trans.0.lcssa, %add527, !dbg !5062
  call void @llvm.dbg.value(metadata !{double %div533}, i64 0, metadata !1830), !dbg !5062
  %div534 = fdiv double %.sroa.speculated1166, %add527, !dbg !5063
  call void @llvm.dbg.value(metadata !{double %div534}, i64 0, metadata !1829), !dbg !5063
  %call536 = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !5064
  %conv537 = sitofp i32 %call536 to double, !dbg !5064
  %mul538 = fmul double %conv537, 0x3F0000200040021E, !dbg !5064
  call void @llvm.dbg.value(metadata !{double %mul538}, i64 0, metadata !1834), !dbg !5064
  %cmp539 = fcmp olt double %mul538, %div532, !dbg !5065
  br i1 %cmp539, label %if.then540, label %if.else544, !dbg !5065

if.then540:                                       ; preds = %if.then531
  %div542 = fdiv double 1.000000e+00, %div532, !dbg !5066
  %conv543 = fptrunc double %div542 to float, !dbg !5066
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5068), !dbg !5069
  tail call void @llvm.dbg.value(metadata !{float %conv543}, i64 0, metadata !5070), !dbg !5069
  %mul.i1153 = fmul float %ResCol.sroa.0.0.load12001257.lcssa, %conv543, !dbg !5071
  %mul2.i1155 = fmul float %ResCol.sroa.1.4.load12031259.lcssa, %conv543, !dbg !5072
  %mul4.i1157 = fmul float %ResCol.sroa.2.8.load12061261.lcssa, %conv543, !dbg !5073
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1826), !dbg !5074
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1828), !dbg !5075
  call void @llvm.dbg.value(metadata !2354, i64 0, metadata !1827), !dbg !5076
  store i32 0, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !5077, !tbaa !2301
  br label %if.end645.thread, !dbg !5078

if.else544:                                       ; preds = %if.then531
  %add545 = fadd double %div532, %div533, !dbg !5079
  %cmp546 = fcmp olt double %mul538, %add545, !dbg !5079
  br i1 %cmp546, label %if.then547, label %if.else551, !dbg !5079

if.then547:                                       ; preds = %if.else544
  %div549 = fdiv double 1.000000e+00, %div533, !dbg !5080
  %conv550 = fptrunc double %div549 to float, !dbg !5080
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5082), !dbg !5083
  tail call void @llvm.dbg.value(metadata !{float %conv550}, i64 0, metadata !5084), !dbg !5083
  %mul.i1148 = fmul float %FilCol.sroa.0.0.load12151264.lcssa, %conv550, !dbg !5085
  %mul2.i1150 = fmul float %FilCol.sroa.1.0.load12511270.lcssa, %conv550, !dbg !5086
  %mul4.i1152 = fmul float %FilCol.sroa.2.0.load12431267.lcssa, %conv550, !dbg !5087
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1826), !dbg !5088
  call void @llvm.dbg.value(metadata !2354, i64 0, metadata !1828), !dbg !5089
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1827), !dbg !5090
  store i32 1, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !5091, !tbaa !2301
  br label %if.then590, !dbg !5092

if.else551:                                       ; preds = %if.else544
  %add553 = fadd double %add545, %div534, !dbg !5093
  %cmp554 = fcmp olt double %mul538, %add553, !dbg !5093
  br i1 %cmp554, label %if.end645.thread1289, label %if.end645.thread, !dbg !5093

if.end645.thread1289:                             ; preds = %if.else551
  %div558 = fdiv double 1.000000e+00, %div534, !dbg !5094
  %conv559 = fptrunc double %div558 to float, !dbg !5094
  tail call void @llvm.dbg.value(metadata !{float* %arrayidx505}, i64 0, metadata !5096), !dbg !5097
  tail call void @llvm.dbg.value(metadata !{float %conv559}, i64 0, metadata !5098), !dbg !5097
  %150 = load float* %arrayidx505, align 4, !dbg !5099, !tbaa !2644
  %mul.i1144 = fmul float %150, %conv559, !dbg !5099
  store float %mul.i1144, float* %arrayidx505, align 4, !dbg !5099, !tbaa !2644
  %151 = load float* %arrayidx509, align 4, !dbg !5100, !tbaa !2644
  %mul2.i = fmul float %conv559, %151, !dbg !5100
  store float %mul2.i, float* %arrayidx509, align 4, !dbg !5100, !tbaa !2644
  %152 = load float* %arrayidx514, align 4, !dbg !5101, !tbaa !2644
  %mul4.i1147 = fmul float %conv559, %152, !dbg !5101
  store float %mul4.i1147, float* %arrayidx514, align 4, !dbg !5101, !tbaa !2644
  call void @llvm.dbg.value(metadata !2354, i64 0, metadata !1826), !dbg !5102
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1828), !dbg !5103
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1827), !dbg !5104
  store i32 1, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !5105, !tbaa !2301
  br label %if.then647, !dbg !5106

if.end645.thread:                                 ; preds = %if.then540, %if.else551
  %ResCol.sroa.2.8.load12061260 = phi float [ %mul4.i1157, %if.then540 ], [ %ResCol.sroa.2.8.load12061261.lcssa, %if.else551 ]
  %ResCol.sroa.1.4.load12031258 = phi float [ %mul2.i1155, %if.then540 ], [ %ResCol.sroa.1.4.load12031259.lcssa, %if.else551 ]
  %ResCol.sroa.0.0.load12001256 = phi float [ %mul.i1153, %if.then540 ], [ %ResCol.sroa.0.0.load12001257.lcssa, %if.else551 ]
  %arraydecay568 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 0, !dbg !5107
  %call569 = call double @_ZN3pov9spec_randEv() #7, !dbg !5107
  %mul570 = fmul double %call569, 0x41DFFFFFFFC00000, !dbg !5107
  %conv571 = fptosi double %mul570 to i32, !dbg !5107
  %rem = srem i32 %conv571, 400, !dbg !5107
  call void @_ZN3pov9ChooseRayEPNS_10Ray_StructEPdS1_S2_i(%"struct.pov::Ray_Struct"* %NewRay, double* %arraydecay568, %"struct.pov::Ray_Struct"* %Ray, double* %Raw_Normal, i32 %rem) #7, !dbg !5107
  %153 = load float* %LightCol, align 4, !dbg !5109, !tbaa !2644
  %mul574 = fmul float %ResCol.sroa.0.0.load12001256, %153, !dbg !5109
  %arrayidx575 = getelementptr inbounds [5 x float]* %CurLightCol, i64 0, i64 0, !dbg !5109
  store float %mul574, float* %arrayidx575, align 16, !dbg !5109, !tbaa !2644
  %154 = load float* %arrayidx171, align 4, !dbg !5110, !tbaa !2644
  %mul578 = fmul float %ResCol.sroa.1.4.load12031258, %154, !dbg !5110
  %arrayidx579 = getelementptr inbounds [5 x float]* %CurLightCol, i64 0, i64 1, !dbg !5110
  store float %mul578, float* %arrayidx579, align 4, !dbg !5110, !tbaa !2644
  %155 = load float* %arrayidx174, align 4, !dbg !5111, !tbaa !2644
  %mul582 = fmul float %ResCol.sroa.2.8.load12061260, %155, !dbg !5111
  %arrayidx583 = getelementptr inbounds [5 x float]* %CurLightCol, i64 0, i64 2, !dbg !5111
  store float %mul582, float* %arrayidx583, align 8, !dbg !5111, !tbaa !2644
  %156 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5112, !tbaa !2301
  %inc584 = add nsw i32 %156, 1, !dbg !5112
  store i32 %inc584, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5112, !tbaa !2301
  %call586 = call double @_ZN3pov5TraceEPNS_10Ray_StructEPfd(%"struct.pov::Ray_Struct"* %NewRay, float* %arrayidx575, double 1.000000e+00) #7, !dbg !5113
  %157 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5114, !tbaa !2301
  %dec587 = add nsw i32 %157, -1, !dbg !5114
  store i32 %dec587, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5114, !tbaa !2301
  br label %if.end828, !dbg !5106

if.then590:                                       ; preds = %for.end477, %if.then547
  %FilCol.sroa.1.0.load12511268.ph.ph = phi float [ %mul2.i1150, %if.then547 ], [ %FilCol.sroa.1.0.load12511270.lcssa, %for.end477 ]
  %FilCol.sroa.2.0.load12431265.ph.ph = phi float [ %mul4.i1152, %if.then547 ], [ %FilCol.sroa.2.0.load12431267.lcssa, %for.end477 ]
  %FilCol.sroa.0.0.load12151262.ph.ph = phi float [ %mul.i1148, %if.then547 ], [ %FilCol.sroa.0.0.load12151264.lcssa, %for.end477 ]
  %doReflection.0.ph.ph1281 = phi i32 [ 0, %if.then547 ], [ 1, %for.end477 ]
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1839), !dbg !5115
  %158 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !5117, !tbaa !2295
  %Flags592 = getelementptr inbounds %"struct.pov::Object_Struct"* %158, i64 0, i32 13, !dbg !5117
  %159 = load i32* %Flags592, align 4, !dbg !5117, !tbaa !2301
  %and594 = and i32 %159, 8388608, !dbg !5117
  %tobool595 = icmp eq i32 %and594, 0, !dbg !5117
  br i1 %tobool595, label %lor.lhs.false600, label %land.lhs.true596, !dbg !5117

land.lhs.true596:                                 ; preds = %if.then590
  %160 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !5117, !tbaa !2301
  %and598 = and i32 %160, 16777216, !dbg !5117
  %tobool599 = icmp eq i32 %and598, 0, !dbg !5117
  br i1 %tobool599, label %if.then612, label %lor.lhs.false600, !dbg !5117

lor.lhs.false600:                                 ; preds = %land.lhs.true596, %if.then590
  %and604 = and i32 %159, 16777216, !dbg !5117
  %tobool605 = icmp eq i32 %and604, 0, !dbg !5117
  br i1 %tobool605, label %land.lhs.true606, label %lor.lhs.false610, !dbg !5117

land.lhs.true606:                                 ; preds = %lor.lhs.false600
  %161 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !5117, !tbaa !2301
  %and608 = and i32 %161, 8388608, !dbg !5117
  %162 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !5117, !tbaa !2301
  %163 = or i32 %and608, %162, !dbg !5117
  %164 = icmp eq i32 %163, 0, !dbg !5117
  br i1 %164, label %if.end645, label %if.then612, !dbg !5117

lor.lhs.false610:                                 ; preds = %lor.lhs.false600
  %.old = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !5117, !tbaa !2301
  %tobool611.old = icmp eq i32 %.old, 0, !dbg !5117
  br i1 %tobool611.old, label %if.end645, label %if.then612, !dbg !5117

if.then612:                                       ; preds = %lor.lhs.false610, %land.lhs.true606, %land.lhs.true596
  %Interior614 = getelementptr inbounds %"struct.pov::Object_Struct"* %158, i64 0, i32 5, !dbg !5118
  %165 = load %"struct.pov::Interior_Struct"** %Interior614, align 8, !dbg !5118, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Interior_Struct"* %165}, i64 0, metadata !1823), !dbg !5118
  %cmp615 = icmp ne %"struct.pov::Interior_Struct"* %165, null, !dbg !5118
  %166 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !5118, !tbaa !2552
  %cmp617 = fcmp ogt double %Trans.0.lcssa, %166, !dbg !5118
  %or.cond1068 = and i1 %cmp615, %cmp617, !dbg !5118
  br i1 %or.cond1068, label %land.lhs.true618, label %if.end645, !dbg !5118

land.lhs.true618:                                 ; preds = %if.then612
  %167 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !5118, !tbaa !2301
  %and620 = and i32 %167, 16, !dbg !5118
  %tobool621 = icmp eq i32 %and620, 0, !dbg !5118
  br i1 %tobool621, label %if.end645, label %if.then622, !dbg !5118

if.then622:                                       ; preds = %land.lhs.true618
  %fabsf = call float @fabsf(float 1.000000e+00) #4, !dbg !5119
  %168 = fpext float %fabsf to double, !dbg !5119
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5121), !dbg !5122
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5123), !dbg !5122
  %cmp.i1142 = fcmp olt float %FilCol.sroa.1.0.load12511268.ph.ph, %FilCol.sroa.2.0.load12431265.ph.ph, !dbg !5124
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5121), !dbg !5122
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5123), !dbg !5122
  %.sroa.speculated1233 = select i1 %cmp.i1142, float %FilCol.sroa.2.0.load12431265.ph.ph, float %FilCol.sroa.1.0.load12511268.ph.ph, !dbg !5124
  %cmp.i1140 = fcmp olt float %FilCol.sroa.0.0.load12151262.ph.ph, %.sroa.speculated1233, !dbg !5124
  %.sroa.speculated1208 = select i1 %cmp.i1140, float %.sroa.speculated1233, float %FilCol.sroa.0.0.load12151262.ph.ph, !dbg !5119
  %conv631 = fpext float %.sroa.speculated1208 to double, !dbg !5119
  %mul632 = fmul double %conv631, %168, !dbg !5119
  call void @llvm.dbg.value(metadata !{double %mul632}, i64 0, metadata !1809), !dbg !5119
  call void @llvm.dbg.value(metadata !{double %mul632}, i64 0, metadata !5126), !dbg !5128
  %fabsf1064 = call float @fabsf(float 0.000000e+00) #4, !dbg !5129
  %169 = fpext float %fabsf1064 to double, !dbg !5129
  call void @llvm.dbg.value(metadata !{double %169}, i64 0, metadata !1810), !dbg !5129
  call void @llvm.dbg.value(metadata !{double %169}, i64 0, metadata !5130), !dbg !5128
  %cmp.i1138 = fcmp olt double %mul632, %169, !dbg !5131
  %.sroa.speculated1253 = select i1 %cmp.i1138, double %169, double %mul632, !dbg !5127
  %mul637 = fmul double %.sroa.speculated1253, %Weight, !dbg !5127
  call void @llvm.dbg.value(metadata !{double %mul637}, i64 0, metadata !1811), !dbg !5127
  tail call void @llvm.dbg.value(metadata !5132, i64 0, metadata !5133), !dbg !5135
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5136), !dbg !5135
  store float %FilCol.sroa.0.0.load12151262.ph.ph, float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 0), align 16, !dbg !5137, !tbaa !2644
  store float %FilCol.sroa.1.0.load12511268.ph.ph, float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 1), align 4, !dbg !5138, !tbaa !2644
  store float %FilCol.sroa.2.0.load12431265.ph.ph, float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 2), align 8, !dbg !5139, !tbaa !2644
  store float 1.000000e+00, float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 3), align 4, !dbg !5140, !tbaa !2644
  store float 0.000000e+00, float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 4), align 16, !dbg !5141, !tbaa !2644
  %arraydecay641 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 0, !dbg !5142
  %170 = bitcast [3 x double]* %Local_Normal.i to i8*, !dbg !5143
  call void @llvm.lifetime.start(i64 24, i8* %170), !dbg !5143
  %171 = bitcast [5 x float]* %Hue.i to i8*, !dbg !5143
  call void @llvm.lifetime.start(i64 20, i8* %171), !dbg !5143
  %172 = bitcast [5 x float]* %Elem.i to i8*, !dbg !5143
  call void @llvm.lifetime.start(i64 20, i8* %172), !dbg !5143
  %173 = bitcast [5 x float]* %lc.i to i8*, !dbg !5143
  call void @llvm.lifetime.start(i64 20, i8* %173), !dbg !5143
  %174 = bitcast [5 x float]* %lc106.i to i8*, !dbg !5143
  call void @llvm.lifetime.start(i64 20, i8* %174), !dbg !5143
  call void @llvm.dbg.value(metadata !{%"struct.pov::Interior_Struct"* %165}, i64 0, metadata !5144), !dbg !5143
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5145), !dbg !5143
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !5146), !dbg !5143
  call void @llvm.dbg.value(metadata !{double* %arraydecay641}, i64 0, metadata !5147), !dbg !5143
  call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !5148), !dbg !5143
  call void @llvm.dbg.value(metadata !{float* %LightCol}, i64 0, metadata !5149), !dbg !5143
  call void @llvm.dbg.value(metadata !{double %mul637}, i64 0, metadata !5150), !dbg !5143
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Local_Normal.i}, metadata !1867), !dbg !5151
  %175 = bitcast %"struct.pov::Ray_Struct"* %NRay.i to i8*, !dbg !5152
  call void @llvm.lifetime.start(i64 856, i8* %175) #6, !dbg !5152
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Ray_Struct"* %NRay.i}, metadata !1868), !dbg !5152
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Hue.i}, metadata !1869), !dbg !5153
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Elem.i}, metadata !1870), !dbg !5153
  call void @_ZN3pov19Copy_Ray_ContainersEPNS_10Ray_StructES1_(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Ray_Struct"* %Ray) #7, !dbg !5154
  %arraydecay.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 0, i64 0, !dbg !5155
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i}, i64 0, metadata !5156), !dbg !5157
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5158), !dbg !5157
  %176 = load double* %arraydecay12, align 8, !dbg !5159, !tbaa !2552
  store double %176, double* %arraydecay.i, align 8, !dbg !5159, !tbaa !2552
  %177 = load double* %arrayidx2.i1073, align 8, !dbg !5160, !tbaa !2552
  %arrayidx3.i.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 0, i64 1, !dbg !5160
  store double %177, double* %arrayidx3.i.i, align 8, !dbg !5160, !tbaa !2552
  %178 = load double* %arrayidx4.i1075, align 8, !dbg !5161, !tbaa !2552
  %arrayidx5.i.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 0, i64 2, !dbg !5161
  store double %178, double* %arrayidx5.i.i, align 8, !dbg !5161, !tbaa !2552
  %179 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5162, !tbaa !2301
  %cmp.i1078 = icmp eq i32 %179, 0, !dbg !5162
  br i1 %cmp.i1078, label %if.then.i, label %if.end.i, !dbg !5162

if.then.i:                                        ; preds = %if.then622
  %Disp_NElems.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 2, !dbg !5163
  %180 = load i32* %Disp_NElems.i, align 4, !dbg !5163, !tbaa !2301
  store i32 %180, i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5163, !tbaa !2301
  br label %if.end.i, !dbg !5165

if.end.i:                                         ; preds = %if.then.i, %if.then622
  %Index.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 2, !dbg !5166
  %181 = load i32* %Index.i, align 4, !dbg !5166, !tbaa !2301
  %cmp1.i = icmp eq i32 %181, -1, !dbg !5166
  br i1 %cmp1.i, label %if.then2.i, label %if.else.i, !dbg !5166

if.then2.i:                                       ; preds = %if.end.i
  call void @_ZN3pov9Ray_EnterEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Interior_Struct"* %165) #7, !dbg !5167
  %182 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 6), align 8, !dbg !5169, !tbaa !2552
  %IOR.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 3, !dbg !5169
  %183 = load float* %IOR.i, align 4, !dbg !5169, !tbaa !2644
  %conv.i = fpext float %183 to double, !dbg !5169
  %div.i = fdiv double %182, %conv.i, !dbg !5169
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !5170), !dbg !5169
  %184 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 7), align 8, !dbg !5171, !tbaa !2552
  %Dispersion.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 4, !dbg !5171
  %185 = load float* %Dispersion.i, align 4, !dbg !5171, !tbaa !2644
  %conv3.i = fpext float %185 to double, !dbg !5171
  %div4.i = fdiv double %184, %conv3.i, !dbg !5171
  call void @llvm.dbg.value(metadata !{double %div4.i}, i64 0, metadata !5172), !dbg !5171
  br label %if.end54.i, !dbg !5173

if.else.i:                                        ; preds = %if.end.i
  %call.i = call i32 @_ZN3pov25Interior_In_Ray_ContainerEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Interior_Struct"* %165) #7, !dbg !5174
  call void @llvm.dbg.value(metadata !{i32 %call.i}, i64 0, metadata !5176), !dbg !5174
  %cmp5.i = icmp sgt i32 %call.i, -1, !dbg !5174
  br i1 %cmp5.i, label %if.then6.i, label %if.else36.i, !dbg !5174

if.then6.i:                                       ; preds = %if.else.i
  call void @_ZN3pov8Ray_ExitEPNS_10Ray_StructEi(%"struct.pov::Ray_Struct"* %NRay.i, i32 %call.i) #7, !dbg !5177
  %Index7.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 2, !dbg !5179
  %186 = load i32* %Index7.i, align 8, !dbg !5179, !tbaa !2301
  %cmp8.i = icmp eq i32 %186, -1, !dbg !5179
  br i1 %cmp8.i, label %if.then9.i, label %if.else16.i, !dbg !5179

if.then9.i:                                       ; preds = %if.then6.i
  %IOR10.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 3, !dbg !5180
  %187 = load float* %IOR10.i, align 4, !dbg !5180, !tbaa !2644
  %conv11.i = fpext float %187 to double, !dbg !5180
  %188 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 6), align 8, !dbg !5180, !tbaa !2552
  %div12.i = fdiv double %conv11.i, %188, !dbg !5180
  call void @llvm.dbg.value(metadata !{double %div12.i}, i64 0, metadata !5170), !dbg !5180
  %Dispersion13.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 4, !dbg !5182
  %189 = load float* %Dispersion13.i, align 4, !dbg !5182, !tbaa !2644
  %conv14.i = fpext float %189 to double, !dbg !5182
  %190 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 7), align 8, !dbg !5182, !tbaa !2552
  %div15.i = fdiv double %conv14.i, %190, !dbg !5182
  call void @llvm.dbg.value(metadata !{double %div15.i}, i64 0, metadata !5172), !dbg !5182
  br label %if.end54.i, !dbg !5183

if.else16.i:                                      ; preds = %if.then6.i
  %add.i = add nsw i32 %186, 1, !dbg !5184
  %cmp18.i = icmp eq i32 %call.i, %add.i, !dbg !5184
  br i1 %cmp18.i, label %if.then19.i, label %if.end54.i, !dbg !5184

if.then19.i:                                      ; preds = %if.else16.i
  %IOR20.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 3, !dbg !5185
  %191 = load float* %IOR20.i, align 4, !dbg !5185, !tbaa !2644
  %idxprom.i = sext i32 %186 to i64, !dbg !5185
  %arrayidx.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 4, i64 %idxprom.i, !dbg !5185
  %192 = load %"struct.pov::Interior_Struct"** %arrayidx.i, align 8, !dbg !5185, !tbaa !2295
  %IOR22.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %192, i64 0, i32 3, !dbg !5185
  %193 = load float* %IOR22.i, align 4, !dbg !5185, !tbaa !2644
  %div23.i = fdiv float %191, %193, !dbg !5185
  %conv24.i = fpext float %div23.i to double, !dbg !5185
  call void @llvm.dbg.value(metadata !{double %conv24.i}, i64 0, metadata !5170), !dbg !5185
  %Dispersion25.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 4, !dbg !5187
  %194 = load float* %Dispersion25.i, align 4, !dbg !5187, !tbaa !2644
  %Dispersion30.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %192, i64 0, i32 4, !dbg !5187
  %195 = load float* %Dispersion30.i, align 4, !dbg !5187, !tbaa !2644
  %div31.i = fdiv float %194, %195, !dbg !5187
  %conv32.i = fpext float %div31.i to double, !dbg !5187
  call void @llvm.dbg.value(metadata !{double %conv32.i}, i64 0, metadata !5172), !dbg !5187
  br label %if.end54.i, !dbg !5188

if.else36.i:                                      ; preds = %if.else.i
  %Index37.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 2, !dbg !5189
  %196 = load i32* %Index37.i, align 8, !dbg !5189, !tbaa !2301
  %idxprom38.i = sext i32 %196 to i64, !dbg !5189
  %arrayidx40.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 4, i64 %idxprom38.i, !dbg !5189
  %197 = load %"struct.pov::Interior_Struct"** %arrayidx40.i, align 8, !dbg !5189, !tbaa !2295
  %IOR41.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %197, i64 0, i32 3, !dbg !5189
  %198 = load float* %IOR41.i, align 4, !dbg !5189, !tbaa !2644
  %IOR42.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 3, !dbg !5189
  %199 = load float* %IOR42.i, align 4, !dbg !5189, !tbaa !2644
  %div43.i = fdiv float %198, %199, !dbg !5189
  %conv44.i = fpext float %div43.i to double, !dbg !5189
  call void @llvm.dbg.value(metadata !{double %conv44.i}, i64 0, metadata !5170), !dbg !5189
  %Dispersion49.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %197, i64 0, i32 4, !dbg !5191
  %200 = load float* %Dispersion49.i, align 4, !dbg !5191, !tbaa !2644
  %Dispersion50.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %165, i64 0, i32 4, !dbg !5191
  %201 = load float* %Dispersion50.i, align 4, !dbg !5191, !tbaa !2644
  %div51.i = fdiv float %200, %201, !dbg !5191
  %conv52.i = fpext float %div51.i to double, !dbg !5191
  call void @llvm.dbg.value(metadata !{double %conv52.i}, i64 0, metadata !5172), !dbg !5191
  call void @_ZN3pov9Ray_EnterEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Interior_Struct"* %165) #7, !dbg !5192
  br label %if.end54.i

if.end54.i:                                       ; preds = %if.else36.i, %if.then19.i, %if.else16.i, %if.then9.i, %if.then2.i
  %disp.0.i = phi double [ %div4.i, %if.then2.i ], [ %div15.i, %if.then9.i ], [ %conv32.i, %if.then19.i ], [ %conv52.i, %if.else36.i ], [ 1.000000e+00, %if.else16.i ]
  %ior.0.i = phi double [ %div.i, %if.then2.i ], [ %div12.i, %if.then9.i ], [ %conv24.i, %if.then19.i ], [ %conv44.i, %if.else36.i ], [ 1.000000e+00, %if.else16.i ]
  %sub.i = fadd double %ior.0.i, -1.000000e+00, !dbg !5193
  %call55.i = call double @fabs(double %sub.i) #9, !dbg !5193
  %cmp56.i = fcmp olt double %call55.i, 1.000000e-07, !dbg !5193
  br i1 %cmp56.i, label %land.lhs.true.i, label %if.else80.i, !dbg !5193

land.lhs.true.i:                                  ; preds = %if.end54.i
  %sub57.i = fadd double %disp.0.i, -1.000000e+00, !dbg !5194
  %call58.i = call double @fabs(double %sub57.i) #9, !dbg !5194
  %cmp59.i = fcmp olt double %call58.i, 1.000000e-07, !dbg !5194
  br i1 %cmp59.i, label %if.then60.i, label %if.else80.i, !dbg !5194

if.then60.i:                                      ; preds = %land.lhs.true.i
  call void @llvm.dbg.declare(metadata !{[5 x float]* %lc.i}, metadata !1871), !dbg !5195
  %arraydecay61.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 1, i64 0, !dbg !5196
  %arraydecay63.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !5196
  call void @llvm.dbg.value(metadata !{double* %arraydecay61.i}, i64 0, metadata !5197), !dbg !5198
  call void @llvm.dbg.value(metadata !{double* %arraydecay63.i}, i64 0, metadata !5199), !dbg !5198
  %202 = load double* %arraydecay63.i, align 8, !dbg !5200, !tbaa !2552
  store double %202, double* %arraydecay61.i, align 8, !dbg !5200, !tbaa !2552
  %arrayidx2.i252.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !5201
  %203 = load double* %arrayidx2.i252.i, align 8, !dbg !5201, !tbaa !2552
  %arrayidx3.i253.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 1, i64 1, !dbg !5201
  store double %203, double* %arrayidx3.i253.i, align 8, !dbg !5201, !tbaa !2552
  %arrayidx4.i254.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !5202
  %204 = load double* %arrayidx4.i254.i, align 8, !dbg !5202, !tbaa !2552
  %arrayidx5.i255.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 1, i64 2, !dbg !5202
  store double %204, double* %arrayidx5.i255.i, align 8, !dbg !5202, !tbaa !2552
  call void @llvm.dbg.value(metadata !5203, i64 0, metadata !5204), !dbg !5206
  %205 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 103), align 8, !dbg !5207, !tbaa !2311
  %inc.i.i = add nsw i64 %205, 1, !dbg !5207
  store i64 %inc.i.i, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 103), align 8, !dbg !5207, !tbaa !2311
  %206 = load float* %LightCol, align 4, !dbg !5208, !tbaa !2644
  %207 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 0), align 16, !dbg !5208, !tbaa !2644
  %208 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 3), align 4, !dbg !5208, !tbaa !2644
  %mul.i = fmul float %207, %208, !dbg !5208
  %209 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 4), align 16, !dbg !5208, !tbaa !2644
  %add65.i = fadd float %mul.i, %209, !dbg !5208
  %mul66.i = fmul float %206, %add65.i, !dbg !5208
  %arrayidx67.i = getelementptr inbounds [5 x float]* %lc.i, i64 0, i64 0, !dbg !5208
  store float %mul66.i, float* %arrayidx67.i, align 16, !dbg !5208, !tbaa !2644
  %210 = load float* %arrayidx171, align 4, !dbg !5209, !tbaa !2644
  %211 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 1), align 4, !dbg !5209, !tbaa !2644
  %mul69.i = fmul float %208, %211, !dbg !5209
  %add70.i = fadd float %209, %mul69.i, !dbg !5209
  %mul71.i = fmul float %210, %add70.i, !dbg !5209
  %arrayidx72.i = getelementptr inbounds [5 x float]* %lc.i, i64 0, i64 1, !dbg !5209
  store float %mul71.i, float* %arrayidx72.i, align 4, !dbg !5209, !tbaa !2644
  %212 = load float* %arrayidx174, align 4, !dbg !5210, !tbaa !2644
  %213 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 2), align 8, !dbg !5210, !tbaa !2644
  %mul74.i = fmul float %208, %213, !dbg !5210
  %add75.i = fadd float %209, %mul74.i, !dbg !5210
  %mul76.i = fmul float %212, %add75.i, !dbg !5210
  %arrayidx77.i = getelementptr inbounds [5 x float]* %lc.i, i64 0, i64 2, !dbg !5210
  store float %mul76.i, float* %arrayidx77.i, align 8, !dbg !5210, !tbaa !2644
  %214 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5211, !tbaa !2301
  %inc.i = add nsw i32 %214, 1, !dbg !5211
  store i32 %inc.i, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5211, !tbaa !2301
  %call79.i = call double @_ZN3pov5TraceEPNS_10Ray_StructEPfd(%"struct.pov::Ray_Struct"* %NRay.i, float* %arrayidx67.i, double %mul637) #7, !dbg !5212
  %215 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5213, !tbaa !2301
  %dec.i = add nsw i32 %215, -1, !dbg !5213
  store i32 %dec.i, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5213, !tbaa !2301
  br label %if.end645, !dbg !5214

if.else80.i:                                      ; preds = %land.lhs.true.i, %if.end54.i
  %arraydecay82.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !5215
  call void @llvm.dbg.value(metadata !{double* %arraydecay82.i}, i64 0, metadata !5216), !dbg !5217
  call void @llvm.dbg.value(metadata !{double* %arraydecay641}, i64 0, metadata !5218), !dbg !5217
  %216 = load double* %arraydecay82.i, align 8, !dbg !5219, !tbaa !2552
  %mul.i.i = fmul double %216, %142, !dbg !5219
  %arrayidx2.i256.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !5219
  %217 = load double* %arrayidx2.i256.i, align 8, !dbg !5219, !tbaa !2552
  %mul4.i.i = fmul double %217, %141, !dbg !5219
  %add.i.i = fadd double %mul.i.i, %mul4.i.i, !dbg !5219
  %arrayidx5.i258.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !5219
  %218 = load double* %arrayidx5.i258.i, align 8, !dbg !5219, !tbaa !2552
  %mul7.i.i = fmul double %218, %140, !dbg !5219
  %add8.i.i = fadd double %add.i.i, %mul7.i.i, !dbg !5219
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5220), !dbg !5219
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5221), !dbg !5217
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5222), !dbg !5223
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5222), !dbg !5224
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5222), !dbg !5226
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5222), !dbg !5227
  %cmp83.i = fcmp ugt double %add8.i.i, 0.000000e+00, !dbg !5223
  br i1 %cmp83.i, label %if.else87.i, label %if.then84.i, !dbg !5223

if.then84.i:                                      ; preds = %if.else80.i
  %arraydecay85.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5231
  call void @llvm.dbg.value(metadata !{double* %arraydecay85.i}, i64 0, metadata !5232), !dbg !5233
  call void @llvm.dbg.value(metadata !{double* %arraydecay641}, i64 0, metadata !5234), !dbg !5233
  store double %142, double* %arraydecay85.i, align 16, !dbg !5235, !tbaa !2552
  %arrayidx3.i261.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 1, !dbg !5236
  store double %141, double* %arrayidx3.i261.i, align 8, !dbg !5236, !tbaa !2552
  %arrayidx5.i263.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 2, !dbg !5237
  store double %140, double* %arrayidx5.i263.i, align 16, !dbg !5237, !tbaa !2552
  %sub86.i = fsub double -0.000000e+00, %add8.i.i, !dbg !5224
  call void @llvm.dbg.value(metadata !{double %sub86.i}, i64 0, metadata !5222), !dbg !5224
  call void @llvm.dbg.value(metadata !{double %sub86.i}, i64 0, metadata !5221), !dbg !5217
  call void @llvm.dbg.value(metadata !{double %sub86.i}, i64 0, metadata !5222), !dbg !5223
  call void @llvm.dbg.value(metadata !{double %sub86.i}, i64 0, metadata !5222), !dbg !5224
  call void @llvm.dbg.value(metadata !{double %sub86.i}, i64 0, metadata !5222), !dbg !5226
  call void @llvm.dbg.value(metadata !{double %sub86.i}, i64 0, metadata !5222), !dbg !5227
  br label %if.end97.i, !dbg !5238

if.else87.i:                                      ; preds = %if.else80.i
  %sub89.i = fsub double -0.000000e+00, %142, !dbg !5239
  %arrayidx90.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5239
  store double %sub89.i, double* %arrayidx90.i, align 16, !dbg !5239, !tbaa !2552
  %sub92.i = fsub double -0.000000e+00, %141, !dbg !5241
  %arrayidx93.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 1, !dbg !5241
  store double %sub92.i, double* %arrayidx93.i, align 8, !dbg !5241, !tbaa !2552
  %sub95.i = fsub double -0.000000e+00, %140, !dbg !5242
  %arrayidx96.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 2, !dbg !5242
  store double %sub95.i, double* %arrayidx96.i, align 16, !dbg !5242, !tbaa !2552
  br label %if.end97.i

if.end97.i:                                       ; preds = %if.else87.i, %if.then84.i
  %add8.i267.i = phi double [ %add8.i.i, %if.else87.i ], [ %sub86.i, %if.then84.i ]
  %219 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5243, !tbaa !2301
  %cmp98.i = icmp sgt i32 %219, 0, !dbg !5243
  %220 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5243, !tbaa !2301
  %cmp99.i = icmp slt i32 %220, 2, !dbg !5243
  %or.cond.i = or i1 %cmp98.i, %cmp99.i, !dbg !5243
  br i1 %or.cond.i, label %if.then105.i, label %lor.lhs.false100.i, !dbg !5243

lor.lhs.false100.i:                               ; preds = %if.end97.i
  %sub101.i = fadd double %disp.0.i, -1.000000e+00, !dbg !5243
  %call102.i = call double @fabs(double %sub101.i) #9, !dbg !5243
  %cmp103.i = fcmp olt double %call102.i, 1.000000e-07, !dbg !5243
  %221 = load i32* @_ZN3pov18firstRadiosityPassE, align 4, !dbg !5243, !tbaa !2301
  %tobool.i = icmp ne i32 %221, 0, !dbg !5243
  %or.cond208.i = or i1 %cmp103.i, %tobool.i, !dbg !5243
  br i1 %or.cond208.i, label %if.then105.i, label %if.else132.i, !dbg !5243

if.then105.i:                                     ; preds = %lor.lhs.false100.i, %if.end97.i
  call void @llvm.dbg.declare(metadata !{[5 x float]* %lc106.i}, metadata !1876), !dbg !5244
  %222 = load float* %LightCol, align 4, !dbg !5245, !tbaa !2644
  %223 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 0), align 16, !dbg !5245, !tbaa !2644
  %224 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 3), align 4, !dbg !5245, !tbaa !2644
  %mul108.i = fmul float %223, %224, !dbg !5245
  %225 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 4), align 16, !dbg !5245, !tbaa !2644
  %add109.i = fadd float %mul108.i, %225, !dbg !5245
  %mul110.i = fmul float %222, %add109.i, !dbg !5245
  %arrayidx111.i = getelementptr inbounds [5 x float]* %lc106.i, i64 0, i64 0, !dbg !5245
  store float %mul110.i, float* %arrayidx111.i, align 16, !dbg !5245, !tbaa !2644
  %226 = load float* %arrayidx171, align 4, !dbg !5246, !tbaa !2644
  %227 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 1), align 4, !dbg !5246, !tbaa !2644
  %mul113.i = fmul float %224, %227, !dbg !5246
  %add114.i = fadd float %225, %mul113.i, !dbg !5246
  %mul115.i = fmul float %226, %add114.i, !dbg !5246
  %arrayidx116.i = getelementptr inbounds [5 x float]* %lc106.i, i64 0, i64 1, !dbg !5246
  store float %mul115.i, float* %arrayidx116.i, align 4, !dbg !5246, !tbaa !2644
  %228 = load float* %arrayidx174, align 4, !dbg !5247, !tbaa !2644
  %229 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 2), align 8, !dbg !5247, !tbaa !2644
  %mul118.i = fmul float %224, %229, !dbg !5247
  %add119.i = fadd float %225, %mul118.i, !dbg !5247
  %mul120.i = fmul float %228, %add119.i, !dbg !5247
  %arrayidx121.i = getelementptr inbounds [5 x float]* %lc106.i, i64 0, i64 2, !dbg !5247
  store float %mul120.i, float* %arrayidx121.i, align 8, !dbg !5247, !tbaa !2644
  %cmp122.i = icmp sgt i32 %220, 1, !dbg !5248
  %or.cond209.i = and i1 %cmp122.i, %cmp98.i, !dbg !5248
  br i1 %or.cond209.i, label %if.then125.i, label %if.end128.i, !dbg !5248

if.then125.i:                                     ; preds = %if.then105.i
  call void @llvm.dbg.value(metadata !{double %ior.0.i}, i64 0, metadata !5249) #6, !dbg !5251
  call void @llvm.dbg.value(metadata !{double %disp.0.i}, i64 0, metadata !5252) #6, !dbg !5251
  call void @llvm.dbg.value(metadata !{i32 %219}, i64 0, metadata !5253) #6, !dbg !5251
  call void @llvm.dbg.value(metadata !{i32 %220}, i64 0, metadata !5254) #6, !dbg !5251
  %sub.i.i = add nsw i32 %219, -1, !dbg !5255
  %conv.i.i = sitofp i32 %sub.i.i to double, !dbg !5255
  %sub1.i.i = add nsw i32 %220, -1, !dbg !5255
  %conv2.i.i = sitofp i32 %sub1.i.i to double, !dbg !5255
  %div.i.i = fdiv double %conv.i.i, %conv2.i.i, !dbg !5255
  %sub3.i.i = fadd double %div.i.i, -5.000000e-01, !dbg !5255
  %call.i.i = call double @pow(double %disp.0.i, double %sub3.i.i) #8, !dbg !5255
  %mul4.i259.i = fmul double %ior.0.i, %call.i.i, !dbg !5255
  call void @llvm.dbg.value(metadata !{double %mul4.i259.i}, i64 0, metadata !5256), !dbg !5250
  br label %if.end128.i, !dbg !5250

if.end128.i:                                      ; preds = %if.then125.i, %if.then105.i
  %ior2.0.i = phi double [ %mul4.i259.i, %if.then125.i ], [ %ior.0.i, %if.then105.i ]
  %arraydecay130.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5226
  %call131.i = call fastcc i32 @_ZN3povL12Refract_GutsEPfdPdS1_S1_dPNS_10Ray_StructES3_dS1_(float* %arrayidx111.i, double %ior2.0.i, double* %arraydecay12, double* %arraydecay641, double* %arraydecay130.i, double %add8.i267.i, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %NRay.i, double %mul637, double* %Raw_Normal) #7, !dbg !5226
  br label %if.end645, !dbg !5226

if.else132.i:                                     ; preds = %lor.lhs.false100.i
  call void @llvm.dbg.declare(metadata !2878, metadata !1877), !dbg !5257
  %230 = load float* %LightCol, align 4, !dbg !5258, !tbaa !2644
  %conv136.i = sitofp i32 %220 to float, !dbg !5258
  %div137.i = fdiv float %230, %conv136.i, !dbg !5258
  %conv138.i = fpext float %div137.i to double, !dbg !5258
  %mul139.i = fmul double %conv138.i, 3.000000e+00, !dbg !5258
  %231 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 0), align 16, !dbg !5258, !tbaa !2644
  %232 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 3), align 4, !dbg !5258, !tbaa !2644
  %mul140.i = fmul float %231, %232, !dbg !5258
  %233 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 4), align 16, !dbg !5258, !tbaa !2644
  %add141.i = fadd float %mul140.i, %233, !dbg !5258
  %conv142.i = fpext float %add141.i to double, !dbg !5258
  %mul143.i = fmul double %mul139.i, %conv142.i, !dbg !5258
  %conv144.i = fptrunc double %mul143.i to float, !dbg !5258
  %234 = load float* %arrayidx171, align 4, !dbg !5259, !tbaa !2644
  %div148.i = fdiv float %234, %conv136.i, !dbg !5259
  %conv149.i = fpext float %div148.i to double, !dbg !5259
  %mul150.i = fmul double %conv149.i, 3.000000e+00, !dbg !5259
  %235 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 1), align 4, !dbg !5259, !tbaa !2644
  %mul151.i = fmul float %232, %235, !dbg !5259
  %add152.i = fadd float %233, %mul151.i, !dbg !5259
  %conv153.i = fpext float %add152.i to double, !dbg !5259
  %mul154.i = fmul double %mul150.i, %conv153.i, !dbg !5259
  %conv155.i = fptrunc double %mul154.i to float, !dbg !5259
  %236 = load float* %arrayidx174, align 4, !dbg !5260, !tbaa !2644
  %div159.i = fdiv float %236, %conv136.i, !dbg !5260
  %conv160.i = fpext float %div159.i to double, !dbg !5260
  %mul161.i = fmul double %conv160.i, 3.000000e+00, !dbg !5260
  %237 = load float* getelementptr inbounds ([5 x float]* @_ZN3pov7GFilColE, i64 0, i64 2), align 8, !dbg !5260, !tbaa !2644
  %mul162.i = fmul float %232, %237, !dbg !5260
  %add163.i = fadd float %233, %mul162.i, !dbg !5260
  %conv164.i = fpext float %add163.i to double, !dbg !5260
  %mul165.i = fmul double %mul161.i, %conv164.i, !dbg !5260
  %conv166.i = fptrunc double %mul165.i to float, !dbg !5260
  %call168.i = call double @sqrt(double %disp.0.i) #8, !dbg !5261
  %238 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5262, !tbaa !2301
  %sub170.i = add nsw i32 %238, -1, !dbg !5262
  %conv171.i = sitofp i32 %sub170.i to double, !dbg !5262
  %div172.i = fdiv double 1.000000e+00, %conv171.i, !dbg !5262
  %call173.i = call double @pow(double %disp.0.i, double %div172.i) #8, !dbg !5262
  call void @llvm.dbg.value(metadata !{double %call173.i}, i64 0, metadata !5263), !dbg !5262
  store i32 1, i32* @_ZN3pov9disp_elemE, align 4, !dbg !5264, !tbaa !2301
  %239 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5264, !tbaa !2301
  %cmp174268.i = icmp slt i32 %239, 1, !dbg !5264
  br i1 %cmp174268.i, label %for.end.i, label %for.body.lr.ph.i, !dbg !5264

for.body.lr.ph.i:                                 ; preds = %if.else132.i
  %div169.i = fdiv double %ior.0.i, %call168.i, !dbg !5261
  %arraydecay175.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 0, !dbg !5265
  %arrayidx179.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 0, !dbg !5266
  %arrayidx181.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 1, !dbg !5267
  %arrayidx183.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 1, !dbg !5267
  %arrayidx185.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 2, !dbg !5268
  %arrayidx187.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 2, !dbg !5268
  %arraydecay201.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5227
  br label %for.body.i, !dbg !5264

for.body.i:                                       ; preds = %if.end203.i, %for.body.lr.ph.i
  %240 = phi i32 [ %239, %for.body.lr.ph.i ], [ %245, %if.end203.i ]
  %ior2134.0270.i = phi double [ %div169.i, %for.body.lr.ph.i ], [ %mul204.i, %if.end203.i ]
  %storemerge269.i = phi i32 [ 1, %for.body.lr.ph.i ], [ %inc205.i, %if.end203.i ]
  call fastcc void @_ZN3povL22Dispersion_Element_HueEPfii(float* %arraydecay175.i, i32 %storemerge269.i, i32 %240) #7, !dbg !5265
  %241 = load float* %arraydecay175.i, align 16, !dbg !5266, !tbaa !2644
  %mul178.i = fmul float %conv144.i, %241, !dbg !5266
  store float %mul178.i, float* %arrayidx179.i, align 16, !dbg !5266, !tbaa !2644
  %242 = load float* %arrayidx181.i, align 4, !dbg !5267, !tbaa !2644
  %mul182.i = fmul float %conv155.i, %242, !dbg !5267
  store float %mul182.i, float* %arrayidx183.i, align 4, !dbg !5267, !tbaa !2644
  %243 = load float* %arrayidx185.i, align 8, !dbg !5268, !tbaa !2644
  %mul186.i = fmul float %conv166.i, %243, !dbg !5268
  store float %mul186.i, float* %arrayidx187.i, align 8, !dbg !5268, !tbaa !2644
  %conv189.i = fpext float %mul178.i to double, !dbg !5269
  %cmp190.i = fcmp ogt double %conv189.i, 1.000000e-07, !dbg !5269
  br i1 %cmp190.i, label %if.then199.i, label %lor.lhs.false191.i, !dbg !5269

lor.lhs.false191.i:                               ; preds = %for.body.i
  %conv193.i = fpext float %mul182.i to double, !dbg !5269
  %cmp194.i = fcmp ogt double %conv193.i, 1.000000e-07, !dbg !5269
  br i1 %cmp194.i, label %if.then199.i, label %lor.lhs.false195.i, !dbg !5269

lor.lhs.false195.i:                               ; preds = %lor.lhs.false191.i
  %conv197.i = fpext float %mul186.i to double, !dbg !5269
  %cmp198.i = fcmp ogt double %conv197.i, 1.000000e-07, !dbg !5269
  br i1 %cmp198.i, label %if.then199.i, label %if.end203.i, !dbg !5269

if.then199.i:                                     ; preds = %lor.lhs.false195.i, %lor.lhs.false191.i, %for.body.i
  %call202.i = call fastcc i32 @_ZN3povL12Refract_GutsEPfdPdS1_S1_dPNS_10Ray_StructES3_dS1_(float* %arrayidx179.i, double %ior2134.0270.i, double* %arraydecay12, double* %arraydecay641, double* %arraydecay201.i, double %add8.i267.i, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %NRay.i, double %mul637, double* %Raw_Normal) #7, !dbg !5227
  br label %if.end203.i, !dbg !5270

if.end203.i:                                      ; preds = %if.then199.i, %lor.lhs.false195.i
  %mul204.i = fmul double %call173.i, %ior2134.0270.i, !dbg !5271
  call void @llvm.dbg.value(metadata !{double %mul204.i}, i64 0, metadata !5272), !dbg !5271
  %244 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5264, !tbaa !2301
  %inc205.i = add nsw i32 %244, 1, !dbg !5264
  store i32 %inc205.i, i32* @_ZN3pov9disp_elemE, align 4, !dbg !5264, !tbaa !2301
  %245 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5264, !tbaa !2301
  %cmp174.i = icmp slt i32 %244, %245, !dbg !5264
  br i1 %cmp174.i, label %for.body.i, label %for.end.i, !dbg !5264

for.end.i:                                        ; preds = %if.end203.i, %if.else132.i
  store i32 0, i32* @_ZN3pov9disp_elemE, align 4, !dbg !5273, !tbaa !2301
  store i32 0, i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5274, !tbaa !2301
  br label %if.end645

if.end645:                                        ; preds = %for.end.i, %if.end128.i, %if.then60.i, %if.then612, %lor.lhs.false610, %land.lhs.true618, %land.lhs.true606
  %TIR_occured.0 = phi i32 [ 0, %land.lhs.true618 ], [ 0, %if.then612 ], [ 0, %lor.lhs.false610 ], [ 0, %land.lhs.true606 ], [ 0, %if.then60.i ], [ %call131.i, %if.end128.i ], [ 0, %for.end.i ]
  %tobool646 = icmp eq i32 %doReflection.0.ph.ph1281, 0, !dbg !5106
  br i1 %tobool646, label %if.end828, label %if.then647, !dbg !5106

if.then647:                                       ; preds = %if.end645, %if.end645.thread1289
  %TIR_occured.01291 = phi i32 [ undef, %if.end645.thread1289 ], [ %TIR_occured.0, %if.end645 ]
  %246 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !5275, !tbaa !2295
  %Flags649 = getelementptr inbounds %"struct.pov::Object_Struct"* %246, i64 0, i32 13, !dbg !5275
  %247 = load i32* %Flags649, align 4, !dbg !5275, !tbaa !2301
  %and651 = and i32 %247, 2097152, !dbg !5275
  %tobool652 = icmp eq i32 %and651, 0, !dbg !5275
  br i1 %tobool652, label %lor.lhs.false657, label %land.lhs.true653, !dbg !5275

land.lhs.true653:                                 ; preds = %if.then647
  %248 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !5275, !tbaa !2301
  %and655 = and i32 %248, 4194304, !dbg !5275
  %tobool656 = icmp eq i32 %and655, 0, !dbg !5275
  br i1 %tobool656, label %land.lhs.true667, label %lor.lhs.false657, !dbg !5275

lor.lhs.false657:                                 ; preds = %land.lhs.true653, %if.then647
  %and661 = and i32 %247, 4194304, !dbg !5275
  %tobool662 = icmp eq i32 %and661, 0, !dbg !5275
  br i1 %tobool662, label %land.lhs.true663, label %if.end828, !dbg !5275

land.lhs.true663:                                 ; preds = %lor.lhs.false657
  %249 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !5275, !tbaa !2301
  %and665 = and i32 %249, 2097152, !dbg !5275
  %tobool666 = icmp eq i32 %and665, 0, !dbg !5275
  %250 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !5275, !tbaa !2301
  %tobool668 = icmp ne i32 %250, 0, !dbg !5275
  %or.cond835 = or i1 %tobool666, %tobool668, !dbg !5275
  br i1 %or.cond835, label %if.end828, label %if.then669, !dbg !5275

land.lhs.true667:                                 ; preds = %land.lhs.true653
  %.old834 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !5275, !tbaa !2301
  %tobool668.old = icmp eq i32 %.old834, 0, !dbg !5275
  br i1 %tobool668.old, label %if.then669, label %if.end828, !dbg !5275

if.then669:                                       ; preds = %land.lhs.true667, %land.lhs.true663
  %251 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !5277, !tbaa !2301
  %and671 = and i32 %251, 32, !dbg !5277
  %tobool672 = icmp ne i32 %and671, 0, !dbg !5277
  %cmp6751292 = icmp sgt i32 %layer_number.0.lcssa, 0, !dbg !5278
  %or.cond1339 = and i1 %tobool672, %cmp6751292, !dbg !5277
  br i1 %or.cond1339, label %for.body676.lr.ph, label %if.end828, !dbg !5277

for.body676.lr.ph:                                ; preds = %if.then669
  %tobool677 = icmp eq i32 %TIR_occured.01291, 0, !dbg !5281
  %arrayidx722 = getelementptr inbounds [5 x float]* %TmpCol, i64 0, i64 0, !dbg !5283
  %arrayidx724 = getelementptr inbounds [5 x float]* %TmpCol, i64 0, i64 1, !dbg !5286
  %arrayidx726 = getelementptr inbounds [5 x float]* %TmpCol, i64 0, i64 2, !dbg !5287
  %arraydecay810 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 0, !dbg !5288
  %arrayidx679 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 0, !dbg !5290
  %252 = load double* %arrayidx679, align 16, !dbg !5290, !tbaa !2552
  %arrayidx687 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 1, !dbg !5291
  %253 = load double* %arrayidx687, align 8, !dbg !5291, !tbaa !2552
  %arrayidx695 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 2, !dbg !5292
  %254 = load double* %arrayidx695, align 16, !dbg !5292, !tbaa !2552
  br label %for.body676, !dbg !5278

for.body676:                                      ; preds = %for.body676.lr.ph, %if.end819
  %i.41293 = phi i32 [ 0, %for.body676.lr.ph ], [ %inc824, %if.end819 ]
  %idxprom703.pre = sext i32 %i.41293 to i64, !dbg !5293
  br i1 %tobool677, label %if.then702, label %lor.lhs.false678, !dbg !5281

lor.lhs.false678:                                 ; preds = %for.body676
  %arrayidx682 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %idxprom703.pre, i64 0, !dbg !5290
  %255 = load double* %arrayidx682, align 8, !dbg !5290, !tbaa !2552
  %sub683 = fsub double %252, %255, !dbg !5290
  %call684 = call double @fabs(double %sub683) #9, !dbg !5290
  %cmp685 = fcmp ogt double %call684, 1.000000e-07, !dbg !5290
  br i1 %cmp685, label %if.then702, label %lor.lhs.false686, !dbg !5290

lor.lhs.false686:                                 ; preds = %lor.lhs.false678
  %arrayidx690 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %idxprom703.pre, i64 1, !dbg !5291
  %256 = load double* %arrayidx690, align 8, !dbg !5291, !tbaa !2552
  %sub691 = fsub double %253, %256, !dbg !5291
  %call692 = call double @fabs(double %sub691) #9, !dbg !5291
  %cmp693 = fcmp ogt double %call692, 1.000000e-07, !dbg !5291
  br i1 %cmp693, label %if.then702, label %lor.lhs.false694, !dbg !5291

lor.lhs.false694:                                 ; preds = %lor.lhs.false686
  %arrayidx698 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %idxprom703.pre, i64 2, !dbg !5292
  %257 = load double* %arrayidx698, align 8, !dbg !5292, !tbaa !2552
  %sub699 = fsub double %254, %257, !dbg !5292
  %call700 = call double @fabs(double %sub699) #9, !dbg !5292
  %cmp701 = fcmp ogt double %call700, 1.000000e-07, !dbg !5292
  br i1 %cmp701, label %if.then702, label %if.end819, !dbg !5292

if.then702:                                       ; preds = %for.body676, %lor.lhs.false694, %lor.lhs.false686, %lor.lhs.false678
  %arrayidx705 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 0, !dbg !5293
  %258 = load float* %arrayidx705, align 4, !dbg !5293, !tbaa !2644
  %cmp707 = fcmp une float %258, 0.000000e+00, !dbg !5293
  br i1 %cmp707, label %if.then720, label %lor.lhs.false708, !dbg !5293

lor.lhs.false708:                                 ; preds = %if.then702
  %arrayidx711 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 1, !dbg !5293
  %259 = load float* %arrayidx711, align 4, !dbg !5293, !tbaa !2644
  %cmp713 = fcmp une float %259, 0.000000e+00, !dbg !5293
  br i1 %cmp713, label %if.then720, label %lor.lhs.false714, !dbg !5293

lor.lhs.false714:                                 ; preds = %lor.lhs.false708
  %arrayidx717 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 2, !dbg !5293
  %260 = load float* %arrayidx717, align 4, !dbg !5293, !tbaa !2644
  %cmp719 = fcmp une float %260, 0.000000e+00, !dbg !5293
  br i1 %cmp719, label %if.then720, label %if.end819, !dbg !5293

if.then720:                                       ; preds = %lor.lhs.false714, %lor.lhs.false708, %if.then702
  %261 = load float* %LightCol, align 4, !dbg !5283, !tbaa !2644
  store float %261, float* %arrayidx722, align 16, !dbg !5283, !tbaa !2644
  %262 = load float* %arrayidx171, align 4, !dbg !5286, !tbaa !2644
  store float %262, float* %arrayidx724, align 4, !dbg !5286, !tbaa !2644
  %263 = load float* %arrayidx174, align 4, !dbg !5287, !tbaa !2644
  store float %263, float* %arrayidx726, align 8, !dbg !5287, !tbaa !2644
  %arrayidx728 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 5, i64 %idxprom703.pre, !dbg !5294
  %264 = load float* %arrayidx728, align 4, !dbg !5294, !tbaa !2644
  %cmp730 = fcmp une float %264, 1.000000e+00, !dbg !5294
  %265 = load float* %arrayidx705, align 4, !dbg !5295, !tbaa !2644
  br i1 %cmp730, label %if.then731, label %if.else771, !dbg !5294

if.then731:                                       ; preds = %if.then720
  %conv729 = fpext float %264 to double, !dbg !5294
  %conv735 = fpext float %265 to double, !dbg !5295
  %conv737 = fpext float %261 to double, !dbg !5295
  %call741 = call double @pow(double %conv737, double %conv729) #8, !dbg !5295
  %mul742 = fmul double %conv735, %call741, !dbg !5295
  %conv743 = fptrunc double %mul742 to float, !dbg !5295
  store float %conv743, float* %arrayidx722, align 16, !dbg !5295, !tbaa !2644
  %arrayidx747 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 1, !dbg !5297
  %266 = load float* %arrayidx747, align 4, !dbg !5297, !tbaa !2644
  %conv748 = fpext float %266 to double, !dbg !5297
  %267 = load float* %arrayidx724, align 4, !dbg !5297, !tbaa !2644
  %conv750 = fpext float %267 to double, !dbg !5297
  %268 = load float* %arrayidx728, align 4, !dbg !5297, !tbaa !2644
  %conv753 = fpext float %268 to double, !dbg !5297
  %call754 = call double @pow(double %conv750, double %conv753) #8, !dbg !5297
  %mul755 = fmul double %conv748, %call754, !dbg !5297
  %conv756 = fptrunc double %mul755 to float, !dbg !5297
  store float %conv756, float* %arrayidx724, align 4, !dbg !5297, !tbaa !2644
  %arrayidx760 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 2, !dbg !5298
  %269 = load float* %arrayidx760, align 4, !dbg !5298, !tbaa !2644
  %conv761 = fpext float %269 to double, !dbg !5298
  %270 = load float* %arrayidx726, align 8, !dbg !5298, !tbaa !2644
  %conv763 = fpext float %270 to double, !dbg !5298
  %271 = load float* %arrayidx728, align 4, !dbg !5298, !tbaa !2644
  %conv766 = fpext float %271 to double, !dbg !5298
  %call767 = call double @pow(double %conv763, double %conv766) #8, !dbg !5298
  %mul768 = fmul double %conv761, %call767, !dbg !5298
  %conv769 = fptrunc double %mul768 to float, !dbg !5298
  br label %if.end790, !dbg !5299

if.else771:                                       ; preds = %if.then720
  %mul776 = fmul float %265, %261, !dbg !5300
  store float %mul776, float* %arrayidx722, align 16, !dbg !5300, !tbaa !2644
  %arrayidx780 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 1, !dbg !5302
  %272 = load float* %arrayidx780, align 4, !dbg !5302, !tbaa !2644
  %mul782 = fmul float %272, %262, !dbg !5302
  store float %mul782, float* %arrayidx724, align 4, !dbg !5302, !tbaa !2644
  %arrayidx786 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 2, !dbg !5303
  %273 = load float* %arrayidx786, align 4, !dbg !5303, !tbaa !2644
  %mul788 = fmul float %273, %263, !dbg !5303
  br label %if.end790

if.end790:                                        ; preds = %if.else771, %if.then731
  %storemerge = phi float [ %conv769, %if.then731 ], [ %mul788, %if.else771 ]
  store float %storemerge, float* %arrayidx726, align 8, !dbg !5303, !tbaa !2644
  %arrayidx792 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 2, i64 %idxprom703.pre, !dbg !5304
  %274 = load double* %arrayidx792, align 8, !dbg !5304, !tbaa !2552
  %arrayidx798 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 1, !dbg !5304
  %arrayidx801 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %idxprom703.pre, i64 2, !dbg !5304
  tail call void @llvm.dbg.value(metadata !{float* %arrayidx798}, i64 0, metadata !5305), !dbg !5306
  tail call void @llvm.dbg.value(metadata !{float* %arrayidx801}, i64 0, metadata !5307), !dbg !5306
  %275 = load float* %arrayidx798, align 4, !dbg !5308, !tbaa !2644
  %276 = load float* %arrayidx801, align 4, !dbg !5308, !tbaa !2644
  %cmp.i1076 = fcmp olt float %275, %276, !dbg !5308
  tail call void @llvm.dbg.value(metadata !{float* %arrayidx705}, i64 0, metadata !5305), !dbg !5306
  %277 = load float* %arrayidx705, align 4, !dbg !5308, !tbaa !2644
  %278 = select i1 %cmp.i1076, float %276, float %275, !dbg !5308
  %cmp.i = fcmp olt float %277, %278, !dbg !5308
  %279 = select i1 %cmp.i, float %278, float %277, !dbg !5304
  %conv804 = fpext float %279 to double, !dbg !5304
  %mul805 = fmul double %274, %conv804, !dbg !5304
  call void @llvm.dbg.value(metadata !{double %mul805}, i64 0, metadata !1812), !dbg !5304
  call fastcc void @_ZN3povL7ReflectEPdPNS_10Ray_StructES0_S0_Pfd(double* %arraydecay12, %"struct.pov::Ray_Struct"* %Ray, double* %arraydecay810, double* %Raw_Normal, float* %arrayidx722, double %mul805) #7, !dbg !5288
  br label %if.end819, !dbg !5309

if.end819:                                        ; preds = %lor.lhs.false714, %lor.lhs.false694, %if.end790
  %280 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 18), align 8, !dbg !5310, !tbaa !2295
  %cmp820 = icmp eq %"struct.pov::Object_Struct"* %280, null, !dbg !5310
  call void @llvm.dbg.value(metadata !{i32 %layer_number.0.lcssa}, i64 0, metadata !1805), !dbg !5311
  %layer_number.0.i.4 = select i1 %cmp820, i32 %layer_number.0.lcssa, i32 %i.41293, !dbg !5310
  %inc824 = add nsw i32 %layer_number.0.i.4, 1, !dbg !5278
  call void @llvm.dbg.value(metadata !{i32 %inc824}, i64 0, metadata !1805), !dbg !5278
  %cmp675 = icmp slt i32 %inc824, %layer_number.0.lcssa, !dbg !5278
  br i1 %cmp675, label %for.body676, label %if.end828, !dbg !5278

if.end828:                                        ; preds = %if.then669, %if.end819, %land.lhs.true667, %land.lhs.true663, %lor.lhs.false657, %if.end645, %if.end645.thread, %if.end502
  %281 = load double* %Depth176, align 8, !dbg !5312, !tbaa !2552
  %282 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !5312, !tbaa !2552
  %sub830 = fsub double %282, %281, !dbg !5312
  store double %sub830, double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 17), align 8, !dbg !5312, !tbaa !2552
  call void @_ZN3pov14FreeComTexDataEPNS_17ComTexData_StructE(%"struct.pov::ComTexData_Struct"* %call) #7, !dbg !5313
  call void @llvm.lifetime.end(i64 856, i8* %0) #6, !dbg !5314
  ret void, !dbg !5314
}
