define internal fastcc void @_ZN3povL23compute_lighted_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryE(float* %ResCol, %"struct.pov::Texture_Struct"* %Texture, double* %IPoint, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Intersect) #0 {
entry:
  %Light_Source_Ray.i = alloca %"struct.pov::Ray_Struct", align 8
  %tempr.i = alloca double, align 8
  %Local_Normal.i = alloca [3 x double], align 16
  %NRay.i = alloca %"struct.pov::Ray_Struct", align 8
  %Hue.i = alloca [5 x float], align 16
  %Elem.i = alloca [5 x float], align 16
  %LayNormal = alloca [3 x double], align 16
  %TopNormal = alloca [3 x double], align 16
  %LayCol = alloca [5 x float], align 16
  %RflCol = alloca [5 x float], align 16
  %RfrCol = alloca [5 x float], align 16
  %TmpCol = alloca [5 x float], align 16
  %AmbCol = alloca [5 x float], align 16
  call void @llvm.dbg.value(metadata !{float* %ResCol}, i64 0, metadata !1471), !dbg !5315
  call void @llvm.dbg.value(metadata !{%"struct.pov::Texture_Struct"* %Texture}, i64 0, metadata !1472), !dbg !5315
  call void @llvm.dbg.value(metadata !{double* %IPoint}, i64 0, metadata !1473), !dbg !5315
  call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !1474), !dbg !5315
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1475), !dbg !5315
  call void @llvm.dbg.value(metadata !{double %Weight}, i64 0, metadata !1476), !dbg !5315
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersect}, i64 0, metadata !1477), !dbg !5315
  call void @llvm.dbg.declare(metadata !{[3 x double]* %LayNormal}, metadata !1491), !dbg !5316
  call void @llvm.dbg.declare(metadata !{[3 x double]* %TopNormal}, metadata !1492), !dbg !5316
  call void @llvm.dbg.declare(metadata !2878, metadata !1493), !dbg !5317
  call void @llvm.dbg.declare(metadata !{[5 x float]* %LayCol}, metadata !1494), !dbg !5317
  call void @llvm.dbg.declare(metadata !{[5 x float]* %RflCol}, metadata !1495), !dbg !5317
  call void @llvm.dbg.declare(metadata !{[5 x float]* %RfrCol}, metadata !1496), !dbg !5317
  call void @llvm.dbg.declare(metadata !2878, metadata !1497), !dbg !5317
  call void @llvm.dbg.declare(metadata !{[5 x float]* %TmpCol}, metadata !1498), !dbg !5318
  call void @llvm.dbg.declare(metadata !{[5 x float]* %AmbCol}, metadata !1499), !dbg !5318
  call void @llvm.dbg.declare(metadata !2878, metadata !1500), !dbg !5318
  %call = call %"struct.pov::ComTexData_Struct"* @_ZN3pov13NewComTexDataEv() #7, !dbg !5319
  call void @llvm.dbg.value(metadata !{%"struct.pov::ComTexData_Struct"* %call}, i64 0, metadata !1508), !dbg !5319
  tail call void @llvm.dbg.value(metadata !{float* %ResCol}, i64 0, metadata !5320), !dbg !5322
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5323), !dbg !5322
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5324), !dbg !5322
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5325), !dbg !5322
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5326), !dbg !5322
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5327), !dbg !5322
  %arrayidx1.i = getelementptr inbounds float* %ResCol, i64 1, !dbg !5328
  %arrayidx2.i = getelementptr inbounds float* %ResCol, i64 2, !dbg !5329
  %arrayidx3.i = getelementptr inbounds float* %ResCol, i64 3, !dbg !5330
  %arrayidx4.i = getelementptr inbounds float* %ResCol, i64 4, !dbg !5331
  tail call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5332), !dbg !5334
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !5335), !dbg !5334
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !5336), !dbg !5334
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !5337), !dbg !5334
  tail call void @llvm.dbg.value(metadata !2772, i64 0, metadata !5338), !dbg !5334
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5339), !dbg !5334
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !1489), !dbg !5340
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1480), !dbg !5341
  %arraydecay9 = getelementptr inbounds [5 x float]* %AmbCol, i64 0, i64 0, !dbg !5342
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay9}, i64 0, metadata !5343), !dbg !5344
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5345), !dbg !5344
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5346), !dbg !5344
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5347), !dbg !5344
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5348), !dbg !5344
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5349), !dbg !5344
  %0 = bitcast float* %ResCol to i8*, !dbg !5350
  call void @llvm.memset.p0i8.i64(i8* %0, i8 0, i64 20, i32 4, i1 false), !dbg !5328
  %arrayidx1.i1201 = getelementptr inbounds [5 x float]* %AmbCol, i64 0, i64 1, !dbg !5351
  %arrayidx2.i1202 = getelementptr inbounds [5 x float]* %AmbCol, i64 0, i64 2, !dbg !5352
  %1 = bitcast [5 x float]* %AmbCol to i8*, !dbg !5353
  call void @llvm.memset.p0i8.i64(i8* %1, i8 0, i64 20, i32 16, i1 false), !dbg !5351
  %2 = load i8* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 59), align 4, !dbg !5353, !tbaa !3674, !range !3675
  %tobool = icmp eq i8 %2, 0, !dbg !5353
  br i1 %tobool, label %if.else, label %land.lhs.true, !dbg !5353

land.lhs.true:                                    ; preds = %entry
  %3 = load i32* @_ZN3pov21Radiosity_Trace_LevelE, align 4, !dbg !5353, !tbaa !2301
  %4 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 43), align 8, !dbg !5353, !tbaa !2301
  %cmp = icmp sgt i32 %3, %4, !dbg !5353
  br i1 %cmp, label %if.else, label %if.end, !dbg !5353

if.else:                                          ; preds = %land.lhs.true, %entry
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1481), !dbg !5354
  br label %if.end

if.end:                                           ; preds = %land.lhs.true, %if.else
  %radiosity_needed.0 = phi i32 [ 0, %if.else ], [ 1, %land.lhs.true ]
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1484), !dbg !5356
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1482), !dbg !5357
  call void @llvm.dbg.value(metadata !{%"struct.pov::Texture_Struct"* %Texture}, i64 0, metadata !1506), !dbg !5357
  %cmp101418 = icmp ne %"struct.pov::Texture_Struct"* %Texture, null, !dbg !5357
  %5 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !5357, !tbaa !2552
  %cmp111419 = fcmp olt double %5, 1.000000e+00, !dbg !5357
  %or.cond1420 = and i1 %cmp101418, %cmp111419, !dbg !5357
  br i1 %or.cond1420, label %for.body.lr.ph, label %if.end.for.end488_crit_edge, !dbg !5357

if.end.for.end488_crit_edge:                      ; preds = %if.end
  %Object489.pre = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 5, !dbg !5358
  br label %for.end488, !dbg !5357

for.body.lr.ph:                                   ; preds = %if.end
  %arraydecay12 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 0, !dbg !5359
  %arrayidx2.i1205 = getelementptr inbounds double* %Raw_Normal, i64 1, !dbg !5360
  %arrayidx3.i1206 = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 1, !dbg !5360
  %arrayidx4.i1207 = getelementptr inbounds double* %Raw_Normal, i64 2, !dbg !5361
  %arrayidx5.i = getelementptr inbounds [3 x double]* %LayNormal, i64 0, i64 2, !dbg !5361
  %arraydecay59 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 0, !dbg !5362
  %arrayidx3.i1218 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 1, !dbg !5364
  %arrayidx5.i1220 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 2, !dbg !5365
  %arraydecay62 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 0, !dbg !5366
  %arraydecay87 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !5367
  %arrayidx2.i1230 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !5368
  %arrayidx5.i1233 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !5368
  %Object = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 5, !dbg !5369
  %arrayidx143 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 1, !dbg !5370
  %arrayidx156 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 2, !dbg !5371
  %arrayidx168 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 3, !dbg !5372
  %arrayidx175 = getelementptr inbounds [5 x float]* %LayCol, i64 0, i64 4, !dbg !5372
  %arraydecay179 = getelementptr inbounds [5 x float]* %TmpCol, i64 0, i64 0, !dbg !5373
  %arrayidx1.i1244 = getelementptr inbounds [5 x float]* %TmpCol, i64 0, i64 1, !dbg !5374
  %arrayidx2.i1245 = getelementptr inbounds [5 x float]* %TmpCol, i64 0, i64 2, !dbg !5375
  %tobool180 = icmp ne i32 %radiosity_needed.0, 0, !dbg !5376
  %arraydecay236 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 1, i64 0, !dbg !5377
  %6 = bitcast [3 x double]* %Local_Normal.i to i8*, !dbg !5380
  %7 = bitcast [5 x float]* %Hue.i to i8*, !dbg !5382
  %8 = bitcast [5 x float]* %Elem.i to i8*, !dbg !5382
  %9 = bitcast double* %tempr.i to i8*, !dbg !5382
  %10 = bitcast %"struct.pov::Ray_Struct"* %Light_Source_Ray.i to i8*, !dbg !5385
  %11 = bitcast [5 x float]* %TmpCol to i8*, !dbg !5386
  %arrayidx13.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5388
  %arrayidx17.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 1, !dbg !5390
  %arrayidx21.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 2, !dbg !5391
  %arraydecay25.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 0, !dbg !5392
  %arrayidx1.i255.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 1, !dbg !5393
  %arrayidx2.i256.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 2, !dbg !5394
  %arraydecay30.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 0, !dbg !5395
  %arrayidx46.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, i64 0, i32 1, i64 1, !dbg !5396
  %arrayidx50.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, i64 0, i32 1, i64 0, !dbg !5397
  %arrayidx56.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, i64 0, i32 1, i64 2, !dbg !5398
  %arraydecay64.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, i64 0, i32 0, i64 0, !dbg !5399
  %arrayidx7.i253.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, i64 0, i32 0, i64 1, !dbg !5400
  %arrayidx12.i.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, i64 0, i32 0, i64 2, !dbg !5401
  %arrayidx1.i238.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 1, !dbg !5402
  %arrayidx3.i240.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 2, !dbg !5404
  br label %for.body, !dbg !5357

for.body:                                         ; preds = %if.end463.for.body_crit_edge, %for.body.lr.ph
  %12 = phi double [ undef, %for.body.lr.ph ], [ %48, %if.end463.for.body_crit_edge ]
  %13 = phi double [ undef, %for.body.lr.ph ], [ %49, %if.end463.for.body_crit_edge ]
  %14 = phi double [ undef, %for.body.lr.ph ], [ %50, %if.end463.for.body_crit_edge ]
  %indvars.iv1455 = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next1456, %if.end463.for.body_crit_edge ]
  %radiosity_done.01433 = phi i32 [ 0, %for.body.lr.ph ], [ %radiosity_done.2, %if.end463.for.body_crit_edge ]
  %layer_number.01431 = phi i32 [ 1, %for.body.lr.ph ], [ %phitmp, %if.end463.for.body_crit_edge ]
  %one_colour_found.01430 = phi i32 [ 0, %for.body.lr.ph ], [ %.one_colour_found.0, %if.end463.for.body_crit_edge ]
  %Layer.01428 = phi %"struct.pov::Texture_Struct"* [ %Texture, %for.body.lr.ph ], [ %212, %if.end463.for.body_crit_edge ]
  %Trans.01427 = phi double [ 1.000000e+00, %for.body.lr.ph ], [ %.sroa.speculated1331, %if.end463.for.body_crit_edge ]
  %FilCol.sroa.0.0.load136513911425 = phi float [ 1.000000e+00, %for.body.lr.ph ], [ %FilCol.sroa.0.0.load13651392, %if.end463.for.body_crit_edge ]
  %FilCol.sroa.1.4.load137413931423 = phi float [ 1.000000e+00, %for.body.lr.ph ], [ %FilCol.sroa.1.4.load13741394, %if.end463.for.body_crit_edge ]
  %FilCol.sroa.2.8.load138313951421 = phi float [ 1.000000e+00, %for.body.lr.ph ], [ %FilCol.sroa.2.8.load13831396, %if.end463.for.body_crit_edge ]
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5405), !dbg !5406
  tail call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !5407), !dbg !5406
  %15 = load double* %Raw_Normal, align 8, !dbg !5408, !tbaa !2552
  store double %15, double* %arraydecay12, align 16, !dbg !5408, !tbaa !2552
  %16 = load double* %arrayidx2.i1205, align 8, !dbg !5360, !tbaa !2552
  store double %16, double* %arrayidx3.i1206, align 8, !dbg !5360, !tbaa !2552
  %17 = load double* %arrayidx4.i1207, align 8, !dbg !5361, !tbaa !2552
  store double %17, double* %arrayidx5.i, align 16, !dbg !5361, !tbaa !2552
  %18 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !5409, !tbaa !2301
  %and = and i32 %18, 64, !dbg !5409
  %tobool13 = icmp eq i32 %and, 0, !dbg !5409
  br i1 %tobool13, label %if.end56, label %land.lhs.true14, !dbg !5409

land.lhs.true14:                                  ; preds = %for.body
  %Tnormal = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01428, i64 0, i32 13, !dbg !5409
  %19 = load %"struct.pov::Tnormal_Struct"** %Tnormal, align 8, !dbg !5409, !tbaa !2295
  %cmp15 = icmp eq %"struct.pov::Tnormal_Struct"* %19, null, !dbg !5409
  br i1 %cmp15, label %if.end56, label %if.then16, !dbg !5409

if.then16:                                        ; preds = %land.lhs.true14
  %20 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !5410, !tbaa !2301
  %cmp17 = icmp sgt i32 %20, 310, !dbg !5410
  br i1 %cmp17, label %for.cond19.preheader, label %if.else52, !dbg !5410

for.cond19.preheader:                             ; preds = %if.then16
  %21 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !5412, !tbaa !2301
  %cmp201404 = icmp sgt i32 %21, 0, !dbg !5412
  br i1 %cmp201404, label %for.body21, label %for.end, !dbg !5412

for.body21:                                       ; preds = %for.cond19.preheader, %for.body21
  %indvars.iv1445 = phi i64 [ %indvars.iv.next1446, %for.body21 ], [ 0, %for.cond19.preheader ]
  %22 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !5415, !tbaa !2295
  %arrayidx = getelementptr inbounds %"struct.pov::Texture_Struct"** %22, i64 %indvars.iv1445, !dbg !5415
  %23 = load %"struct.pov::Texture_Struct"** %arrayidx, align 8, !dbg !5415, !tbaa !2295
  %24 = bitcast %"struct.pov::Texture_Struct"* %23 to %"struct.pov::Pattern_Struct"*, !dbg !5415
  %Flags = getelementptr inbounds %"struct.pov::Texture_Struct"* %23, i64 0, i32 2, !dbg !5415
  %25 = load i16* %Flags, align 2, !dbg !5415, !tbaa !2755
  %conv26 = zext i16 %25 to i32, !dbg !5415
  %and27 = and i32 %conv26, 8, !dbg !5415
  call void @_ZN3pov11Warp_NormalEPdS0_PNS_14Pattern_StructEi(double* %arraydecay12, double* %arraydecay12, %"struct.pov::Pattern_Struct"* %24, i32 %and27) #7, !dbg !5415
  %indvars.iv.next1446 = add i64 %indvars.iv1445, 1, !dbg !5412
  %26 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !5412, !tbaa !2301
  %27 = trunc i64 %indvars.iv.next1446 to i32, !dbg !5412
  %cmp20 = icmp slt i32 %27, %26, !dbg !5412
  br i1 %cmp20, label %for.body21, label %for.cond19.for.end_crit_edge, !dbg !5412

for.cond19.for.end_crit_edge:                     ; preds = %for.body21
  %.pre1465 = load %"struct.pov::Tnormal_Struct"** %Tnormal, align 8, !dbg !5416, !tbaa !2295
  br label %for.end, !dbg !5412

for.end:                                          ; preds = %for.cond19.for.end_crit_edge, %for.cond19.preheader
  %28 = phi %"struct.pov::Tnormal_Struct"* [ %.pre1465, %for.cond19.for.end_crit_edge ], [ %19, %for.cond19.preheader ]
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %arraydecay12, %"struct.pov::Tnormal_Struct"* %28, double* %IPoint, %"struct.pov::istk_entry"* %Intersect) #7, !dbg !5416
  %29 = load %"struct.pov::Tnormal_Struct"** %Tnormal, align 8, !dbg !5417, !tbaa !2295
  %Flags31 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %29, i64 0, i32 2, !dbg !5417
  %30 = load i16* %Flags31, align 2, !dbg !5417, !tbaa !2755
  %and33 = and i16 %30, 8, !dbg !5417
  %tobool34 = icmp eq i16 %and33, 0, !dbg !5417
  br i1 %tobool34, label %if.end37, label %if.then35, !dbg !5417

if.then35:                                        ; preds = %for.end
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5418) #6, !dbg !5420
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5421) #6, !dbg !5423
  %31 = load double* %arraydecay12, align 16, !dbg !5424, !tbaa !2552
  %mul.i.i1208 = fmul double %31, %31, !dbg !5424
  %32 = load double* %arrayidx3.i1206, align 8, !dbg !5424, !tbaa !2552
  %mul4.i.i1210 = fmul double %32, %32, !dbg !5424
  %add.i.i1211 = fadd double %mul.i.i1208, %mul4.i.i1210, !dbg !5424
  %33 = load double* %arrayidx5.i, align 16, !dbg !5424, !tbaa !2552
  %mul7.i.i1213 = fmul double %33, %33, !dbg !5424
  %add8.i.i1214 = fadd double %add.i.i1211, %mul7.i.i1213, !dbg !5424
  %call.i.i1215 = call double @sqrt(double %add8.i.i1214) #8, !dbg !5424
  call void @llvm.dbg.value(metadata !{double %call.i.i1215}, i64 0, metadata !5425) #6, !dbg !5424
  call void @llvm.dbg.value(metadata !{double %call.i.i1215}, i64 0, metadata !5426) #6, !dbg !5423
  call void @llvm.dbg.value(metadata !{double %call.i.i1215}, i64 0, metadata !5427) #6, !dbg !5428
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5429) #6, !dbg !5430
  call void @llvm.dbg.value(metadata !{double %call.i.i1215}, i64 0, metadata !5431) #6, !dbg !5430
  %div.i.i1216 = fdiv double 1.000000e+00, %call.i.i1215, !dbg !5432
  call void @llvm.dbg.value(metadata !{double %div.i.i1216}, i64 0, metadata !5433) #6, !dbg !5432
  %34 = load double* %arraydecay12, align 16, !dbg !5434, !tbaa !2552
  %mul.i2.i = fmul double %div.i.i1216, %34, !dbg !5434
  store double %mul.i2.i, double* %arraydecay12, align 16, !dbg !5434, !tbaa !2552
  %35 = load double* %arrayidx3.i1206, align 8, !dbg !5435, !tbaa !2552
  %mul2.i.i = fmul double %div.i.i1216, %35, !dbg !5435
  store double %mul2.i.i, double* %arrayidx3.i1206, align 8, !dbg !5435, !tbaa !2552
  %36 = load double* %arrayidx5.i, align 16, !dbg !5436, !tbaa !2552
  %mul4.i3.i = fmul double %div.i.i1216, %36, !dbg !5436
  store double %mul4.i3.i, double* %arrayidx5.i, align 16, !dbg !5436, !tbaa !2552
  br label %if.end37, !dbg !5419

if.end37:                                         ; preds = %for.end, %if.then35
  %37 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !5437, !tbaa !2301
  %cmp391407 = icmp sgt i32 %37, 0, !dbg !5437
  br i1 %cmp391407, label %for.body40.lr.ph, label %if.end56, !dbg !5437

for.body40.lr.ph:                                 ; preds = %if.end37
  %38 = sext i32 %37 to i64
  br label %for.body40, !dbg !5437

for.body40:                                       ; preds = %for.body40.lr.ph, %for.body40
  %indvars.iv1447 = phi i64 [ %38, %for.body40.lr.ph ], [ %indvars.iv.next1448, %for.body40 ]
  %indvars.iv.next1448 = add i64 %indvars.iv1447, -1, !dbg !5437
  %39 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !5439, !tbaa !2295
  %arrayidx44 = getelementptr inbounds %"struct.pov::Texture_Struct"** %39, i64 %indvars.iv.next1448, !dbg !5439
  %40 = load %"struct.pov::Texture_Struct"** %arrayidx44, align 8, !dbg !5439, !tbaa !2295
  %41 = bitcast %"struct.pov::Texture_Struct"* %40 to %"struct.pov::Pattern_Struct"*, !dbg !5439
  %Flags47 = getelementptr inbounds %"struct.pov::Texture_Struct"* %40, i64 0, i32 2, !dbg !5439
  %42 = load i16* %Flags47, align 2, !dbg !5439, !tbaa !2755
  %conv48 = zext i16 %42 to i32, !dbg !5439
  %and49 = and i32 %conv48, 8, !dbg !5439
  call void @_ZN3pov13UnWarp_NormalEPdS0_PNS_14Pattern_StructEi(double* %arraydecay12, double* %arraydecay12, %"struct.pov::Pattern_Struct"* %41, i32 %and49) #7, !dbg !5439
  %43 = trunc i64 %indvars.iv.next1448 to i32, !dbg !5437
  %cmp39 = icmp sgt i32 %43, 0, !dbg !5437
  br i1 %cmp39, label %for.body40, label %if.end56, !dbg !5437

if.else52:                                        ; preds = %if.then16
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %arraydecay12, %"struct.pov::Tnormal_Struct"* %19, double* %IPoint, %"struct.pov::istk_entry"* %Intersect) #7, !dbg !5440
  br label %if.end56

if.end56:                                         ; preds = %if.end37, %for.body40, %land.lhs.true14, %for.body, %if.else52
  %44 = trunc i64 %indvars.iv1455 to i32, !dbg !5441
  %tobool57 = icmp eq i32 %44, 0, !dbg !5441
  br i1 %tobool57, label %if.then58, label %if.end61, !dbg !5441

if.then58:                                        ; preds = %if.end56
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay59}, i64 0, metadata !5442), !dbg !5443
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5444), !dbg !5443
  %45 = load double* %arraydecay12, align 16, !dbg !5445, !tbaa !2552
  store double %45, double* %arraydecay59, align 16, !dbg !5445, !tbaa !2552
  %46 = load double* %arrayidx3.i1206, align 8, !dbg !5364, !tbaa !2552
  store double %46, double* %arrayidx3.i1218, align 8, !dbg !5364, !tbaa !2552
  %47 = load double* %arrayidx5.i, align 16, !dbg !5365, !tbaa !2552
  store double %47, double* %arrayidx5.i1220, align 16, !dbg !5365, !tbaa !2552
  br label %if.end61, !dbg !5446

if.end61:                                         ; preds = %if.end56, %if.then58
  %48 = phi double [ %12, %if.end56 ], [ %47, %if.then58 ]
  %49 = phi double [ %13, %if.end56 ], [ %46, %if.then58 ]
  %50 = phi double [ %14, %if.end56 ], [ %45, %if.then58 ]
  %mul = fmul double %Trans.01427, %Weight, !dbg !5447
  call void @llvm.dbg.value(metadata !{double %mul}, i64 0, metadata !1487), !dbg !5447
  %Pigment = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01428, i64 0, i32 12, !dbg !5366
  %51 = load %"struct.pov::Pigment_Struct"** %Pigment, align 8, !dbg !5366, !tbaa !2295
  %call63 = call i32 @_ZN3pov15Compute_PigmentEPfPNS_14Pigment_StructEPdPNS_10istk_entryE(float* %arraydecay62, %"struct.pov::Pigment_Struct"* %51, double* %IPoint, %"struct.pov::istk_entry"* %Intersect) #7, !dbg !5366
  call void @llvm.dbg.value(metadata !{i32 %call63}, i64 0, metadata !1485), !dbg !5366
  %tobool64 = icmp ne i32 %call63, 0, !dbg !5448
  call void @llvm.dbg.value(metadata !2354, i64 0, metadata !1484), !dbg !5449
  %.one_colour_found.0 = select i1 %tobool64, i32 1, i32 %one_colour_found.01430, !dbg !5448
  %52 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !5451, !tbaa !2301
  %and68 = and i32 %52, 1, !dbg !5451
  %tobool69 = icmp eq i32 %and68, 0, !dbg !5451
  br i1 %tobool69, label %if.else74, label %if.then70, !dbg !5451

if.then70:                                        ; preds = %if.end61
  tail call void @llvm.dbg.value(metadata !{float* %ResCol}, i64 0, metadata !5452), !dbg !5455
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay62}, i64 0, metadata !5456), !dbg !5455
  %53 = load float* %arraydecay62, align 16, !dbg !5457, !tbaa !2644
  store float %53, float* %ResCol, align 4, !dbg !5457, !tbaa !2644
  %54 = load float* %arrayidx143, align 4, !dbg !5458, !tbaa !2644
  store float %54, float* %arrayidx1.i, align 4, !dbg !5458, !tbaa !2644
  %55 = load float* %arrayidx156, align 8, !dbg !5459, !tbaa !2644
  store float %55, float* %arrayidx2.i, align 4, !dbg !5459, !tbaa !2644
  store float 0.000000e+00, float* %arrayidx4.i, align 4, !dbg !5460, !tbaa !2644
  store float 0.000000e+00, float* %arrayidx3.i, align 4, !dbg !5460, !tbaa !2644
  br label %if.end399, !dbg !5461

if.else74:                                        ; preds = %if.end61
  %cmp75 = icmp eq i32 %44, 100, !dbg !5462
  br i1 %cmp75, label %if.then76, label %if.end78, !dbg !5462

if.then76:                                        ; preds = %if.else74
  %call77 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([25 x i8]* @.str12, i64 0, i64 0)) #7, !dbg !5463
  br label %if.end78, !dbg !5465

if.end78:                                         ; preds = %if.then76, %if.else74
  %Finish = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01428, i64 0, i32 14, !dbg !5466
  %56 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5466, !tbaa !2295
  %Reflect_Exp = getelementptr inbounds %"struct.pov::Finish_Struct"* %56, i64 0, i32 13, !dbg !5466
  %57 = load float* %Reflect_Exp, align 4, !dbg !5466, !tbaa !2644
  %arrayidx80 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 5, i64 %indvars.iv1455, !dbg !5466
  store float %57, float* %arrayidx80, align 4, !dbg !5466, !tbaa !2644
  %arrayidx82 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 2, i64 %indvars.iv1455, !dbg !5467
  store double %mul, double* %arrayidx82, align 8, !dbg !5467, !tbaa !2552
  %arraydecay85 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1455, i64 0, !dbg !5468
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay85}, i64 0, metadata !5469), !dbg !5470
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5471), !dbg !5470
  %58 = load double* %arraydecay12, align 16, !dbg !5472, !tbaa !2552
  store double %58, double* %arraydecay85, align 8, !dbg !5472, !tbaa !2552
  %59 = load double* %arrayidx3.i1206, align 8, !dbg !5473, !tbaa !2552
  %arrayidx3.i1226 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1455, i64 1, !dbg !5473
  store double %59, double* %arrayidx3.i1226, align 8, !dbg !5473, !tbaa !2552
  %60 = load double* %arrayidx5.i, align 16, !dbg !5474, !tbaa !2552
  %arrayidx5.i1228 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1455, i64 2, !dbg !5474
  store double %60, double* %arrayidx5.i1228, align 8, !dbg !5474, !tbaa !2552
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay87}, i64 0, metadata !5475), !dbg !5476
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5477), !dbg !5476
  %61 = load double* %arraydecay87, align 8, !dbg !5368, !tbaa !2552
  %62 = load double* %arraydecay12, align 16, !dbg !5368, !tbaa !2552
  %mul.i1229 = fmul double %61, %62, !dbg !5368
  %63 = load double* %arrayidx2.i1230, align 8, !dbg !5368, !tbaa !2552
  %64 = load double* %arrayidx3.i1206, align 8, !dbg !5368, !tbaa !2552
  %mul4.i = fmul double %63, %64, !dbg !5368
  %add.i1232 = fadd double %mul.i1229, %mul4.i, !dbg !5368
  %65 = load double* %arrayidx5.i1233, align 8, !dbg !5368, !tbaa !2552
  %66 = load double* %arrayidx5.i, align 16, !dbg !5368, !tbaa !2552
  %mul7.i = fmul double %65, %66, !dbg !5368
  %add8.i = fadd double %add.i1232, %mul7.i, !dbg !5368
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1505), !dbg !5368
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !5478), !dbg !5476
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1505), !dbg !5479
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1505), !dbg !5480
  call void @llvm.dbg.value(metadata !{double %add8.i}, i64 0, metadata !1505), !dbg !5482
  %mul89 = fmul double %add8.i, -1.000000e+00, !dbg !5479
  call void @llvm.dbg.value(metadata !{double %mul89}, i64 0, metadata !1505), !dbg !5479
  call void @llvm.dbg.value(metadata !{double %mul89}, i64 0, metadata !5478), !dbg !5476
  call void @llvm.dbg.value(metadata !{double %mul89}, i64 0, metadata !1505), !dbg !5479
  call void @llvm.dbg.value(metadata !{double %mul89}, i64 0, metadata !1505), !dbg !5480
  call void @llvm.dbg.value(metadata !{double %mul89}, i64 0, metadata !1505), !dbg !5482
  %67 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !5369, !tbaa !2295
  %Interior90 = getelementptr inbounds %"struct.pov::Object_Struct"* %67, i64 0, i32 5, !dbg !5369
  %68 = load %"struct.pov::Interior_Struct"** %Interior90, align 8, !dbg !5369, !tbaa !2295
  %tobool91 = icmp eq %"struct.pov::Interior_Struct"* %68, null, !dbg !5369
  %Reflection_Type = getelementptr inbounds %"struct.pov::Finish_Struct"* %56, i64 0, i32 20, !dbg !5369
  %69 = load i32* %Reflection_Type, align 4, !dbg !5369, !tbaa !2301
  %cmp93 = icmp eq i32 %69, 1, !dbg !5369
  %or.cond1475 = and i1 %tobool91, %cmp93, !dbg !5369
  br i1 %or.cond1475, label %if.else110, label %if.then94, !dbg !5369

if.then94:                                        ; preds = %if.end78
  %arraydecay99 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 0, !dbg !5480
  %arraydecay101 = getelementptr inbounds %"struct.pov::Finish_Struct"* %56, i64 0, i32 17, i64 0, !dbg !5480
  %arraydecay103 = getelementptr inbounds %"struct.pov::Finish_Struct"* %56, i64 0, i32 18, i64 0, !dbg !5480
  %Reflection_Falloff = getelementptr inbounds %"struct.pov::Finish_Struct"* %56, i64 0, i32 19, !dbg !5480
  %70 = load float* %Reflection_Falloff, align 4, !dbg !5480, !tbaa !2644
  %conv107 = fpext float %70 to double, !dbg !5480
  call fastcc void @_ZN3povL22determine_reflectivityEPdPfS1_S1_iddPNS_10Ray_StructEPNS_15Interior_StructE(double* %arrayidx82, float* %arraydecay99, float* %arraydecay101, float* %arraydecay103, i32 %69, double %conv107, double %mul89, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Interior_Struct"* %68) #7, !dbg !5480
  br label %if.end112, !dbg !5483

if.else110:                                       ; preds = %if.end78
  %call111 = call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([41 x i8]* @.str13, i64 0, i64 0)) #7, !dbg !5484
  br label %if.end112

if.end112:                                        ; preds = %if.else110, %if.then94
  %71 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5486, !tbaa !2295
  %Reflect_Metallic = getelementptr inbounds %"struct.pov::Finish_Struct"* %71, i64 0, i32 21, !dbg !5486
  %72 = load float* %Reflect_Metallic, align 4, !dbg !5486, !tbaa !2644
  %cmp115 = fcmp une float %72, 0.000000e+00, !dbg !5486
  br i1 %cmp115, label %if.then116, label %if.end167, !dbg !5486

if.then116:                                       ; preds = %if.end112
  %conv114 = fpext float %72 to double, !dbg !5486
  call void @llvm.dbg.value(metadata !{double %conv114}, i64 0, metadata !1513), !dbg !5487
  %call120 = call double @acos(double %mul89) #8, !dbg !5482
  %call121 = call double @fabs(double %call120) #9, !dbg !5482
  %div = fdiv double %call121, 0x3FF921FB54442D18, !dbg !5482
  call void @llvm.dbg.value(metadata !{double %div}, i64 0, metadata !1518), !dbg !5482
  %sub122 = fadd double %div, -1.120000e+00, !dbg !5488
  tail call void @llvm.dbg.value(metadata !{double %sub122}, i64 0, metadata !5489), !dbg !5490
  %mul.i1235 = fmul double %sub122, %sub122, !dbg !5491
  %div124 = fdiv double 0x3F8DD56BD7BF6F16, %mul.i1235, !dbg !5488
  %sub125 = fadd double %div124, 0xBF87C88174C5E0DC, !dbg !5488
  call void @llvm.dbg.value(metadata !{double %sub125}, i64 0, metadata !1519), !dbg !5488
  call void @llvm.dbg.value(metadata !{double %sub125}, i64 0, metadata !5492), !dbg !5494
  call void @llvm.dbg.value(metadata !{double %sub125}, i64 0, metadata !1519), !dbg !5370
  call void @llvm.dbg.value(metadata !{double %sub125}, i64 0, metadata !1519), !dbg !5371
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5495), !dbg !5496
  %cmp.i1236 = fcmp ogt double %sub125, 0.000000e+00, !dbg !5497
  tail call void @llvm.dbg.value(metadata !3148, i64 0, metadata !5498), !dbg !5496
  %.sroa.speculated1350 = select i1 %cmp.i1236, double %sub125, double 0.000000e+00, !dbg !5499
  %cmp.i1238 = fcmp olt double %.sroa.speculated1350, 1.000000e+00, !dbg !5499
  %.sroa.speculated1347 = select i1 %cmp.i1238, double %.sroa.speculated1350, double 1.000000e+00, !dbg !5493
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1347}, i64 0, metadata !1519), !dbg !5493
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1347}, i64 0, metadata !5492), !dbg !5494
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1347}, i64 0, metadata !1519), !dbg !5370
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1347}, i64 0, metadata !1519), !dbg !5371
  %sub129 = fsub double 1.000000e+00, %.sroa.speculated1347, !dbg !5500
  %mul130 = fmul double %conv114, %sub129, !dbg !5500
  %73 = load float* %arraydecay62, align 16, !dbg !5500, !tbaa !2644
  %conv132 = fpext float %73 to double, !dbg !5500
  %sub133 = fadd double %conv132, -1.000000e+00, !dbg !5500
  %mul134 = fmul double %sub133, %mul130, !dbg !5500
  %add = fadd double %mul134, 1.000000e+00, !dbg !5500
  %arrayidx137 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 0, !dbg !5500
  %74 = load float* %arrayidx137, align 4, !dbg !5500, !tbaa !2644
  %conv138 = fpext float %74 to double, !dbg !5500
  %mul139 = fmul double %conv138, %add, !dbg !5500
  %conv140 = fptrunc double %mul139 to float, !dbg !5500
  store float %conv140, float* %arrayidx137, align 4, !dbg !5500, !tbaa !2644
  %75 = load float* %arrayidx143, align 4, !dbg !5370, !tbaa !2644
  %conv144 = fpext float %75 to double, !dbg !5370
  %sub145 = fadd double %conv144, -1.000000e+00, !dbg !5370
  %mul146 = fmul double %sub145, %mul130, !dbg !5370
  %add147 = fadd double %mul146, 1.000000e+00, !dbg !5370
  %arrayidx150 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 1, !dbg !5370
  %76 = load float* %arrayidx150, align 4, !dbg !5370, !tbaa !2644
  %conv151 = fpext float %76 to double, !dbg !5370
  %mul152 = fmul double %conv151, %add147, !dbg !5370
  %conv153 = fptrunc double %mul152 to float, !dbg !5370
  store float %conv153, float* %arrayidx150, align 4, !dbg !5370, !tbaa !2644
  %77 = load float* %arrayidx156, align 8, !dbg !5371, !tbaa !2644
  %conv157 = fpext float %77 to double, !dbg !5371
  %sub158 = fadd double %conv157, -1.000000e+00, !dbg !5371
  %mul159 = fmul double %mul130, %sub158, !dbg !5371
  %add160 = fadd double %mul159, 1.000000e+00, !dbg !5371
  %arrayidx163 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 2, !dbg !5371
  %78 = load float* %arrayidx163, align 4, !dbg !5371, !tbaa !2644
  %conv164 = fpext float %78 to double, !dbg !5371
  %mul165 = fmul double %conv164, %add160, !dbg !5371
  %conv166 = fptrunc double %mul165 to float, !dbg !5371
  store float %conv166, float* %arrayidx163, align 4, !dbg !5371, !tbaa !2644
  br label %if.end167, !dbg !5501

if.end167:                                        ; preds = %if.then116, %if.end112
  %79 = load float* %arrayidx168, align 4, !dbg !5372, !tbaa !2644
  tail call void @llvm.dbg.value(metadata !{float* %arrayidx143}, i64 0, metadata !5502), !dbg !5503
  tail call void @llvm.dbg.value(metadata !{float* %arrayidx156}, i64 0, metadata !5504), !dbg !5503
  %80 = load float* %arrayidx143, align 4, !dbg !5505, !tbaa !2644
  %81 = load float* %arrayidx156, align 8, !dbg !5505, !tbaa !2644
  %cmp.i1240 = fcmp olt float %80, %81, !dbg !5505
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay62}, i64 0, metadata !5502), !dbg !5503
  %82 = load float* %arraydecay62, align 16, !dbg !5505, !tbaa !2644
  %83 = select i1 %cmp.i1240, float %81, float %80, !dbg !5505
  %cmp.i1242 = fcmp olt float %82, %83, !dbg !5505
  %84 = select i1 %cmp.i1242, float %83, float %82, !dbg !5372
  %mul174 = fmul float %79, %84, !dbg !5372
  %85 = load float* %arrayidx175, align 16, !dbg !5372, !tbaa !2644
  %add176 = fadd float %85, %mul174, !dbg !5372
  %conv177 = fpext float %add176 to double, !dbg !5372
  %sub178 = fsub double 1.000000e+00, %conv177, !dbg !5372
  call void @llvm.dbg.value(metadata !{double %sub178}, i64 0, metadata !1488), !dbg !5372
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5506), !dbg !5507
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5508), !dbg !5507
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5509), !dbg !5507
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5510), !dbg !5507
  %tobool182 = icmp eq i32 %radiosity_done.01433, 0, !dbg !5376
  %or.cond1190 = and i1 %tobool180, %tobool182, !dbg !5376
  %86 = bitcast [5 x float]* %TmpCol to i8*, !dbg !5376
  call void @llvm.memset.p0i8.i64(i8* %86, i8 0, i64 20, i32 16, i1 false), !dbg !5374
  br i1 %or.cond1190, label %if.then183, label %if.end249, !dbg !5376

if.then183:                                       ; preds = %if.end167
  %conv185 = fpext float %FilCol.sroa.0.0.load136513911425 to double, !dbg !5511
  %mul186 = fmul double %conv185, %sub178, !dbg !5511
  %conv188 = fpext float %82 to double, !dbg !5511
  %mul189 = fmul double %mul186, %conv188, !dbg !5511
  %87 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5511, !tbaa !2295
  %Diffuse = getelementptr inbounds %"struct.pov::Finish_Struct"* %87, i64 0, i32 0, !dbg !5511
  %88 = load float* %Diffuse, align 4, !dbg !5511, !tbaa !2644
  %conv191 = fpext float %88 to double, !dbg !5511
  %mul192 = fmul double %mul189, %conv191, !dbg !5511
  %conv193 = fptrunc double %mul192 to float, !dbg !5511
  %conv196 = fpext float %FilCol.sroa.1.4.load137413931423 to double, !dbg !5512
  %mul197 = fmul double %conv196, %sub178, !dbg !5512
  %conv199 = fpext float %80 to double, !dbg !5512
  %mul200 = fmul double %mul197, %conv199, !dbg !5512
  %mul204 = fmul double %conv191, %mul200, !dbg !5512
  %conv205 = fptrunc double %mul204 to float, !dbg !5512
  %conv208 = fpext float %FilCol.sroa.2.8.load138313951421 to double, !dbg !5513
  %mul209 = fmul double %conv208, %sub178, !dbg !5513
  %conv211 = fpext float %81 to double, !dbg !5513
  %mul212 = fmul double %mul209, %conv211, !dbg !5513
  %mul216 = fmul double %conv191, %mul212, !dbg !5513
  %conv217 = fptrunc double %mul216 to float, !dbg !5513
  %conv220 = fpext float %conv193 to double, !dbg !5514
  %mul221 = fmul double %conv220, 2.970000e-01, !dbg !5514
  %conv223 = fpext float %conv205 to double, !dbg !5514
  %mul224 = fmul double %conv223, 5.890000e-01, !dbg !5514
  %add225 = fadd double %mul221, %mul224, !dbg !5514
  %conv227 = fpext float %conv217 to double, !dbg !5514
  %mul228 = fmul double %conv227, 1.140000e-01, !dbg !5514
  %add229 = fadd double %add225, %mul228, !dbg !5514
  call void @llvm.dbg.value(metadata !{double %add229}, i64 0, metadata !1490), !dbg !5514
  %89 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !5515, !tbaa !2552
  %mul230 = fmul double %89, 3.000000e+00, !dbg !5515
  %cmp231 = fcmp ogt double %add229, %mul230, !dbg !5515
  br i1 %cmp231, label %if.then232, label %if.end249, !dbg !5515

if.then232:                                       ; preds = %if.then183
  %90 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 54), align 8, !dbg !5516, !tbaa !2301
  %tobool233 = icmp eq i32 %90, 0, !dbg !5516
  %mul245 = fmul double %add229, %Weight, !dbg !5517
  br i1 %tobool233, label %if.else241, label %if.then234, !dbg !5516

if.then234:                                       ; preds = %if.then232
  %call240 = call i32 @_ZN3pov15Compute_AmbientEPdS0_S0_Pfd(double* %arraydecay236, double* %Raw_Normal, double* %arraydecay12, float* %arraydecay9, double %mul245) #7, !dbg !5377
  br label %if.end249, !dbg !5377

if.else241:                                       ; preds = %if.then232
  %call246 = call i32 @_ZN3pov15Compute_AmbientEPdS0_S0_Pfd(double* %arraydecay236, double* %Raw_Normal, double* %Raw_Normal, float* %arraydecay9, double %mul245) #7, !dbg !5517
  br label %if.end249

if.end249:                                        ; preds = %if.then234, %if.else241, %if.then183, %if.end167
  %radiosity_done.1 = phi i32 [ 0, %if.then183 ], [ %radiosity_done.01433, %if.end167 ], [ 1, %if.else241 ], [ 1, %if.then234 ]
  br i1 %tobool180, label %if.then251, label %if.end249.if.end303_crit_edge, !dbg !5518

if.end249.if.end303_crit_edge:                    ; preds = %if.end249
  %.pre1466 = load float* %arraydecay62, align 16, !dbg !5519, !tbaa !2644
  %.pre1467 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5519, !tbaa !2295
  %.pre1468 = load float* %arrayidx143, align 4, !dbg !5520, !tbaa !2644
  %.pre1469 = load float* %arrayidx156, align 8, !dbg !5521, !tbaa !2644
  %conv305.pre = fpext float %FilCol.sroa.0.0.load136513911425 to double, !dbg !5519
  %mul306.pre = fmul double %conv305.pre, %sub178, !dbg !5519
  %conv321.pre = fpext float %FilCol.sroa.1.4.load137413931423 to double, !dbg !5520
  %mul322.pre = fmul double %conv321.pre, %sub178, !dbg !5520
  %conv338.pre = fpext float %FilCol.sroa.2.8.load138313951421 to double, !dbg !5521
  %mul339.pre = fmul double %conv338.pre, %sub178, !dbg !5521
  br label %if.end303, !dbg !5518

if.then251:                                       ; preds = %if.end249
  %conv253 = fpext float %FilCol.sroa.0.0.load136513911425 to double, !dbg !5522
  %mul254 = fmul double %conv253, %sub178, !dbg !5522
  %91 = load float* %arraydecay62, align 16, !dbg !5522, !tbaa !2644
  %conv256 = fpext float %91 to double, !dbg !5522
  %mul257 = fmul double %mul254, %conv256, !dbg !5522
  %92 = load float* %arraydecay9, align 16, !dbg !5522, !tbaa !2644
  %conv259 = fpext float %92 to double, !dbg !5522
  %mul260 = fmul double %mul257, %conv259, !dbg !5522
  %93 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5522, !tbaa !2295
  %Diffuse262 = getelementptr inbounds %"struct.pov::Finish_Struct"* %93, i64 0, i32 0, !dbg !5522
  %94 = load float* %Diffuse262, align 4, !dbg !5522, !tbaa !2644
  %conv263 = fpext float %94 to double, !dbg !5522
  %mul264 = fmul double %mul260, %conv263, !dbg !5522
  %add267 = fadd double %mul264, 0.000000e+00, !dbg !5522
  %conv268 = fptrunc double %add267 to float, !dbg !5522
  store float %conv268, float* %arraydecay179, align 16, !dbg !5522, !tbaa !2644
  %conv270 = fpext float %FilCol.sroa.1.4.load137413931423 to double, !dbg !5524
  %mul271 = fmul double %conv270, %sub178, !dbg !5524
  %95 = load float* %arrayidx143, align 4, !dbg !5524, !tbaa !2644
  %conv273 = fpext float %95 to double, !dbg !5524
  %mul274 = fmul double %mul271, %conv273, !dbg !5524
  %96 = load float* %arrayidx1.i1201, align 4, !dbg !5524, !tbaa !2644
  %conv276 = fpext float %96 to double, !dbg !5524
  %mul277 = fmul double %mul274, %conv276, !dbg !5524
  %mul281 = fmul double %mul277, %conv263, !dbg !5524
  %add284 = fadd double %mul281, 0.000000e+00, !dbg !5524
  %conv285 = fptrunc double %add284 to float, !dbg !5524
  store float %conv285, float* %arrayidx1.i1244, align 4, !dbg !5524, !tbaa !2644
  %conv287 = fpext float %FilCol.sroa.2.8.load138313951421 to double, !dbg !5525
  %mul288 = fmul double %conv287, %sub178, !dbg !5525
  %97 = load float* %arrayidx156, align 8, !dbg !5525, !tbaa !2644
  %conv290 = fpext float %97 to double, !dbg !5525
  %mul291 = fmul double %mul288, %conv290, !dbg !5525
  %98 = load float* %arrayidx2.i1202, align 8, !dbg !5525, !tbaa !2644
  %conv293 = fpext float %98 to double, !dbg !5525
  %mul294 = fmul double %mul291, %conv293, !dbg !5525
  %mul298 = fmul double %mul294, %conv263, !dbg !5525
  %add301 = fadd double %mul298, 0.000000e+00, !dbg !5525
  %conv302 = fptrunc double %add301 to float, !dbg !5525
  store float %conv302, float* %arrayidx2.i1245, align 8, !dbg !5525, !tbaa !2644
  %phitmp1472 = fpext float %conv268 to double, !dbg !5526
  %phitmp1473 = fpext float %conv285 to double, !dbg !5526
  %phitmp1474 = fpext float %conv302 to double, !dbg !5526
  br label %if.end303, !dbg !5526

if.end303:                                        ; preds = %if.end249.if.end303_crit_edge, %if.then251
  %mul339.pre-phi = phi double [ %mul339.pre, %if.end249.if.end303_crit_edge ], [ %mul288, %if.then251 ], !dbg !5521
  %mul322.pre-phi = phi double [ %mul322.pre, %if.end249.if.end303_crit_edge ], [ %mul271, %if.then251 ], !dbg !5520
  %mul306.pre-phi = phi double [ %mul306.pre, %if.end249.if.end303_crit_edge ], [ %mul254, %if.then251 ], !dbg !5519
  %99 = phi float [ %.pre1469, %if.end249.if.end303_crit_edge ], [ %97, %if.then251 ]
  %100 = phi float [ %.pre1468, %if.end249.if.end303_crit_edge ], [ %95, %if.then251 ]
  %101 = phi %"struct.pov::Finish_Struct"* [ %.pre1467, %if.end249.if.end303_crit_edge ], [ %93, %if.then251 ]
  %102 = phi float [ %.pre1466, %if.end249.if.end303_crit_edge ], [ %91, %if.then251 ]
  %103 = phi double [ 0.000000e+00, %if.end249.if.end303_crit_edge ], [ %phitmp1474, %if.then251 ]
  %104 = phi double [ 0.000000e+00, %if.end249.if.end303_crit_edge ], [ %phitmp1473, %if.then251 ]
  %105 = phi double [ 0.000000e+00, %if.end249.if.end303_crit_edge ], [ %phitmp1472, %if.then251 ]
  %conv308 = fpext float %102 to double, !dbg !5519
  %mul309 = fmul double %mul306.pre-phi, %conv308, !dbg !5519
  %arrayidx311 = getelementptr inbounds %"struct.pov::Finish_Struct"* %101, i64 0, i32 16, i64 0, !dbg !5519
  %106 = load float* %arrayidx311, align 4, !dbg !5519, !tbaa !2644
  %conv312 = fpext float %106 to double, !dbg !5519
  %mul313 = fmul double %mul309, %conv312, !dbg !5519
  %107 = load float* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 10, i64 0), align 4, !dbg !5519, !tbaa !2644
  %conv314 = fpext float %107 to double, !dbg !5519
  %mul315 = fmul double %mul313, %conv314, !dbg !5519
  %add318 = fadd double %105, %mul315, !dbg !5519
  %conv319 = fptrunc double %add318 to float, !dbg !5519
  %conv324 = fpext float %100 to double, !dbg !5520
  %mul325 = fmul double %mul322.pre-phi, %conv324, !dbg !5520
  %arrayidx328 = getelementptr inbounds %"struct.pov::Finish_Struct"* %101, i64 0, i32 16, i64 1, !dbg !5520
  %108 = load float* %arrayidx328, align 4, !dbg !5520, !tbaa !2644
  %conv329 = fpext float %108 to double, !dbg !5520
  %mul330 = fmul double %mul325, %conv329, !dbg !5520
  %109 = load float* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 10, i64 1), align 4, !dbg !5520, !tbaa !2644
  %conv331 = fpext float %109 to double, !dbg !5520
  %mul332 = fmul double %mul330, %conv331, !dbg !5520
  %add335 = fadd double %104, %mul332, !dbg !5520
  %conv336 = fptrunc double %add335 to float, !dbg !5520
  %conv341 = fpext float %99 to double, !dbg !5521
  %mul342 = fmul double %mul339.pre-phi, %conv341, !dbg !5521
  %arrayidx345 = getelementptr inbounds %"struct.pov::Finish_Struct"* %101, i64 0, i32 16, i64 2, !dbg !5521
  %110 = load float* %arrayidx345, align 4, !dbg !5521, !tbaa !2644
  %conv346 = fpext float %110 to double, !dbg !5521
  %mul347 = fmul double %mul342, %conv346, !dbg !5521
  %111 = load float* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 10, i64 2), align 4, !dbg !5521, !tbaa !2644
  %conv348 = fpext float %111 to double, !dbg !5521
  %mul349 = fmul double %mul347, %conv348, !dbg !5521
  %add352 = fadd double %103, %mul349, !dbg !5521
  %conv353 = fptrunc double %add352 to float, !dbg !5521
  tail call void @llvm.dbg.value(metadata !{float* %ResCol}, i64 0, metadata !5527), !dbg !5529
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5530), !dbg !5529
  %112 = load float* %ResCol, align 4, !dbg !5531, !tbaa !2644
  %add.i1248 = fadd float %conv319, %112, !dbg !5531
  store float %add.i1248, float* %ResCol, align 4, !dbg !5531, !tbaa !2644
  %113 = load float* %arrayidx1.i, align 4, !dbg !5533, !tbaa !2644
  %add4.i = fadd float %conv336, %113, !dbg !5533
  store float %add4.i, float* %arrayidx1.i, align 4, !dbg !5533, !tbaa !2644
  %114 = load float* %arrayidx2.i, align 4, !dbg !5534, !tbaa !2644
  %add7.i = fadd float %conv353, %114, !dbg !5534
  store float %add7.i, float* %arrayidx2.i, align 4, !dbg !5534, !tbaa !2644
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5535), !dbg !5537
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5538), !dbg !5537
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5539), !dbg !5537
  tail call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5540), !dbg !5537
  %115 = bitcast [5 x float]* %TmpCol to i8*, !dbg !5541
  call void @llvm.memset.p0i8.i64(i8* %115, i8 0, i64 20, i32 16, i1 false), !dbg !5542
  %116 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !5541, !tbaa !2295
  %Flags357 = getelementptr inbounds %"struct.pov::Object_Struct"* %116, i64 0, i32 13, !dbg !5541
  %117 = load i32* %Flags357, align 4, !dbg !5541, !tbaa !2301
  store i32 %117, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 26), align 4, !dbg !5541, !tbaa !2301
  call void @llvm.lifetime.start(i64 24, i8* %6), !dbg !5380
  call void @llvm.dbg.value(metadata !{%"struct.pov::Finish_Struct"* %101}, i64 0, metadata !5543), !dbg !5380
  call void @llvm.dbg.value(metadata !{double* %arraydecay236}, i64 0, metadata !5544), !dbg !5380
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !5545), !dbg !5380
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5546), !dbg !5380
  call void @llvm.dbg.value(metadata !{float* %arraydecay62}, i64 0, metadata !5547), !dbg !5380
  call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5548), !dbg !5380
  call void @llvm.dbg.value(metadata !{double %sub178}, i64 0, metadata !5549), !dbg !5380
  call void @llvm.dbg.value(metadata !{%"struct.pov::Object_Struct"* %116}, i64 0, metadata !5550), !dbg !5380
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Local_Normal.i}, metadata !1700), !dbg !5551
  %Diffuse.i1313 = getelementptr inbounds %"struct.pov::Finish_Struct"* %101, i64 0, i32 0, !dbg !5552
  %118 = load float* %Diffuse.i1313, align 4, !dbg !5552, !tbaa !2644
  %cmp.i1314 = fcmp oeq float %118, 0.000000e+00, !dbg !5552
  %Specular.i1315 = getelementptr inbounds %"struct.pov::Finish_Struct"* %101, i64 0, i32 2, !dbg !5552
  %119 = load float* %Specular.i1315, align 4, !dbg !5552, !tbaa !2644
  %cmp2.i = fcmp oeq float %119, 0.000000e+00, !dbg !5552
  %or.cond1476 = and i1 %cmp.i1314, %cmp2.i, !dbg !5552
  br i1 %or.cond1476, label %land.lhs.true3.i, label %if.end.i1318, !dbg !5552

land.lhs.true3.i:                                 ; preds = %if.end303
  %Phong.i1316 = getelementptr inbounds %"struct.pov::Finish_Struct"* %101, i64 0, i32 4, !dbg !5552
  %120 = load float* %Phong.i1316, align 4, !dbg !5552, !tbaa !2644
  %cmp5.i = fcmp oeq float %120, 0.000000e+00, !dbg !5552
  br i1 %cmp5.i, label %_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit, label %if.end.i1318, !dbg !5552

if.end.i1318:                                     ; preds = %if.end303, %land.lhs.true3.i
  %cmp8.i1317 = fcmp une float %119, 0.000000e+00, !dbg !5553
  br i1 %cmp8.i1317, label %if.then9.i1321, label %if.end19.i, !dbg !5553

if.then9.i1321:                                   ; preds = %if.end.i1318
  %121 = load double* %arraydecay87, align 8, !dbg !5554, !tbaa !2552
  %sub.i1320 = fsub double -0.000000e+00, %121, !dbg !5554
  store double %sub.i1320, double* %arrayidx13.i, align 16, !dbg !5554, !tbaa !2552
  %122 = load double* %arrayidx2.i1230, align 8, !dbg !5556, !tbaa !2552
  %sub13.i = fsub double -0.000000e+00, %122, !dbg !5556
  store double %sub13.i, double* %arrayidx17.i, align 8, !dbg !5556, !tbaa !2552
  %123 = load double* %arrayidx5.i1233, align 8, !dbg !5557, !tbaa !2552
  %sub17.i = fsub double -0.000000e+00, %123, !dbg !5557
  store double %sub17.i, double* %arrayidx21.i, align 16, !dbg !5557, !tbaa !2552
  br label %if.end19.i, !dbg !5558

if.end19.i:                                       ; preds = %if.then9.i1321, %if.end.i1318
  %124 = load i32* %Flags357, align 4, !dbg !5559, !tbaa !2301
  %and.i1323 = and i32 %124, 131072, !dbg !5559
  %cmp21.i = icmp eq i32 %and.i1323, 0, !dbg !5559
  br i1 %cmp21.i, label %for.cond.i.preheader, label %if.end24.i, !dbg !5559

for.cond.i.preheader:                             ; preds = %if.end19.i
  %Light_Source.0.i1409 = load %"struct.pov::Light_Source_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 4), align 8, !dbg !5560
  %cmp23.i1410 = icmp eq %"struct.pov::Light_Source_Struct"* %Light_Source.0.i1409, null, !dbg !5560
  br i1 %cmp23.i1410, label %if.end24.i, label %for.body.i1326, !dbg !5560

for.body.i1326:                                   ; preds = %for.cond.i.preheader, %for.body.i1326
  %Light_Source.0.i1412 = phi %"struct.pov::Light_Source_Struct"* [ %Light_Source.0.i, %for.body.i1326 ], [ %Light_Source.0.i1409, %for.cond.i.preheader ]
  %i.0.i1411 = phi i32 [ %inc.i1325, %for.body.i1326 ], [ 0, %for.cond.i.preheader ]
  call fastcc void @_ZN3povL17Diffuse_One_LightEPNS_19Light_Source_StructEiPdPNS_13Finish_StructES2_PNS_10Ray_StructES2_PfS7_dPNS_13Object_StructE(%"struct.pov::Light_Source_Struct"* %Light_Source.0.i1412, i32 %i.0.i1411, double* %arrayidx13.i, %"struct.pov::Finish_Struct"* %101, double* %arraydecay236, %"struct.pov::Ray_Struct"* %Ray, double* %arraydecay12, float* %arraydecay62, float* %arraydecay179, double %sub178, %"struct.pov::Object_Struct"* %116) #7, !dbg !5563
  %Next_Light_Source.i = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light_Source.0.i1412, i64 0, i32 26, !dbg !5565
  %inc.i1325 = add nsw i32 %i.0.i1411, 1, !dbg !5565
  call void @llvm.dbg.value(metadata !{i32 %inc.i1325}, i64 0, metadata !5566), !dbg !5565
  %Light_Source.0.i = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source.i, align 8, !dbg !5560
  %cmp23.i = icmp eq %"struct.pov::Light_Source_Struct"* %Light_Source.0.i, null, !dbg !5560
  br i1 %cmp23.i, label %if.end24.i, label %for.body.i1326, !dbg !5560

if.end24.i:                                       ; preds = %for.cond.i.preheader, %for.body.i1326, %if.end19.i
  %LLights.i = getelementptr inbounds %"struct.pov::Object_Struct"* %116, i64 0, i32 8, !dbg !5567
  %125 = load %"struct.pov::Light_Source_Struct"** %LLights.i, align 8, !dbg !5567, !tbaa !2295
  %tobool.i1327 = icmp eq %"struct.pov::Light_Source_Struct"* %125, null, !dbg !5567
  br i1 %tobool.i1327, label %_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit, label %for.body29.i, !dbg !5567

for.body29.i:                                     ; preds = %if.end24.i, %for.body29.i
  %Light_Source.1.i1414 = phi %"struct.pov::Light_Source_Struct"* [ %126, %for.body29.i ], [ %125, %if.end24.i ]
  call fastcc void @_ZN3povL17Diffuse_One_LightEPNS_19Light_Source_StructEiPdPNS_13Finish_StructES2_PNS_10Ray_StructES2_PfS7_dPNS_13Object_StructE(%"struct.pov::Light_Source_Struct"* %Light_Source.1.i1414, i32 -1, double* %arrayidx13.i, %"struct.pov::Finish_Struct"* %101, double* %arraydecay236, %"struct.pov::Ray_Struct"* %Ray, double* %arraydecay12, float* %arraydecay62, float* %arraydecay179, double %sub178, %"struct.pov::Object_Struct"* %116) #7, !dbg !5568
  %Next_Light_Source32.i = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light_Source.1.i1414, i64 0, i32 26, !dbg !5572
  %126 = load %"struct.pov::Light_Source_Struct"** %Next_Light_Source32.i, align 8, !dbg !5572, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Light_Source_Struct"* %126}, i64 0, metadata !5573), !dbg !5572
  %cmp28.i = icmp eq %"struct.pov::Light_Source_Struct"* %126, null, !dbg !5574
  br i1 %cmp28.i, label %_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit, label %for.body29.i, !dbg !5574

_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit: ; preds = %for.body29.i, %if.end24.i, %land.lhs.true3.i
  call void @llvm.lifetime.end(i64 24, i8* %6), !dbg !5575
  %127 = load float* %arraydecay179, align 16, !dbg !5576, !tbaa !2644
  %mul367 = fmul float %FilCol.sroa.0.0.load136513911425, %127, !dbg !5576
  store float %mul367, float* %arraydecay179, align 16, !dbg !5576, !tbaa !2644
  %128 = load float* %arrayidx1.i1244, align 4, !dbg !5577, !tbaa !2644
  %mul370 = fmul float %FilCol.sroa.1.4.load137413931423, %128, !dbg !5577
  store float %mul370, float* %arrayidx1.i1244, align 4, !dbg !5577, !tbaa !2644
  %129 = load float* %arrayidx2.i1245, align 8, !dbg !5578, !tbaa !2644
  %mul373 = fmul float %FilCol.sroa.2.8.load138313951421, %129, !dbg !5578
  store float %mul373, float* %arrayidx2.i1245, align 8, !dbg !5578, !tbaa !2644
  tail call void @llvm.dbg.value(metadata !{float* %ResCol}, i64 0, metadata !5579), !dbg !5581
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5582), !dbg !5581
  %130 = load float* %ResCol, align 4, !dbg !5583, !tbaa !2644
  %add.i1259 = fadd float %mul367, %130, !dbg !5583
  store float %add.i1259, float* %ResCol, align 4, !dbg !5583, !tbaa !2644
  %131 = load float* %arrayidx1.i, align 4, !dbg !5584, !tbaa !2644
  %add4.i1262 = fadd float %mul370, %131, !dbg !5584
  store float %add4.i1262, float* %arrayidx1.i, align 4, !dbg !5584, !tbaa !2644
  %132 = load float* %arrayidx2.i, align 4, !dbg !5585, !tbaa !2644
  %add7.i1265 = fadd float %mul373, %132, !dbg !5585
  store float %add7.i1265, float* %arrayidx2.i, align 4, !dbg !5585, !tbaa !2644
  %133 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !5586, !tbaa !2295
  %Flags376 = getelementptr inbounds %"struct.pov::Object_Struct"* %133, i64 0, i32 13, !dbg !5586
  %134 = load i32* %Flags376, align 4, !dbg !5586, !tbaa !2301
  %and378 = and i32 %134, 33554432, !dbg !5586
  %tobool379 = icmp eq i32 %and378, 0, !dbg !5586
  br i1 %tobool379, label %if.then380, label %if.end399, !dbg !5586

if.then380:                                       ; preds = %_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit
  %135 = load %"struct.pov::Finish_Struct"** %Finish, align 8, !dbg !5383, !tbaa !2295
  call void @llvm.lifetime.start(i64 24, i8* %6), !dbg !5382
  call void @llvm.lifetime.start(i64 20, i8* %7), !dbg !5382
  call void @llvm.lifetime.start(i64 20, i8* %8), !dbg !5382
  call void @llvm.lifetime.start(i64 8, i8* %9), !dbg !5382
  call void @llvm.dbg.value(metadata !{%"struct.pov::Finish_Struct"* %135}, i64 0, metadata !5587), !dbg !5382
  call void @llvm.dbg.value(metadata !{double* %arraydecay236}, i64 0, metadata !5588), !dbg !5382
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !5589), !dbg !5382
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5590), !dbg !5382
  call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !5591), !dbg !5382
  call void @llvm.dbg.value(metadata !{float* %arraydecay62}, i64 0, metadata !5592), !dbg !5382
  call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5593), !dbg !5382
  call void @llvm.dbg.value(metadata !{double %sub178}, i64 0, metadata !5594), !dbg !5382
  call void @llvm.dbg.value(metadata !{%"struct.pov::Object_Struct"* %133}, i64 0, metadata !5595), !dbg !5382
  call void @llvm.lifetime.start(i64 856, i8* %10) #6, !dbg !5385
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Ray_Struct"* %Light_Source_Ray.i}, metadata !1619), !dbg !5385
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Local_Normal.i}, metadata !1620), !dbg !5596
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Hue.i}, metadata !1621), !dbg !5597
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Elem.i}, metadata !1622), !dbg !5597
  call void @llvm.dbg.declare(metadata !2878, metadata !1623), !dbg !5597
  call void @llvm.dbg.declare(metadata !{double* %tempr.i}, metadata !1626), !dbg !5598
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !5599), !dbg !5600
  call void @llvm.dbg.value(metadata !5601, i64 0, metadata !5602), !dbg !5603
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !5604), !dbg !5605
  %136 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 0), align 8, !dbg !5606, !tbaa !2301
  %tobool.i1266 = icmp eq i32 %136, 0, !dbg !5606
  %137 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 2), align 4, !dbg !5606, !tbaa !2301
  %cmp.i1267 = icmp slt i32 %137, 1, !dbg !5606
  %or.cond.i1268 = or i1 %tobool.i1266, %cmp.i1267, !dbg !5606
  br i1 %or.cond.i1268, label %if.then.i1269, label %if.end.i1272, !dbg !5606

if.then.i1269:                                    ; preds = %if.then380
  call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5607), !dbg !5609
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5610), !dbg !5609
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5611), !dbg !5609
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5612), !dbg !5609
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5613), !dbg !5609
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5614), !dbg !5609
  call void @llvm.memset.p0i8.i64(i8* %11, i8 0, i64 20, i32 16, i1 false), !dbg !5615
  br label %_ZN3povL13PhotonDiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_S2_PfS5_dPNS_13Object_StructE.exit, !dbg !5386

if.end.i1272:                                     ; preds = %if.then380
  %Diffuse.i = getelementptr inbounds %"struct.pov::Finish_Struct"* %135, i64 0, i32 0, !dbg !5616
  %138 = load float* %Diffuse.i, align 4, !dbg !5616, !tbaa !2644
  %cmp1.i1270 = fcmp oeq float %138, 0.000000e+00, !dbg !5616
  %Specular.i = getelementptr inbounds %"struct.pov::Finish_Struct"* %135, i64 0, i32 2, !dbg !5616
  %139 = load float* %Specular.i, align 4, !dbg !5616, !tbaa !2644
  %cmp3.i1271 = fcmp oeq float %139, 0.000000e+00, !dbg !5616
  %or.cond344.i = and i1 %cmp1.i1270, %cmp3.i1271, !dbg !5616
  br i1 %or.cond344.i, label %land.lhs.true4.i, label %if.end8.i, !dbg !5616

land.lhs.true4.i:                                 ; preds = %if.end.i1272
  %Phong.i = getelementptr inbounds %"struct.pov::Finish_Struct"* %135, i64 0, i32 4, !dbg !5616
  %140 = load float* %Phong.i, align 4, !dbg !5616, !tbaa !2644
  %cmp6.i = fcmp oeq float %140, 0.000000e+00, !dbg !5616
  br i1 %cmp6.i, label %if.then7.i, label %if.end8.i, !dbg !5616

if.then7.i:                                       ; preds = %land.lhs.true4.i
  call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5617), !dbg !5620
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5621), !dbg !5620
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5622), !dbg !5620
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5623), !dbg !5620
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5624), !dbg !5620
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5625), !dbg !5620
  call void @llvm.memset.p0i8.i64(i8* %11, i8 0, i64 20, i32 16, i1 false), !dbg !5626
  br label %_ZN3povL13PhotonDiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_S2_PfS5_dPNS_13Object_StructE.exit, !dbg !5627

if.end8.i:                                        ; preds = %land.lhs.true4.i, %if.end.i1272
  call void @llvm.dbg.value(metadata !5628, i64 0, metadata !5629), !dbg !5631
  %141 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 124), align 8, !dbg !5632, !tbaa !2311
  %inc.i221.i = add nsw i64 %141, 1, !dbg !5632
  store i64 %inc.i221.i, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 124), align 8, !dbg !5632, !tbaa !2311
  %cmp11.i1273 = fcmp une float %139, 0.000000e+00, !dbg !5633
  br i1 %cmp11.i1273, label %if.then12.i1276, label %if.end22.i, !dbg !5633

if.then12.i1276:                                  ; preds = %if.end8.i
  %142 = load double* %arraydecay87, align 8, !dbg !5388, !tbaa !2552
  %sub.i1275 = fsub double -0.000000e+00, %142, !dbg !5388
  store double %sub.i1275, double* %arrayidx13.i, align 16, !dbg !5388, !tbaa !2552
  %143 = load double* %arrayidx2.i1230, align 8, !dbg !5390, !tbaa !2552
  %sub16.i = fsub double -0.000000e+00, %143, !dbg !5390
  store double %sub16.i, double* %arrayidx17.i, align 8, !dbg !5390, !tbaa !2552
  %144 = load double* %arrayidx5.i1233, align 8, !dbg !5391, !tbaa !2552
  %sub20.i = fsub double -0.000000e+00, %144, !dbg !5391
  store double %sub20.i, double* %arrayidx21.i, align 16, !dbg !5391, !tbaa !2552
  br label %if.end22.i, !dbg !5634

if.end22.i:                                       ; preds = %if.then12.i1276, %if.end8.i
  call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5635), !dbg !5637
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5638), !dbg !5637
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5639), !dbg !5637
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5640), !dbg !5637
  call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5641), !dbg !5643
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5644), !dbg !5643
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5645), !dbg !5643
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5646), !dbg !5643
  call void @llvm.dbg.value(metadata !5647, i64 0, metadata !5648), !dbg !5649
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !5650), !dbg !5651
  call void @llvm.memset.p0i8.i64(i8* %11, i8 0, i64 20, i32 16, i1 false), !dbg !5652
  %145 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 9), align 8, !dbg !5653, !tbaa !2301
  %cmp23283302.i = icmp sgt i32 %145, -1, !dbg !5653
  %146 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 6), align 8, !dbg !5653, !tbaa !2301
  %cmp24284303.i = icmp sgt i32 %146, 0, !dbg !5653
  %or.cond206285304.i = and i1 %cmp23283302.i, %cmp24284303.i, !dbg !5653
  br i1 %or.cond206285304.i, label %while.body.lr.ph.lr.ph.i, label %if.end152.i, !dbg !5653

while.body.lr.ph.lr.ph.i:                         ; preds = %if.end22.i
  %147 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 3), align 8, !dbg !5654, !tbaa !2552
  %Phong99.i = getelementptr inbounds %"struct.pov::Finish_Struct"* %135, i64 0, i32 4, !dbg !5655
  %Irid.i = getelementptr inbounds %"struct.pov::Finish_Struct"* %135, i64 0, i32 6, !dbg !5657
  %.pre.pre.i = load i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !5658, !tbaa !2301
  br label %while.body.i, !dbg !5653

while.body.i:                                     ; preds = %if.else146.i, %while.body.lr.ph.lr.ph.i
  %.pre.i = phi i32 [ %.pre.pre.i, %while.body.lr.ph.lr.ph.i ], [ 0, %if.else146.i ]
  %Size.0.ph313.i = phi double [ %147, %while.body.lr.ph.lr.ph.i ], [ %add147.i, %if.else146.i ]
  %r.0.ph312.i = phi double [ undef, %while.body.lr.ph.lr.ph.i ], [ %r.1.i, %if.else146.i ]
  %expanded.0.ph311.i = phi i32 [ 0, %while.body.lr.ph.lr.ph.i ], [ %expanded.2.i, %if.else146.i ]
  %prevDensity.0.ph310.i = phi double [ 1.000000e-16, %while.body.lr.ph.lr.ph.i ], [ %prevDensity.2.i, %if.else146.i ]
  %step.0.ph309.i = phi i32 [ 0, %while.body.lr.ph.lr.ph.i ], [ %inc148.i, %if.else146.i ]
  %n.0.ph308.i = phi i32 [ -1, %while.body.lr.ph.lr.ph.i ], [ %n.1.i, %if.else146.i ]
  %.ph270307.i = phi float [ 0.000000e+00, %while.body.lr.ph.lr.ph.i ], [ %187, %if.else146.i ]
  %.ph269306.i = phi float [ 0.000000e+00, %while.body.lr.ph.lr.ph.i ], [ %186, %if.else146.i ]
  %.ph305.i = phi float [ 0.000000e+00, %while.body.lr.ph.lr.ph.i ], [ %185, %if.else146.i ]
  call void @llvm.dbg.value(metadata !{float* %arraydecay25.i}, i64 0, metadata !5659), !dbg !5660
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5661), !dbg !5660
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5662), !dbg !5660
  call void @llvm.dbg.value(metadata !2823, i64 0, metadata !5663), !dbg !5660
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !5664), !dbg !5665
  call void @llvm.memset.p0i8.i64(i8* %8, i8 0, i64 20, i32 16, i1 false), !dbg !5393
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !5664), !dbg !5665
  call void @llvm.dbg.value(metadata !3304, i64 0, metadata !1626), !dbg !5665
  store double 0.000000e+00, double* %tempr.i, align 8, !dbg !5665, !tbaa !2552
  %cmp26.i = icmp slt i32 %.pre.i, 1, !dbg !5658
  br i1 %cmp26.i, label %if.then27.i, label %if.else.i1279, !dbg !5658

if.then27.i:                                      ; preds = %while.body.i
  %call.i1278 = call i32 @_ZN3pov13gatherPhotonsEPddS0_S0_iPNS_17photon_map_structE(double* %arraydecay236, double %Size.0.ph313.i, double* %tempr.i, double* %arraydecay12, i32 1, %"struct.pov::photon_map_struct"* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14)) #7, !dbg !5666
  call void @llvm.dbg.value(metadata !{i32 %call.i1278}, i64 0, metadata !5668), !dbg !5666
  br label %if.end28.i, !dbg !5669

if.else.i1279:                                    ; preds = %while.body.i
  call void @llvm.dbg.value(metadata !{i32 %.pre.i}, i64 0, metadata !5668), !dbg !5670
  %148 = load double* @_ZN3pov11previousRadE, align 8, !dbg !5672, !tbaa !2552
  call void @llvm.dbg.value(metadata !{double %148}, i64 0, metadata !5664), !dbg !5672
  call void @llvm.dbg.value(metadata !{double %148}, i64 0, metadata !1626), !dbg !5672
  store double %148, double* %tempr.i, align 8, !dbg !5672, !tbaa !2552
  br label %if.end28.i

if.end28.i:                                       ; preds = %if.else.i1279, %if.then27.i
  %tempn.0.i = phi i32 [ %call.i1278, %if.then27.i ], [ %.pre.i, %if.else.i1279 ]
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !5673), !dbg !5674
  %cmp29267.i = icmp sgt i32 %tempn.0.i, 0, !dbg !5674
  br i1 %cmp29267.i, label %for.body.i1285, label %for.end.i1296, !dbg !5674

for.body.i1285:                                   ; preds = %for.inc.i, %if.end28.i
  %indvars.iv.i = phi i64 [ 0, %if.end28.i ], [ %indvars.iv.next.i, %for.inc.i ]
  %149 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 21), align 8, !dbg !5395, !tbaa !2295
  %arrayidx31.i = getelementptr inbounds %"struct.pov::photon_struct"** %149, i64 %indvars.iv.i, !dbg !5395
  %150 = load %"struct.pov::photon_struct"** %arrayidx31.i, align 8, !dbg !5395, !tbaa !2295
  %arraydecay33.i = getelementptr inbounds %"struct.pov::photon_struct"* %150, i64 0, i32 1, i64 0, !dbg !5395
  call void @_ZN3pov17photonRgbe2colourEPfPh(float* %arraydecay30.i, i8* %arraydecay33.i) #7, !dbg !5395
  %151 = load %"struct.pov::photon_struct"*** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 21), align 8, !dbg !5675, !tbaa !2295
  %arrayidx35.i = getelementptr inbounds %"struct.pov::photon_struct"** %151, i64 %indvars.iv.i, !dbg !5675
  %152 = load %"struct.pov::photon_struct"** %arrayidx35.i, align 8, !dbg !5675, !tbaa !2295
  %theta36.i = getelementptr inbounds %"struct.pov::photon_struct"* %152, i64 0, i32 3, !dbg !5675
  %153 = load i8* %theta36.i, align 1, !dbg !5675, !tbaa !2296
  %conv37.i = sext i8 %153 to i64, !dbg !5675
  %add.i1280 = add i64 %conv37.i, 127, !dbg !5675
  %phi40.i = getelementptr inbounds %"struct.pov::photon_struct"* %152, i64 0, i32 4, !dbg !5676
  %154 = load i8* %phi40.i, align 1, !dbg !5676, !tbaa !2296
  %conv41.i = sext i8 %154 to i64, !dbg !5676
  %add42.i = add i64 %conv41.i, 127, !dbg !5676
  %155 = load double** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 20), align 8, !dbg !5396, !tbaa !2295
  %arrayidx44.i = getelementptr inbounds double* %155, i64 %add.i1280, !dbg !5396
  %156 = load double* %arrayidx44.i, align 8, !dbg !5396, !tbaa !2552
  store double %156, double* %arrayidx46.i, align 8, !dbg !5396, !tbaa !2552
  %157 = load double** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 19), align 8, !dbg !5397, !tbaa !2295
  %arrayidx48.i = getelementptr inbounds double* %157, i64 %add.i1280, !dbg !5397
  %158 = load double* %arrayidx48.i, align 8, !dbg !5397, !tbaa !2552
  %arrayidx54.i = getelementptr inbounds double* %155, i64 %add42.i, !dbg !5398
  %159 = load double* %arrayidx54.i, align 8, !dbg !5398, !tbaa !2552
  %mul.i1281 = fmul double %158, %159, !dbg !5398
  store double %mul.i1281, double* %arrayidx56.i, align 8, !dbg !5398, !tbaa !2552
  %arrayidx60.i = getelementptr inbounds double* %157, i64 %add42.i, !dbg !5677
  %160 = load double* %arrayidx60.i, align 8, !dbg !5677, !tbaa !2552
  %mul61.i = fmul double %158, %160, !dbg !5677
  store double %mul61.i, double* %arrayidx50.i, align 8, !dbg !5677, !tbaa !2552
  %arraydecay67.i = getelementptr inbounds %"struct.pov::photon_struct"* %152, i64 0, i32 0, i64 0, !dbg !5399
  call void @llvm.dbg.value(metadata !{double* %arraydecay64.i}, i64 0, metadata !5678), !dbg !5679
  call void @llvm.dbg.value(metadata !{float* %arraydecay67.i}, i64 0, metadata !5680), !dbg !5679
  call void @llvm.dbg.value(metadata !{double* %arrayidx50.i}, i64 0, metadata !5681), !dbg !5679
  %161 = load float* %arraydecay67.i, align 4, !dbg !5682, !tbaa !2644
  %conv.i.i1282 = fpext float %161 to double, !dbg !5682
  %sub.i.i1283 = fsub double %conv.i.i1282, %mul61.i, !dbg !5682
  store double %sub.i.i1283, double* %arraydecay64.i, align 8, !dbg !5682, !tbaa !2552
  %arrayidx3.i251.i1284 = getelementptr inbounds %"struct.pov::photon_struct"* %152, i64 0, i32 0, i64 1, !dbg !5400
  %162 = load float* %arrayidx3.i251.i1284, align 4, !dbg !5400, !tbaa !2644
  %conv4.i.i = fpext float %162 to double, !dbg !5400
  %sub6.i.i = fsub double %conv4.i.i, %156, !dbg !5400
  store double %sub6.i.i, double* %arrayidx7.i253.i, align 8, !dbg !5400, !tbaa !2552
  %arrayidx8.i254.i = getelementptr inbounds %"struct.pov::photon_struct"* %152, i64 0, i32 0, i64 2, !dbg !5401
  %163 = load float* %arrayidx8.i254.i, align 4, !dbg !5401, !tbaa !2644
  %conv9.i.i = fpext float %163 to double, !dbg !5401
  %sub11.i.i = fsub double %conv9.i.i, %mul.i1281, !dbg !5401
  store double %sub11.i.i, double* %arrayidx12.i.i, align 8, !dbg !5401, !tbaa !2552
  call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !5683), !dbg !5685
  call void @llvm.dbg.value(metadata !{double* %arrayidx50.i}, i64 0, metadata !5686), !dbg !5685
  %164 = load double* %Raw_Normal, align 8, !dbg !5687, !tbaa !2552
  %mul.i242.i = fmul double %mul61.i, %164, !dbg !5687
  %165 = load double* %arrayidx2.i1205, align 8, !dbg !5687, !tbaa !2552
  %mul4.i245.i = fmul double %156, %165, !dbg !5687
  %add.i246.i = fadd double %mul.i242.i, %mul4.i245.i, !dbg !5687
  %166 = load double* %arrayidx4.i1207, align 8, !dbg !5687, !tbaa !2552
  %mul7.i249.i = fmul double %mul.i1281, %166, !dbg !5687
  %add8.i250.i = fadd double %add.i246.i, %mul7.i249.i, !dbg !5687
  call void @llvm.dbg.value(metadata !{double %add8.i250.i}, i64 0, metadata !5688), !dbg !5687
  call void @llvm.dbg.value(metadata !{double %add8.i250.i}, i64 0, metadata !5689), !dbg !5685
  call void @llvm.dbg.value(metadata !{double %add8.i250.i}, i64 0, metadata !5690), !dbg !5691
  call void @llvm.dbg.value(metadata !{double %add8.i250.i}, i64 0, metadata !5690), !dbg !5692
  call void @llvm.dbg.value(metadata !{double %add8.i250.i}, i64 0, metadata !5690), !dbg !5693
  %cmp72.i = fcmp ogt double %add8.i250.i, 1.000000e+00, !dbg !5691
  br i1 %cmp72.i, label %if.end77.i, label %if.end74.i, !dbg !5691

if.end74.i:                                       ; preds = %for.body.i1285
  %cmp75.i1286 = fcmp olt double %add8.i250.i, 1.000000e-01, !dbg !5692
  br i1 %cmp75.i1286, label %if.then76.i1287, label %if.end77.i, !dbg !5692

if.then76.i1287:                                  ; preds = %if.end74.i
  call void @llvm.dbg.value(metadata !5694, i64 0, metadata !5690), !dbg !5692
  call void @llvm.dbg.value(metadata !5694, i64 0, metadata !5689), !dbg !5685
  call void @llvm.dbg.value(metadata !5694, i64 0, metadata !5690), !dbg !5691
  call void @llvm.dbg.value(metadata !5694, i64 0, metadata !5690), !dbg !5692
  call void @llvm.dbg.value(metadata !5694, i64 0, metadata !5690), !dbg !5693
  br label %if.end77.i, !dbg !5692

if.end77.i:                                       ; preds = %if.then76.i1287, %if.end74.i, %for.body.i1285
  %add8.i250265.i = phi double [ 1.000000e-01, %if.then76.i1287 ], [ %add8.i250.i, %if.end74.i ], [ 1.000000e+00, %for.body.i1285 ], !dbg !5693
  %call78.i = call double @fabs(double %add8.i250265.i) #9, !dbg !5693
  %div.i1288 = fdiv double 1.000000e+00, %call78.i, !dbg !5693
  call void @llvm.dbg.value(metadata !{double %div.i1288}, i64 0, metadata !5690), !dbg !5693
  call void @llvm.dbg.value(metadata !{double %div.i1288}, i64 0, metadata !5689), !dbg !5685
  call void @llvm.dbg.value(metadata !{double %div.i1288}, i64 0, metadata !5690), !dbg !5691
  call void @llvm.dbg.value(metadata !{double %div.i1288}, i64 0, metadata !5690), !dbg !5692
  call void @llvm.dbg.value(metadata !{double %div.i1288}, i64 0, metadata !5690), !dbg !5693
  %conv80.i = fptrunc double %div.i1288 to float, !dbg !5403
  call void @llvm.dbg.value(metadata !{float* %arraydecay30.i}, i64 0, metadata !5695), !dbg !5696
  call void @llvm.dbg.value(metadata !{float %conv80.i}, i64 0, metadata !5697), !dbg !5696
  %167 = load float* %arraydecay30.i, align 16, !dbg !5698, !tbaa !2644
  %mul.i237.i = fmul float %167, %conv80.i, !dbg !5698
  store float %mul.i237.i, float* %arraydecay30.i, align 16, !dbg !5698, !tbaa !2644
  %168 = load float* %arrayidx1.i238.i, align 4, !dbg !5402, !tbaa !2644
  %mul2.i239.i = fmul float %conv80.i, %168, !dbg !5402
  store float %mul2.i239.i, float* %arrayidx1.i238.i, align 4, !dbg !5402, !tbaa !2644
  %169 = load float* %arrayidx3.i240.i, align 8, !dbg !5404, !tbaa !2644
  %mul4.i241.i = fmul float %conv80.i, %169, !dbg !5404
  store float %mul4.i241.i, float* %arrayidx3.i240.i, align 8, !dbg !5404, !tbaa !2644
  %170 = load i32* %Flags376, align 4, !dbg !5699, !tbaa !2301
  %and.i = and i32 %170, 16384, !dbg !5699
  %tobool82.i = icmp eq i32 %and.i, 0, !dbg !5699
  br i1 %tobool82.i, label %if.then83.i, label %if.end89.i, !dbg !5699

if.then83.i:                                      ; preds = %if.end77.i
  call void @llvm.dbg.value(metadata !{double* %arraydecay12}, i64 0, metadata !5700), !dbg !5703
  call void @llvm.dbg.value(metadata !{double* %arrayidx50.i}, i64 0, metadata !5704), !dbg !5703
  %171 = load double* %arraydecay12, align 16, !dbg !5705, !tbaa !2552
  %mul.i230.i = fmul double %mul61.i, %171, !dbg !5705
  %172 = load double* %arrayidx3.i1206, align 8, !dbg !5705, !tbaa !2552
  %mul4.i233.i = fmul double %156, %172, !dbg !5705
  %add.i234.i = fadd double %mul.i230.i, %mul4.i233.i, !dbg !5705
  %173 = load double* %arrayidx5.i, align 16, !dbg !5705, !tbaa !2552
  %mul7.i.i1289 = fmul double %mul.i1281, %173, !dbg !5705
  %add8.i.i1290 = fadd double %add.i234.i, %mul7.i.i1289, !dbg !5705
  call void @llvm.dbg.value(metadata !{double %add8.i.i1290}, i64 0, metadata !5706), !dbg !5705
  call void @llvm.dbg.value(metadata !{double %add8.i.i1290}, i64 0, metadata !5707), !dbg !5703
  call void @llvm.dbg.value(metadata !{double %add8.i.i1290}, i64 0, metadata !5708), !dbg !5709
  %cmp86.i = fcmp olt double %add8.i.i1290, 1.000000e-07, !dbg !5709
  br i1 %cmp86.i, label %for.inc.i, label %if.end89.i, !dbg !5709

if.end89.i:                                       ; preds = %if.then83.i, %if.end77.i
  %174 = load float* %Diffuse.i, align 4, !dbg !5710, !tbaa !2644
  %cmp92.i = fcmp ogt float %174, 0.000000e+00, !dbg !5710
  br i1 %cmp92.i, label %if.then93.i, label %if.end96.i, !dbg !5710

if.then93.i:                                      ; preds = %if.end89.i
  call void @_ZN3pov10do_diffuseEPNS_13Finish_StructEPNS_10Ray_StructEPdPfS5_S5_d(%"struct.pov::Finish_Struct"* %135, %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, double* %arraydecay12, float* %arraydecay25.i, float* %arraydecay30.i, float* %arraydecay62, double %sub178) #7, !dbg !5711
  br label %if.end96.i, !dbg !5713

if.end96.i:                                       ; preds = %if.then93.i, %if.end89.i
  %175 = load i32* @_ZN3pov21Radiosity_Trace_LevelE, align 4, !dbg !5714, !tbaa !2301
  %cmp97.i1291 = icmp slt i32 %175, 2, !dbg !5714
  br i1 %cmp97.i1291, label %if.then98.i, label %if.end116.i, !dbg !5714

if.then98.i:                                      ; preds = %if.end96.i
  %176 = load float* %Phong99.i, align 4, !dbg !5655, !tbaa !2644
  %cmp101.i1292 = fcmp ogt float %176, 0.000000e+00, !dbg !5655
  br i1 %cmp101.i1292, label %if.then102.i1293, label %if.end107.i, !dbg !5655

if.then102.i1293:                                 ; preds = %if.then98.i
  call void @_ZN3pov8do_phongEPNS_13Finish_StructEPNS_10Ray_StructEPdS4_PfS5_S5_(%"struct.pov::Finish_Struct"* %135, %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, double* %arraydecay87, double* %arraydecay12, float* %arraydecay25.i, float* %arraydecay30.i, float* %arraydecay62) #7, !dbg !5715
  br label %if.end107.i, !dbg !5717

if.end107.i:                                      ; preds = %if.then102.i1293, %if.then98.i
  %177 = load float* %Specular.i, align 4, !dbg !5718, !tbaa !2644
  %cmp110.i1294 = fcmp ogt float %177, 0.000000e+00, !dbg !5718
  br i1 %cmp110.i1294, label %if.then111.i1295, label %if.end116.i, !dbg !5718

if.then111.i1295:                                 ; preds = %if.end107.i
  call void @_ZN3pov11do_specularEPNS_13Finish_StructEPNS_10Ray_StructEPdS4_PfS5_S5_(%"struct.pov::Finish_Struct"* %135, %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, double* %arrayidx13.i, double* %arraydecay12, float* %arraydecay25.i, float* %arraydecay30.i, float* %arraydecay62) #7, !dbg !5719
  br label %if.end116.i, !dbg !5721

if.end116.i:                                      ; preds = %if.then111.i1295, %if.end107.i, %if.end96.i
  %178 = load float* %Irid.i, align 4, !dbg !5657, !tbaa !2644
  %cmp118.i = fcmp ogt float %178, 0.000000e+00, !dbg !5657
  br i1 %cmp118.i, label %if.then119.i, label %for.inc.i, !dbg !5657

if.then119.i:                                     ; preds = %if.end116.i
  call fastcc void @_ZN3povL7do_iridEPNS_13Finish_StructEPNS_10Ray_StructEPdS4_Pf(%"struct.pov::Finish_Struct"* %135, %"struct.pov::Ray_Struct"* %Light_Source_Ray.i, double* %arraydecay12, double* %arraydecay236, float* %arraydecay25.i) #7, !dbg !5722
  br label %for.inc.i, !dbg !5724

for.inc.i:                                        ; preds = %if.then119.i, %if.end116.i, %if.then83.i
  %indvars.iv.next.i = add i64 %indvars.iv.i, 1, !dbg !5674
  %lftr.wideiv1449 = trunc i64 %indvars.iv.next.i to i32, !dbg !5674
  %exitcond1450 = icmp eq i32 %lftr.wideiv1449, %tempn.0.i, !dbg !5674
  br i1 %exitcond1450, label %for.end.i1296, label %for.body.i1285, !dbg !5674

for.end.i1296:                                    ; preds = %for.inc.i, %if.end28.i
  %conv122.i = sitofp i32 %tempn.0.i to double, !dbg !5725
  call void @llvm.dbg.value(metadata !{double* %tempr.i}, i64 0, metadata !5664), !dbg !5725
  call void @llvm.dbg.value(metadata !{double* %tempr.i}, i64 0, metadata !1626), !dbg !5725
  %179 = load double* %tempr.i, align 8, !dbg !5725, !tbaa !2552
  %mul123.i = fmul double %179, %179, !dbg !5725
  %div124.i = fdiv double %conv122.i, %mul123.i, !dbg !5725
  call void @llvm.dbg.value(metadata !{double %div124.i}, i64 0, metadata !5599), !dbg !5725
  %sub125.i = fsub double %div124.i, %prevDensity.0.ph310.i, !dbg !5726
  %div126.i = fdiv double %sub125.i, %prevDensity.0.ph310.i, !dbg !5726
  %180 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 3), align 8, !dbg !5726, !tbaa !2552
  %cmp127.i = fcmp olt double %div126.i, %180, !dbg !5726
  %cmp129.i = icmp eq i32 %step.0.ph309.i, 0, !dbg !5726
  %or.cond207.i = or i1 %cmp127.i, %cmp129.i, !dbg !5726
  br i1 %or.cond207.i, label %if.then134.i, label %lor.lhs.false130.i, !dbg !5726

lor.lhs.false130.i:                               ; preds = %for.end.i1296
  %181 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 4), align 8, !dbg !5726, !tbaa !2301
  %cmp131.i = icmp slt i32 %tempn.0.i, %181, !dbg !5726
  %or.cond159.i = and i1 %cmp131.i, %cmp29267.i, !dbg !5726
  br i1 %or.cond159.i, label %if.then134.i, label %if.end143.i, !dbg !5726

if.then134.i:                                     ; preds = %lor.lhs.false130.i, %for.end.i1296
  %cmp135.i = icmp sgt i32 %step.0.ph309.i, 0, !dbg !5727
  call void @llvm.dbg.value(metadata !2354, i64 0, metadata !5604), !dbg !5729
  %.expanded.0.i = select i1 %cmp135.i, i32 1, i32 %expanded.0.ph311.i, !dbg !5727
  call void @llvm.dbg.value(metadata !{double %div124.i}, i64 0, metadata !5602), !dbg !5730
  %cmp138.i = fcmp oeq double %div124.i, 0.000000e+00, !dbg !5731
  call void @llvm.dbg.value(metadata !5601, i64 0, metadata !5602), !dbg !5732
  %prevDensity.1.i = select i1 %cmp138.i, double 1.000000e-16, double %div124.i, !dbg !5731
  call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5733), !dbg !5735
  call void @llvm.dbg.value(metadata !{float* %arraydecay25.i}, i64 0, metadata !5736), !dbg !5735
  %182 = load float* %arraydecay25.i, align 16, !dbg !5737, !tbaa !2644
  %183 = load float* %arrayidx1.i255.i, align 4, !dbg !5738, !tbaa !2644
  %184 = load float* %arrayidx2.i256.i, align 8, !dbg !5739, !tbaa !2644
  call void @llvm.dbg.value(metadata !{double* %tempr.i}, i64 0, metadata !5664), !dbg !5740
  call void @llvm.dbg.value(metadata !{double %179}, i64 0, metadata !5741), !dbg !5740
  call void @llvm.dbg.value(metadata !{i32 %tempn.0.i}, i64 0, metadata !5648), !dbg !5742
  br label %if.end143.i, !dbg !5743

if.end143.i:                                      ; preds = %lor.lhs.false130.i, %if.then134.i
  %185 = phi float [ %184, %if.then134.i ], [ %.ph305.i, %lor.lhs.false130.i ]
  %186 = phi float [ %183, %if.then134.i ], [ %.ph269306.i, %lor.lhs.false130.i ]
  %187 = phi float [ %182, %if.then134.i ], [ %.ph270307.i, %lor.lhs.false130.i ]
  %n.1.i = phi i32 [ %tempn.0.i, %if.then134.i ], [ %n.0.ph308.i, %lor.lhs.false130.i ]
  %prevDensity.2.i = phi double [ %prevDensity.1.i, %if.then134.i ], [ %prevDensity.0.ph310.i, %lor.lhs.false130.i ]
  %expanded.2.i = phi i32 [ %.expanded.0.i, %if.then134.i ], [ %expanded.0.ph311.i, %lor.lhs.false130.i ]
  %r.1.i = phi double [ %179, %if.then134.i ], [ %r.0.ph312.i, %lor.lhs.false130.i ]
  %188 = load i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !5744, !tbaa !2301
  %tobool144.i = icmp eq i32 %188, 0, !dbg !5744
  br i1 %tobool144.i, label %if.else146.i, label %while.end.i, !dbg !5744

if.else146.i:                                     ; preds = %if.end143.i
  %189 = load double* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 5), align 8, !dbg !5745, !tbaa !2552
  %add147.i = fadd double %Size.0.ph313.i, %189, !dbg !5745
  call void @llvm.dbg.value(metadata !{double %add147.i}, i64 0, metadata !5747), !dbg !5745
  %inc148.i = add nsw i32 %step.0.ph309.i, 1, !dbg !5748
  call void @llvm.dbg.value(metadata !{i32 %inc148.i}, i64 0, metadata !5650), !dbg !5748
  %190 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 9), align 8, !dbg !5653, !tbaa !2301
  %cmp23283.i = icmp slt i32 %n.1.i, %190, !dbg !5653
  %191 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 14, i32 6), align 8, !dbg !5653, !tbaa !2301
  %cmp24284.i = icmp slt i32 %inc148.i, %191, !dbg !5653
  %or.cond206285.i = and i1 %cmp23283.i, %cmp24284.i, !dbg !5653
  br i1 %or.cond206285.i, label %while.body.i, label %while.end.i, !dbg !5653

while.end.i:                                      ; preds = %if.else146.i, %if.end143.i
  %tobool150.i = icmp eq i32 %expanded.2.i, 0, !dbg !5749
  br i1 %tobool150.i, label %if.end152.i, label %if.then151.i, !dbg !5749

if.then151.i:                                     ; preds = %while.end.i
  call void @llvm.dbg.value(metadata !5750, i64 0, metadata !5751), !dbg !5753
  %192 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 125), align 8, !dbg !5754, !tbaa !2311
  %inc.i.i1297 = add nsw i64 %192, 1, !dbg !5754
  store i64 %inc.i.i1297, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 125), align 8, !dbg !5754, !tbaa !2311
  br label %if.end152.i, !dbg !5752

if.end152.i:                                      ; preds = %while.end.i, %if.then151.i, %if.end22.i
  %.lcssa342.i = phi float [ %185, %if.then151.i ], [ 0.000000e+00, %if.end22.i ], [ %185, %while.end.i ]
  %.lcssa272340.i = phi float [ %186, %if.then151.i ], [ 0.000000e+00, %if.end22.i ], [ %186, %while.end.i ]
  %.lcssa274338.i = phi float [ %187, %if.then151.i ], [ 0.000000e+00, %if.end22.i ], [ %187, %while.end.i ]
  %n.0.lcssa336.i = phi i32 [ %n.1.i, %if.then151.i ], [ -1, %if.end22.i ], [ %n.1.i, %while.end.i ]
  %r.0.lcssa334.i = phi double [ %r.1.i, %if.then151.i ], [ undef, %if.end22.i ], [ %r.1.i, %while.end.i ]
  %mul154.i = fmul double %r.0.lcssa334.i, 0x400921FB54442D18, !dbg !5755
  %mul155.i = fmul double %r.0.lcssa334.i, %mul154.i, !dbg !5755
  %div156.i = fdiv double 1.000000e+00, %mul155.i, !dbg !5755
  %conv157.i = fptrunc double %div156.i to float, !dbg !5755
  call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5756), !dbg !5757
  call void @llvm.dbg.value(metadata !{float %conv157.i}, i64 0, metadata !5758), !dbg !5757
  %mul.i.i1298 = fmul float %.lcssa274338.i, %conv157.i, !dbg !5759
  %mul2.i.i1299 = fmul float %.lcssa272340.i, %conv157.i, !dbg !5760
  %mul4.i.i1300 = fmul float %.lcssa342.i, %conv157.i, !dbg !5761
  call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5762), !dbg !5764
  call void @llvm.dbg.value(metadata !2970, i64 0, metadata !5765), !dbg !5764
  %add.i.i1301 = fadd float %mul.i.i1298, 0.000000e+00, !dbg !5766
  store float %add.i.i1301, float* %arraydecay179, align 16, !dbg !5766, !tbaa !2644
  %add4.i.i = fadd float %mul2.i.i1299, 0.000000e+00, !dbg !5767
  store float %add4.i.i, float* %arrayidx1.i1244, align 4, !dbg !5767, !tbaa !2644
  %add7.i.i = fadd float %mul4.i.i1300, 0.000000e+00, !dbg !5768
  store float %add7.i.i, float* %arrayidx2.i1245, align 8, !dbg !5768, !tbaa !2644
  store double %r.0.lcssa334.i, double* @_ZN3pov11previousRadE, align 8, !dbg !5769, !tbaa !2552
  store i32 %n.0.lcssa336.i, i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !5770, !tbaa !2301
  %.pre1462 = load float* %ResCol, align 4, !dbg !5771, !tbaa !2644
  %.pre1463 = load float* %arrayidx1.i, align 4, !dbg !5773, !tbaa !2644
  %.pre1464 = load float* %arrayidx2.i, align 4, !dbg !5774, !tbaa !2644
  br label %_ZN3povL13PhotonDiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_S2_PfS5_dPNS_13Object_StructE.exit, !dbg !5770

_ZN3povL13PhotonDiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_S2_PfS5_dPNS_13Object_StructE.exit: ; preds = %if.then.i1269, %if.then7.i, %if.end152.i
  %193 = phi float [ %add7.i1265, %if.then.i1269 ], [ %add7.i1265, %if.then7.i ], [ %.pre1464, %if.end152.i ]
  %194 = phi float [ %add4.i1262, %if.then.i1269 ], [ %add4.i1262, %if.then7.i ], [ %.pre1463, %if.end152.i ]
  %195 = phi float [ %add.i1259, %if.then.i1269 ], [ %add.i1259, %if.then7.i ], [ %.pre1462, %if.end152.i ]
  %196 = phi float [ 0.000000e+00, %if.then.i1269 ], [ 0.000000e+00, %if.then7.i ], [ %add7.i.i, %if.end152.i ]
  %197 = phi float [ 0.000000e+00, %if.then.i1269 ], [ 0.000000e+00, %if.then7.i ], [ %add4.i.i, %if.end152.i ]
  %198 = phi float [ 0.000000e+00, %if.then.i1269 ], [ 0.000000e+00, %if.then7.i ], [ %add.i.i1301, %if.end152.i ]
  call void @llvm.lifetime.end(i64 856, i8* %10) #6, !dbg !5770
  call void @llvm.lifetime.end(i64 24, i8* %6), !dbg !5775
  call void @llvm.lifetime.end(i64 20, i8* %7), !dbg !5775
  call void @llvm.lifetime.end(i64 20, i8* %8), !dbg !5775
  call void @llvm.lifetime.end(i64 8, i8* %9), !dbg !5775
  %mul390 = fmul float %FilCol.sroa.0.0.load136513911425, %198, !dbg !5776
  store float %mul390, float* %arraydecay179, align 16, !dbg !5776, !tbaa !2644
  %mul393 = fmul float %FilCol.sroa.1.4.load137413931423, %197, !dbg !5777
  store float %mul393, float* %arrayidx1.i1244, align 4, !dbg !5777, !tbaa !2644
  %mul396 = fmul float %FilCol.sroa.2.8.load138313951421, %196, !dbg !5778
  store float %mul396, float* %arrayidx2.i1245, align 8, !dbg !5778, !tbaa !2644
  tail call void @llvm.dbg.value(metadata !{float* %ResCol}, i64 0, metadata !5779), !dbg !5780
  tail call void @llvm.dbg.value(metadata !{float* %arraydecay179}, i64 0, metadata !5781), !dbg !5780
  %add.i1302 = fadd float %mul390, %195, !dbg !5771
  store float %add.i1302, float* %ResCol, align 4, !dbg !5771, !tbaa !2644
  %add4.i1305 = fadd float %mul393, %194, !dbg !5773
  store float %add4.i1305, float* %arrayidx1.i, align 4, !dbg !5773, !tbaa !2644
  %add7.i1308 = fadd float %mul396, %193, !dbg !5774
  store float %add7.i1308, float* %arrayidx2.i, align 4, !dbg !5774, !tbaa !2644
  br label %if.end399, !dbg !5782

if.end399:                                        ; preds = %_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit, %_ZN3povL13PhotonDiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_S2_PfS5_dPNS_13Object_StructE.exit, %if.then70
  %radiosity_done.2 = phi i32 [ %radiosity_done.01433, %if.then70 ], [ %radiosity_done.1, %_ZN3povL7DiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_PfS5_dPNS_13Object_StructE.exit ], [ %radiosity_done.1, %_ZN3povL13PhotonDiffuseEPNS_13Finish_StructEPdPNS_10Ray_StructES2_S2_PfS5_dPNS_13Object_StructE.exit ]
  br i1 %tobool64, label %if.then401, label %if.end463, !dbg !5783

if.then401:                                       ; preds = %if.end399
  %199 = load float* %arraydecay62, align 16, !dbg !5784, !tbaa !2644
  %200 = load float* %arrayidx168, align 4, !dbg !5784, !tbaa !2644
  %mul404 = fmul float %199, %200, !dbg !5784
  %201 = load float* %arrayidx175, align 16, !dbg !5784, !tbaa !2644
  %add406 = fadd float %mul404, %201, !dbg !5784
  %mul408 = fmul float %FilCol.sroa.0.0.load136513911425, %add406, !dbg !5784
  %202 = load float* %arrayidx143, align 4, !dbg !5786, !tbaa !2644
  %mul411 = fmul float %200, %202, !dbg !5786
  %add413 = fadd float %201, %mul411, !dbg !5786
  %mul415 = fmul float %FilCol.sroa.1.4.load137413931423, %add413, !dbg !5786
  %203 = load float* %arrayidx156, align 8, !dbg !5787, !tbaa !2644
  %mul418 = fmul float %200, %203, !dbg !5787
  %add420 = fadd float %201, %mul418, !dbg !5787
  %mul422 = fmul float %FilCol.sroa.2.8.load138313951421, %add420, !dbg !5787
  %Finish423 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01428, i64 0, i32 14, !dbg !5788
  %204 = load %"struct.pov::Finish_Struct"** %Finish423, align 8, !dbg !5788, !tbaa !2295
  %Conserve_Energy = getelementptr inbounds %"struct.pov::Finish_Struct"* %204, i64 0, i32 22, !dbg !5788
  %205 = load i32* %Conserve_Energy, align 4, !dbg !5788, !tbaa !2301
  %tobool424 = icmp eq i32 %205, 0, !dbg !5788
  br i1 %tobool424, label %if.end463, label %if.then425, !dbg !5788

if.then425:                                       ; preds = %if.then401
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5789), !dbg !5792
  %arrayidx429 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 0, !dbg !5790
  %206 = load float* %arrayidx429, align 4, !dbg !5790, !tbaa !2644
  %conv430 = fpext float %206 to double, !dbg !5790
  %sub431 = fsub double 1.000000e+00, %conv430, !dbg !5790
  call void @llvm.dbg.value(metadata !{double %sub431}, i64 0, metadata !5793), !dbg !5792
  %cmp.i1309 = fcmp olt double %sub431, 1.000000e+00, !dbg !5794
  %.sroa.speculated1343 = select i1 %cmp.i1309, double %sub431, double 1.000000e+00, !dbg !5790
  %conv435 = fpext float %mul408 to double, !dbg !5790
  %mul436 = fmul double %conv435, %.sroa.speculated1343, !dbg !5790
  %conv437 = fptrunc double %mul436 to float, !dbg !5790
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5795), !dbg !5797
  %arrayidx441 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 1, !dbg !5796
  %207 = load float* %arrayidx441, align 4, !dbg !5796, !tbaa !2644
  %conv442 = fpext float %207 to double, !dbg !5796
  %sub443 = fsub double 1.000000e+00, %conv442, !dbg !5796
  call void @llvm.dbg.value(metadata !{double %sub443}, i64 0, metadata !5798), !dbg !5797
  %cmp.i1311 = fcmp olt double %sub443, 1.000000e+00, !dbg !5799
  %.sroa.speculated1339 = select i1 %cmp.i1311, double %sub443, double 1.000000e+00, !dbg !5796
  %conv447 = fpext float %mul415 to double, !dbg !5796
  %mul448 = fmul double %conv447, %.sroa.speculated1339, !dbg !5796
  %conv449 = fptrunc double %mul448 to float, !dbg !5796
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5800), !dbg !5802
  %arrayidx453 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1455, i64 2, !dbg !5801
  %208 = load float* %arrayidx453, align 4, !dbg !5801, !tbaa !2644
  %conv454 = fpext float %208 to double, !dbg !5801
  %sub455 = fsub double 1.000000e+00, %conv454, !dbg !5801
  call void @llvm.dbg.value(metadata !{double %sub455}, i64 0, metadata !5803), !dbg !5802
  %cmp.i1257 = fcmp olt double %sub455, 1.000000e+00, !dbg !5804
  %.sroa.speculated1335 = select i1 %cmp.i1257, double %sub455, double 1.000000e+00, !dbg !5801
  %conv459 = fpext float %mul422 to double, !dbg !5801
  %mul460 = fmul double %conv459, %.sroa.speculated1335, !dbg !5801
  %conv461 = fptrunc double %mul460 to float, !dbg !5801
  br label %if.end463, !dbg !5805

if.end463:                                        ; preds = %if.then401, %if.end399, %if.then425
  %FilCol.sroa.2.8.load13831396 = phi float [ %conv461, %if.then425 ], [ %FilCol.sroa.2.8.load138313951421, %if.end399 ], [ %mul422, %if.then401 ]
  %FilCol.sroa.1.4.load13741394 = phi float [ %conv449, %if.then425 ], [ %FilCol.sroa.1.4.load137413931423, %if.end399 ], [ %mul415, %if.then401 ]
  %FilCol.sroa.0.0.load13651392 = phi float [ %conv437, %if.then425 ], [ %FilCol.sroa.0.0.load136513911425, %if.end399 ], [ %mul408, %if.then401 ]
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5806), !dbg !5808
  %conv468 = fpext float %FilCol.sroa.0.0.load13651392 to double, !dbg !5807
  %mul469 = fmul double %conv468, 2.970000e-01, !dbg !5807
  %conv471 = fpext float %FilCol.sroa.1.4.load13741394 to double, !dbg !5807
  %mul472 = fmul double %conv471, 5.890000e-01, !dbg !5807
  %add473 = fadd double %mul472, %mul469, !dbg !5807
  %conv475 = fpext float %FilCol.sroa.2.8.load13831396 to double, !dbg !5807
  %mul476 = fmul double %conv475, 1.140000e-01, !dbg !5807
  %add477 = fadd double %mul476, %add473, !dbg !5807
  %call479 = call double @fabs(double %add477) #9, !dbg !5807
  %fabsf1189 = call float @fabsf(float 0.000000e+00) #4, !dbg !5807
  %209 = fpext float %fabsf1189 to double, !dbg !5807
  %add483 = fadd double %call479, %209, !dbg !5807
  call void @llvm.dbg.value(metadata !{double %add483}, i64 0, metadata !5809), !dbg !5808
  %cmp.i1195 = fcmp olt double %add483, 1.000000e+00, !dbg !5810
  %.sroa.speculated1331 = select i1 %cmp.i1195, double %add483, double 1.000000e+00, !dbg !5807
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated1331}, i64 0, metadata !1489), !dbg !5807
  call void @llvm.dbg.value(metadata !{i32 %layer_number.01431}, i64 0, metadata !1482), !dbg !5811
  %Next = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.01428, i64 0, i32 8, !dbg !5811
  %210 = load %"struct.pov::Pattern_Struct"** %Next, align 8, !dbg !5811, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Texture_Struct"* %212}, i64 0, metadata !1506), !dbg !5811
  %cmp10 = icmp ne %"struct.pov::Pattern_Struct"* %210, null, !dbg !5357
  %211 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !5357, !tbaa !2552
  %cmp11 = fcmp ogt double %.sroa.speculated1331, %211, !dbg !5357
  %or.cond = and i1 %cmp10, %cmp11, !dbg !5357
  br i1 %or.cond, label %if.end463.for.body_crit_edge, label %for.end488, !dbg !5357

if.end463.for.body_crit_edge:                     ; preds = %if.end463
  %212 = bitcast %"struct.pov::Pattern_Struct"* %210 to %"struct.pov::Texture_Struct"*, !dbg !5811
  %indvars.iv.next1456 = add i64 %indvars.iv1455, 1, !dbg !5357
  %phitmp = add i32 %layer_number.01431, 1, !dbg !5357
  br label %for.body, !dbg !5357

for.end488:                                       ; preds = %if.end463, %if.end.for.end488_crit_edge
  %Object489.pre-phi = phi %"struct.pov::Object_Struct"** [ %Object489.pre, %if.end.for.end488_crit_edge ], [ %Object, %if.end463 ], !dbg !5358
  %213 = phi double [ undef, %if.end.for.end488_crit_edge ], [ %48, %if.end463 ]
  %214 = phi double [ undef, %if.end.for.end488_crit_edge ], [ %49, %if.end463 ]
  %215 = phi double [ undef, %if.end.for.end488_crit_edge ], [ %50, %if.end463 ]
  %cmp11.lcssa = phi i1 [ %cmp111419, %if.end.for.end488_crit_edge ], [ %cmp11, %if.end463 ]
  %layer_number.0.lcssa = phi i32 [ 0, %if.end.for.end488_crit_edge ], [ %layer_number.01431, %if.end463 ]
  %one_colour_found.0.lcssa = phi i32 [ 0, %if.end.for.end488_crit_edge ], [ %.one_colour_found.0, %if.end463 ]
  %Trans.0.lcssa = phi double [ 1.000000e+00, %if.end.for.end488_crit_edge ], [ %.sroa.speculated1331, %if.end463 ]
  %FilCol.sroa.0.0.load13651391.lcssa = phi float [ 1.000000e+00, %if.end.for.end488_crit_edge ], [ %FilCol.sroa.0.0.load13651392, %if.end463 ]
  %FilCol.sroa.1.4.load13741393.lcssa = phi float [ 1.000000e+00, %if.end.for.end488_crit_edge ], [ %FilCol.sroa.1.4.load13741394, %if.end463 ]
  %FilCol.sroa.2.8.load13831395.lcssa = phi float [ 1.000000e+00, %if.end.for.end488_crit_edge ], [ %FilCol.sroa.2.8.load13831396, %if.end463 ]
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1507), !dbg !5812
  %216 = load %"struct.pov::Object_Struct"** %Object489.pre-phi, align 8, !dbg !5358, !tbaa !2295
  %Interior490 = getelementptr inbounds %"struct.pov::Object_Struct"* %216, i64 0, i32 5, !dbg !5358
  %217 = load %"struct.pov::Interior_Struct"** %Interior490, align 8, !dbg !5358, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Interior_Struct"* %217}, i64 0, metadata !1501), !dbg !5358
  %cmp491 = icmp ne %"struct.pov::Interior_Struct"* %217, null, !dbg !5358
  %or.cond1191 = and i1 %cmp491, %cmp11.lcssa, !dbg !5358
  br i1 %or.cond1191, label %land.lhs.true494, label %if.end735, !dbg !5358

land.lhs.true494:                                 ; preds = %for.end488
  %218 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !5358, !tbaa !2301
  %and496 = and i32 %218, 16, !dbg !5358
  %tobool497 = icmp eq i32 %and496, 0, !dbg !5358
  br i1 %tobool497, label %if.end735, label %if.then498, !dbg !5358

if.then498:                                       ; preds = %land.lhs.true494
  %fabsf = call float @fabsf(float 1.000000e+00) #4, !dbg !5813
  %219 = fpext float %fabsf to double, !dbg !5813
  %fabsf1185 = call float @fabsf(float %FilCol.sroa.0.0.load13651391.lcssa) #4, !dbg !5813
  %fabsf1186 = call float @fabsf(float %FilCol.sroa.1.4.load13741393.lcssa) #4, !dbg !5813
  %fabsf1187 = call float @fabsf(float %FilCol.sroa.2.8.load13831395.lcssa) #4, !dbg !5813
  %cmp.i1193 = fcmp olt float %fabsf1186, %fabsf1187, !dbg !5815
  %.v = select i1 %cmp.i1193, float %fabsf1187, float %fabsf1186, !dbg !5815
  %cmp.i1192 = fcmp olt float %fabsf1185, %.v, !dbg !5815
  %.sroa.speculated.v = select i1 %cmp.i1192, float %.v, float %fabsf1185, !dbg !5813
  %.sroa.speculated = fpext float %.sroa.speculated.v to double, !dbg !5813
  %mul516 = fmul double %219, %.sroa.speculated, !dbg !5813
  call void @llvm.dbg.value(metadata !{double %mul516}, i64 0, metadata !1486), !dbg !5813
  %mul517 = fmul double %mul516, %Weight, !dbg !5816
  call void @llvm.dbg.value(metadata !{double %mul517}, i64 0, metadata !1487), !dbg !5816
  %arraydecay519 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 1, i64 0, !dbg !5817
  %arraydecay520 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 0, !dbg !5817
  %arraydecay521 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 0, !dbg !5817
  %220 = bitcast [3 x double]* %Local_Normal.i to i8*, !dbg !5818
  call void @llvm.lifetime.start(i64 24, i8* %220), !dbg !5818
  %221 = bitcast [5 x float]* %Hue.i to i8*, !dbg !5818
  call void @llvm.lifetime.start(i64 20, i8* %221), !dbg !5818
  %222 = bitcast [5 x float]* %Elem.i to i8*, !dbg !5818
  call void @llvm.lifetime.start(i64 20, i8* %222), !dbg !5818
  call void @llvm.dbg.value(metadata !{%"struct.pov::Interior_Struct"* %217}, i64 0, metadata !5819), !dbg !5818
  call void @llvm.dbg.value(metadata !{double* %arraydecay519}, i64 0, metadata !5820), !dbg !5818
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !5821), !dbg !5818
  call void @llvm.dbg.value(metadata !{double* %arraydecay520}, i64 0, metadata !5822), !dbg !5818
  call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !5823), !dbg !5818
  call void @llvm.dbg.value(metadata !{float* %arraydecay521}, i64 0, metadata !5824), !dbg !5818
  call void @llvm.dbg.value(metadata !{double %mul517}, i64 0, metadata !5825), !dbg !5818
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Local_Normal.i}, metadata !1566), !dbg !5826
  %223 = bitcast %"struct.pov::Ray_Struct"* %NRay.i to i8*, !dbg !5827
  call void @llvm.lifetime.start(i64 856, i8* %223) #6, !dbg !5827
  call void @llvm.dbg.declare(metadata !{%"struct.pov::Ray_Struct"* %NRay.i}, metadata !1567), !dbg !5827
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Hue.i}, metadata !1568), !dbg !5828
  call void @llvm.dbg.declare(metadata !2878, metadata !1569), !dbg !5828
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Elem.i}, metadata !1570), !dbg !5828
  call void @_ZN3pov19Copy_Ray_ContainersEPNS_10Ray_StructES1_(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Ray_Struct"* %Ray) #7, !dbg !5829
  %arraydecay.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 0, i64 0, !dbg !5830
  call void @llvm.dbg.value(metadata !{double* %arraydecay.i}, i64 0, metadata !5831), !dbg !5832
  call void @llvm.dbg.value(metadata !{double* %arraydecay519}, i64 0, metadata !5833), !dbg !5832
  %224 = load double* %arraydecay519, align 8, !dbg !5834, !tbaa !2552
  store double %224, double* %arraydecay.i, align 8, !dbg !5834, !tbaa !2552
  %arrayidx2.i.i = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 1, i64 1, !dbg !5835
  %225 = load double* %arrayidx2.i.i, align 8, !dbg !5835, !tbaa !2552
  %arrayidx3.i.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 0, i64 1, !dbg !5835
  store double %225, double* %arrayidx3.i.i, align 8, !dbg !5835, !tbaa !2552
  %arrayidx4.i.i = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 1, i64 2, !dbg !5836
  %226 = load double* %arrayidx4.i.i, align 8, !dbg !5836, !tbaa !2552
  %arrayidx5.i.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 0, i64 2, !dbg !5836
  store double %226, double* %arrayidx5.i.i, align 8, !dbg !5836, !tbaa !2552
  %227 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5837, !tbaa !2301
  %cmp.i = icmp eq i32 %227, 0, !dbg !5837
  br i1 %cmp.i, label %if.then.i, label %if.end.i, !dbg !5837

if.then.i:                                        ; preds = %if.then498
  %Disp_NElems.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 2, !dbg !5838
  %228 = load i32* %Disp_NElems.i, align 4, !dbg !5838, !tbaa !2301
  store i32 %228, i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5838, !tbaa !2301
  br label %if.end.i, !dbg !5838

if.end.i:                                         ; preds = %if.then.i, %if.then498
  call void @llvm.dbg.value(metadata !3477, i64 0, metadata !5839), !dbg !5840
  %Index.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 2, !dbg !5841
  %229 = load i32* %Index.i, align 4, !dbg !5841, !tbaa !2301
  %cmp1.i = icmp eq i32 %229, -1, !dbg !5841
  br i1 %cmp1.i, label %if.then2.i, label %if.else.i, !dbg !5841

if.then2.i:                                       ; preds = %if.end.i
  call void @_ZN3pov9Ray_EnterEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Interior_Struct"* %217) #7, !dbg !5842
  %230 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 6), align 8, !dbg !5844, !tbaa !2552
  %IOR.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 3, !dbg !5844
  %231 = load float* %IOR.i, align 4, !dbg !5844, !tbaa !2644
  %conv.i = fpext float %231 to double, !dbg !5844
  %div.i = fdiv double %230, %conv.i, !dbg !5844
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !5845), !dbg !5844
  %232 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5846, !tbaa !2301
  %cmp3.i = icmp sgt i32 %232, 1, !dbg !5846
  br i1 %cmp3.i, label %if.then4.i, label %if.end95.i, !dbg !5846

if.then4.i:                                       ; preds = %if.then2.i
  %233 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 7), align 8, !dbg !5847, !tbaa !2552
  %Dispersion.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 4, !dbg !5847
  %234 = load float* %Dispersion.i, align 4, !dbg !5847, !tbaa !2644
  %conv5.i = fpext float %234 to double, !dbg !5847
  %div6.i = fdiv double %233, %conv5.i, !dbg !5847
  call void @llvm.dbg.value(metadata !{double %div6.i}, i64 0, metadata !5839), !dbg !5847
  br label %if.end95.i, !dbg !5847

if.else.i:                                        ; preds = %if.end.i
  %call.i = call i32 @_ZN3pov25Interior_In_Ray_ContainerEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Interior_Struct"* %217) #7, !dbg !5848
  call void @llvm.dbg.value(metadata !{i32 %call.i}, i64 0, metadata !5850), !dbg !5848
  %cmp8.i = icmp sgt i32 %call.i, -1, !dbg !5848
  br i1 %cmp8.i, label %if.then9.i, label %if.else59.i, !dbg !5848

if.then9.i:                                       ; preds = %if.else.i
  call void @_ZN3pov8Ray_ExitEPNS_10Ray_StructEi(%"struct.pov::Ray_Struct"* %NRay.i, i32 %call.i) #7, !dbg !5851
  %Index10.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 2, !dbg !5853
  %235 = load i32* %Index10.i, align 8, !dbg !5853, !tbaa !2301
  %cmp11.i = icmp eq i32 %235, -1, !dbg !5853
  br i1 %cmp11.i, label %if.then12.i, label %if.else22.i, !dbg !5853

if.then12.i:                                      ; preds = %if.then9.i
  %IOR13.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 3, !dbg !5854
  %236 = load float* %IOR13.i, align 4, !dbg !5854, !tbaa !2644
  %conv14.i = fpext float %236 to double, !dbg !5854
  %237 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 6), align 8, !dbg !5854, !tbaa !2552
  %div15.i = fdiv double %conv14.i, %237, !dbg !5854
  call void @llvm.dbg.value(metadata !{double %div15.i}, i64 0, metadata !5845), !dbg !5854
  %238 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5856, !tbaa !2301
  %cmp16.i = icmp sgt i32 %238, 1, !dbg !5856
  br i1 %cmp16.i, label %if.then17.i, label %if.end95.i, !dbg !5856

if.then17.i:                                      ; preds = %if.then12.i
  %Dispersion18.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 4, !dbg !5857
  %239 = load float* %Dispersion18.i, align 4, !dbg !5857, !tbaa !2644
  %conv19.i = fpext float %239 to double, !dbg !5857
  %240 = load double* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 7), align 8, !dbg !5857, !tbaa !2552
  %div20.i = fdiv double %conv19.i, %240, !dbg !5857
  call void @llvm.dbg.value(metadata !{double %div20.i}, i64 0, metadata !5839), !dbg !5857
  br label %if.end95.i, !dbg !5857

if.else22.i:                                      ; preds = %if.then9.i
  %add.i = add nsw i32 %235, 1, !dbg !5858
  %cmp24.i = icmp eq i32 %call.i, %add.i, !dbg !5858
  br i1 %cmp24.i, label %if.then25.i, label %if.end95.i, !dbg !5858

if.then25.i:                                      ; preds = %if.else22.i
  %IOR26.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 3, !dbg !5859
  %241 = load float* %IOR26.i, align 4, !dbg !5859, !tbaa !2644
  %idxprom.i = sext i32 %235 to i64, !dbg !5859
  %arrayidx.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 4, i64 %idxprom.i, !dbg !5859
  %242 = load %"struct.pov::Interior_Struct"** %arrayidx.i, align 8, !dbg !5859, !tbaa !2295
  %IOR28.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %242, i64 0, i32 3, !dbg !5859
  %243 = load float* %IOR28.i, align 4, !dbg !5859, !tbaa !2644
  %div29.i = fdiv float %241, %243, !dbg !5859
  %conv30.i = fpext float %div29.i to double, !dbg !5859
  call void @llvm.dbg.value(metadata !{double %conv30.i}, i64 0, metadata !5845), !dbg !5859
  %Disp_NElems35.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %242, i64 0, i32 2, !dbg !5861
  %244 = load i32* %Disp_NElems35.i, align 4, !dbg !5861, !tbaa !2301
  %245 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5861, !tbaa !2301
  %cmp36.i = icmp sgt i32 %244, %245, !dbg !5861
  %246 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5861, !tbaa !2301
  %cmp37.i = icmp eq i32 %246, 0, !dbg !5861
  %or.cond.i = and i1 %cmp36.i, %cmp37.i, !dbg !5861
  br i1 %or.cond.i, label %if.then38.i, label %if.end44.i, !dbg !5861

if.then38.i:                                      ; preds = %if.then25.i
  store i32 %244, i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5862, !tbaa !2301
  br label %if.end44.i, !dbg !5862

if.end44.i:                                       ; preds = %if.then38.i, %if.then25.i
  %247 = phi i32 [ %244, %if.then38.i ], [ %245, %if.then25.i ], !dbg !5863
  %cmp45.i = icmp sgt i32 %247, 1, !dbg !5863
  br i1 %cmp45.i, label %if.then46.i, label %if.end95.i, !dbg !5863

if.then46.i:                                      ; preds = %if.end44.i
  %Dispersion47.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 4, !dbg !5864
  %248 = load float* %Dispersion47.i, align 4, !dbg !5864, !tbaa !2644
  %Dispersion52.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %242, i64 0, i32 4, !dbg !5864
  %249 = load float* %Dispersion52.i, align 4, !dbg !5864, !tbaa !2644
  %div53.i = fdiv float %248, %249, !dbg !5864
  %conv54.i = fpext float %div53.i to double, !dbg !5864
  call void @llvm.dbg.value(metadata !{double %conv54.i}, i64 0, metadata !5839), !dbg !5864
  br label %if.end95.i, !dbg !5864

if.else59.i:                                      ; preds = %if.else.i
  %Index60.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 2, !dbg !5865
  %250 = load i32* %Index60.i, align 8, !dbg !5865, !tbaa !2301
  %idxprom61.i = sext i32 %250 to i64, !dbg !5865
  %arrayidx63.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 4, i64 %idxprom61.i, !dbg !5865
  %251 = load %"struct.pov::Interior_Struct"** %arrayidx63.i, align 8, !dbg !5865, !tbaa !2295
  %IOR64.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %251, i64 0, i32 3, !dbg !5865
  %252 = load float* %IOR64.i, align 4, !dbg !5865, !tbaa !2644
  %IOR65.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 3, !dbg !5865
  %253 = load float* %IOR65.i, align 4, !dbg !5865, !tbaa !2644
  %div66.i = fdiv float %252, %253, !dbg !5865
  %conv67.i = fpext float %div66.i to double, !dbg !5865
  call void @llvm.dbg.value(metadata !{double %conv67.i}, i64 0, metadata !5845), !dbg !5865
  %Disp_NElems72.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %251, i64 0, i32 2, !dbg !5867
  %254 = load i32* %Disp_NElems72.i, align 4, !dbg !5867, !tbaa !2301
  %255 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5867, !tbaa !2301
  %cmp73.i = icmp sgt i32 %254, %255, !dbg !5867
  %256 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5867, !tbaa !2301
  %cmp75.i = icmp eq i32 %256, 0, !dbg !5867
  %or.cond195.i = and i1 %cmp73.i, %cmp75.i, !dbg !5867
  br i1 %or.cond195.i, label %if.then76.i, label %if.end82.i, !dbg !5867

if.then76.i:                                      ; preds = %if.else59.i
  store i32 %254, i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5868, !tbaa !2301
  br label %if.end82.i, !dbg !5868

if.end82.i:                                       ; preds = %if.then76.i, %if.else59.i
  %257 = phi i32 [ %254, %if.then76.i ], [ %255, %if.else59.i ], !dbg !5869
  %cmp83.i = icmp sgt i32 %257, 1, !dbg !5869
  br i1 %cmp83.i, label %if.then84.i, label %if.end93.i, !dbg !5869

if.then84.i:                                      ; preds = %if.end82.i
  %Dispersion89.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %251, i64 0, i32 4, !dbg !5870
  %258 = load float* %Dispersion89.i, align 4, !dbg !5870, !tbaa !2644
  %Dispersion90.i = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 4, !dbg !5870
  %259 = load float* %Dispersion90.i, align 4, !dbg !5870, !tbaa !2644
  %div91.i = fdiv float %258, %259, !dbg !5870
  %conv92.i = fpext float %div91.i to double, !dbg !5870
  call void @llvm.dbg.value(metadata !{double %conv92.i}, i64 0, metadata !5839), !dbg !5870
  br label %if.end93.i, !dbg !5870

if.end93.i:                                       ; preds = %if.then84.i, %if.end82.i
  %disp.0.i = phi double [ %conv92.i, %if.then84.i ], [ 1.000000e+00, %if.end82.i ]
  call void @_ZN3pov9Ray_EnterEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %NRay.i, %"struct.pov::Interior_Struct"* %217) #7, !dbg !5871
  br label %if.end95.i

if.end95.i:                                       ; preds = %if.end93.i, %if.then46.i, %if.end44.i, %if.else22.i, %if.then17.i, %if.then12.i, %if.then4.i, %if.then2.i
  %ior.0.i = phi double [ %div.i, %if.then4.i ], [ %div.i, %if.then2.i ], [ %div15.i, %if.then17.i ], [ %div15.i, %if.then12.i ], [ %conv30.i, %if.then46.i ], [ %conv30.i, %if.end44.i ], [ %conv67.i, %if.end93.i ], [ 1.000000e+00, %if.else22.i ]
  %disp.1.i = phi double [ %div6.i, %if.then4.i ], [ 1.000000e+00, %if.then2.i ], [ %div20.i, %if.then17.i ], [ 1.000000e+00, %if.then12.i ], [ %conv54.i, %if.then46.i ], [ 1.000000e+00, %if.end44.i ], [ %disp.0.i, %if.end93.i ], [ 1.000000e+00, %if.else22.i ]
  %sub.i = fadd double %ior.0.i, -1.000000e+00, !dbg !5872
  %call96.i = call double @fabs(double %sub.i) #9, !dbg !5872
  %cmp97.i = fcmp olt double %call96.i, 1.000000e-07, !dbg !5872
  br i1 %cmp97.i, label %land.lhs.true98.i, label %if.else107.i, !dbg !5872

land.lhs.true98.i:                                ; preds = %if.end95.i
  %sub99.i = fadd double %disp.1.i, -1.000000e+00, !dbg !5873
  %call100.i = call double @fabs(double %sub99.i) #9, !dbg !5873
  %cmp101.i = fcmp olt double %call100.i, 1.000000e-07, !dbg !5873
  br i1 %cmp101.i, label %if.then102.i, label %if.else107.i, !dbg !5873

if.then102.i:                                     ; preds = %land.lhs.true98.i
  %arraydecay103.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 1, i64 0, !dbg !5874
  %arraydecay105.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !5874
  call void @llvm.dbg.value(metadata !{double* %arraydecay103.i}, i64 0, metadata !5876), !dbg !5877
  call void @llvm.dbg.value(metadata !{double* %arraydecay105.i}, i64 0, metadata !5878), !dbg !5877
  %260 = load double* %arraydecay105.i, align 8, !dbg !5879, !tbaa !2552
  store double %260, double* %arraydecay103.i, align 8, !dbg !5879, !tbaa !2552
  %arrayidx2.i242.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !5880
  %261 = load double* %arrayidx2.i242.i, align 8, !dbg !5880, !tbaa !2552
  %arrayidx3.i243.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 1, i64 1, !dbg !5880
  store double %261, double* %arrayidx3.i243.i, align 8, !dbg !5880, !tbaa !2552
  %arrayidx4.i244.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !5881
  %262 = load double* %arrayidx4.i244.i, align 8, !dbg !5881, !tbaa !2552
  %arrayidx5.i245.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay.i, i64 0, i32 1, i64 2, !dbg !5881
  store double %262, double* %arrayidx5.i245.i, align 8, !dbg !5881, !tbaa !2552
  call void @llvm.dbg.value(metadata !5203, i64 0, metadata !5882), !dbg !5884
  %263 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 103), align 8, !dbg !5885, !tbaa !2311
  %inc.i.i = add nsw i64 %263, 1, !dbg !5885
  store i64 %inc.i.i, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 103), align 8, !dbg !5885, !tbaa !2311
  %264 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5886, !tbaa !2301
  %inc.i = add nsw i32 %264, 1, !dbg !5886
  store i32 %inc.i, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5886, !tbaa !2301
  %call106.i = call double @_ZN3pov5TraceEPNS_10Ray_StructEPfd(%"struct.pov::Ray_Struct"* %NRay.i, float* %arraydecay521, double %mul517) #7, !dbg !5887
  %265 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5888, !tbaa !2301
  %dec.i = add nsw i32 %265, -1, !dbg !5888
  store i32 %dec.i, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !5888, !tbaa !2301
  br label %land.lhs.true527, !dbg !5889

if.else107.i:                                     ; preds = %land.lhs.true98.i, %if.end95.i
  %arraydecay109.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !5890
  call void @llvm.dbg.value(metadata !{double* %arraydecay109.i}, i64 0, metadata !5892), !dbg !5893
  call void @llvm.dbg.value(metadata !{double* %arraydecay520}, i64 0, metadata !5894), !dbg !5893
  %266 = load double* %arraydecay109.i, align 8, !dbg !5895, !tbaa !2552
  %mul.i.i = fmul double %266, %215, !dbg !5895
  %arrayidx2.i246.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !5895
  %267 = load double* %arrayidx2.i246.i, align 8, !dbg !5895, !tbaa !2552
  %mul4.i.i = fmul double %267, %214, !dbg !5895
  %add.i.i = fadd double %mul.i.i, %mul4.i.i, !dbg !5895
  %arrayidx5.i248.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !5895
  %268 = load double* %arrayidx5.i248.i, align 8, !dbg !5895, !tbaa !2552
  %mul7.i.i = fmul double %268, %213, !dbg !5895
  %add8.i.i = fadd double %add.i.i, %mul7.i.i, !dbg !5895
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5896), !dbg !5895
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5897), !dbg !5893
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5898), !dbg !5899
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5898), !dbg !5900
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5898), !dbg !5902
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !5898), !dbg !5904
  %cmp110.i = fcmp ugt double %add8.i.i, 0.000000e+00, !dbg !5899
  br i1 %cmp110.i, label %if.else114.i, label %if.then111.i, !dbg !5899

if.then111.i:                                     ; preds = %if.else107.i
  %arraydecay112.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5908
  call void @llvm.dbg.value(metadata !{double* %arraydecay112.i}, i64 0, metadata !5909), !dbg !5910
  call void @llvm.dbg.value(metadata !{double* %arraydecay520}, i64 0, metadata !5911), !dbg !5910
  store double %215, double* %arraydecay112.i, align 16, !dbg !5912, !tbaa !2552
  %arrayidx3.i251.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 1, !dbg !5913
  store double %214, double* %arrayidx3.i251.i, align 8, !dbg !5913, !tbaa !2552
  %arrayidx5.i253.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 2, !dbg !5914
  store double %213, double* %arrayidx5.i253.i, align 16, !dbg !5914, !tbaa !2552
  %sub113.i = fsub double -0.000000e+00, %add8.i.i, !dbg !5900
  call void @llvm.dbg.value(metadata !{double %sub113.i}, i64 0, metadata !5898), !dbg !5900
  call void @llvm.dbg.value(metadata !{double %sub113.i}, i64 0, metadata !5897), !dbg !5893
  call void @llvm.dbg.value(metadata !{double %sub113.i}, i64 0, metadata !5898), !dbg !5899
  call void @llvm.dbg.value(metadata !{double %sub113.i}, i64 0, metadata !5898), !dbg !5900
  call void @llvm.dbg.value(metadata !{double %sub113.i}, i64 0, metadata !5898), !dbg !5902
  call void @llvm.dbg.value(metadata !{double %sub113.i}, i64 0, metadata !5898), !dbg !5904
  br label %if.end124.i, !dbg !5915

if.else114.i:                                     ; preds = %if.else107.i
  %sub116.i = fsub double -0.000000e+00, %215, !dbg !5916
  %arrayidx117.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5916
  store double %sub116.i, double* %arrayidx117.i, align 16, !dbg !5916, !tbaa !2552
  %sub119.i = fsub double -0.000000e+00, %214, !dbg !5918
  %arrayidx120.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 1, !dbg !5918
  store double %sub119.i, double* %arrayidx120.i, align 8, !dbg !5918, !tbaa !2552
  %sub122.i = fsub double -0.000000e+00, %213, !dbg !5919
  %arrayidx123.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 2, !dbg !5919
  store double %sub122.i, double* %arrayidx123.i, align 16, !dbg !5919, !tbaa !2552
  br label %if.end124.i

if.end124.i:                                      ; preds = %if.else114.i, %if.then111.i
  %add8.i257.i = phi double [ %add8.i.i, %if.else114.i ], [ %sub113.i, %if.then111.i ]
  %269 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5920, !tbaa !2301
  %cmp125.i = icmp sgt i32 %269, 0, !dbg !5920
  %270 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5920, !tbaa !2301
  %cmp126.i = icmp slt i32 %270, 2, !dbg !5920
  %or.cond196.i = or i1 %cmp125.i, %cmp126.i, !dbg !5920
  br i1 %or.cond196.i, label %if.then132.i, label %lor.lhs.false127.i, !dbg !5920

lor.lhs.false127.i:                               ; preds = %if.end124.i
  %sub128.i = fadd double %disp.1.i, -1.000000e+00, !dbg !5920
  %call129.i = call double @fabs(double %sub128.i) #9, !dbg !5920
  %cmp130.i = fcmp olt double %call129.i, 1.000000e-07, !dbg !5920
  %271 = load i32* @_ZN3pov18firstRadiosityPassE, align 4, !dbg !5920, !tbaa !2301
  %tobool.i = icmp ne i32 %271, 0, !dbg !5920
  %or.cond197.i = or i1 %cmp130.i, %tobool.i, !dbg !5920
  br i1 %or.cond197.i, label %if.then132.i, label %if.else141.i, !dbg !5920

if.then132.i:                                     ; preds = %lor.lhs.false127.i, %if.end124.i
  %cmp133.i = icmp sgt i32 %270, 1, !dbg !5921
  %or.cond198.i = and i1 %cmp133.i, %cmp125.i, !dbg !5921
  br i1 %or.cond198.i, label %if.then136.i, label %if.end138.i, !dbg !5921

if.then136.i:                                     ; preds = %if.then132.i
  call void @llvm.dbg.value(metadata !{double %ior.0.i}, i64 0, metadata !5922) #6, !dbg !5924
  call void @llvm.dbg.value(metadata !{double %disp.1.i}, i64 0, metadata !5925) #6, !dbg !5924
  call void @llvm.dbg.value(metadata !{i32 %269}, i64 0, metadata !5926) #6, !dbg !5924
  call void @llvm.dbg.value(metadata !{i32 %270}, i64 0, metadata !5927) #6, !dbg !5924
  %sub.i.i = add nsw i32 %269, -1, !dbg !5928
  %conv.i.i = sitofp i32 %sub.i.i to double, !dbg !5928
  %sub1.i.i = add nsw i32 %270, -1, !dbg !5928
  %conv2.i.i = sitofp i32 %sub1.i.i to double, !dbg !5928
  %div.i.i = fdiv double %conv.i.i, %conv2.i.i, !dbg !5928
  %sub3.i.i = fadd double %div.i.i, -5.000000e-01, !dbg !5928
  %call.i.i = call double @pow(double %disp.1.i, double %sub3.i.i) #8, !dbg !5928
  %mul4.i249.i = fmul double %ior.0.i, %call.i.i, !dbg !5928
  call void @llvm.dbg.value(metadata !{double %mul4.i249.i}, i64 0, metadata !5845), !dbg !5923
  br label %if.end138.i, !dbg !5923

if.end138.i:                                      ; preds = %if.then136.i, %if.then132.i
  %ior.1.i = phi double [ %mul4.i249.i, %if.then136.i ], [ %ior.0.i, %if.then132.i ]
  %arraydecay139.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5902
  %call140.i = call fastcc i32 @_ZN3povL12Refract_GutsEPfdPdS1_S1_dPNS_10Ray_StructES3_dS1_(float* %arraydecay521, double %ior.1.i, double* %arraydecay519, double* %arraydecay520, double* %arraydecay139.i, double %add8.i257.i, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %NRay.i, double %mul517, double* %Raw_Normal) #7, !dbg !5902
  br label %land.lhs.true527, !dbg !5902

if.else141.i:                                     ; preds = %lor.lhs.false127.i
  %call142.i = call double @sqrt(double %disp.1.i) #8, !dbg !5929
  %272 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5930, !tbaa !2301
  %sub144.i = add nsw i32 %272, -1, !dbg !5930
  %conv145.i = sitofp i32 %sub144.i to double, !dbg !5930
  %div146.i = fdiv double 1.000000e+00, %conv145.i, !dbg !5930
  %call147.i = call double @pow(double %disp.1.i, double %div146.i) #8, !dbg !5930
  call void @llvm.dbg.value(metadata !{double %call147.i}, i64 0, metadata !5931), !dbg !5930
  store i32 1, i32* @_ZN3pov9disp_elemE, align 4, !dbg !5932, !tbaa !2301
  %273 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5932, !tbaa !2301
  %cmp151258.i = icmp slt i32 %273, 1, !dbg !5932
  br i1 %cmp151258.i, label %for.end.i, label %for.body.lr.ph.i, !dbg !5932

for.body.lr.ph.i:                                 ; preds = %if.else141.i
  %div143.i = fdiv double %ior.0.i, %call142.i, !dbg !5929
  %arraydecay152.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 0, !dbg !5904
  %arraydecay153.i = getelementptr inbounds [3 x double]* %Local_Normal.i, i64 0, i64 0, !dbg !5904
  %arraydecay155.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 0, !dbg !5933
  %arrayidx160.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 1, !dbg !5934
  %arrayidx161.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 1, !dbg !5934
  %arrayidx165.i = getelementptr inbounds [5 x float]* %Elem.i, i64 0, i64 2, !dbg !5935
  %arrayidx166.i = getelementptr inbounds [5 x float]* %Hue.i, i64 0, i64 2, !dbg !5935
  br label %for.body.i, !dbg !5932

for.body.i:                                       ; preds = %for.body.i, %for.body.lr.ph.i
  %Sum.sroa.0.0262.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %add159.i, %for.body.i ]
  %Sum.sroa.1.0261.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %add164.i, %for.body.i ]
  %Sum.sroa.2.0260.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %add169.i, %for.body.i ]
  %ior.2259.i = phi double [ %div143.i, %for.body.lr.ph.i ], [ %mul170.i, %for.body.i ]
  %call154.i = call fastcc i32 @_ZN3povL12Refract_GutsEPfdPdS1_S1_dPNS_10Ray_StructES3_dS1_(float* %arraydecay152.i, double %ior.2259.i, double* %arraydecay519, double* %arraydecay520, double* %arraydecay153.i, double %add8.i257.i, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %NRay.i, double %mul517, double* %Raw_Normal) #7, !dbg !5904
  %274 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5933, !tbaa !2301
  %275 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5933, !tbaa !2301
  call fastcc void @_ZN3povL22Dispersion_Element_HueEPfii(float* %arraydecay155.i, i32 %274, i32 %275) #7, !dbg !5933
  %276 = load float* %arraydecay152.i, align 16, !dbg !5936, !tbaa !2644
  %277 = load float* %arraydecay155.i, align 16, !dbg !5936, !tbaa !2644
  %mul.i = fmul float %276, %277, !dbg !5936
  %add159.i = fadd float %Sum.sroa.0.0262.i, %mul.i, !dbg !5936
  %278 = load float* %arrayidx160.i, align 4, !dbg !5934, !tbaa !2644
  %279 = load float* %arrayidx161.i, align 4, !dbg !5934, !tbaa !2644
  %mul162.i = fmul float %278, %279, !dbg !5934
  %add164.i = fadd float %Sum.sroa.1.0261.i, %mul162.i, !dbg !5934
  %280 = load float* %arrayidx165.i, align 8, !dbg !5935, !tbaa !2644
  %281 = load float* %arrayidx166.i, align 8, !dbg !5935, !tbaa !2644
  %mul167.i = fmul float %280, %281, !dbg !5935
  %add169.i = fadd float %Sum.sroa.2.0260.i, %mul167.i, !dbg !5935
  %mul170.i = fmul double %call147.i, %ior.2259.i, !dbg !5937
  call void @llvm.dbg.value(metadata !{double %mul170.i}, i64 0, metadata !5845), !dbg !5937
  %282 = load i32* @_ZN3pov9disp_elemE, align 4, !dbg !5932, !tbaa !2301
  %inc171.i = add nsw i32 %282, 1, !dbg !5932
  store i32 %inc171.i, i32* @_ZN3pov9disp_elemE, align 4, !dbg !5932, !tbaa !2301
  %283 = load i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5932, !tbaa !2301
  %cmp151.i = icmp slt i32 %282, %283, !dbg !5932
  br i1 %cmp151.i, label %for.body.i, label %for.end.i, !dbg !5932

for.end.i:                                        ; preds = %for.body.i, %if.else141.i
  %284 = phi i32 [ %273, %if.else141.i ], [ %283, %for.body.i ]
  %Sum.sroa.0.0.lcssa.i = phi float [ 0.000000e+00, %if.else141.i ], [ %add159.i, %for.body.i ]
  %Sum.sroa.1.0.lcssa.i = phi float [ 0.000000e+00, %if.else141.i ], [ %add164.i, %for.body.i ]
  %Sum.sroa.2.0.lcssa.i = phi float [ 0.000000e+00, %if.else141.i ], [ %add169.i, %for.body.i ]
  %conv173.i = sitofp i32 %284 to float, !dbg !5938
  %div174.i = fdiv float %Sum.sroa.0.0.lcssa.i, %conv173.i, !dbg !5938
  %conv177.i = fmul float %div174.i, 3.000000e+00, !dbg !5938
  store float %conv177.i, float* %arraydecay521, align 16, !dbg !5938, !tbaa !2644
  %div181.i = fdiv float %Sum.sroa.1.0.lcssa.i, %conv173.i, !dbg !5939
  %conv184.i = fmul float %div181.i, 3.000000e+00, !dbg !5939
  %arrayidx185.i = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 1, !dbg !5939
  store float %conv184.i, float* %arrayidx185.i, align 4, !dbg !5939, !tbaa !2644
  %div188.i = fdiv float %Sum.sroa.2.0.lcssa.i, %conv173.i, !dbg !5940
  %conv191.i = fmul float %div188.i, 3.000000e+00, !dbg !5940
  %arrayidx192.i = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 2, !dbg !5940
  store float %conv191.i, float* %arrayidx192.i, align 8, !dbg !5940, !tbaa !2644
  store i32 0, i32* @_ZN3pov9disp_elemE, align 4, !dbg !5941, !tbaa !2301
  store i32 0, i32* @_ZN3pov11disp_nelemsE, align 4, !dbg !5942, !tbaa !2301
  br label %land.lhs.true527

land.lhs.true527:                                 ; preds = %for.end.i, %if.end138.i, %if.then102.i
  %retval.0.i = phi i32 [ %call140.i, %if.end138.i ], [ 0, %for.end.i ], [ 0, %if.then102.i ]
  call void @llvm.lifetime.end(i64 856, i8* %223) #6, !dbg !5943
  call void @llvm.lifetime.end(i64 24, i8* %220), !dbg !5943
  call void @llvm.lifetime.end(i64 20, i8* %221), !dbg !5943
  call void @llvm.lifetime.end(i64 20, i8* %222), !dbg !5943
  call void @llvm.dbg.value(metadata !{i32 %retval.0.i}, i64 0, metadata !1507), !dbg !5817
  store i32 -1, i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !5944, !tbaa !2301
  %Old_Refract = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 6, !dbg !5945
  %285 = load float* %Old_Refract, align 4, !dbg !5945, !tbaa !2644
  %call528 = call i32 @_ZN3pov25Interior_In_Ray_ContainerEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Interior_Struct"* %217) #7, !dbg !5946
  %cmp529 = icmp sgt i32 %call528, -1, !dbg !5946
  br i1 %cmp529, label %if.then530, label %if.end630, !dbg !5946

if.then530:                                       ; preds = %land.lhs.true527
  %Fade_Distance = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 7, !dbg !5947
  %286 = load float* %Fade_Distance, align 4, !dbg !5947, !tbaa !2644
  %conv531 = fpext float %286 to double, !dbg !5947
  %fabsf1188 = call float @fabsf(float %286) #4, !dbg !5947
  %287 = fpext float %fabsf1188 to double, !dbg !5947
  %cmp533 = fcmp ogt double %287, 1.000000e-07, !dbg !5947
  br i1 %cmp533, label %if.then534, label %if.end630, !dbg !5947

if.then534:                                       ; preds = %if.then530
  %Fade_Power = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 8, !dbg !5949
  %288 = load float* %Fade_Power, align 4, !dbg !5949, !tbaa !2644
  %cmp535 = fcmp ult float %288, 1.000000e+03, !dbg !5949
  br i1 %cmp535, label %if.else580, label %if.then536, !dbg !5949

if.then536:                                       ; preds = %if.then534
  %arrayidx537 = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 9, i64 0, !dbg !5951
  %289 = load float* %arrayidx537, align 4, !dbg !5951, !tbaa !2644
  %conv538 = fpext float %289 to double, !dbg !5951
  %sub539 = fsub double 1.000000e+00, %conv538, !dbg !5951
  %Depth = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 0, !dbg !5951
  %290 = load double* %Depth, align 8, !dbg !5951, !tbaa !2552
  %291 = fmul double %290, %sub539, !dbg !5951
  %mul541 = fsub double -0.000000e+00, %291, !dbg !5951
  %div544 = fdiv double %mul541, %conv531, !dbg !5951
  %call545 = call double @exp(double %div544) #8, !dbg !5951
  %conv547 = fpext float %285 to double, !dbg !5951
  %mul548 = fmul double %conv547, %call545, !dbg !5951
  %conv549 = fptrunc double %mul548 to float, !dbg !5951
  %arrayidx551 = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 9, i64 1, !dbg !5953
  %292 = load float* %arrayidx551, align 4, !dbg !5953, !tbaa !2644
  %conv552 = fpext float %292 to double, !dbg !5953
  %sub553 = fsub double 1.000000e+00, %conv552, !dbg !5953
  %293 = load double* %Depth, align 8, !dbg !5953, !tbaa !2552
  %294 = fmul double %293, %sub553, !dbg !5953
  %mul556 = fsub double -0.000000e+00, %294, !dbg !5953
  %295 = load float* %Fade_Distance, align 4, !dbg !5953, !tbaa !2644
  %conv558 = fpext float %295 to double, !dbg !5953
  %div559 = fdiv double %mul556, %conv558, !dbg !5953
  %call560 = call double @exp(double %div559) #8, !dbg !5953
  %mul563 = fmul double %conv547, %call560, !dbg !5953
  %conv564 = fptrunc double %mul563 to float, !dbg !5953
  %arrayidx566 = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 9, i64 2, !dbg !5954
  %296 = load float* %arrayidx566, align 4, !dbg !5954, !tbaa !2644
  %conv567 = fpext float %296 to double, !dbg !5954
  %sub568 = fsub double 1.000000e+00, %conv567, !dbg !5954
  %297 = load double* %Depth, align 8, !dbg !5954, !tbaa !2552
  %298 = fmul double %297, %sub568, !dbg !5954
  %mul571 = fsub double -0.000000e+00, %298, !dbg !5954
  %299 = load float* %Fade_Distance, align 4, !dbg !5954, !tbaa !2644
  %conv573 = fpext float %299 to double, !dbg !5954
  %div574 = fdiv double %mul571, %conv573, !dbg !5954
  %call575 = call double @exp(double %div574) #8, !dbg !5954
  %mul578 = fmul double %conv547, %call575, !dbg !5954
  %conv579 = fptrunc double %mul578 to float, !dbg !5954
  br label %if.end630, !dbg !5955

if.else580:                                       ; preds = %if.then534
  %Depth581 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 0, !dbg !5956
  %300 = load double* %Depth581, align 8, !dbg !5956, !tbaa !2552
  %div584 = fdiv double %300, %conv531, !dbg !5956
  %conv586 = fpext float %288 to double, !dbg !5956
  %call587 = call double @pow(double %div584, double %conv586) #8, !dbg !5956
  %add588 = fadd double %call587, 1.000000e+00, !dbg !5956
  call void @llvm.dbg.value(metadata !{double %add588}, i64 0, metadata !1488), !dbg !5956
  %arrayidx590 = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 9, i64 0, !dbg !5958
  %301 = load float* %arrayidx590, align 4, !dbg !5958, !tbaa !2644
  %conv591 = fpext float %301 to double, !dbg !5958
  %sub595 = fsub double 1.000000e+00, %conv591, !dbg !5958
  %div596 = fdiv double %sub595, %add588, !dbg !5958
  %add597 = fadd double %conv591, %div596, !dbg !5958
  %conv599 = fpext float %285 to double, !dbg !5958
  %mul600 = fmul double %conv599, %add597, !dbg !5958
  %conv601 = fptrunc double %mul600 to float, !dbg !5958
  %arrayidx603 = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 9, i64 1, !dbg !5959
  %302 = load float* %arrayidx603, align 4, !dbg !5959, !tbaa !2644
  %conv604 = fpext float %302 to double, !dbg !5959
  %sub608 = fsub double 1.000000e+00, %conv604, !dbg !5959
  %div609 = fdiv double %sub608, %add588, !dbg !5959
  %add610 = fadd double %conv604, %div609, !dbg !5959
  %mul613 = fmul double %conv599, %add610, !dbg !5959
  %conv614 = fptrunc double %mul613 to float, !dbg !5959
  %arrayidx616 = getelementptr inbounds %"struct.pov::Interior_Struct"* %217, i64 0, i32 9, i64 2, !dbg !5960
  %303 = load float* %arrayidx616, align 4, !dbg !5960, !tbaa !2644
  %conv617 = fpext float %303 to double, !dbg !5960
  %sub621 = fsub double 1.000000e+00, %conv617, !dbg !5960
  %div622 = fdiv double %sub621, %add588, !dbg !5960
  %add623 = fadd double %conv617, %div622, !dbg !5960
  %mul626 = fmul double %conv599, %add623, !dbg !5960
  %conv627 = fptrunc double %mul626 to float, !dbg !5960
  br label %if.end630

if.end630:                                        ; preds = %if.then530, %if.else580, %if.then536, %land.lhs.true527
  %AttCol.sroa.0.0 = phi float [ %conv549, %if.then536 ], [ %conv601, %if.else580 ], [ %285, %if.then530 ], [ %285, %land.lhs.true527 ]
  %AttCol.sroa.1.0 = phi float [ %conv564, %if.then536 ], [ %conv614, %if.else580 ], [ %285, %if.then530 ], [ %285, %land.lhs.true527 ]
  %AttCol.sroa.2.0 = phi float [ %conv579, %if.then536 ], [ %conv627, %if.else580 ], [ %285, %if.then530 ], [ %285, %land.lhs.true527 ]
  %tobool631 = icmp eq i32 %retval.0.i, 0, !dbg !5961
  br i1 %tobool631, label %if.else648, label %if.then632, !dbg !5961

if.then632:                                       ; preds = %if.end630
  %304 = load float* %arraydecay521, align 16, !dbg !5962, !tbaa !2644
  %mul635 = fmul float %AttCol.sroa.0.0, %304, !dbg !5962
  %305 = load float* %ResCol, align 4, !dbg !5962, !tbaa !2644
  %add637 = fadd float %305, %mul635, !dbg !5962
  store float %add637, float* %ResCol, align 4, !dbg !5962, !tbaa !2644
  %arrayidx639 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 1, !dbg !5964
  %306 = load float* %arrayidx639, align 4, !dbg !5964, !tbaa !2644
  %mul640 = fmul float %AttCol.sroa.1.0, %306, !dbg !5964
  %307 = load float* %arrayidx1.i, align 4, !dbg !5964, !tbaa !2644
  %add642 = fadd float %307, %mul640, !dbg !5964
  store float %add642, float* %arrayidx1.i, align 4, !dbg !5964, !tbaa !2644
  %arrayidx644 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 2, !dbg !5965
  %308 = load float* %arrayidx644, align 8, !dbg !5965, !tbaa !2644
  %mul645 = fmul float %AttCol.sroa.2.0, %308, !dbg !5965
  %309 = load float* %arrayidx2.i, align 4, !dbg !5965, !tbaa !2644
  %add647 = fadd float %309, %mul645, !dbg !5965
  store float %add647, float* %arrayidx2.i, align 4, !dbg !5965, !tbaa !2644
  br label %if.end735, !dbg !5966

if.else648:                                       ; preds = %if.end630
  %tobool649 = icmp eq i32 %one_colour_found.0.lcssa, 0, !dbg !5967
  %310 = load float* %arraydecay521, align 16, !dbg !5969, !tbaa !2644
  %mul653 = fmul float %AttCol.sroa.0.0, %310, !dbg !5969
  br i1 %tobool649, label %if.else701, label %if.then650, !dbg !5967

if.then650:                                       ; preds = %if.else648
  %add658 = fadd float %FilCol.sroa.0.0.load13651391.lcssa, 0.000000e+00, !dbg !5969
  %mul659 = fmul float %add658, %mul653, !dbg !5969
  %311 = load float* %ResCol, align 4, !dbg !5969, !tbaa !2644
  %add661 = fadd float %mul659, %311, !dbg !5969
  store float %add661, float* %ResCol, align 4, !dbg !5969, !tbaa !2644
  %arrayidx663 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 1, !dbg !5971
  %312 = load float* %arrayidx663, align 4, !dbg !5971, !tbaa !2644
  %mul664 = fmul float %AttCol.sroa.1.0, %312, !dbg !5971
  %add669 = fadd float %FilCol.sroa.1.4.load13741393.lcssa, 0.000000e+00, !dbg !5971
  %mul670 = fmul float %add669, %mul664, !dbg !5971
  %313 = load float* %arrayidx1.i, align 4, !dbg !5971, !tbaa !2644
  %add672 = fadd float %313, %mul670, !dbg !5971
  store float %add672, float* %arrayidx1.i, align 4, !dbg !5971, !tbaa !2644
  %arrayidx674 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 2, !dbg !5972
  %314 = load float* %arrayidx674, align 8, !dbg !5972, !tbaa !2644
  %mul675 = fmul float %AttCol.sroa.2.0, %314, !dbg !5972
  %add680 = fadd float %FilCol.sroa.2.8.load13831395.lcssa, 0.000000e+00, !dbg !5972
  %mul681 = fmul float %add680, %mul675, !dbg !5972
  %315 = load float* %arrayidx2.i, align 4, !dbg !5972, !tbaa !2644
  %add683 = fadd float %315, %mul681, !dbg !5972
  store float %add683, float* %arrayidx2.i, align 4, !dbg !5972, !tbaa !2644
  %conv685 = fpext float %AttCol.sroa.0.0 to double, !dbg !5973
  %mul686 = fmul double %conv685, 2.970000e-01, !dbg !5973
  %conv688 = fpext float %AttCol.sroa.1.0 to double, !dbg !5973
  %mul689 = fmul double %conv688, 5.890000e-01, !dbg !5973
  %add690 = fadd double %mul686, %mul689, !dbg !5973
  %conv692 = fpext float %AttCol.sroa.2.0 to double, !dbg !5973
  %mul693 = fmul double %conv692, 1.140000e-01, !dbg !5973
  %add694 = fadd double %add690, %mul693, !dbg !5973
  %arrayidx695 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 4, !dbg !5973
  %316 = load float* %arrayidx695, align 16, !dbg !5973, !tbaa !2644
  %conv696 = fpext float %316 to double, !dbg !5973
  %mul697 = fmul double %add694, %conv696, !dbg !5973
  %mul698 = fmul double %Trans.0.lcssa, %mul697, !dbg !5973
  %conv699 = fptrunc double %mul698 to float, !dbg !5973
  store float %conv699, float* %arrayidx4.i, align 4, !dbg !5973, !tbaa !2644
  br label %if.end735, !dbg !5974

if.else701:                                       ; preds = %if.else648
  %317 = load float* %ResCol, align 4, !dbg !5975, !tbaa !2644
  %add706 = fadd float %mul653, %317, !dbg !5975
  store float %add706, float* %ResCol, align 4, !dbg !5975, !tbaa !2644
  %arrayidx708 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 1, !dbg !5977
  %318 = load float* %arrayidx708, align 4, !dbg !5977, !tbaa !2644
  %mul709 = fmul float %AttCol.sroa.1.0, %318, !dbg !5977
  %319 = load float* %arrayidx1.i, align 4, !dbg !5977, !tbaa !2644
  %add711 = fadd float %319, %mul709, !dbg !5977
  store float %add711, float* %arrayidx1.i, align 4, !dbg !5977, !tbaa !2644
  %arrayidx713 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 2, !dbg !5978
  %320 = load float* %arrayidx713, align 8, !dbg !5978, !tbaa !2644
  %mul714 = fmul float %AttCol.sroa.2.0, %320, !dbg !5978
  %321 = load float* %arrayidx2.i, align 4, !dbg !5978, !tbaa !2644
  %add716 = fadd float %321, %mul714, !dbg !5978
  store float %add716, float* %arrayidx2.i, align 4, !dbg !5978, !tbaa !2644
  %conv718 = fpext float %AttCol.sroa.0.0 to double, !dbg !5979
  %mul719 = fmul double %conv718, 2.970000e-01, !dbg !5979
  %conv721 = fpext float %AttCol.sroa.1.0 to double, !dbg !5979
  %mul722 = fmul double %conv721, 5.890000e-01, !dbg !5979
  %add723 = fadd double %mul719, %mul722, !dbg !5979
  %conv725 = fpext float %AttCol.sroa.2.0 to double, !dbg !5979
  %mul726 = fmul double %conv725, 1.140000e-01, !dbg !5979
  %add727 = fadd double %add723, %mul726, !dbg !5979
  %arrayidx728 = getelementptr inbounds [5 x float]* %RfrCol, i64 0, i64 4, !dbg !5979
  %322 = load float* %arrayidx728, align 16, !dbg !5979, !tbaa !2644
  %conv729 = fpext float %322 to double, !dbg !5979
  %mul730 = fmul double %add727, %conv729, !dbg !5979
  %conv731 = fptrunc double %mul730 to float, !dbg !5979
  store float %conv731, float* %arrayidx4.i, align 4, !dbg !5979, !tbaa !2644
  br label %if.end735

if.end735:                                        ; preds = %for.end488, %land.lhs.true494, %if.then632, %if.else701, %if.then650
  %TIR_occured.0 = phi i32 [ %retval.0.i, %if.then632 ], [ 0, %if.then650 ], [ 0, %if.else701 ], [ 0, %land.lhs.true494 ], [ 0, %for.end488 ]
  %323 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !5980, !tbaa !2301
  %and737 = and i32 %323, 32, !dbg !5980
  %tobool738 = icmp ne i32 %and737, 0, !dbg !5980
  %cmp7411402 = icmp sgt i32 %layer_number.0.lcssa, 0, !dbg !5981
  %or.cond1477 = and i1 %tobool738, %cmp7411402, !dbg !5980
  br i1 %or.cond1477, label %for.body742.lr.ph, label %if.end873, !dbg !5980

for.body742.lr.ph:                                ; preds = %if.end735
  %tobool743 = icmp eq i32 %TIR_occured.0, 0, !dbg !5984
  %arraydecay788 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersect, i64 0, i32 1, i64 0, !dbg !5986
  %arraydecay792 = getelementptr inbounds [5 x float]* %RflCol, i64 0, i64 0, !dbg !5986
  %arrayidx819 = getelementptr inbounds [5 x float]* %RflCol, i64 0, i64 1, !dbg !5989
  %arrayidx834 = getelementptr inbounds [5 x float]* %RflCol, i64 0, i64 2, !dbg !5991
  %arrayidx745 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 0, !dbg !5992
  %324 = load double* %arrayidx745, align 16, !dbg !5992, !tbaa !2552
  %arrayidx753 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 1, !dbg !5993
  %325 = load double* %arrayidx753, align 8, !dbg !5993, !tbaa !2552
  %arrayidx761 = getelementptr inbounds [3 x double]* %TopNormal, i64 0, i64 2, !dbg !5994
  %326 = load double* %arrayidx761, align 16, !dbg !5994, !tbaa !2552
  br label %for.body742, !dbg !5981

for.body742:                                      ; preds = %for.inc870, %for.body742.lr.ph
  %indvars.iv1443 = phi i64 [ 0, %for.body742.lr.ph ], [ %indvars.iv.next1444, %for.inc870 ]
  br i1 %tobool743, label %if.then768, label %lor.lhs.false744, !dbg !5984

lor.lhs.false744:                                 ; preds = %for.body742
  %arrayidx748 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1443, i64 0, !dbg !5992
  %327 = load double* %arrayidx748, align 8, !dbg !5992, !tbaa !2552
  %sub749 = fsub double %324, %327, !dbg !5992
  %call750 = call double @fabs(double %sub749) #9, !dbg !5992
  %cmp751 = fcmp ogt double %call750, 1.000000e-07, !dbg !5992
  br i1 %cmp751, label %if.then768, label %lor.lhs.false752, !dbg !5992

lor.lhs.false752:                                 ; preds = %lor.lhs.false744
  %arrayidx756 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1443, i64 1, !dbg !5993
  %328 = load double* %arrayidx756, align 8, !dbg !5993, !tbaa !2552
  %sub757 = fsub double %325, %328, !dbg !5993
  %call758 = call double @fabs(double %sub757) #9, !dbg !5993
  %cmp759 = fcmp ogt double %call758, 1.000000e-07, !dbg !5993
  br i1 %cmp759, label %if.then768, label %lor.lhs.false760, !dbg !5993

lor.lhs.false760:                                 ; preds = %lor.lhs.false752
  %arrayidx764 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1443, i64 2, !dbg !5994
  %329 = load double* %arrayidx764, align 8, !dbg !5994, !tbaa !2552
  %sub765 = fsub double %326, %329, !dbg !5994
  %call766 = call double @fabs(double %sub765) #9, !dbg !5994
  %cmp767 = fcmp ogt double %call766, 1.000000e-07, !dbg !5994
  br i1 %cmp767, label %if.then768, label %for.inc870, !dbg !5994

if.then768:                                       ; preds = %for.body742, %lor.lhs.false760, %lor.lhs.false752, %lor.lhs.false744
  %arrayidx771 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 0, !dbg !5995
  %330 = load float* %arrayidx771, align 4, !dbg !5995, !tbaa !2644
  %cmp773 = fcmp une float %330, 0.000000e+00, !dbg !5995
  br i1 %cmp773, label %if.then786, label %lor.lhs.false774, !dbg !5995

lor.lhs.false774:                                 ; preds = %if.then768
  %arrayidx777 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 1, !dbg !5995
  %331 = load float* %arrayidx777, align 4, !dbg !5995, !tbaa !2644
  %cmp779 = fcmp une float %331, 0.000000e+00, !dbg !5995
  br i1 %cmp779, label %if.then786, label %lor.lhs.false780, !dbg !5995

lor.lhs.false780:                                 ; preds = %lor.lhs.false774
  %arrayidx783 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 2, !dbg !5995
  %332 = load float* %arrayidx783, align 4, !dbg !5995, !tbaa !2644
  %cmp785 = fcmp une float %332, 0.000000e+00, !dbg !5995
  br i1 %cmp785, label %if.then786, label %for.inc870, !dbg !5995

if.then786:                                       ; preds = %lor.lhs.false780, %lor.lhs.false774, %if.then768
  %arraydecay791 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 3, i64 %indvars.iv1443, i64 0, !dbg !5986
  %arrayidx794 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 2, i64 %indvars.iv1443, !dbg !5986
  %333 = load double* %arrayidx794, align 8, !dbg !5986, !tbaa !2552
  call fastcc void @_ZN3povL7ReflectEPdPNS_10Ray_StructES0_S0_Pfd(double* %arraydecay788, %"struct.pov::Ray_Struct"* %Ray, double* %arraydecay791, double* %Raw_Normal, float* %arraydecay792, double %333) #7, !dbg !5986
  store i32 -1, i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !5996, !tbaa !2301
  %arrayidx796 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 5, i64 %indvars.iv1443, !dbg !5997
  %334 = load float* %arrayidx796, align 4, !dbg !5997, !tbaa !2644
  %cmp798 = fcmp une float %334, 1.000000e+00, !dbg !5997
  %335 = load float* %arrayidx771, align 4, !dbg !5998, !tbaa !2644
  br i1 %cmp798, label %if.then799, label %if.else845, !dbg !5997

if.then799:                                       ; preds = %if.then786
  %conv797 = fpext float %334 to double, !dbg !5997
  %conv803 = fpext float %335 to double, !dbg !5998
  %336 = load float* %arraydecay792, align 16, !dbg !5998, !tbaa !2644
  %conv805 = fpext float %336 to double, !dbg !5998
  %call809 = call double @pow(double %conv805, double %conv797) #8, !dbg !5998
  %mul810 = fmul double %conv803, %call809, !dbg !5998
  %337 = load float* %ResCol, align 4, !dbg !5998, !tbaa !2644
  %conv812 = fpext float %337 to double, !dbg !5998
  %add813 = fadd double %mul810, %conv812, !dbg !5998
  %conv814 = fptrunc double %add813 to float, !dbg !5998
  store float %conv814, float* %ResCol, align 4, !dbg !5998, !tbaa !2644
  %arrayidx817 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 1, !dbg !5989
  %338 = load float* %arrayidx817, align 4, !dbg !5989, !tbaa !2644
  %conv818 = fpext float %338 to double, !dbg !5989
  %339 = load float* %arrayidx819, align 4, !dbg !5989, !tbaa !2644
  %conv820 = fpext float %339 to double, !dbg !5989
  %340 = load float* %arrayidx796, align 4, !dbg !5989, !tbaa !2644
  %conv823 = fpext float %340 to double, !dbg !5989
  %call824 = call double @pow(double %conv820, double %conv823) #8, !dbg !5989
  %mul825 = fmul double %conv818, %call824, !dbg !5989
  %341 = load float* %arrayidx1.i, align 4, !dbg !5989, !tbaa !2644
  %conv827 = fpext float %341 to double, !dbg !5989
  %add828 = fadd double %mul825, %conv827, !dbg !5989
  %conv829 = fptrunc double %add828 to float, !dbg !5989
  store float %conv829, float* %arrayidx1.i, align 4, !dbg !5989, !tbaa !2644
  %arrayidx832 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 2, !dbg !5991
  %342 = load float* %arrayidx832, align 4, !dbg !5991, !tbaa !2644
  %conv833 = fpext float %342 to double, !dbg !5991
  %343 = load float* %arrayidx834, align 8, !dbg !5991, !tbaa !2644
  %conv835 = fpext float %343 to double, !dbg !5991
  %344 = load float* %arrayidx796, align 4, !dbg !5991, !tbaa !2644
  %conv838 = fpext float %344 to double, !dbg !5991
  %call839 = call double @pow(double %conv835, double %conv838) #8, !dbg !5991
  %mul840 = fmul double %conv833, %call839, !dbg !5991
  %345 = load float* %arrayidx2.i, align 4, !dbg !5991, !tbaa !2644
  %conv842 = fpext float %345 to double, !dbg !5991
  %add843 = fadd double %mul840, %conv842, !dbg !5991
  %conv844 = fptrunc double %add843 to float, !dbg !5991
  store float %conv844, float* %arrayidx2.i, align 4, !dbg !5991, !tbaa !2644
  br label %for.inc870, !dbg !5999

if.else845:                                       ; preds = %if.then786
  %346 = load float* %arraydecay792, align 16, !dbg !6000, !tbaa !2644
  %mul850 = fmul float %335, %346, !dbg !6000
  %347 = load float* %ResCol, align 4, !dbg !6000, !tbaa !2644
  %add852 = fadd float %347, %mul850, !dbg !6000
  store float %add852, float* %ResCol, align 4, !dbg !6000, !tbaa !2644
  %arrayidx855 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 1, !dbg !6002
  %348 = load float* %arrayidx855, align 4, !dbg !6002, !tbaa !2644
  %349 = load float* %arrayidx819, align 4, !dbg !6002, !tbaa !2644
  %mul857 = fmul float %348, %349, !dbg !6002
  %350 = load float* %arrayidx1.i, align 4, !dbg !6002, !tbaa !2644
  %add859 = fadd float %350, %mul857, !dbg !6002
  store float %add859, float* %arrayidx1.i, align 4, !dbg !6002, !tbaa !2644
  %arrayidx862 = getelementptr inbounds %"struct.pov::ComTexData_Struct"* %call, i64 0, i32 4, i64 %indvars.iv1443, i64 2, !dbg !6003
  %351 = load float* %arrayidx862, align 4, !dbg !6003, !tbaa !2644
  %352 = load float* %arrayidx834, align 8, !dbg !6003, !tbaa !2644
  %mul864 = fmul float %351, %352, !dbg !6003
  %353 = load float* %arrayidx2.i, align 4, !dbg !6003, !tbaa !2644
  %add866 = fadd float %353, %mul864, !dbg !6003
  store float %add866, float* %arrayidx2.i, align 4, !dbg !6003, !tbaa !2644
  br label %for.inc870

for.inc870:                                       ; preds = %lor.lhs.false760, %if.then799, %if.else845, %lor.lhs.false780
  %indvars.iv.next1444 = add i64 %indvars.iv1443, 1, !dbg !5981
  %lftr.wideiv = trunc i64 %indvars.iv.next1444 to i32, !dbg !5981
  %exitcond = icmp eq i32 %lftr.wideiv, %layer_number.0.lcssa, !dbg !5981
  br i1 %exitcond, label %for.cond740.if.end873.loopexit_crit_edge, label %for.body742, !dbg !5981

for.cond740.if.end873.loopexit_crit_edge:         ; preds = %for.inc870
  %.pre.pre = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !6004, !tbaa !2301
  br label %if.end873, !dbg !5981

if.end873:                                        ; preds = %if.end735, %for.cond740.if.end873.loopexit_crit_edge
  %354 = phi i32 [ %323, %if.end735 ], [ %.pre.pre, %for.cond740.if.end873.loopexit_crit_edge ]
  %and875 = and i32 %354, 128, !dbg !6004
  %tobool876 = icmp eq i32 %and875, 0, !dbg !6004
  br i1 %tobool876, label %if.end948, label %land.lhs.true877, !dbg !6004

land.lhs.true877:                                 ; preds = %if.end873
  %Index = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 2, !dbg !6004
  %355 = load i32* %Index, align 4, !dbg !6004, !tbaa !2301
  %cmp878 = icmp sgt i32 %355, -1, !dbg !6004
  br i1 %cmp878, label %for.body883, label %if.end948, !dbg !6004

for.cond880:                                      ; preds = %for.body883
  %indvars.iv.next1442 = add i64 %indvars.iv1441, 1, !dbg !6005
  %356 = trunc i64 %indvars.iv1441 to i32, !dbg !6005
  %cmp882 = icmp slt i32 %356, %355, !dbg !6005
  br i1 %cmp882, label %for.body883, label %if.then893.critedge, !dbg !6005

for.body883:                                      ; preds = %land.lhs.true877, %for.cond880
  %indvars.iv1441 = phi i64 [ %indvars.iv.next1442, %for.cond880 ], [ 0, %land.lhs.true877 ]
  %arrayidx885 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv1441, !dbg !6008
  %357 = load %"struct.pov::Interior_Struct"** %arrayidx885, align 8, !dbg !6008, !tbaa !2295
  %hollow = getelementptr inbounds %"struct.pov::Interior_Struct"* %357, i64 0, i32 1, !dbg !6008
  %358 = load i32* %hollow, align 4, !dbg !6008, !tbaa !2301
  %tobool886 = icmp eq i32 %358, 0, !dbg !6008
  br i1 %tobool886, label %if.end948, label %for.cond880, !dbg !6008

if.then893.critedge:                              ; preds = %for.cond880
  %359 = load i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6010, !tbaa !2311
  %inc894 = add nsw i64 %359, 1, !dbg !6010
  store i64 %inc894, i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6010, !tbaa !2311
  %360 = load i64* @_ZN3pov17MaxMediaPoolDepthE, align 8, !dbg !6012, !tbaa !2311
  %cmp895 = icmp slt i64 %inc894, %360, !dbg !6012
  br i1 %cmp895, label %if.end898, label %if.then896, !dbg !6012

if.then896:                                       ; preds = %if.then893.critedge
  %mul897 = shl nsw i64 %360, 1, !dbg !6013
  call void @_ZN3pov22ResizeMediaMallocPoolsEl(i64 %mul897) #7, !dbg !6013
  %.pre1457 = load i32* %Index, align 4, !dbg !6015, !tbaa !2301
  %.pre1458 = load i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6015, !tbaa !2311
  br label %if.end898, !dbg !6016

if.end898:                                        ; preds = %if.then893.critedge, %if.then896
  %361 = phi i64 [ %inc894, %if.then893.critedge ], [ %.pre1458, %if.then896 ]
  %362 = phi i32 [ %355, %if.then893.critedge ], [ %.pre1457, %if.then896 ]
  %add900 = add nsw i32 %362, 2, !dbg !6015
  %conv901 = sext i32 %add900 to i64, !dbg !6015
  %363 = load i64** @_ZN3pov25LightingMediaListPoolSizeE, align 8, !dbg !6015, !tbaa !2295
  %arrayidx902 = getelementptr inbounds i64* %363, i64 %361, !dbg !6015
  %364 = load i64* %arrayidx902, align 8, !dbg !6015, !tbaa !2311
  %cmp903 = icmp slt i64 %conv901, %364, !dbg !6015
  br i1 %cmp903, label %if.end917, label %if.then904, !dbg !6015

if.then904:                                       ; preds = %if.end898
  %365 = load %"struct.pov::Media_Struct"**** @_ZN3pov21LightingMediaListPoolE, align 8, !dbg !6017, !tbaa !2295
  %arrayidx905 = getelementptr inbounds %"struct.pov::Media_Struct"*** %365, i64 %361, !dbg !6017
  %366 = load %"struct.pov::Media_Struct"*** %arrayidx905, align 8, !dbg !6017, !tbaa !2295
  %367 = bitcast %"struct.pov::Media_Struct"** %366 to i8*, !dbg !6017
  call void @_ZN3pov8pov_freeEPvPKci(i8* %367, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 4190) #7, !dbg !6017
  %368 = load i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6017, !tbaa !2311
  %369 = load %"struct.pov::Media_Struct"**** @_ZN3pov21LightingMediaListPoolE, align 8, !dbg !6017, !tbaa !2295
  %arrayidx906 = getelementptr inbounds %"struct.pov::Media_Struct"*** %369, i64 %368, !dbg !6017
  store %"struct.pov::Media_Struct"** null, %"struct.pov::Media_Struct"*** %arrayidx906, align 8, !dbg !6017, !tbaa !2295
  %370 = load i32* %Index, align 4, !dbg !6020, !tbaa !2301
  %add908 = add nsw i32 %370, 2, !dbg !6020
  %conv909 = sext i32 %add908 to i64, !dbg !6020
  %mul910 = shl nsw i64 %conv909, 3, !dbg !6020
  %call911 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul910, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 4191, i8* getelementptr inbounds ([16 x i8]* @.str3, i64 0, i64 0)) #7, !dbg !6020
  %371 = bitcast i8* %call911 to %"struct.pov::Media_Struct"**, !dbg !6020
  %372 = load i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6020, !tbaa !2311
  %373 = load %"struct.pov::Media_Struct"**** @_ZN3pov21LightingMediaListPoolE, align 8, !dbg !6020, !tbaa !2295
  %arrayidx912 = getelementptr inbounds %"struct.pov::Media_Struct"*** %373, i64 %372, !dbg !6020
  store %"struct.pov::Media_Struct"** %371, %"struct.pov::Media_Struct"*** %arrayidx912, align 8, !dbg !6020, !tbaa !2295
  %374 = load i32* %Index, align 4, !dbg !6021, !tbaa !2301
  %add914 = add nsw i32 %374, 2, !dbg !6021
  %conv915 = sext i32 %add914 to i64, !dbg !6021
  %375 = load i64** @_ZN3pov25LightingMediaListPoolSizeE, align 8, !dbg !6021, !tbaa !2295
  %arrayidx916 = getelementptr inbounds i64* %375, i64 %372, !dbg !6021
  store i64 %conv915, i64* %arrayidx916, align 8, !dbg !6021, !tbaa !2311
  %.pre1459 = load i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6022, !tbaa !2311
  br label %if.end917, !dbg !6023

if.end917:                                        ; preds = %if.end898, %if.then904
  %376 = phi i32 [ %362, %if.end898 ], [ %374, %if.then904 ]
  %377 = phi i64 [ %361, %if.end898 ], [ %.pre1459, %if.then904 ]
  %378 = load %"struct.pov::Media_Struct"**** @_ZN3pov21LightingMediaListPoolE, align 8, !dbg !6022, !tbaa !2295
  %arrayidx918 = getelementptr inbounds %"struct.pov::Media_Struct"*** %378, i64 %377, !dbg !6022
  %379 = load %"struct.pov::Media_Struct"*** %arrayidx918, align 8, !dbg !6022, !tbaa !2295
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %379}, i64 0, metadata !1504), !dbg !6022
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %379}, i64 0, metadata !1502), !dbg !6024
  call void @llvm.dbg.value(metadata !208, i64 0, metadata !1478), !dbg !6025
  %cmp9211397 = icmp slt i32 %376, 0, !dbg !6025
  br i1 %cmp9211397, label %for.end942, label %for.body922, !dbg !6025

for.body922:                                      ; preds = %if.end917, %for.inc940
  %indvars.iv = phi i64 [ %indvars.iv.next, %for.inc940 ], [ 0, %if.end917 ]
  %TmpMedia.01398 = phi %"struct.pov::Media_Struct"** [ %TmpMedia.1, %for.inc940 ], [ %379, %if.end917 ]
  %arrayidx925 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv, !dbg !6027
  %380 = load %"struct.pov::Interior_Struct"** %arrayidx925, align 8, !dbg !6027, !tbaa !2295
  %hollow926 = getelementptr inbounds %"struct.pov::Interior_Struct"* %380, i64 0, i32 1, !dbg !6027
  %381 = load i32* %hollow926, align 4, !dbg !6027, !tbaa !2301
  %tobool927 = icmp eq i32 %381, 0, !dbg !6027
  br i1 %tobool927, label %for.inc940, label %if.then928, !dbg !6027

if.then928:                                       ; preds = %for.body922
  %IMedia = getelementptr inbounds %"struct.pov::Interior_Struct"* %380, i64 0, i32 10, !dbg !6029
  %382 = load %"struct.pov::Media_Struct"** %IMedia, align 8, !dbg !6029, !tbaa !2295
  %cmp932 = icmp eq %"struct.pov::Media_Struct"* %382, null, !dbg !6029
  br i1 %cmp932, label %for.inc940, label %if.then933, !dbg !6029

if.then933:                                       ; preds = %if.then928
  store %"struct.pov::Media_Struct"* %382, %"struct.pov::Media_Struct"** %TmpMedia.01398, align 8, !dbg !6031, !tbaa !2295
  %incdec.ptr = getelementptr inbounds %"struct.pov::Media_Struct"** %TmpMedia.01398, i64 1, !dbg !6033
  call void @llvm.dbg.value(metadata !{%"struct.pov::Media_Struct"** %incdec.ptr}, i64 0, metadata !1502), !dbg !6033
  br label %for.inc940, !dbg !6034

for.inc940:                                       ; preds = %if.then928, %for.body922, %if.then933
  %TmpMedia.1 = phi %"struct.pov::Media_Struct"** [ %incdec.ptr, %if.then933 ], [ %TmpMedia.01398, %if.then928 ], [ %TmpMedia.01398, %for.body922 ]
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !6025
  %383 = trunc i64 %indvars.iv to i32, !dbg !6025
  %cmp921 = icmp slt i32 %383, %376, !dbg !6025
  br i1 %cmp921, label %for.body922, label %for.end942, !dbg !6025

for.end942:                                       ; preds = %for.inc940, %if.end917
  %TmpMedia.0.lcssa = phi %"struct.pov::Media_Struct"** [ %379, %if.end917 ], [ %TmpMedia.1, %for.inc940 ]
  store %"struct.pov::Media_Struct"* null, %"struct.pov::Media_Struct"** %TmpMedia.0.lcssa, align 8, !dbg !6035, !tbaa !2295
  %384 = load %"struct.pov::Media_Struct"** %379, align 8, !dbg !6036, !tbaa !2295
  %cmp943 = icmp eq %"struct.pov::Media_Struct"* %384, null, !dbg !6036
  br i1 %cmp943, label %if.end945, label %if.then944, !dbg !6036

if.then944:                                       ; preds = %for.end942
  call void @_ZN3pov14Simulate_MediaEPPNS_12Media_StructEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Media_Struct"** %379, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Intersect, float* %ResCol, i32 0) #7, !dbg !6037
  %.pre1460 = load i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6038, !tbaa !2311
  br label %if.end945, !dbg !6037

if.end945:                                        ; preds = %for.end942, %if.then944
  %385 = phi i64 [ %377, %for.end942 ], [ %.pre1460, %if.then944 ]
  store i32 -1, i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !6039, !tbaa !2301
  %dec946 = add nsw i64 %385, -1, !dbg !6038
  store i64 %dec946, i64* @_ZN3pov22LightingMediaListIndexE, align 8, !dbg !6038, !tbaa !2311
  br label %if.end948, !dbg !6040

if.end948:                                        ; preds = %for.body883, %if.end873, %if.end945, %land.lhs.true877
  call void @_ZN3pov14FreeComTexDataEPNS_17ComTexData_StructE(%"struct.pov::ComTexData_Struct"* %call) #7, !dbg !6041
  ret void, !dbg !6042
}
