define internal fastcc void @_ZN3povL18block_light_sourceEPNS_19Light_Source_StructEdPNS_10Ray_StructES3_PdPf(%"struct.pov::Light_Source_Struct"* %Light, double %Depth, %"struct.pov::Ray_Struct"* nocapture readonly %Light_Source_Ray, %"struct.pov::Ray_Struct"* %Eye_Ray, double* %P, float* %Colour) #0 {
  %Blocking_Object.i = alloca %"struct.pov::Object_Struct"*, align 8
  %Bounded_Intersection.i = alloca %"struct.pov::istk_entry", align 8
  %Temp_Intersection.i = alloca %"struct.pov::istk_entry", align 8
  %New_Depth = alloca double, align 8
  %Isection = alloca %"struct.pov::istk_entry", align 8
  %New_Ray = alloca %"struct.pov::Ray_Struct", align 16
  tail call void @llvm.dbg.value(metadata %"struct.pov::Light_Source_Struct"* %Light, i64 0, metadata !1976, metadata !2666), !dbg !4484
  tail call void @llvm.dbg.value(metadata double %Depth, i64 0, metadata !1977, metadata !2666), !dbg !4485
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Light_Source_Ray, i64 0, metadata !1978, metadata !2666), !dbg !4486
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Eye_Ray, i64 0, metadata !1979, metadata !2666), !dbg !4487
  tail call void @llvm.dbg.value(metadata double* %P, i64 0, metadata !1980, metadata !2666), !dbg !4488
  tail call void @llvm.dbg.value(metadata float* %Colour, i64 0, metadata !1981, metadata !2666), !dbg !4489
  %1 = bitcast %"struct.pov::istk_entry"* %Isection to i8*, !dbg !4490
  call void @llvm.lifetime.start(i64 200, i8* %1) #5, !dbg !4490
  %2 = bitcast %"struct.pov::Ray_Struct"* %New_Ray to i8*, !dbg !4491
  call void @llvm.lifetime.start(i64 856, i8* %2) #5, !dbg !4491
  %3 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 13, !dbg !4492
  %4 = load i32* %3, align 4, !dbg !4492, !tbaa !4493
  store i32 %4, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 25), align 8, !dbg !4494, !tbaa !4495
  tail call void @llvm.dbg.value(metadata double %Depth, i64 0, metadata !1982, metadata !2666), !dbg !4498
  store double %Depth, double* %New_Depth, align 8, !dbg !4499, !tbaa !3114
  %5 = bitcast %"struct.pov::Ray_Struct"* %Light_Source_Ray to i8*, !dbg !4500
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %2, i8* %5, i64 856, i32 8, i1 false), !dbg !4500, !tbaa.struct !4501
  %6 = getelementptr inbounds %"struct.pov::Ray_Struct"* %New_Ray, i64 0, i32 3, !dbg !4503
  store i32 1, i32* %6, align 4, !dbg !4504, !tbaa !4505
  %7 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 28, !dbg !4506
  %8 = load i8* %7, align 1, !dbg !4506, !tbaa !4389
  %9 = icmp eq i8 %8, 0, !dbg !4508
  br i1 %9, label %15, label %10, !dbg !4509

; <label>:10                                      ; preds = %0
  %11 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !4510, !tbaa !3797
  %12 = and i32 %11, 8, !dbg !4511
  %13 = icmp eq i32 %12, 0, !dbg !4511
  br i1 %13, label %15, label %14, !dbg !4512

; <label>:14                                      ; preds = %10
  tail call void @llvm.dbg.value(metadata double* %New_Depth, i64 0, metadata !1982, metadata !2666), !dbg !4498
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %New_Ray, i64 0, metadata !1984, metadata !2666), !dbg !4513
  call fastcc void @_ZN3povL16block_area_lightEPNS_19Light_Source_StructEPdPNS_10Ray_StructES4_S2_Pfiiiii(%"struct.pov::Light_Source_Struct"* %Light, double* %New_Depth, %"struct.pov::Ray_Struct"* %New_Ray, %"struct.pov::Ray_Struct"* %Eye_Ray, double* %P, float* %Colour, i32 0, i32 0, i32 0, i32 0, i32 0) #6, !dbg !4514
  br label %221, !dbg !4516

; <label>:15                                      ; preds = %10, %0
  %16 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 0), align 8, !dbg !4517, !tbaa !4520
  %17 = and i32 %16, 4096, !dbg !4521
  %18 = icmp eq i32 %17, 0, !dbg !4521
  br i1 %18, label %220, label %19, !dbg !4522

; <label>:19                                      ; preds = %15
  %20 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 27, !dbg !4523
  %21 = load i8* %20, align 1, !dbg !4523, !tbaa !4205
  %22 = icmp eq i8 %21, 4, !dbg !4524
  br i1 %22, label %220, label %23, !dbg !4525

; <label>:23                                      ; preds = %19
  %24 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 33, !dbg !4526
  %25 = load i8* %24, align 1, !dbg !4526, !tbaa !4383
  %26 = icmp eq i8 %25, 0, !dbg !4527
  br i1 %26, label %27, label %220, !dbg !4528

; <label>:27                                      ; preds = %23
  %28 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 1, !dbg !4529
  %29 = load i32* %28, align 4, !dbg !4529, !tbaa !4530
  %30 = and i32 %29, 4096, !dbg !4531
  %31 = icmp eq i32 %30, 0, !dbg !4532
  br i1 %31, label %32, label %220, !dbg !4533

; <label>:32                                      ; preds = %27
  tail call void @llvm.dbg.value(metadata double* %New_Depth, i64 0, metadata !1982, metadata !2666), !dbg !4498
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %New_Ray, i64 0, metadata !1984, metadata !2666), !dbg !4513
  %33 = bitcast %"struct.pov::Object_Struct"** %Blocking_Object.i to i8*, !dbg !4534
  call void @llvm.lifetime.start(i64 8, i8* %33), !dbg !4534
  tail call void @llvm.dbg.value(metadata %"struct.pov::Light_Source_Struct"* %Light, i64 0, metadata !2100, metadata !2666), !dbg !4534
  tail call void @llvm.dbg.value(metadata double* %New_Depth, i64 0, metadata !2101, metadata !2666), !dbg !4537
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %New_Ray, i64 0, metadata !2102, metadata !2666), !dbg !4538
  tail call void @llvm.dbg.value(metadata float* %Colour, i64 0, metadata !2103, metadata !2666), !dbg !4539
  tail call void @llvm.dbg.declare(metadata [3 x double]* undef, metadata !2113, metadata !2666), !dbg !4540
  %34 = bitcast %"struct.pov::istk_entry"* %Bounded_Intersection.i to i8*, !dbg !4541
  call void @llvm.lifetime.start(i64 200, i8* %34) #5, !dbg !4541
  %35 = bitcast %"struct.pov::istk_entry"* %Temp_Intersection.i to i8*, !dbg !4541
  call void @llvm.lifetime.start(i64 200, i8* %35) #5, !dbg !4541
  tail call void @llvm.dbg.value(metadata double 0.000000e+00, i64 0, metadata !2119, metadata !2666), !dbg !4542
  %36 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 42, !dbg !4543
  %37 = load %"struct.pov::Object_Struct"** %36, align 8, !dbg !4543, !tbaa !4200
  %38 = icmp eq %"struct.pov::Object_Struct"* %37, null, !dbg !4545
  br i1 %38, label %59, label %39, !dbg !4546

; <label>:39                                      ; preds = %32
  tail call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Temp_Intersection.i, i64 0, metadata !2118, metadata !2666), !dbg !4547
  %40 = call zeroext i1 @_ZN3pov12IntersectionEPNS_10istk_entryEPNS_13Object_StructEPNS_10Ray_StructE(%"struct.pov::istk_entry"* %Temp_Intersection.i, %"struct.pov::Object_Struct"* %37, %"struct.pov::Ray_Struct"* %New_Ray) #6, !dbg !4548
  br i1 %40, label %41, label %56, !dbg !4551

; <label>:41                                      ; preds = %39
  %42 = getelementptr inbounds %"struct.pov::istk_entry"* %Temp_Intersection.i, i64 0, i32 0, !dbg !4552
  %43 = load double* %42, align 8, !dbg !4552, !tbaa !3111
  %44 = load double* %New_Depth, align 8, !dbg !4555, !tbaa !3114
  %45 = fsub double %43, %44, !dbg !4556
  %46 = fcmp olt double %45, 0.000000e+00, !dbg !4557
  br i1 %46, label %47, label %53, !dbg !4558

; <label>:47                                      ; preds = %41
  %48 = call double @fabs(double %43) #7, !dbg !4559
  %49 = fsub double %44, %48, !dbg !4561
  %50 = fadd double %49, 1.000000e-03, !dbg !4562
  call void @llvm.dbg.value(metadata double %50, i64 0, metadata !2119, metadata !2666), !dbg !4542
  %51 = load i8* %20, align 1, !dbg !4563, !tbaa !4205
  %52 = icmp eq i8 %51, 3, !dbg !4565
  br i1 %52, label %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, label %59, !dbg !4566

; <label>:53                                      ; preds = %41
  %54 = getelementptr inbounds float* %Colour, i64 2, !dbg !4567
  store float 0.000000e+00, float* %54, align 4, !dbg !4569, !tbaa !3269
  %55 = getelementptr inbounds float* %Colour, i64 1, !dbg !4570
  store float 0.000000e+00, float* %55, align 4, !dbg !4571, !tbaa !3269
  store float 0.000000e+00, float* %Colour, align 4, !dbg !4572, !tbaa !3269
  br label %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, !dbg !4573

; <label>:56                                      ; preds = %39
  %57 = getelementptr inbounds float* %Colour, i64 2, !dbg !4574
  store float 0.000000e+00, float* %57, align 4, !dbg !4576, !tbaa !3269
  %58 = getelementptr inbounds float* %Colour, i64 1, !dbg !4577
  store float 0.000000e+00, float* %58, align 4, !dbg !4578, !tbaa !3269
  store float 0.000000e+00, float* %Colour, align 4, !dbg !4579, !tbaa !3269
  br label %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, !dbg !4580

; <label>:59                                      ; preds = %47, %32
  %Projected_Depth.0.i = phi double [ %50, %47 ], [ 0.000000e+00, %32 ], !dbg !4581
  %60 = call %"struct.pov::istack_struct"* @_ZN3pov11open_istackEv() #6, !dbg !4582
  call void @llvm.dbg.value(metadata %"struct.pov::istack_struct"* %60, i64 0, metadata !2115, metadata !2666), !dbg !4583
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !2104, metadata !2666), !dbg !4584
  %61 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 41, !dbg !4585
  %62 = load %"struct.pov::Object_Struct"** %61, align 8, !dbg !4585, !tbaa !4587
  %63 = icmp eq %"struct.pov::Object_Struct"* %62, null, !dbg !4588
  br i1 %63, label %.thread, label %64, !dbg !4589

; <label>:64                                      ; preds = %59
  call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), i64 0, metadata !1697, metadata !2666), !dbg !4590
  %65 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), align 8, !dbg !4593, !tbaa !2676
  %66 = add nsw i64 %65, 1, !dbg !4593
  store i64 %66, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), align 8, !dbg !4593, !tbaa !2676
  %67 = getelementptr inbounds %"struct.pov::Object_Struct"* %62, i64 0, i32 6, !dbg !4594
  %68 = load %"struct.pov::Object_Struct"** %67, align 8, !dbg !4594, !tbaa !4596
  %69 = call zeroext i1 @_ZN3pov12Ray_In_BoundEPNS_10Ray_StructEPNS_13Object_StructE(%"struct.pov::Ray_Struct"* %New_Ray, %"struct.pov::Object_Struct"* %68) #6, !dbg !4597
  br i1 %69, label %70, label %.thread, !dbg !4598

; <label>:70                                      ; preds = %64
  %71 = load %"struct.pov::Object_Struct"** %61, align 8, !dbg !4599, !tbaa !4587
  %72 = getelementptr inbounds %"struct.pov::Object_Struct"* %71, i64 0, i32 0, !dbg !4599
  %73 = load %"struct.pov::Method_Struct"** %72, align 8, !dbg !4599, !tbaa !3152
  %74 = getelementptr inbounds %"struct.pov::Method_Struct"* %73, i64 0, i32 0, !dbg !4599
  %75 = load i32 (%"struct.pov::Object_Struct"*, %"struct.pov::Ray_Struct"*, %"struct.pov::istack_struct"*)** %74, align 8, !dbg !4599, !tbaa !4602
  %76 = call i32 %75(%"struct.pov::Object_Struct"* %71, %"struct.pov::Ray_Struct"* %New_Ray, %"struct.pov::istack_struct"* %60) #6, !dbg !4599
  %77 = icmp eq i32 %76, 0, !dbg !4599
  br i1 %77, label %.thread, label %.preheader3, !dbg !4603

.preheader3:                                      ; preds = %70
  call void @llvm.dbg.value(metadata %"struct.pov::istack_struct"* %60, i64 0, metadata !2124, metadata !2666), !dbg !4604
  %78 = getelementptr inbounds %"struct.pov::istack_struct"* %60, i64 0, i32 3, !dbg !4607
  %79 = load i32* %78, align 4, !dbg !4607, !tbaa !4608
  %80 = icmp eq i32 %79, 0, !dbg !4610
  br i1 %80, label %.thread, label %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i.lr.ph, !dbg !4611

_ZN3pov9pop_entryEPNS_13istack_structE.exit.i.lr.ph: ; preds = %.preheader3
  %81 = getelementptr inbounds %"struct.pov::istack_struct"* %60, i64 0, i32 1, !dbg !4612
  br label %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i, !dbg !4611

_ZN3pov9pop_entryEPNS_13istack_structE.exit.i:    ; preds = %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i.lr.ph, %.backedge
  %82 = phi i32 [ %79, %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i.lr.ph ], [ %95, %.backedge ]
  %83 = add i32 %82, -1, !dbg !4613
  store i32 %83, i32* %78, align 4, !dbg !4613, !tbaa !4608
  %84 = zext i32 %83 to i64, !dbg !4614
  %85 = load %"struct.pov::istk_entry"** %81, align 8, !dbg !4612, !tbaa !4615
  %86 = getelementptr inbounds %"struct.pov::istk_entry"* %85, i64 %84, !dbg !4614
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %86, i64 0, metadata !2116, metadata !2666), !dbg !4616
  %87 = icmp eq %"struct.pov::istk_entry"* %86, null, !dbg !4617
  br i1 %87, label %.thread, label %88, !dbg !4618

; <label>:88                                      ; preds = %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i
  %89 = getelementptr inbounds %"struct.pov::istk_entry"* %85, i64 %84, i32 5, !dbg !4619
  %90 = load %"struct.pov::Object_Struct"** %89, align 8, !dbg !4619, !tbaa !3151
  %91 = getelementptr inbounds %"struct.pov::Object_Struct"* %90, i64 0, i32 13, !dbg !4619
  %92 = load i32* %91, align 4, !dbg !4619, !tbaa !3160
  %93 = and i32 %92, 1, !dbg !4619
  %94 = icmp eq i32 %93, 0, !dbg !4619
  br i1 %94, label %97, label %.backedge, !dbg !4622

.backedge:                                        ; preds = %..backedge_crit_edge, %88, %97
  %95 = phi i32 [ %.pre, %..backedge_crit_edge ], [ %83, %88 ], [ %83, %97 ]
  call void @llvm.dbg.value(metadata %"struct.pov::istack_struct"* %60, i64 0, metadata !2124, metadata !2666), !dbg !4604
  %96 = icmp eq i32 %95, 0, !dbg !4610
  br i1 %96, label %.thread, label %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i, !dbg !4611

; <label>:97                                      ; preds = %88
  %98 = getelementptr inbounds %"struct.pov::istk_entry"* %86, i64 0, i32 0, !dbg !4623
  %99 = load double* %98, align 8, !dbg !4623, !tbaa !3111
  %100 = load double* %New_Depth, align 8, !dbg !4624, !tbaa !3114
  %101 = fadd double %100, -1.000000e-03, !dbg !4625
  %102 = fcmp olt double %99, %101, !dbg !4626
  %103 = fsub double %100, %99, !dbg !4581
  %104 = fcmp ogt double %103, %Projected_Depth.0.i, !dbg !4627
  %or.cond.i = and i1 %102, %104, !dbg !4628
  %105 = fcmp ogt double %99, 1.000000e-03, !dbg !4629
  %or.cond4.i = and i1 %105, %or.cond.i, !dbg !4628
  br i1 %or.cond4.i, label %106, label %.backedge, !dbg !4628

; <label>:106                                     ; preds = %97
  %107 = call fastcc i32 @_ZN3povL11do_blockingEPNS_10istk_entryEPNS_10Ray_StructEPfPNS_13istack_structE(%"struct.pov::istk_entry"* %86, %"struct.pov::Ray_Struct"* %New_Ray, float* %Colour, %"struct.pov::istack_struct"* %60) #6, !dbg !4630
  %108 = icmp eq i32 %107, 0, !dbg !4630
  br i1 %108, label %..backedge_crit_edge, label %109, !dbg !4633

..backedge_crit_edge:                             ; preds = %106
  %.pre = load i32* %78, align 4, !dbg !4607, !tbaa !4608
  br label %.backedge, !dbg !4633

; <label>:109                                     ; preds = %106
  call void @llvm.dbg.value(metadata i32 1, i64 0, metadata !2104, metadata !2666), !dbg !4584
  call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 105), i64 0, metadata !1697, metadata !2666), !dbg !4634
  %110 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 105), align 8, !dbg !4637, !tbaa !2676
  %111 = add nsw i64 %110, 1, !dbg !4637
  store i64 %111, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 105), align 8, !dbg !4637, !tbaa !2676
  call void @_ZN3pov12close_istackEPNS_13istack_structE(%"struct.pov::istack_struct"* %60) #6, !dbg !4638
  br label %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, !dbg !4641

.thread:                                          ; preds = %_ZN3pov9pop_entryEPNS_13istack_structE.exit.i, %.backedge, %.preheader3, %64, %70, %59
  %112 = getelementptr inbounds %"struct.pov::Ray_Struct"* %New_Ray, i64 0, i32 1, i64 0, !dbg !4642
  %113 = load double* %112, align 8, !dbg !4642, !tbaa !3114
  %114 = fsub double -0.000000e+00, %113, !dbg !4643
  call void @llvm.dbg.value(metadata double %114, i64 0, metadata !2113, metadata !4319), !dbg !4540
  %115 = getelementptr inbounds %"struct.pov::Ray_Struct"* %New_Ray, i64 0, i32 1, i64 1, !dbg !4644
  call void @llvm.dbg.value(metadata double undef, i64 0, metadata !2113, metadata !4323), !dbg !4540
  %116 = bitcast double* %115 to <2 x double>*, !dbg !4644
  %117 = load <2 x double>* %116, align 8, !dbg !4644, !tbaa !3114
  %118 = fsub <2 x double> <double -0.000000e+00, double -0.000000e+00>, %117, !dbg !4645
  call void @llvm.dbg.value(metadata double undef, i64 0, metadata !2113, metadata !4327), !dbg !4540
  %119 = call double @fabs(double %114) #7, !dbg !4646
  call void @llvm.dbg.value(metadata double %119, i64 0, metadata !2110, metadata !2666), !dbg !4647
  call void @llvm.dbg.value(metadata double undef, i64 0, metadata !2111, metadata !2666), !dbg !4648
  %120 = call <2 x double> @llvm.fabs.v2f64(<2 x double> %118), !dbg !4649
  call void @llvm.dbg.value(metadata double undef, i64 0, metadata !2112, metadata !2666), !dbg !4650
  %121 = extractelement <2 x double> %120, i32 0, !dbg !4651
  %122 = fcmp ogt double %119, %121, !dbg !4651
  %123 = extractelement <2 x double> %120, i32 1, !dbg !4653
  %124 = fcmp ogt double %119, %123, !dbg !4653
  %or.cond5.i = and i1 %122, %124, !dbg !4654
  br i1 %or.cond5.i, label %125, label %131, !dbg !4654

; <label>:125                                     ; preds = %.thread
  %not. = fcmp uge double %113, -0.000000e+00, !dbg !4655
  %..i = zext i1 %not. to i64, !dbg !4655
  %126 = fmul <2 x double> %117, <double -3.200000e+04, double -3.200000e+04>, !dbg !4659
  %127 = shufflevector <2 x double> %126, <2 x double> undef, <2 x i32> <i32 1, i32 0>, !dbg !4659
  %128 = insertelement <2 x double> undef, double %119, i32 0, !dbg !4660
  %129 = insertelement <2 x double> %128, double %119, i32 1, !dbg !4660
  %130 = fdiv <2 x double> %127, %129, !dbg !4660
  br label %151, !dbg !4661

; <label>:131                                     ; preds = %.thread
  %132 = fcmp ogt double %121, %123, !dbg !4662
  br i1 %132, label %133, label %142, !dbg !4665

; <label>:133                                     ; preds = %131
  %134 = extractelement <2 x double> %117, i32 0, !dbg !4666
  %135 = fcmp olt double %134, -0.000000e+00, !dbg !4666
  %.6.i = select i1 %135, i64 2, i64 3, !dbg !4669
  %136 = extractelement <2 x double> %117, i32 1, !dbg !4671
  %137 = insertelement <2 x double> undef, double %136, i32 0, !dbg !4671
  %138 = insertelement <2 x double> %137, double %113, i32 1, !dbg !4671
  %139 = fmul <2 x double> %138, <double -3.200000e+04, double -3.200000e+04>, !dbg !4671
  %140 = shufflevector <2 x double> %120, <2 x double> undef, <2 x i32> zeroinitializer, !dbg !4672
  %141 = fdiv <2 x double> %139, %140, !dbg !4672
  br label %151, !dbg !4673

; <label>:142                                     ; preds = %131
  %143 = extractelement <2 x double> %117, i32 1, !dbg !4674
  %144 = fcmp olt double %143, -0.000000e+00, !dbg !4674
  %.7.i = select i1 %144, i64 4, i64 5, !dbg !4677
  %145 = extractelement <2 x double> %117, i32 0, !dbg !4679
  %146 = insertelement <2 x double> undef, double %145, i32 0, !dbg !4679
  %147 = insertelement <2 x double> %146, double %113, i32 1, !dbg !4679
  %148 = fmul <2 x double> %147, <double -3.200000e+04, double -3.200000e+04>, !dbg !4679
  %149 = shufflevector <2 x double> %120, <2 x double> undef, <2 x i32> <i32 1, i32 1>, !dbg !4680
  %150 = fdiv <2 x double> %148, %149, !dbg !4680
  br label %151, !dbg !4581

; <label>:151                                     ; preds = %142, %133, %125
  %axis.3.i = phi i64 [ %..i, %125 ], [ %.6.i, %133 ], [ %.7.i, %142 ], !dbg !4581
  %152 = phi <2 x double> [ %130, %125 ], [ %141, %133 ], [ %150, %142 ], !dbg !4581
  %153 = extractelement <2 x double> %152, i32 1, !dbg !4681
  %u.0.i = fptosi double %153 to i32, !dbg !4681
  %154 = extractelement <2 x double> %152, i32 0, !dbg !4682
  %v.0.i = fptosi double %154 to i32, !dbg !4682
  %155 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 44, i64 %axis.3.i, !dbg !4683
  %156 = load %"struct.pov::Project_Tree_Node_Struct"** %155, align 8, !dbg !4683, !tbaa !2657
  %157 = icmp eq %"struct.pov::Project_Tree_Node_Struct"* %156, null, !dbg !4685
  br i1 %157, label %173, label %.preheader, !dbg !4686

.preheader:                                       ; preds = %151
  %158 = getelementptr inbounds %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, i32 5, !dbg !4687
  %159 = bitcast double* %New_Depth to i64*, !dbg !4689
  %160 = getelementptr inbounds %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, i32 0, !dbg !4690
  %161 = bitcast %"struct.pov::istk_entry"* %Bounded_Intersection.i to i64*, !dbg !4691
  %162 = getelementptr inbounds %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, i32 1, i64 0, !dbg !4692
  %163 = getelementptr inbounds %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, i32 1, i64 2, !dbg !4695
  %164 = bitcast double* %163 to i64*, !dbg !4695
  %165 = getelementptr inbounds %"struct.pov::Ray_Struct"* %New_Ray, i64 0, i32 0, i64 2, !dbg !4697
  %166 = bitcast double* %165 to i64*, !dbg !4698
  %167 = getelementptr inbounds float* %Colour, i64 1, !dbg !4699
  %168 = getelementptr inbounds float* %Colour, i64 2, !dbg !4703
  %.pre6 = load i64* %159, align 8, !dbg !4689, !tbaa !3114
  call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), i64 0, metadata !1697, metadata !2666), !dbg !4704
  %169 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), align 8, !dbg !4706, !tbaa !2676
  %170 = add nsw i64 %169, 1, !dbg !4706
  store i64 %170, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), align 8, !dbg !4706, !tbaa !2676
  store %"struct.pov::Object_Struct"* null, %"struct.pov::Object_Struct"** %158, align 8, !dbg !4707, !tbaa !3151
  store i64 %.pre6, i64* %161, align 8, !dbg !4691, !tbaa !3111
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Blocking_Object.i, i64 0, metadata !2114, metadata !2666), !dbg !4708
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, metadata !2117, metadata !2666), !dbg !4709
  %171 = call i32 @_ZN3pov20Intersect_Light_TreeEPNS_10Ray_StructEPNS_24Project_Tree_Node_StructEiiPNS_10istk_entryEPPNS_13Object_StructEPNS_19Light_Source_StructE(%"struct.pov::Ray_Struct"* %New_Ray, %"struct.pov::Project_Tree_Node_Struct"* %156, i32 %u.0.i, i32 %v.0.i, %"struct.pov::istk_entry"* %Bounded_Intersection.i, %"struct.pov::Object_Struct"** %Blocking_Object.i, %"struct.pov::Light_Source_Struct"* %Light) #6, !dbg !4710
  %172 = icmp eq i32 %171, 0, !dbg !4710
  br i1 %172, label %.thread2, label %.lr.ph, !dbg !4711

; <label>:173                                     ; preds = %151
  call void @_ZN3pov12close_istackEPNS_13istack_structE(%"struct.pov::istack_struct"* %60) #6, !dbg !4712
  br label %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, !dbg !4714

.lr.ph:                                           ; preds = %.preheader, %203
  %Not_Found_Shadow.0.i9 = phi i32 [ 0, %203 ], [ 1, %.preheader ]
  %174 = load double* %160, align 8, !dbg !4715, !tbaa !3111
  %175 = load double* %New_Depth, align 8, !dbg !4717, !tbaa !3114
  %176 = fsub double %175, %Projected_Depth.0.i, !dbg !4718
  %177 = fcmp ogt double %174, %176, !dbg !4719
  br i1 %177, label %.thread2, label %178, !dbg !4720

; <label>:178                                     ; preds = %.lr.ph
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Blocking_Object.i, i64 0, metadata !2114, metadata !2666), !dbg !4708
  %179 = load %"struct.pov::Object_Struct"** %Blocking_Object.i, align 8, !dbg !4721, !tbaa !2657
  %180 = load %"struct.pov::Object_Struct"** %61, align 8, !dbg !4722, !tbaa !4587
  %181 = icmp eq %"struct.pov::Object_Struct"* %179, %180, !dbg !4723
  br i1 %181, label %203, label %182, !dbg !4724

; <label>:182                                     ; preds = %178
  call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 106), i64 0, metadata !1697, metadata !2666), !dbg !4725
  %183 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 106), align 8, !dbg !4727, !tbaa !2676
  %184 = add nsw i64 %183, 1, !dbg !4727
  store i64 %184, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 106), align 8, !dbg !4727, !tbaa !2676
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, metadata !2117, metadata !2666), !dbg !4709
  call fastcc void @_ZN3povL17filter_shadow_rayEPNS_10istk_entryEPNS_10Ray_StructEPf(%"struct.pov::istk_entry"* %Bounded_Intersection.i, %"struct.pov::Ray_Struct"* %New_Ray, float* %Colour) #6, !dbg !4728
  %185 = load float* %Colour, align 4, !dbg !4729, !tbaa !3269
  %fabsf.i = call float @fabsf(float %185) #4, !dbg !4730
  %186 = fpext float %fabsf.i to double, !dbg !4730
  %187 = fcmp olt double %186, 1.000000e-07, !dbg !4731
  br i1 %187, label %188, label %203, !dbg !4732

; <label>:188                                     ; preds = %182
  %189 = load float* %167, align 4, !dbg !4699, !tbaa !3269
  %fabsf1.i = call float @fabsf(float %189) #4, !dbg !4733
  %190 = fpext float %fabsf1.i to double, !dbg !4733
  %191 = fcmp olt double %190, 1.000000e-07, !dbg !4734
  br i1 %191, label %192, label %203, !dbg !4735

; <label>:192                                     ; preds = %188
  %193 = load float* %168, align 4, !dbg !4703, !tbaa !3269
  %fabsf2.i = call float @fabsf(float %193) #4, !dbg !4736
  %194 = fpext float %fabsf2.i to double, !dbg !4736
  %195 = fcmp olt double %194, 1.000000e-07, !dbg !4737
  br i1 %195, label %196, label %203, !dbg !4738

; <label>:196                                     ; preds = %192
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Blocking_Object.i, i64 0, metadata !2114, metadata !2666), !dbg !4708
  %197 = load %"struct.pov::Object_Struct"** %Blocking_Object.i, align 8, !dbg !4739, !tbaa !2657
  %198 = getelementptr inbounds %"struct.pov::Object_Struct"* %197, i64 0, i32 13, !dbg !4739
  %199 = load i32* %198, align 4, !dbg !4739, !tbaa !3160
  %200 = and i32 %199, 128, !dbg !4740
  %201 = icmp eq i32 %200, 0, !dbg !4740
  %202 = ptrtoint %"struct.pov::Object_Struct"* %197 to i64
  br i1 %201, label %203, label %216, !dbg !4741

; <label>:203                                     ; preds = %196, %192, %188, %182, %178
  %204 = load double* %160, align 8, !dbg !4742, !tbaa !3111
  %205 = load double* %New_Depth, align 8, !dbg !4743, !tbaa !3114
  %206 = fsub double %205, %204, !dbg !4743
  store double %206, double* %New_Depth, align 8, !dbg !4743, !tbaa !3114
  call void @llvm.dbg.value(metadata double* %162, i64 0, metadata !1349, metadata !2666), !dbg !4744
  %207 = bitcast double* %162 to <2 x i64>*, !dbg !4745
  %208 = load <2 x i64>* %207, align 8, !dbg !4745, !tbaa !3114
  %209 = bitcast %"struct.pov::Ray_Struct"* %New_Ray to <2 x i64>*, !dbg !4746
  store <2 x i64> %208, <2 x i64>* %209, align 16, !dbg !4746, !tbaa !3114
  %210 = load i64* %164, align 8, !dbg !4695, !tbaa !3114
  store i64 %210, i64* %166, align 16, !dbg !4698, !tbaa !3114
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !2105, metadata !2666), !dbg !4747
  %.pre7 = load %"struct.pov::Project_Tree_Node_Struct"** %155, align 8, !dbg !4748, !tbaa !2657
  call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), i64 0, metadata !1697, metadata !2666), !dbg !4704
  %211 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), align 8, !dbg !4706, !tbaa !2676
  %212 = add nsw i64 %211, 1, !dbg !4706
  store i64 %212, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 107), align 8, !dbg !4706, !tbaa !2676
  store %"struct.pov::Object_Struct"* null, %"struct.pov::Object_Struct"** %158, align 8, !dbg !4707, !tbaa !3151
  %213 = getelementptr inbounds %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, i32 0, !dbg !4691
  store double %206, double* %213, align 8, !dbg !4691, !tbaa !3111
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Blocking_Object.i, i64 0, metadata !2114, metadata !2666), !dbg !4708
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Bounded_Intersection.i, i64 0, metadata !2117, metadata !2666), !dbg !4709
  %214 = call i32 @_ZN3pov20Intersect_Light_TreeEPNS_10Ray_StructEPNS_24Project_Tree_Node_StructEiiPNS_10istk_entryEPPNS_13Object_StructEPNS_19Light_Source_StructE(%"struct.pov::Ray_Struct"* %New_Ray, %"struct.pov::Project_Tree_Node_Struct"* %.pre7, i32 %u.0.i, i32 %v.0.i, %"struct.pov::istk_entry"* %Bounded_Intersection.i, %"struct.pov::Object_Struct"** %Blocking_Object.i, %"struct.pov::Light_Source_Struct"* %Light) #6, !dbg !4710
  %215 = icmp eq i32 %214, 0, !dbg !4710
  br i1 %215, label %.thread2, label %.lr.ph, !dbg !4711

; <label>:216                                     ; preds = %196
  %217 = icmp eq i32 %Not_Found_Shadow.0.i9, 0, !dbg !4749
  br i1 %217, label %.thread2, label %218, !dbg !4751

; <label>:218                                     ; preds = %216
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Blocking_Object.i, i64 0, metadata !2114, metadata !2666), !dbg !4708
  %219 = bitcast %"struct.pov::Object_Struct"** %61 to i64*, !dbg !4752
  store i64 %202, i64* %219, align 8, !dbg !4752, !tbaa !4587
  br label %.thread2, !dbg !4754

.thread2:                                         ; preds = %.preheader, %.lr.ph, %203, %218, %216
  call void @_ZN3pov12close_istackEPNS_13istack_structE(%"struct.pov::istack_struct"* %60) #6, !dbg !4755
  br label %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, !dbg !4756

_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit: ; preds = %47, %53, %56, %109, %173, %.thread2
  call void @llvm.lifetime.end(i64 200, i8* %35) #5, !dbg !4756
  call void @llvm.lifetime.end(i64 200, i8* %34) #5, !dbg !4756
  call void @llvm.lifetime.end(i64 8, i8* %33), !dbg !4756
  br label %221, !dbg !4757

; <label>:220                                     ; preds = %23, %19, %15, %27
  tail call void @llvm.dbg.value(metadata double* %New_Depth, i64 0, metadata !1982, metadata !2666), !dbg !4498
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %New_Ray, i64 0, metadata !1984, metadata !2666), !dbg !4513
  call fastcc void @_ZN3povL17block_point_lightEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf(%"struct.pov::Light_Source_Struct"* %Light, double* %New_Depth, %"struct.pov::Ray_Struct"* %New_Ray, float* %Colour) #6, !dbg !4758
  br label %221

; <label>:221                                     ; preds = %_ZN3povL25block_point_light_LBufferEPNS_19Light_Source_StructEPdPNS_10Ray_StructEPf.exit, %220, %14
  call void @llvm.dbg.value(metadata double* %New_Depth, i64 0, metadata !1982, metadata !2666), !dbg !4498
  %222 = load double* %New_Depth, align 8, !dbg !4760, !tbaa !3114
  %223 = fcmp ogt double %222, 1.000000e-03, !dbg !4762
  br i1 %223, label %224, label %235, !dbg !4763

; <label>:224                                     ; preds = %221
  %225 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 39, !dbg !4764
  %226 = load i32* %225, align 4, !dbg !4764, !tbaa !4765
  %227 = icmp eq i32 %226, 0, !dbg !4766
  br i1 %227, label %235, label %228, !dbg !4767

; <label>:228                                     ; preds = %224
  %229 = getelementptr inbounds %"struct.pov::Light_Source_Struct"* %Light, i64 0, i32 38, !dbg !4768
  %230 = load i32* %229, align 4, !dbg !4768, !tbaa !4769
  %231 = icmp eq i32 %230, 0, !dbg !4770
  br i1 %231, label %235, label %232, !dbg !4771

; <label>:232                                     ; preds = %228
  %233 = getelementptr inbounds %"struct.pov::istk_entry"* %Isection, i64 0, i32 0, !dbg !4772
  store double %222, double* %233, align 8, !dbg !4774, !tbaa !3111
  %234 = getelementptr inbounds %"struct.pov::istk_entry"* %Isection, i64 0, i32 5, !dbg !4775
  store %"struct.pov::Object_Struct"* null, %"struct.pov::Object_Struct"** %234, align 8, !dbg !4776, !tbaa !3151
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Isection, i64 0, metadata !1983, metadata !2666), !dbg !4777
  call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %New_Ray, i64 0, metadata !1984, metadata !2666), !dbg !4513
  call fastcc void @_ZN3povL23do_light_ray_atmosphereEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Ray_Struct"* %New_Ray, %"struct.pov::istk_entry"* %Isection, float* %Colour, i32 0) #6, !dbg !4778
  br label %235, !dbg !4779

; <label>:235                                     ; preds = %228, %224, %232, %221
  call void @llvm.lifetime.end(i64 856, i8* %2) #5, !dbg !4780
  call void @llvm.lifetime.end(i64 200, i8* %1) #5, !dbg !4780
  ret void, !dbg !4780
}
