define internal fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %Result_Colour, %"struct.pov::Texture_Struct"* %Texture, double* %IPoint, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #0 {
  %Layer_Normal.i = alloca [3 x double], align 16
  %Layer_Pigment_Colour.i = alloca [5 x float], align 16
  %Prev = alloca %"struct.pov::Blend_Map_Entry"*, align 8
  %Cur = alloca %"struct.pov::Blend_Map_Entry"*, align 8
  %C2 = alloca [5 x float], align 16
  %TPoint = alloca [3 x double], align 16
  %UV_Coords = alloca <2 x i64>, align 16, !dbg !3522
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1474, metadata !2666), !dbg !3526
  tail call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %Texture, i64 0, metadata !1475, metadata !2666), !dbg !3527
  tail call void @llvm.dbg.value(metadata double* %IPoint, i64 0, metadata !1476, metadata !2666), !dbg !3528
  tail call void @llvm.dbg.value(metadata double* %Raw_Normal, i64 0, metadata !1477, metadata !2666), !dbg !3529
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Ray, i64 0, metadata !1478, metadata !2666), !dbg !3530
  tail call void @llvm.dbg.value(metadata double %Weight, i64 0, metadata !1479, metadata !2666), !dbg !3531
  tail call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, metadata !1480, metadata !2666), !dbg !3532
  tail call void @llvm.dbg.value(metadata i32 %Shadow_Flag, i64 0, metadata !1481, metadata !2666), !dbg !3533
  %1 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Texture, i64 0, i32 9, !dbg !3534
  %2 = load %"struct.pov::Blend_Map_Struct"** %1, align 8, !dbg !3534, !tbaa !3535
  tail call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Struct"* %2, i64 0, metadata !1482, metadata !2666), !dbg !3537
  tail call void @llvm.dbg.declare(metadata [5 x float]* %C2, metadata !1487, metadata !2666), !dbg !3538
  tail call void @llvm.dbg.declare(metadata [3 x double]* %TPoint, metadata !1488, metadata !2666), !dbg !3539
  tail call void @llvm.dbg.value(metadata i8 0, i64 0, metadata !1490, metadata !2666), !dbg !3540
  %3 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !3541, !tbaa !3543
  %4 = icmp sgt i32 %3, 310, !dbg !3550
  tail call void @llvm.dbg.declare(metadata [3 x double]* %Layer_Normal.i, metadata !1784, metadata !2666), !dbg !3551
  tail call void @llvm.dbg.declare(metadata [5 x float]* %Layer_Pigment_Colour.i, metadata !1786, metadata !2666), !dbg !3555
  tail call void @llvm.dbg.declare(metadata [5 x float]* %Layer_Pigment_Colour.i, metadata !1512, metadata !2666), !dbg !3556
  tail call void @llvm.dbg.declare(metadata [5 x float]* %Layer_Pigment_Colour.i, metadata !1527, metadata !2666), !dbg !3559
  %5 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Texture, i64 0, i32 0, !dbg !3561
  br i1 %4, label %6, label %._crit_edge24, !dbg !3563

; <label>:6                                       ; preds = %0
  %7 = load i16* %5, align 2, !dbg !3561, !tbaa !3564
  %switch = icmp ult i16 %7, 2, !dbg !3565
  br i1 %switch, label %._crit_edge24, label %8, !dbg !3565

; <label>:8                                       ; preds = %6
  %9 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !3566, !tbaa !2664
  %10 = load i32* @_ZN3pov28warpNormalTextureListMaxSizeE, align 4, !dbg !3569, !tbaa !2664
  %11 = icmp slt i32 %9, %10, !dbg !3570
  br i1 %11, label %._crit_edge, label %12, !dbg !3571

._crit_edge:                                      ; preds = %8
  %.pre23 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !3572, !tbaa !2657
  br label %19, !dbg !3571

; <label>:12                                      ; preds = %8
  %13 = shl nsw i32 %10, 1, !dbg !3573
  store i32 %13, i32* @_ZN3pov28warpNormalTextureListMaxSizeE, align 4, !dbg !3573, !tbaa !2664
  %14 = load i8** bitcast (%"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE to i8**), align 8, !dbg !3575, !tbaa !2657
  %15 = sext i32 %13 to i64, !dbg !3575
  %16 = shl nsw i64 %15, 3, !dbg !3575
  %17 = tail call i8* @_ZN3pov11pov_reallocEPvmPKciS2_(i8* %14, i64 %16, i8* getelementptr inbounds ([69 x i8]* @.str, i64 0, i64 0), i32 3564, i8* getelementptr inbounds ([25 x i8]* @.str1, i64 0, i64 0)) #6, !dbg !3575
  store i8* %17, i8** bitcast (%"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE to i8**), align 8, !dbg !3576, !tbaa !2657
  %.pre = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !3577, !tbaa !2664
  %18 = bitcast i8* %17 to %"struct.pov::Texture_Struct"**
  br label %19, !dbg !3578

; <label>:19                                      ; preds = %._crit_edge, %12
  %20 = phi %"struct.pov::Texture_Struct"** [ %.pre23, %._crit_edge ], [ %18, %12 ]
  %21 = phi i32 [ %9, %._crit_edge ], [ %.pre, %12 ]
  %22 = add nsw i32 %21, 1, !dbg !3577
  store i32 %22, i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !3577, !tbaa !2664
  %23 = sext i32 %21 to i64, !dbg !3572
  %24 = getelementptr inbounds %"struct.pov::Texture_Struct"** %20, i64 %23, !dbg !3572
  store %"struct.pov::Texture_Struct"* %Texture, %"struct.pov::Texture_Struct"** %24, align 8, !dbg !3579, !tbaa !2657
  tail call void @llvm.dbg.value(metadata i8 1, i64 0, metadata !1490, metadata !2666), !dbg !3540
  br label %._crit_edge24, !dbg !3580

._crit_edge24:                                    ; preds = %0, %6, %19
  %decWarpNormalTextures.0 = phi i1 [ false, %6 ], [ true, %19 ], [ false, %0 ]
  %25 = load i16* %5, align 2, !dbg !3581, !tbaa !3564
  %26 = icmp ult i16 %25, 5, !dbg !3582
  br i1 %26, label %27, label %468, !dbg !3583

; <label>:27                                      ; preds = %._crit_edge24
  %28 = zext i16 %25 to i32, !dbg !3584
  switch i32 %28, label %466 [
    i32 0, label %29
    i32 2, label %32
    i32 3, label %117
    i32 4, label %135
    i32 1, label %139
  ], !dbg !3585

; <label>:29                                      ; preds = %27
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1495, metadata !2666), !dbg !3586
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1496, metadata !2666), !dbg !3588
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1497, metadata !2666), !dbg !3589
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1498, metadata !2666), !dbg !3590
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1499, metadata !2666), !dbg !3591
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1500, metadata !2666), !dbg !3592
  %30 = bitcast float* %Result_Colour to <4 x float>*, !dbg !3593
  store <4 x float> <float 1.000000e+00, float 1.000000e+00, float 1.000000e+00, float 1.000000e+00>, <4 x float>* %30, align 4, !dbg !3593, !tbaa !3269
  %31 = getelementptr inbounds float* %Result_Colour, i64 4, !dbg !3594
  store float 1.000000e+00, float* %31, align 4, !dbg !3595, !tbaa !3269
  br label %569, !dbg !3596

; <label>:32                                      ; preds = %27
  %33 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !3597
  %34 = bitcast %"struct.pov::Texture_Struct"* %Texture to %"struct.pov::Pattern_Struct"*, !dbg !3598
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %33, double* %IPoint, %"struct.pov::Pattern_Struct"* %34) #6, !dbg !3599
  %35 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !3600, !tbaa !2664
  %36 = icmp eq i32 %35, 0, !dbg !3600
  %37 = bitcast [5 x float]* %Layer_Pigment_Colour.i to i8*, !dbg !3601
  call void @llvm.lifetime.start(i64 20, i8* %37), !dbg !3601
  %38 = load %"struct.pov::Blend_Map_Struct"** %1, align 8, !dbg !3602, !tbaa !3535
  br i1 %36, label %73, label %.preheader3, !dbg !3603

.preheader3:                                      ; preds = %32
  %39 = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %38, i64 0, i32 1, !dbg !3604
  %40 = load i16* %39, align 2, !dbg !3604, !tbaa !3607
  %41 = icmp sgt i16 %40, 0, !dbg !3609
  br i1 %41, label %.lr.ph10, label %_ZN3povL26backtrace_average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, !dbg !3610

.lr.ph10:                                         ; preds = %.preheader3
  %42 = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %38, i64 0, i32 4, !dbg !3611
  %43 = load %"struct.pov::Blend_Map_Entry"** %42, align 8, !dbg !3611, !tbaa !3613
  %44 = sext i16 %40 to i64, !dbg !3610
  br label %51, !dbg !3610

.preheader:                                       ; preds = %51
  br i1 %41, label %.lr.ph7, label %_ZN3povL26backtrace_average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, !dbg !3614

.lr.ph7:                                          ; preds = %.preheader
  %45 = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %38, i64 0, i32 4, !dbg !3616
  %46 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 0, !dbg !3619
  %47 = getelementptr inbounds float* %Result_Colour, i64 1, !dbg !3620
  %48 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 1, !dbg !3622
  %49 = getelementptr inbounds float* %Result_Colour, i64 2, !dbg !3623
  %50 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 2, !dbg !3624
  br label %56, !dbg !3614

; <label>:51                                      ; preds = %.lr.ph10, %51
  %indvars.iv21 = phi i64 [ 0, %.lr.ph10 ], [ %indvars.iv.next22, %51 ]
  %Total.0.i9 = phi float [ 0.000000e+00, %.lr.ph10 ], [ %54, %51 ]
  %52 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %43, i64 %indvars.iv21, i32 0, !dbg !3625
  %53 = load float* %52, align 4, !dbg !3625, !tbaa !3626
  call void @llvm.dbg.value(metadata float %53, i64 0, metadata !1514, metadata !2666), !dbg !3628
  %54 = fadd float %Total.0.i9, %53, !dbg !3629
  call void @llvm.dbg.value(metadata float %54, i64 0, metadata !1515, metadata !2666), !dbg !3630
  %indvars.iv.next22 = add nuw nsw i64 %indvars.iv21, 1, !dbg !3610
  %55 = icmp slt i64 %indvars.iv.next22, %44, !dbg !3609
  br i1 %55, label %51, label %.preheader, !dbg !3610

; <label>:56                                      ; preds = %.lr.ph7, %56
  %indvars.iv19 = phi i64 [ 0, %.lr.ph7 ], [ %indvars.iv.next20, %56 ]
  %57 = load %"struct.pov::Blend_Map_Entry"** %45, align 8, !dbg !3616, !tbaa !3613
  %58 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %57, i64 %indvars.iv19, i32 0, !dbg !3631
  %59 = load float* %58, align 4, !dbg !3631, !tbaa !3626
  %60 = fdiv float %59, %54, !dbg !3632
  call void @llvm.dbg.value(metadata float %60, i64 0, metadata !1514, metadata !2666), !dbg !3628
  call void @llvm.dbg.value(metadata float* %46, i64 0, metadata !1962, metadata !2666), !dbg !3633
  call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1963, metadata !2666), !dbg !3634
  call void @llvm.dbg.value(metadata float %60, i64 0, metadata !1964, metadata !2666), !dbg !3635
  %61 = load float* %Result_Colour, align 4, !dbg !3636, !tbaa !3269
  %62 = fmul float %60, %61, !dbg !3637
  store float %62, float* %46, align 16, !dbg !3638, !tbaa !3269
  %63 = load float* %47, align 4, !dbg !3620, !tbaa !3269
  %64 = fmul float %60, %63, !dbg !3639
  store float %64, float* %48, align 4, !dbg !3640, !tbaa !3269
  %65 = load float* %49, align 4, !dbg !3623, !tbaa !3269
  %66 = fmul float %60, %65, !dbg !3641
  store float %66, float* %50, align 8, !dbg !3642, !tbaa !3269
  %67 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %57, i64 %indvars.iv19, i32 2, !dbg !3643
  %68 = bitcast %union.anon* %67 to %"struct.pov::Texture_Struct"**, !dbg !3644
  %69 = load %"struct.pov::Texture_Struct"** %68, align 8, !dbg !3644, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %46, %"struct.pov::Texture_Struct"* %69, double* %33, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !3645
  %indvars.iv.next20 = add nuw nsw i64 %indvars.iv19, 1, !dbg !3614
  %70 = load i16* %39, align 2, !dbg !3646, !tbaa !3607
  %71 = sext i16 %70 to i64, !dbg !3647
  %72 = icmp slt i64 %indvars.iv.next20, %71, !dbg !3647
  br i1 %72, label %56, label %_ZN3povL26backtrace_average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, !dbg !3614

_ZN3povL26backtrace_average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit: ; preds = %56, %.preheader3, %.preheader
  call void @llvm.lifetime.end(i64 20, i8* %37), !dbg !3648
  br label %569, !dbg !3649

; <label>:73                                      ; preds = %32
  call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1518, metadata !2666), !dbg !3601
  call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %Texture, i64 0, metadata !1519, metadata !2666), !dbg !3650
  call void @llvm.dbg.value(metadata double* %33, i64 0, metadata !1520, metadata !2666), !dbg !3651
  call void @llvm.dbg.value(metadata double* %Raw_Normal, i64 0, metadata !1521, metadata !2666), !dbg !3652
  call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Ray, i64 0, metadata !1522, metadata !2666), !dbg !3653
  call void @llvm.dbg.value(metadata double %Weight, i64 0, metadata !1523, metadata !2666), !dbg !3654
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, metadata !1524, metadata !2666), !dbg !3655
  call void @llvm.dbg.value(metadata i32 %Shadow_Flag, i64 0, metadata !1525, metadata !2666), !dbg !3656
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Struct"* %38, i64 0, metadata !1528, metadata !2666), !dbg !3657
  call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1530, metadata !2666), !dbg !3658
  call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1535, metadata !2666), !dbg !3659
  call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1536, metadata !2666), !dbg !3661
  call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1537, metadata !2666), !dbg !3662
  call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1538, metadata !2666), !dbg !3663
  %74 = getelementptr inbounds float* %Result_Colour, i64 4, !dbg !3664
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1526, metadata !2666), !dbg !3665
  %75 = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %38, i64 0, i32 1, !dbg !3666
  %76 = bitcast float* %Result_Colour to i8*, !dbg !3666
  call void @llvm.memset.p0i8.i64(i8* %76, i8 0, i64 20, i32 4, i1 false), !dbg !3669
  %77 = load i16* %75, align 2, !dbg !3666, !tbaa !3607
  %78 = icmp sgt i16 %77, 0, !dbg !3670
  br i1 %78, label %.lr.ph, label %_ZN3povL16average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, !dbg !3671

.lr.ph:                                           ; preds = %73
  %79 = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %38, i64 0, i32 4, !dbg !3672
  %80 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 0, !dbg !3674
  %81 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 4, !dbg !3675
  br label %82, !dbg !3671

; <label>:82                                      ; preds = %.lr.ph, %82
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %82 ]
  %Total.0.i25 = phi float [ 0.000000e+00, %.lr.ph ], [ %104, %82 ]
  %83 = load %"struct.pov::Blend_Map_Entry"** %79, align 8, !dbg !3672, !tbaa !3613
  %84 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %83, i64 %indvars.iv, i32 0, !dbg !3676
  %85 = load float* %84, align 4, !dbg !3676, !tbaa !3626
  call void @llvm.dbg.value(metadata float %85, i64 0, metadata !1529, metadata !2666), !dbg !3677
  %86 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %83, i64 %indvars.iv, i32 2, !dbg !3678
  %87 = bitcast %union.anon* %86 to %"struct.pov::Texture_Struct"**, !dbg !3679
  %88 = load %"struct.pov::Texture_Struct"** %87, align 8, !dbg !3679, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %80, %"struct.pov::Texture_Struct"* %88, double* %33, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !3680
  %89 = bitcast [5 x float]* %Layer_Pigment_Colour.i to <4 x float>*, !dbg !3681
  %90 = load <4 x float>* %89, align 16, !dbg !3681, !tbaa !3269
  %91 = insertelement <4 x float> undef, float %85, i32 0, !dbg !3682
  %92 = insertelement <4 x float> %91, float %85, i32 1, !dbg !3682
  %93 = insertelement <4 x float> %92, float %85, i32 2, !dbg !3682
  %94 = insertelement <4 x float> %93, float %85, i32 3, !dbg !3682
  %95 = fmul <4 x float> %94, %90, !dbg !3682
  %96 = bitcast float* %Result_Colour to <4 x float>*, !dbg !3683
  %97 = load <4 x float>* %96, align 4, !dbg !3683, !tbaa !3269
  %98 = fadd <4 x float> %97, %95, !dbg !3683
  %99 = bitcast float* %Result_Colour to <4 x float>*, !dbg !3683
  store <4 x float> %98, <4 x float>* %99, align 4, !dbg !3683, !tbaa !3269
  %100 = load float* %81, align 16, !dbg !3675, !tbaa !3269
  %101 = fmul float %85, %100, !dbg !3684
  %102 = load float* %74, align 4, !dbg !3685, !tbaa !3269
  %103 = fadd float %102, %101, !dbg !3685
  store float %103, float* %74, align 4, !dbg !3685, !tbaa !3269
  %104 = fadd float %Total.0.i25, %85, !dbg !3686
  call void @llvm.dbg.value(metadata float %104, i64 0, metadata !1530, metadata !2666), !dbg !3658
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1, !dbg !3671
  %105 = load i16* %75, align 2, !dbg !3666, !tbaa !3607
  %106 = sext i16 %105 to i64, !dbg !3670
  %107 = icmp slt i64 %indvars.iv.next, %106, !dbg !3670
  br i1 %107, label %82, label %_ZN3povL16average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, !dbg !3671

_ZN3povL16average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit: ; preds = %82, %73
  %108 = phi float [ 0.000000e+00, %73 ], [ %103, %82 ]
  %Total.0.i2.lcssa = phi float [ 0.000000e+00, %73 ], [ %104, %82 ]
  %109 = phi <4 x float> [ zeroinitializer, %73 ], [ %98, %82 ]
  %110 = insertelement <4 x float> undef, float %Total.0.i2.lcssa, i32 0, !dbg !3687
  %111 = insertelement <4 x float> %110, float %Total.0.i2.lcssa, i32 1, !dbg !3687
  %112 = insertelement <4 x float> %111, float %Total.0.i2.lcssa, i32 2, !dbg !3687
  %113 = insertelement <4 x float> %112, float %Total.0.i2.lcssa, i32 3, !dbg !3687
  %114 = fdiv <4 x float> %109, %113, !dbg !3687
  %115 = bitcast float* %Result_Colour to <4 x float>*, !dbg !3687
  store <4 x float> %114, <4 x float>* %115, align 4, !dbg !3687, !tbaa !3269
  %116 = fdiv float %108, %Total.0.i2.lcssa, !dbg !3688
  store float %116, float* %74, align 4, !dbg !3688, !tbaa !3269
  call void @llvm.lifetime.end(i64 20, i8* %37), !dbg !3689
  br label %569

; <label>:117                                     ; preds = %27
  %118 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 5, !dbg !3690
  %119 = load %"struct.pov::Object_Struct"** %118, align 8, !dbg !3690, !tbaa !3151
  %120 = getelementptr inbounds %"struct.pov::Object_Struct"* %119, i64 0, i32 0, !dbg !3690
  %121 = load %"struct.pov::Method_Struct"** %120, align 8, !dbg !3690, !tbaa !3152
  %122 = getelementptr inbounds %"struct.pov::Method_Struct"* %121, i64 0, i32 3, !dbg !3690
  %123 = load void (double*, %"struct.pov::Object_Struct"*, %"struct.pov::istk_entry"*)** %122, align 8, !dbg !3690, !tbaa !3217
  %124 = bitcast <2 x i64>* %UV_Coords to double*, !dbg !3690
  call void %123(double* %124, %"struct.pov::Object_Struct"* %119, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3690
  %125 = load <2 x i64>* %UV_Coords, align 16, !dbg !3522, !tbaa !3114
  %126 = bitcast [3 x double]* %TPoint to <2 x i64>*, !dbg !3691
  store <2 x i64> %125, <2 x i64>* %126, align 16, !dbg !3691, !tbaa !3114
  %127 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 2, !dbg !3692
  store double 0.000000e+00, double* %127, align 16, !dbg !3693, !tbaa !3114
  %128 = load %"struct.pov::Blend_Map_Struct"** %1, align 8, !dbg !3694, !tbaa !3535
  %129 = getelementptr inbounds %"struct.pov::Blend_Map_Struct"* %128, i64 0, i32 4, !dbg !3695
  %130 = load %"struct.pov::Blend_Map_Entry"** %129, align 8, !dbg !3695, !tbaa !3613
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"* %130, i64 0, metadata !1484, metadata !2666), !dbg !3696
  store %"struct.pov::Blend_Map_Entry"* %130, %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !3697, !tbaa !2657
  %131 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %130, i64 0, i32 2, !dbg !3698
  %132 = bitcast %union.anon* %131 to %"struct.pov::Texture_Struct"**, !dbg !3699
  %133 = load %"struct.pov::Texture_Struct"** %132, align 8, !dbg !3699, !tbaa !2657
  %134 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !3700
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %Result_Colour, %"struct.pov::Texture_Struct"* %133, double* %134, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !3701
  br label %569, !dbg !3702

; <label>:135                                     ; preds = %27
  %136 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !3703
  %137 = bitcast %"struct.pov::Texture_Struct"* %Texture to %"struct.pov::Pattern_Struct"*, !dbg !3704
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %136, double* %IPoint, %"struct.pov::Pattern_Struct"* %137) #6, !dbg !3705
  %138 = call %"struct.pov::Texture_Struct"* @_ZN3pov12material_mapEPdPNS_14Texture_StructE(double* %136, %"struct.pov::Texture_Struct"* %Texture) #6, !dbg !3706
  call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %138, i64 0, metadata !1475, metadata !2666), !dbg !3527
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %Result_Colour, %"struct.pov::Texture_Struct"* %138, double* %136, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !3707
  br label %569, !dbg !3708

; <label>:139                                     ; preds = %27
  %140 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !3709, !tbaa !2664
  %141 = icmp eq i32 %140, 0, !dbg !3709
  br i1 %141, label %143, label %142, !dbg !3710

; <label>:142                                     ; preds = %139
  tail call fastcc void @_ZN3povL25compute_backtrace_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryE(float* %Result_Colour, %"struct.pov::Texture_Struct"* %Texture, double* %IPoint, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3711
  br label %569, !dbg !3711

; <label>:143                                     ; preds = %139
  %144 = icmp eq i32 %Shadow_Flag, 0, !dbg !3712
  br i1 %144, label %465, label %.lr.ph19.i, !dbg !3713

.lr.ph19.i:                                       ; preds = %143
  %145 = bitcast [3 x double]* %Layer_Normal.i to i8*, !dbg !3714
  call void @llvm.lifetime.start(i64 24, i8* %145), !dbg !3714
  %146 = bitcast [5 x float]* %Layer_Pigment_Colour.i to i8*, !dbg !3714
  call void @llvm.lifetime.start(i64 20, i8* %146), !dbg !3714
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1771, metadata !2666), !dbg !3714
  tail call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %Texture, i64 0, metadata !1772, metadata !2666), !dbg !3715
  tail call void @llvm.dbg.value(metadata double* %IPoint, i64 0, metadata !1773, metadata !2666), !dbg !3716
  tail call void @llvm.dbg.value(metadata double* %Raw_Normal, i64 0, metadata !1774, metadata !2666), !dbg !3717
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Ray, i64 0, metadata !1775, metadata !2666), !dbg !3718
  tail call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, metadata !1776, metadata !2666), !dbg !3719
  tail call void @llvm.dbg.declare(metadata [5 x float]* undef, metadata !1785, metadata !2666), !dbg !3720
  %147 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 5, !dbg !3721
  %148 = load %"struct.pov::Object_Struct"** %147, align 8, !dbg !3721, !tbaa !3151
  %149 = getelementptr inbounds %"struct.pov::Object_Struct"* %148, i64 0, i32 5, !dbg !3722
  %150 = load %"struct.pov::Interior_Struct"** %149, align 8, !dbg !3722, !tbaa !3723
  tail call void @llvm.dbg.value(metadata %"struct.pov::Interior_Struct"* %150, i64 0, metadata !1790, metadata !2666), !dbg !3724
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1495, metadata !2666), !dbg !3725
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1496, metadata !2666), !dbg !3727
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1497, metadata !2666), !dbg !3728
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1498, metadata !2666), !dbg !3729
  tail call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1499, metadata !2666), !dbg !3730
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1500, metadata !2666), !dbg !3731
  %151 = getelementptr inbounds float* %Result_Colour, i64 1, !dbg !3732
  %152 = getelementptr inbounds float* %Result_Colour, i64 2, !dbg !3733
  %153 = getelementptr inbounds float* %Result_Colour, i64 3, !dbg !3734
  %154 = bitcast float* %Result_Colour to <4 x float>*, !dbg !3735
  store <4 x float> <float 1.000000e+00, float 1.000000e+00, float 1.000000e+00, float 1.000000e+00>, <4 x float>* %154, align 4, !dbg !3735, !tbaa !3269
  %155 = getelementptr inbounds float* %Result_Colour, i64 4, !dbg !3736
  store float 0.000000e+00, float* %155, align 4, !dbg !3737, !tbaa !3269
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1780, metadata !2666), !dbg !3738
  tail call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %Texture, i64 0, metadata !1789, metadata !2666), !dbg !3739
  %156 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 0, !dbg !3740
  %157 = icmp eq %"struct.pov::Interior_Struct"* %150, null, !dbg !3744
  %158 = getelementptr inbounds %"struct.pov::Interior_Struct"* %150, i64 0, i32 5, !dbg !3746
  %159 = getelementptr inbounds [3 x double]* %Layer_Normal.i, i64 0, i64 0, !dbg !3747
  %160 = getelementptr inbounds [3 x double]* %Layer_Normal.i, i64 0, i64 1, !dbg !3749
  %161 = getelementptr inbounds double* %Raw_Normal, i64 2, !dbg !3751
  %162 = bitcast double* %161 to i64*, !dbg !3751
  %163 = getelementptr inbounds [3 x double]* %Layer_Normal.i, i64 0, i64 2, !dbg !3752
  %164 = bitcast double* %163 to i64*, !dbg !3753
  %165 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !3754
  %166 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !3755
  %167 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !3757
  %168 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 3, !dbg !3758
  %169 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 4, !dbg !3761
  %170 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 1, !dbg !3762
  %171 = getelementptr inbounds [5 x float]* %Layer_Pigment_Colour.i, i64 0, i64 2, !dbg !3763
  %172 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !3764, !tbaa !3114
  %173 = fcmp olt double %172, 1.000000e+00, !dbg !3765
  br i1 %173, label %.lr.ph16, label %.critedge.i, !dbg !3766

.lr.ph16:                                         ; preds = %.lr.ph19.i, %._crit_edge27.i
  %Layer.017.i15 = phi %"struct.pov::Texture_Struct"* [ %298, %._crit_edge27.i ], [ %Texture, %.lr.ph19.i ]
  %174 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.017.i15, i64 0, i32 12, !dbg !3767
  %175 = load %"struct.pov::Pigment_Struct"** %174, align 8, !dbg !3767, !tbaa !3768
  %176 = call i32 @_ZN3pov15Compute_PigmentEPfPNS_14Pigment_StructEPdPNS_10istk_entryE(float* %156, %"struct.pov::Pigment_Struct"* %175, double* %IPoint, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3769
  call void @llvm.dbg.value(metadata i32 %176, i64 0, metadata !1779, metadata !2666), !dbg !3770
  %177 = icmp eq i32 %176, 0, !dbg !3771
  br i1 %177, label %196, label %178, !dbg !3772

; <label>:178                                     ; preds = %.lr.ph16
  call void @llvm.dbg.value(metadata i32 1, i64 0, metadata !1780, metadata !2666), !dbg !3738
  %179 = load float* %156, align 16, !dbg !3773, !tbaa !3269
  %180 = load float* %168, align 4, !dbg !3758, !tbaa !3269
  %181 = fmul float %179, %180, !dbg !3774
  %182 = load float* %169, align 16, !dbg !3761, !tbaa !3269
  %183 = fadd float %181, %182, !dbg !3775
  %184 = load float* %Result_Colour, align 4, !dbg !3776, !tbaa !3269
  %185 = fmul float %184, %183, !dbg !3776
  store float %185, float* %Result_Colour, align 4, !dbg !3776, !tbaa !3269
  %186 = load float* %170, align 4, !dbg !3762, !tbaa !3269
  %187 = fmul float %180, %186, !dbg !3777
  %188 = fadd float %182, %187, !dbg !3778
  %189 = load float* %151, align 4, !dbg !3779, !tbaa !3269
  %190 = fmul float %189, %188, !dbg !3779
  store float %190, float* %151, align 4, !dbg !3779, !tbaa !3269
  %191 = load float* %171, align 8, !dbg !3763, !tbaa !3269
  %192 = fmul float %180, %191, !dbg !3780
  %193 = fadd float %182, %192, !dbg !3781
  %194 = load float* %152, align 4, !dbg !3782, !tbaa !3269
  %195 = fmul float %194, %193, !dbg !3782
  store float %195, float* %152, align 4, !dbg !3782, !tbaa !3269
  br label %196, !dbg !3783

; <label>:196                                     ; preds = %178, %.lr.ph16
  br i1 %157, label %295, label %197, !dbg !3784

; <label>:197                                     ; preds = %196
  %198 = load float* %158, align 4, !dbg !3746, !tbaa !3785
  %199 = fpext float %198 to double, !dbg !3787
  call void @llvm.dbg.value(metadata double %199, i64 0, metadata !1781, metadata !2666), !dbg !3788
  %200 = fcmp une float %198, 0.000000e+00, !dbg !3789
  br i1 %200, label %201, label %295, !dbg !3790

; <label>:201                                     ; preds = %197
  call void @llvm.dbg.value(metadata double* %159, i64 0, metadata !1348, metadata !2666), !dbg !3791
  call void @llvm.dbg.value(metadata double* %Raw_Normal, i64 0, metadata !1349, metadata !2666), !dbg !3792
  %202 = bitcast double* %Raw_Normal to <2 x i64>*, !dbg !3793
  %203 = load <2 x i64>* %202, align 8, !dbg !3793, !tbaa !3114
  %204 = bitcast [3 x double]* %Layer_Normal.i to <2 x i64>*, !dbg !3794
  store <2 x i64> %203, <2 x i64>* %204, align 16, !dbg !3794, !tbaa !3114
  %205 = load i64* %162, align 8, !dbg !3751, !tbaa !3114
  store i64 %205, i64* %164, align 16, !dbg !3753, !tbaa !3114
  %206 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !3795, !tbaa !3797
  %207 = and i32 %206, 64, !dbg !3798
  %208 = icmp eq i32 %207, 0, !dbg !3798
  br i1 %208, label %.loopexit4.i, label %209, !dbg !3799

; <label>:209                                     ; preds = %201
  %210 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.017.i15, i64 0, i32 13, !dbg !3800
  %211 = load %"struct.pov::Tnormal_Struct"** %210, align 8, !dbg !3800, !tbaa !3801
  %212 = icmp eq %"struct.pov::Tnormal_Struct"* %211, null, !dbg !3802
  br i1 %212, label %.loopexit4.i, label %213, !dbg !3803

; <label>:213                                     ; preds = %209
  %214 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 28), align 8, !dbg !3804, !tbaa !3543
  %215 = icmp sgt i32 %214, 310, !dbg !3807
  br i1 %215, label %.preheader5.i, label %268, !dbg !3808

.preheader5.i:                                    ; preds = %213
  %216 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !3809, !tbaa !2664
  %217 = icmp sgt i32 %216, 0, !dbg !3813
  br i1 %217, label %.lr.ph11.i, label %229, !dbg !3814

.lr.ph11.i:                                       ; preds = %.preheader5.i, %.lr.ph11.i
  %indvars.iv23.i = phi i64 [ %indvars.iv.next24.i, %.lr.ph11.i ], [ 0, %.preheader5.i ], !dbg !3815
  %218 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !3816, !tbaa !2657
  %219 = getelementptr inbounds %"struct.pov::Texture_Struct"** %218, i64 %indvars.iv23.i, !dbg !3816
  %220 = load %"struct.pov::Texture_Struct"** %219, align 8, !dbg !3816, !tbaa !2657
  %221 = bitcast %"struct.pov::Texture_Struct"* %220 to %"struct.pov::Pattern_Struct"*, !dbg !3817
  %222 = getelementptr inbounds %"struct.pov::Texture_Struct"* %220, i64 0, i32 2, !dbg !3818
  %223 = load i16* %222, align 2, !dbg !3818, !tbaa !3819
  %224 = zext i16 %223 to i32, !dbg !3818
  %225 = and i32 %224, 8, !dbg !3818
  call void @_ZN3pov11Warp_NormalEPdS0_PNS_14Pattern_StructEi(double* %159, double* %159, %"struct.pov::Pattern_Struct"* %221, i32 %225) #6, !dbg !3820
  %indvars.iv.next24.i = add nuw nsw i64 %indvars.iv23.i, 1, !dbg !3814
  %226 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !3809, !tbaa !2664
  %227 = sext i32 %226 to i64, !dbg !3813
  %228 = icmp slt i64 %indvars.iv.next24.i, %227, !dbg !3813
  br i1 %228, label %.lr.ph11.i, label %._crit_edge12.i, !dbg !3814

._crit_edge12.i:                                  ; preds = %.lr.ph11.i
  %.pre29.i = load %"struct.pov::Tnormal_Struct"** %210, align 8, !dbg !3821, !tbaa !3801
  br label %229, !dbg !3814

; <label>:229                                     ; preds = %._crit_edge12.i, %.preheader5.i
  %230 = phi %"struct.pov::Tnormal_Struct"* [ %.pre29.i, %._crit_edge12.i ], [ %211, %.preheader5.i ], !dbg !3815
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %159, %"struct.pov::Tnormal_Struct"* %230, double* %IPoint, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3822
  %231 = load %"struct.pov::Tnormal_Struct"** %210, align 8, !dbg !3823, !tbaa !3801
  %232 = getelementptr inbounds %"struct.pov::Tnormal_Struct"* %231, i64 0, i32 2, !dbg !3823
  %233 = load i16* %232, align 2, !dbg !3823, !tbaa !3825
  %234 = and i16 %233, 8, !dbg !3827
  %235 = icmp eq i16 %234, 0, !dbg !3827
  br i1 %235, label %254, label %236, !dbg !3828

; <label>:236                                     ; preds = %229
  call void @llvm.dbg.value(metadata double* %159, i64 0, metadata !1404, metadata !2666) #5, !dbg !3829
  call void @llvm.dbg.value(metadata double* %159, i64 0, metadata !1450, metadata !2666) #5, !dbg !3831
  %237 = bitcast [3 x double]* %Layer_Normal.i to <2 x double>*, !dbg !3833
  %238 = load <2 x double>* %237, align 16, !dbg !3833, !tbaa !3114
  %239 = extractelement <2 x double> %238, i32 0, !dbg !3834
  %240 = fmul double %239, %239, !dbg !3834
  %241 = extractelement <2 x double> %238, i32 1, !dbg !3835
  %242 = fmul double %241, %241, !dbg !3835
  %243 = fadd double %240, %242, !dbg !3836
  %244 = load double* %163, align 16, !dbg !3837, !tbaa !3114
  %245 = fmul double %244, %244, !dbg !3838
  %246 = fadd double %243, %245, !dbg !3839
  %247 = call double @sqrt(double %246) #7, !dbg !3840
  call void @llvm.dbg.value(metadata double %247, i64 0, metadata !1449, metadata !2666) #5, !dbg !3841
  call void @llvm.dbg.value(metadata double %247, i64 0, metadata !1405, metadata !2666) #5, !dbg !3842
  call void @llvm.dbg.value(metadata double %247, i64 0, metadata !1405, metadata !2666) #5, !dbg !3842
  call void @llvm.dbg.value(metadata double* %159, i64 0, metadata !1408, metadata !2666) #5, !dbg !3843
  call void @llvm.dbg.value(metadata double %247, i64 0, metadata !1409, metadata !2666) #5, !dbg !3845
  %248 = fdiv double 1.000000e+00, %247, !dbg !3846
  call void @llvm.dbg.value(metadata double %248, i64 0, metadata !1410, metadata !2666) #5, !dbg !3847
  %249 = insertelement <2 x double> undef, double %248, i32 0, !dbg !3848
  %250 = insertelement <2 x double> %249, double %248, i32 1, !dbg !3848
  %251 = fmul <2 x double> %250, %238, !dbg !3848
  %252 = bitcast [3 x double]* %Layer_Normal.i to <2 x double>*, !dbg !3848
  store <2 x double> %251, <2 x double>* %252, align 16, !dbg !3848, !tbaa !3114
  %253 = fmul double %244, %248, !dbg !3849
  store double %253, double* %163, align 16, !dbg !3849, !tbaa !3114
  br label %254, !dbg !3850

; <label>:254                                     ; preds = %236, %229
  %255 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !3851, !tbaa !2664
  %256 = icmp sgt i32 %255, 0, !dbg !3853
  br i1 %256, label %.lr.ph16.i, label %.loopexit4.i, !dbg !3855

.lr.ph16.i:                                       ; preds = %254
  %257 = sext i32 %255 to i64, !dbg !3815
  br label %258, !dbg !3855

; <label>:258                                     ; preds = %258, %.lr.ph16.i
  %indvars.iv25.i = phi i64 [ %257, %.lr.ph16.i ], [ %indvars.iv.next26.i, %258 ], !dbg !3815
  %indvars.iv.next26.i = add nsw i64 %indvars.iv25.i, -1, !dbg !3855
  %259 = load %"struct.pov::Texture_Struct"*** @_ZN3pov21warpNormalTextureListE, align 8, !dbg !3856, !tbaa !2657
  %260 = getelementptr inbounds %"struct.pov::Texture_Struct"** %259, i64 %indvars.iv.next26.i, !dbg !3856
  %261 = load %"struct.pov::Texture_Struct"** %260, align 8, !dbg !3856, !tbaa !2657
  %262 = bitcast %"struct.pov::Texture_Struct"* %261 to %"struct.pov::Pattern_Struct"*, !dbg !3857
  %263 = getelementptr inbounds %"struct.pov::Texture_Struct"* %261, i64 0, i32 2, !dbg !3858
  %264 = load i16* %263, align 2, !dbg !3858, !tbaa !3819
  %265 = zext i16 %264 to i32, !dbg !3858
  %266 = and i32 %265, 8, !dbg !3858
  call void @_ZN3pov13UnWarp_NormalEPdS0_PNS_14Pattern_StructEi(double* %159, double* %159, %"struct.pov::Pattern_Struct"* %262, i32 %266) #6, !dbg !3859
  %267 = icmp sgt i64 %indvars.iv25.i, 1, !dbg !3853
  br i1 %267, label %258, label %.loopexit4.i, !dbg !3855

; <label>:268                                     ; preds = %213
  call void @_ZN3pov14Perturb_NormalEPdPNS_14Tnormal_StructES0_PNS_10istk_entryE(double* %159, %"struct.pov::Tnormal_Struct"* %211, double* %IPoint, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3860
  br label %.loopexit4.i, !dbg !3815

.loopexit4.i:                                     ; preds = %258, %268, %254, %209, %201
  call void @llvm.dbg.value(metadata double* %159, i64 0, metadata !1358, metadata !2666), !dbg !3861
  call void @llvm.dbg.value(metadata double* %165, i64 0, metadata !1359, metadata !2666), !dbg !3862
  %269 = load double* %159, align 16, !dbg !3863, !tbaa !3114
  %270 = load double* %165, align 8, !dbg !3864, !tbaa !3114
  %271 = fmul double %269, %270, !dbg !3865
  %272 = load double* %160, align 8, !dbg !3866, !tbaa !3114
  %273 = load double* %166, align 8, !dbg !3755, !tbaa !3114
  %274 = fmul double %272, %273, !dbg !3867
  %275 = fadd double %271, %274, !dbg !3868
  %276 = load double* %163, align 16, !dbg !3869, !tbaa !3114
  %277 = load double* %167, align 8, !dbg !3757, !tbaa !3114
  %278 = fmul double %276, %277, !dbg !3870
  %279 = fadd double %275, %278, !dbg !3871
  call void @llvm.dbg.value(metadata double %279, i64 0, metadata !1357, metadata !2666), !dbg !3872
  call void @llvm.dbg.value(metadata double %279, i64 0, metadata !1782, metadata !2666), !dbg !3873
  call void @llvm.dbg.value(metadata double %279, i64 0, metadata !1782, metadata !2666), !dbg !3873
  %280 = call double @fabs(double %279) #7, !dbg !3874
  %281 = call double @llvm.pow.f64(double %280, double %199), !dbg !3875
  %282 = fadd double %281, 1.000000e+00, !dbg !3876
  call void @llvm.dbg.value(metadata double %282, i64 0, metadata !1783, metadata !2666), !dbg !3877
  %283 = load float* %Result_Colour, align 4, !dbg !3878, !tbaa !3269
  %284 = fpext float %283 to double, !dbg !3878
  %285 = fmul double %282, %284, !dbg !3878
  %286 = fptrunc double %285 to float, !dbg !3878
  store float %286, float* %Result_Colour, align 4, !dbg !3878, !tbaa !3269
  %287 = load float* %151, align 4, !dbg !3879, !tbaa !3269
  %288 = fpext float %287 to double, !dbg !3879
  %289 = fmul double %282, %288, !dbg !3879
  %290 = fptrunc double %289 to float, !dbg !3879
  store float %290, float* %151, align 4, !dbg !3879, !tbaa !3269
  %291 = load float* %152, align 4, !dbg !3880, !tbaa !3269
  %292 = fpext float %291 to double, !dbg !3880
  %293 = fmul double %282, %292, !dbg !3880
  %294 = fptrunc double %293 to float, !dbg !3880
  store float %294, float* %152, align 4, !dbg !3880, !tbaa !3269
  br label %295, !dbg !3881

; <label>:295                                     ; preds = %.loopexit4.i, %197, %196
  %296 = getelementptr inbounds %"struct.pov::Texture_Struct"* %Layer.017.i15, i64 0, i32 8, !dbg !3882
  %297 = bitcast %"struct.pov::Pattern_Struct"** %296 to %"struct.pov::Texture_Struct"**, !dbg !3882
  %298 = load %"struct.pov::Texture_Struct"** %297, align 8, !dbg !3882, !tbaa !3883
  call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %298, i64 0, metadata !1789, metadata !2666), !dbg !3739
  %299 = icmp eq %"struct.pov::Texture_Struct"* %298, null, !dbg !3884
  br i1 %299, label %.critedge.i, label %._crit_edge27.i, !dbg !3885

._crit_edge27.i:                                  ; preds = %295
  %300 = bitcast float* %153 to <2 x float>*, !dbg !3886
  %301 = load <2 x float>* %300, align 4, !dbg !3886, !tbaa !3269
  %302 = call <2 x float> @llvm.fabs.v2f32(<2 x float> %301), !dbg !3887
  %303 = fpext <2 x float> %302 to <2 x double>, !dbg !3887
  %304 = extractelement <2 x double> %303, i32 0, !dbg !3888
  %305 = extractelement <2 x double> %303, i32 1, !dbg !3888
  %306 = fadd double %304, %305, !dbg !3888
  %307 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !3764, !tbaa !3114
  %308 = fcmp ogt double %306, %307, !dbg !3765
  br i1 %308, label %.lr.ph16, label %.critedge.i, !dbg !3766

.critedge.i:                                      ; preds = %._crit_edge27.i, %295, %.lr.ph19.i
  call void @llvm.dbg.value(metadata float* undef, i64 0, metadata !1535, metadata !2666), !dbg !3889
  call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1536, metadata !2666), !dbg !3893
  call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1537, metadata !2666), !dbg !3894
  call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1538, metadata !2666), !dbg !3895
  call void @llvm.dbg.value(metadata float 1.000000e+00, i64 0, metadata !1785, metadata !3896), !dbg !3720
  call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1785, metadata !3897), !dbg !3720
  br i1 %157, label %377, label %309, !dbg !3898

; <label>:309                                     ; preds = %.critedge.i
  %310 = call i32 @_ZN3pov25Interior_In_Ray_ContainerEPNS_10Ray_StructEPNS_15Interior_StructE(%"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Interior_Struct"* %150) #6, !dbg !3899
  %311 = icmp sgt i32 %310, -1, !dbg !3901
  br i1 %311, label %312, label %377, !dbg !3902

; <label>:312                                     ; preds = %309
  %313 = getelementptr inbounds %"struct.pov::Interior_Struct"* %150, i64 0, i32 8, !dbg !3903
  %314 = load float* %313, align 4, !dbg !3903, !tbaa !3906
  %315 = fpext float %314 to double, !dbg !3907
  %316 = fcmp ogt float %314, 0.000000e+00, !dbg !3908
  br i1 %316, label %317, label %377, !dbg !3909

; <label>:317                                     ; preds = %312
  %318 = getelementptr inbounds %"struct.pov::Interior_Struct"* %150, i64 0, i32 7, !dbg !3910
  %319 = load float* %318, align 4, !dbg !3910, !tbaa !3911
  %320 = fpext float %319 to double, !dbg !3912
  %fabsf.i = call float @fabsf(float %319) #4, !dbg !3913
  %321 = fpext float %fabsf.i to double, !dbg !3913
  %322 = fcmp ogt double %321, 1.000000e-07, !dbg !3914
  br i1 %322, label %323, label %377, !dbg !3915

; <label>:323                                     ; preds = %317
  %324 = fcmp ult float %314, 1.000000e+03, !dbg !3916
  %325 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 0, !dbg !3815
  %326 = load double* %325, align 8, !dbg !3815
  %327 = getelementptr inbounds %"struct.pov::Interior_Struct"* %150, i64 0, i32 9, i64 0, !dbg !3815
  %328 = load float* %327, align 4, !dbg !3815
  %329 = getelementptr inbounds %"struct.pov::Interior_Struct"* %150, i64 0, i32 9, i64 1, !dbg !3815
  %330 = load float* %329, align 4, !dbg !3815
  %331 = getelementptr inbounds %"struct.pov::Interior_Struct"* %150, i64 0, i32 9, i64 2, !dbg !3815
  %332 = load float* %331, align 4, !dbg !3815
  br i1 %324, label %355, label %333, !dbg !3919

; <label>:333                                     ; preds = %323
  %334 = fpext float %328 to double, !dbg !3920
  %335 = fsub double 1.000000e+00, %334, !dbg !3922
  %336 = fmul double %326, %335, !dbg !3923
  %337 = fsub double -0.000000e+00, %336, !dbg !3923
  %338 = fdiv double %337, %320, !dbg !3924
  %339 = call double @exp(double %338) #7, !dbg !3925
  %340 = fptrunc double %339 to float, !dbg !3926
  call void @llvm.dbg.value(metadata float %340, i64 0, metadata !1785, metadata !3896), !dbg !3720
  %341 = fpext float %330 to double, !dbg !3927
  %342 = fsub double 1.000000e+00, %341, !dbg !3928
  %343 = fmul double %326, %342, !dbg !3929
  %344 = fsub double -0.000000e+00, %343, !dbg !3929
  %345 = fdiv double %344, %320, !dbg !3930
  %346 = call double @exp(double %345) #7, !dbg !3931
  %347 = fptrunc double %346 to float, !dbg !3932
  call void @llvm.dbg.value(metadata float %347, i64 0, metadata !1785, metadata !3933), !dbg !3720
  %348 = fpext float %332 to double, !dbg !3934
  %349 = fsub double 1.000000e+00, %348, !dbg !3935
  %350 = fmul double %326, %349, !dbg !3936
  %351 = fsub double -0.000000e+00, %350, !dbg !3936
  %352 = fdiv double %351, %320, !dbg !3937
  %353 = call double @exp(double %352) #7, !dbg !3938
  %354 = fptrunc double %353 to float, !dbg !3939
  call void @llvm.dbg.value(metadata float %354, i64 0, metadata !1785, metadata !3940), !dbg !3720
  br label %377, !dbg !3941

; <label>:355                                     ; preds = %323
  %356 = fdiv double %326, %320, !dbg !3942
  %357 = call double @llvm.pow.f64(double %356, double %315), !dbg !3944
  %358 = fadd double %357, 1.000000e+00, !dbg !3945
  call void @llvm.dbg.value(metadata double %358, i64 0, metadata !1783, metadata !2666), !dbg !3877
  %359 = fpext float %328 to double, !dbg !3946
  %360 = fsub float 1.000000e+00, %328, !dbg !3947
  %361 = fpext float %360 to double, !dbg !3948
  %362 = fdiv double %361, %358, !dbg !3949
  %363 = fadd double %359, %362, !dbg !3950
  %364 = fptrunc double %363 to float, !dbg !3951
  call void @llvm.dbg.value(metadata float %364, i64 0, metadata !1785, metadata !3896), !dbg !3720
  %365 = fpext float %330 to double, !dbg !3952
  %366 = fsub float 1.000000e+00, %330, !dbg !3953
  %367 = fpext float %366 to double, !dbg !3954
  %368 = fdiv double %367, %358, !dbg !3955
  %369 = fadd double %365, %368, !dbg !3956
  %370 = fptrunc double %369 to float, !dbg !3957
  call void @llvm.dbg.value(metadata float %370, i64 0, metadata !1785, metadata !3933), !dbg !3720
  %371 = fpext float %332 to double, !dbg !3958
  %372 = fsub float 1.000000e+00, %332, !dbg !3959
  %373 = fpext float %372 to double, !dbg !3960
  %374 = fdiv double %373, %358, !dbg !3961
  %375 = fadd double %371, %374, !dbg !3962
  %376 = fptrunc double %375 to float, !dbg !3963
  call void @llvm.dbg.value(metadata float %376, i64 0, metadata !1785, metadata !3940), !dbg !3720
  br label %377, !dbg !3815

; <label>:377                                     ; preds = %355, %333, %317, %312, %309, %.critedge.i
  %378 = phi float [ 1.000000e+00, %.critedge.i ], [ 1.000000e+00, %309 ], [ %354, %333 ], [ %376, %355 ], [ 1.000000e+00, %317 ], [ 1.000000e+00, %312 ], !dbg !3815
  %379 = phi float [ 1.000000e+00, %.critedge.i ], [ 1.000000e+00, %309 ], [ %347, %333 ], [ %370, %355 ], [ 1.000000e+00, %317 ], [ 1.000000e+00, %312 ], !dbg !3815
  %380 = phi float [ 1.000000e+00, %.critedge.i ], [ 1.000000e+00, %309 ], [ %340, %333 ], [ %364, %355 ], [ 1.000000e+00, %317 ], [ 1.000000e+00, %312 ], !dbg !3815
  %381 = load float* %Result_Colour, align 4, !dbg !3964, !tbaa !3269
  %382 = fmul float %380, %381, !dbg !3964
  store float %382, float* %Result_Colour, align 4, !dbg !3964, !tbaa !3269
  %383 = load float* %151, align 4, !dbg !3965, !tbaa !3269
  %384 = fmul float %379, %383, !dbg !3965
  store float %384, float* %151, align 4, !dbg !3965, !tbaa !3269
  %385 = load float* %152, align 4, !dbg !3966, !tbaa !3269
  %386 = fmul float %378, %385, !dbg !3966
  store float %386, float* %152, align 4, !dbg !3966, !tbaa !3269
  %387 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !3967, !tbaa !3797
  %388 = and i32 %387, 128, !dbg !3969
  %389 = icmp eq i32 %388, 0, !dbg !3969
  br i1 %389, label %_ZN3povL22compute_shadow_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEPNS_10istk_entryE.exit, label %390, !dbg !3970

; <label>:390                                     ; preds = %377
  %391 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 2, !dbg !3971
  %392 = load i32* %391, align 4, !dbg !3971, !tbaa !3972
  %393 = icmp sgt i32 %392, -1, !dbg !3974
  br i1 %393, label %.lr.ph9.i.preheader, label %_ZN3povL22compute_shadow_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEPNS_10istk_entryE.exit, !dbg !3975

.lr.ph9.i.preheader:                              ; preds = %390
  %394 = sext i32 %392 to i64, !dbg !3976
  br label %.lr.ph9.i, !dbg !3980

; <label>:395                                     ; preds = %.lr.ph9.i
  %indvars.iv.next22.i = add nuw nsw i64 %indvars.iv21.i, 1, !dbg !3983
  %396 = icmp slt i64 %indvars.iv21.i, %394, !dbg !3976
  br i1 %396, label %.lr.ph9.i, label %.critedge3.i, !dbg !3983

.lr.ph9.i:                                        ; preds = %.lr.ph9.i.preheader, %395
  %indvars.iv21.i = phi i64 [ %indvars.iv.next22.i, %395 ], [ 0, %.lr.ph9.i.preheader ], !dbg !3815
  %397 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv21.i, !dbg !3980
  %398 = load %"struct.pov::Interior_Struct"** %397, align 8, !dbg !3980, !tbaa !2657
  %399 = getelementptr inbounds %"struct.pov::Interior_Struct"* %398, i64 0, i32 1, !dbg !3984
  %400 = load i32* %399, align 4, !dbg !3984, !tbaa !3985
  %401 = icmp eq i32 %400, 0, !dbg !3980
  br i1 %401, label %_ZN3povL22compute_shadow_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEPNS_10istk_entryE.exit, label %395, !dbg !3986

.critedge3.i:                                     ; preds = %395
  %402 = load i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !3987, !tbaa !2676
  %403 = add nsw i64 %402, 1, !dbg !3987
  store i64 %403, i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !3987, !tbaa !2676
  %404 = load i64* @_ZN3pov17MaxMediaPoolDepthE, align 8, !dbg !3990, !tbaa !2676
  %405 = icmp slt i64 %403, %404, !dbg !3992
  br i1 %405, label %408, label %406, !dbg !3993

; <label>:406                                     ; preds = %.critedge3.i
  %407 = shl nsw i64 %404, 1, !dbg !3994
  call void @_ZN3pov22ResizeMediaMallocPoolsEl(i64 %407) #6, !dbg !3996
  %.pre30.i = load i32* %391, align 4, !dbg !3997, !tbaa !3972
  %.pre31.i = load i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !3999, !tbaa !2676
  br label %408, !dbg !4000

; <label>:408                                     ; preds = %406, %.critedge3.i
  %409 = phi i64 [ %403, %.critedge3.i ], [ %.pre31.i, %406 ], !dbg !3815
  %410 = phi i32 [ %392, %.critedge3.i ], [ %.pre30.i, %406 ], !dbg !3815
  %411 = add nsw i32 %410, 2, !dbg !4001
  %412 = sext i32 %411 to i64, !dbg !4002
  %413 = load i64** @_ZN3pov23ShadowMediaListPoolSizeE, align 8, !dbg !4003, !tbaa !2657
  %414 = getelementptr inbounds i64* %413, i64 %409, !dbg !4003
  %415 = load i64* %414, align 8, !dbg !4003, !tbaa !2676
  %416 = icmp slt i64 %412, %415, !dbg !4004
  br i1 %416, label %439, label %417, !dbg !4005

; <label>:417                                     ; preds = %408
  %418 = load %"struct.pov::Media_Struct"**** @_ZN3pov19ShadowMediaListPoolE, align 8, !dbg !4006, !tbaa !2657
  %419 = getelementptr inbounds %"struct.pov::Media_Struct"*** %418, i64 %409, !dbg !4006
  %420 = bitcast %"struct.pov::Media_Struct"*** %419 to i8**, !dbg !4006
  %421 = load i8** %420, align 8, !dbg !4006, !tbaa !2657
  call void @_ZN3pov8pov_freeEPvPKci(i8* %421, i8* getelementptr inbounds ([69 x i8]* @.str, i64 0, i64 0), i32 4406) #6, !dbg !4006
  %422 = load i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !4006, !tbaa !2676
  %423 = load %"struct.pov::Media_Struct"**** @_ZN3pov19ShadowMediaListPoolE, align 8, !dbg !4006, !tbaa !2657
  %424 = getelementptr inbounds %"struct.pov::Media_Struct"*** %423, i64 %422, !dbg !4006
  store %"struct.pov::Media_Struct"** null, %"struct.pov::Media_Struct"*** %424, align 8, !dbg !4006, !tbaa !2657
  %425 = load i32* %391, align 4, !dbg !4009, !tbaa !3972
  %426 = add nsw i32 %425, 2, !dbg !4009
  %427 = sext i32 %426 to i64, !dbg !4009
  %428 = shl nsw i64 %427, 3, !dbg !4009
  %429 = call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %428, i8* getelementptr inbounds ([69 x i8]* @.str, i64 0, i64 0), i32 4407, i8* getelementptr inbounds ([16 x i8]* @.str3, i64 0, i64 0)) #6, !dbg !4009
  %430 = load i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !4010, !tbaa !2676
  %431 = load %"struct.pov::Media_Struct"**** @_ZN3pov19ShadowMediaListPoolE, align 8, !dbg !4011, !tbaa !2657
  %432 = getelementptr inbounds %"struct.pov::Media_Struct"*** %431, i64 %430, !dbg !4011
  %433 = bitcast %"struct.pov::Media_Struct"*** %432 to i8**, !dbg !4012
  store i8* %429, i8** %433, align 8, !dbg !4012, !tbaa !2657
  %434 = load i32* %391, align 4, !dbg !4013, !tbaa !3972
  %435 = add nsw i32 %434, 2, !dbg !4014
  %436 = sext i32 %435 to i64, !dbg !4015
  %437 = load i64** @_ZN3pov23ShadowMediaListPoolSizeE, align 8, !dbg !4016, !tbaa !2657
  %438 = getelementptr inbounds i64* %437, i64 %430, !dbg !4016
  store i64 %436, i64* %438, align 8, !dbg !4017, !tbaa !2676
  %.pre32.i = load i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !4018, !tbaa !2676
  br label %439, !dbg !4019

; <label>:439                                     ; preds = %417, %408
  %440 = phi i32 [ %410, %408 ], [ %434, %417 ], !dbg !3815
  %441 = phi i64 [ %409, %408 ], [ %.pre32.i, %417 ], !dbg !3815
  %442 = load %"struct.pov::Media_Struct"**** @_ZN3pov19ShadowMediaListPoolE, align 8, !dbg !4020, !tbaa !2657
  %443 = getelementptr inbounds %"struct.pov::Media_Struct"*** %442, i64 %441, !dbg !4020
  %444 = load %"struct.pov::Media_Struct"*** %443, align 8, !dbg !4020, !tbaa !2657
  call void @llvm.dbg.value(metadata %"struct.pov::Media_Struct"** %444, i64 0, metadata !1787, metadata !2666), !dbg !4021
  call void @llvm.dbg.value(metadata %"struct.pov::Media_Struct"** %444, i64 0, metadata !1788, metadata !2666), !dbg !4022
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1777, metadata !2666), !dbg !4023
  %445 = icmp slt i32 %440, 0, !dbg !4024
  br i1 %445, label %._crit_edge.i, label %.lr.ph.i.preheader, !dbg !4027

.lr.ph.i.preheader:                               ; preds = %439
  %446 = sext i32 %440 to i64
  br label %.lr.ph.i, !dbg !4028

.lr.ph.i:                                         ; preds = %458, %.lr.ph.i.preheader
  %indvars.iv.i = phi i64 [ %indvars.iv.next.i, %458 ], [ 0, %.lr.ph.i.preheader ], !dbg !3815
  %Tmp.06.i = phi %"struct.pov::Media_Struct"** [ %Tmp.1.i, %458 ], [ %444, %.lr.ph.i.preheader ], !dbg !3815
  %447 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv.i, !dbg !4028
  %448 = load %"struct.pov::Interior_Struct"** %447, align 8, !dbg !4028, !tbaa !2657
  %449 = getelementptr inbounds %"struct.pov::Interior_Struct"* %448, i64 0, i32 1, !dbg !4031
  %450 = load i32* %449, align 4, !dbg !4031, !tbaa !3985
  %451 = icmp eq i32 %450, 0, !dbg !4028
  br i1 %451, label %458, label %452, !dbg !4032

; <label>:452                                     ; preds = %.lr.ph.i
  %453 = getelementptr inbounds %"struct.pov::Interior_Struct"* %448, i64 0, i32 10, !dbg !4033
  %454 = load %"struct.pov::Media_Struct"** %453, align 8, !dbg !4033, !tbaa !4036
  %455 = icmp eq %"struct.pov::Media_Struct"* %454, null, !dbg !4037
  br i1 %455, label %458, label %456, !dbg !4038

; <label>:456                                     ; preds = %452
  store %"struct.pov::Media_Struct"* %454, %"struct.pov::Media_Struct"** %Tmp.06.i, align 8, !dbg !4039, !tbaa !2657
  %457 = getelementptr inbounds %"struct.pov::Media_Struct"** %Tmp.06.i, i64 1, !dbg !4041
  call void @llvm.dbg.value(metadata %"struct.pov::Media_Struct"** %457, i64 0, metadata !1788, metadata !2666), !dbg !4022
  br label %458, !dbg !4042

; <label>:458                                     ; preds = %456, %452, %.lr.ph.i
  %Tmp.1.i = phi %"struct.pov::Media_Struct"** [ %457, %456 ], [ %Tmp.06.i, %452 ], [ %Tmp.06.i, %.lr.ph.i ], !dbg !3815
  %indvars.iv.next.i = add nuw nsw i64 %indvars.iv.i, 1, !dbg !4027
  %exitcond = icmp eq i64 %indvars.iv.i, %446, !dbg !4027
  br i1 %exitcond, label %._crit_edge.i, label %.lr.ph.i, !dbg !4027

._crit_edge.i:                                    ; preds = %458, %439
  %Tmp.0.lcssa.i = phi %"struct.pov::Media_Struct"** [ %444, %439 ], [ %Tmp.1.i, %458 ], !dbg !3815
  store %"struct.pov::Media_Struct"* null, %"struct.pov::Media_Struct"** %Tmp.0.lcssa.i, align 8, !dbg !4043, !tbaa !2657
  %459 = load %"struct.pov::Media_Struct"** %444, align 8, !dbg !4044, !tbaa !2657
  %460 = icmp eq %"struct.pov::Media_Struct"* %459, null, !dbg !4046
  br i1 %460, label %462, label %461, !dbg !4047

; <label>:461                                     ; preds = %._crit_edge.i
  call void @_ZN3pov14Simulate_MediaEPPNS_12Media_StructEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Media_Struct"** %444, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Ray_Intersection, float* %Result_Colour, i32 1) #6, !dbg !4048
  %.pre33.i = load i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !4049, !tbaa !2676
  br label %462, !dbg !4048

; <label>:462                                     ; preds = %461, %._crit_edge.i
  %463 = phi i64 [ %441, %._crit_edge.i ], [ %.pre33.i, %461 ], !dbg !3815
  %464 = add nsw i64 %463, -1, !dbg !4049
  store i64 %464, i64* @_ZN3pov20ShadowMediaListIndexE, align 8, !dbg !4049, !tbaa !2676
  br label %_ZN3povL22compute_shadow_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEPNS_10istk_entryE.exit, !dbg !4050

_ZN3povL22compute_shadow_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEPNS_10istk_entryE.exit: ; preds = %.lr.ph9.i, %377, %390, %462
  call void @llvm.lifetime.end(i64 24, i8* %145), !dbg !4051
  call void @llvm.lifetime.end(i64 20, i8* %146), !dbg !4051
  br label %569, !dbg !3815

; <label>:465                                     ; preds = %143
  tail call fastcc void @_ZN3povL23compute_lighted_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryE(float* %Result_Colour, %"struct.pov::Texture_Struct"* %Texture, double* %IPoint, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !4052
  br label %569

; <label>:466                                     ; preds = %27
  %467 = tail call i32 (i8*, ...)* @_ZN3pov5ErrorEPKcz(i8* getelementptr inbounds ([37 x i8]* @.str9, i64 0, i64 0)) #6, !dbg !4053
  br label %569, !dbg !4054

; <label>:468                                     ; preds = %._crit_edge24
  %469 = getelementptr inbounds [3 x double]* %TPoint, i64 0, i64 0, !dbg !4055
  %470 = bitcast %"struct.pov::Texture_Struct"* %Texture to %"struct.pov::Pattern_Struct"*, !dbg !4057
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %469, double* %IPoint, %"struct.pov::Pattern_Struct"* %470) #6, !dbg !4058
  %471 = call double @_ZN3pov13Evaluate_TPatEPNS_14Pattern_StructEPdPNS_10istk_entryE(%"struct.pov::Pattern_Struct"* %470, double* %469, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !4059
  call void @llvm.dbg.value(metadata double %471, i64 0, metadata !1485, metadata !2666), !dbg !4060
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Prev, i64 0, metadata !1483, metadata !2666), !dbg !4061
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Cur, i64 0, metadata !1484, metadata !2666), !dbg !3696
  call void @_ZN3pov16Search_Blend_MapEdPNS_16Blend_Map_StructEPPNS_15Blend_Map_EntryES4_(double %471, %"struct.pov::Blend_Map_Struct"* %2, %"struct.pov::Blend_Map_Entry"** %Prev, %"struct.pov::Blend_Map_Entry"** %Cur) #6, !dbg !4062
  call void @_ZN3pov11Warp_EPointEPdS0_PNS_14Pattern_StructE(double* %469, double* %IPoint, %"struct.pov::Pattern_Struct"* %470) #6, !dbg !4063
  %472 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !4064, !tbaa !2664
  %473 = icmp eq i32 %472, 0, !dbg !4064
  br i1 %473, label %519, label %474, !dbg !4066

; <label>:474                                     ; preds = %468
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Prev, i64 0, metadata !1483, metadata !2666), !dbg !4061
  %475 = load %"struct.pov::Blend_Map_Entry"** %Prev, align 8, !dbg !4067, !tbaa !2657
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Cur, i64 0, metadata !1484, metadata !2666), !dbg !3696
  %476 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !4070, !tbaa !2657
  %477 = icmp eq %"struct.pov::Blend_Map_Entry"* %475, %476, !dbg !4071
  br i1 %477, label %478, label %482, !dbg !4072

; <label>:478                                     ; preds = %474
  %479 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %475, i64 0, i32 2, !dbg !4073
  %480 = bitcast %union.anon* %479 to %"struct.pov::Texture_Struct"**, !dbg !4074
  %481 = load %"struct.pov::Texture_Struct"** %480, align 8, !dbg !4074, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %Result_Colour, %"struct.pov::Texture_Struct"* %481, double* %469, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !4075
  br label %569, !dbg !4075

; <label>:482                                     ; preds = %474
  %483 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %475, i64 0, i32 0, !dbg !4076
  %484 = load float* %483, align 4, !dbg !4076, !tbaa !3626
  %485 = fpext float %484 to double, !dbg !4078
  %486 = fsub double %471, %485, !dbg !4079
  %487 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %476, i64 0, i32 0, !dbg !4080
  %488 = load float* %487, align 4, !dbg !4080, !tbaa !3626
  %489 = fsub float %488, %484, !dbg !4081
  %490 = fpext float %489 to double, !dbg !4082
  %491 = fdiv double %486, %490, !dbg !4083
  call void @llvm.dbg.value(metadata double %491, i64 0, metadata !1485, metadata !2666), !dbg !4060
  %492 = fsub double 1.000000e+00, %491, !dbg !4084
  call void @llvm.dbg.value(metadata double %492, i64 0, metadata !1486, metadata !2666), !dbg !4085
  %493 = getelementptr inbounds [5 x float]* %C2, i64 0, i64 0, !dbg !4086
  %494 = fptrunc double %491 to float, !dbg !4087
  tail call void @llvm.dbg.value(metadata float* %493, i64 0, metadata !1962, metadata !2666), !dbg !4088
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1963, metadata !2666), !dbg !4090
  tail call void @llvm.dbg.value(metadata float %494, i64 0, metadata !1964, metadata !2666), !dbg !4091
  %495 = load float* %Result_Colour, align 4, !dbg !4092, !tbaa !3269
  %496 = fmul float %495, %494, !dbg !4093
  store float %496, float* %493, align 16, !dbg !4094, !tbaa !3269
  %497 = getelementptr inbounds float* %Result_Colour, i64 1, !dbg !4095
  %498 = load float* %497, align 4, !dbg !4095, !tbaa !3269
  %499 = fmul float %494, %498, !dbg !4096
  %500 = getelementptr inbounds [5 x float]* %C2, i64 0, i64 1, !dbg !4097
  store float %499, float* %500, align 4, !dbg !4098, !tbaa !3269
  %501 = getelementptr inbounds float* %Result_Colour, i64 2, !dbg !4099
  %502 = load float* %501, align 4, !dbg !4099, !tbaa !3269
  %503 = fmul float %494, %502, !dbg !4100
  %504 = getelementptr inbounds [5 x float]* %C2, i64 0, i64 2, !dbg !4101
  store float %503, float* %504, align 8, !dbg !4102, !tbaa !3269
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Cur, i64 0, metadata !1484, metadata !2666), !dbg !3696
  %505 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %476, i64 0, i32 2, !dbg !4103
  %506 = bitcast %union.anon* %505 to %"struct.pov::Texture_Struct"**, !dbg !4104
  %507 = load %"struct.pov::Texture_Struct"** %506, align 8, !dbg !4104, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %493, %"struct.pov::Texture_Struct"* %507, double* %469, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !4105
  %508 = fptrunc double %492 to float, !dbg !4106
  tail call void @llvm.dbg.value(metadata float* %493, i64 0, metadata !1962, metadata !2666), !dbg !4107
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1963, metadata !2666), !dbg !4109
  tail call void @llvm.dbg.value(metadata float %508, i64 0, metadata !1964, metadata !2666), !dbg !4110
  %509 = load float* %Result_Colour, align 4, !dbg !4111, !tbaa !3269
  %510 = fmul float %508, %509, !dbg !4112
  store float %510, float* %493, align 16, !dbg !4113, !tbaa !3269
  %511 = load float* %497, align 4, !dbg !4114, !tbaa !3269
  %512 = fmul float %508, %511, !dbg !4115
  store float %512, float* %500, align 4, !dbg !4116, !tbaa !3269
  %513 = load float* %501, align 4, !dbg !4117, !tbaa !3269
  %514 = fmul float %508, %513, !dbg !4118
  store float %514, float* %504, align 8, !dbg !4119, !tbaa !3269
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Prev, i64 0, metadata !1483, metadata !2666), !dbg !4061
  %515 = load %"struct.pov::Blend_Map_Entry"** %Prev, align 8, !dbg !4120, !tbaa !2657
  %516 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %515, i64 0, i32 2, !dbg !4121
  %517 = bitcast %union.anon* %516 to %"struct.pov::Texture_Struct"**, !dbg !4122
  %518 = load %"struct.pov::Texture_Struct"** %517, align 8, !dbg !4122, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %493, %"struct.pov::Texture_Struct"* %518, double* %469, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !4123
  br label %569

; <label>:519                                     ; preds = %468
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Cur, i64 0, metadata !1484, metadata !2666), !dbg !3696
  %520 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !4124, !tbaa !2657
  %521 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %520, i64 0, i32 2, !dbg !4126
  %522 = bitcast %union.anon* %521 to %"struct.pov::Texture_Struct"**, !dbg !4127
  %523 = load %"struct.pov::Texture_Struct"** %522, align 8, !dbg !4127, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %Result_Colour, %"struct.pov::Texture_Struct"* %523, double* %469, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !4128
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Prev, i64 0, metadata !1483, metadata !2666), !dbg !4061
  %524 = load %"struct.pov::Blend_Map_Entry"** %Prev, align 8, !dbg !4129, !tbaa !2657
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Cur, i64 0, metadata !1484, metadata !2666), !dbg !3696
  %525 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !4131, !tbaa !2657
  %526 = icmp eq %"struct.pov::Blend_Map_Entry"* %524, %525, !dbg !4132
  br i1 %526, label %569, label %527, !dbg !4133

; <label>:527                                     ; preds = %519
  %528 = getelementptr inbounds [5 x float]* %C2, i64 0, i64 0, !dbg !4134
  %529 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %524, i64 0, i32 2, !dbg !4136
  %530 = bitcast %union.anon* %529 to %"struct.pov::Texture_Struct"**, !dbg !4137
  %531 = load %"struct.pov::Texture_Struct"** %530, align 8, !dbg !4137, !tbaa !2657
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %528, %"struct.pov::Texture_Struct"* %531, double* %469, double* %Raw_Normal, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 %Shadow_Flag) #6, !dbg !4138
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Prev, i64 0, metadata !1483, metadata !2666), !dbg !4061
  %532 = load %"struct.pov::Blend_Map_Entry"** %Prev, align 8, !dbg !4139, !tbaa !2657
  %533 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %532, i64 0, i32 0, !dbg !4140
  %534 = load float* %533, align 4, !dbg !4140, !tbaa !3626
  %535 = fpext float %534 to double, !dbg !4139
  %536 = fsub double %471, %535, !dbg !4141
  call void @llvm.dbg.value(metadata %"struct.pov::Blend_Map_Entry"** %Cur, i64 0, metadata !1484, metadata !2666), !dbg !3696
  %537 = load %"struct.pov::Blend_Map_Entry"** %Cur, align 8, !dbg !4142, !tbaa !2657
  %538 = getelementptr inbounds %"struct.pov::Blend_Map_Entry"* %537, i64 0, i32 0, !dbg !4143
  %539 = load float* %538, align 4, !dbg !4143, !tbaa !3626
  %540 = fsub float %539, %534, !dbg !4144
  %541 = fpext float %540 to double, !dbg !4145
  %542 = fdiv double %536, %541, !dbg !4146
  call void @llvm.dbg.value(metadata double %542, i64 0, metadata !1485, metadata !2666), !dbg !4060
  %543 = fsub double 1.000000e+00, %542, !dbg !4147
  call void @llvm.dbg.value(metadata double %543, i64 0, metadata !1486, metadata !2666), !dbg !4085
  %544 = fptrunc double %542 to float, !dbg !4148
  %545 = fptrunc double %543 to float, !dbg !4149
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1967, metadata !2666), !dbg !4150
  tail call void @llvm.dbg.value(metadata float %544, i64 0, metadata !1968, metadata !2666), !dbg !4152
  tail call void @llvm.dbg.value(metadata float* %Result_Colour, i64 0, metadata !1969, metadata !2666), !dbg !4153
  tail call void @llvm.dbg.value(metadata float %545, i64 0, metadata !1970, metadata !2666), !dbg !4154
  tail call void @llvm.dbg.value(metadata float* %528, i64 0, metadata !1971, metadata !2666), !dbg !4155
  %546 = bitcast float* %Result_Colour to <4 x float>*, !dbg !4156
  %547 = load <4 x float>* %546, align 4, !dbg !4156, !tbaa !3269
  %548 = insertelement <4 x float> undef, float %544, i32 0, !dbg !4157
  %549 = insertelement <4 x float> %548, float %544, i32 1, !dbg !4157
  %550 = insertelement <4 x float> %549, float %544, i32 2, !dbg !4157
  %551 = insertelement <4 x float> %550, float %544, i32 3, !dbg !4157
  %552 = fmul <4 x float> %547, %551, !dbg !4157
  %553 = bitcast [5 x float]* %C2 to <4 x float>*, !dbg !4158
  %554 = load <4 x float>* %553, align 16, !dbg !4158, !tbaa !3269
  %555 = insertelement <4 x float> undef, float %545, i32 0, !dbg !4159
  %556 = insertelement <4 x float> %555, float %545, i32 1, !dbg !4159
  %557 = insertelement <4 x float> %556, float %545, i32 2, !dbg !4159
  %558 = insertelement <4 x float> %557, float %545, i32 3, !dbg !4159
  %559 = fmul <4 x float> %554, %558, !dbg !4159
  %560 = fadd <4 x float> %552, %559, !dbg !4160
  %561 = bitcast float* %Result_Colour to <4 x float>*, !dbg !4161
  store <4 x float> %560, <4 x float>* %561, align 4, !dbg !4161, !tbaa !3269
  %562 = getelementptr inbounds float* %Result_Colour, i64 4, !dbg !4162
  %563 = load float* %562, align 4, !dbg !4162, !tbaa !3269
  %564 = fmul float %544, %563, !dbg !4163
  %565 = getelementptr inbounds [5 x float]* %C2, i64 0, i64 4, !dbg !4164
  %566 = load float* %565, align 16, !dbg !4164, !tbaa !3269
  %567 = fmul float %545, %566, !dbg !4165
  %568 = fadd float %564, %567, !dbg !4166
  store float %568, float* %562, align 4, !dbg !4167, !tbaa !3269
  br label %569, !dbg !4168

; <label>:569                                     ; preds = %519, %482, %478, %527, %29, %117, %135, %466, %_ZN3povL16average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, %_ZN3povL26backtrace_average_texturesEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi.exit, %_ZN3povL22compute_shadow_textureEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEPNS_10istk_entryE.exit, %465, %142
  br i1 %decWarpNormalTextures.0, label %570, label %573, !dbg !4169

; <label>:570                                     ; preds = %569
  %571 = load i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !4170, !tbaa !2664
  %572 = add nsw i32 %571, -1, !dbg !4170
  store i32 %572, i32* @_ZN3pov18warpNormalTexturesE, align 4, !dbg !4170, !tbaa !2664
  br label %573, !dbg !4172

; <label>:573                                     ; preds = %570, %569
  ret void, !dbg !4173
}
