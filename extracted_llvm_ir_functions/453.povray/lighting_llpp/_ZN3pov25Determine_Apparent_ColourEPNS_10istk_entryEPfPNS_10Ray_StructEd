define void @_ZN3pov25Determine_Apparent_ColourEPNS_10istk_entryEPfPNS_10Ray_StructEd(%"struct.pov::istk_entry"* %Ray_Intersection, float* nocapture %Colour, %"struct.pov::Ray_Struct"* %Ray, double %Weight) #0 {
  %C1 = alloca [5 x float], align 16
  %Raw_Normal = alloca [3 x double], align 16
  %IPoint = alloca [3 x double], align 16
  %UV_Coords = alloca [2 x double], align 16
  tail call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, metadata !1243, metadata !2666), !dbg !3099
  tail call void @llvm.dbg.value(metadata float* %Colour, i64 0, metadata !1244, metadata !2666), !dbg !3100
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Ray, i64 0, metadata !1245, metadata !2666), !dbg !3101
  tail call void @llvm.dbg.value(metadata double %Weight, i64 0, metadata !1246, metadata !2666), !dbg !3102
  tail call void @llvm.dbg.value(metadata double* null, i64 0, metadata !1249, metadata !2666), !dbg !3103
  tail call void @llvm.dbg.declare(metadata [5 x float]* %C1, metadata !1251, metadata !2666), !dbg !3104
  tail call void @llvm.dbg.declare(metadata [3 x double]* %Raw_Normal, metadata !1252, metadata !2666), !dbg !3105
  tail call void @llvm.dbg.declare(metadata [3 x double]* %IPoint, metadata !1253, metadata !2666), !dbg !3106
  tail call void @llvm.dbg.declare(metadata [2 x double]* %UV_Coords, metadata !1254, metadata !2666), !dbg !3107
  tail call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"** null, i64 0, metadata !1255, metadata !2666), !dbg !3108
  tail call void @llvm.dbg.value(metadata %"struct.pov::Light_Tested_Struct"* null, i64 0, metadata !1257, metadata !2666), !dbg !3109
  %1 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 0, !dbg !3110
  %2 = load double* %1, align 8, !dbg !3110, !tbaa !3111
  %3 = load double* @_ZN3pov11Total_DepthE, align 8, !dbg !3113, !tbaa !3114
  %4 = fadd double %2, %3, !dbg !3113
  store double %4, double* @_ZN3pov11Total_DepthE, align 8, !dbg !3113, !tbaa !3114
  %5 = getelementptr inbounds [3 x double]* %IPoint, i64 0, i64 0, !dbg !3115
  %6 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 1, i64 0, !dbg !3116
  tail call void @llvm.dbg.value(metadata double* %5, i64 0, metadata !1348, metadata !2666), !dbg !3117
  tail call void @llvm.dbg.value(metadata double* %6, i64 0, metadata !1349, metadata !2666), !dbg !3119
  %7 = bitcast [3 x double]* %IPoint to i64*, !dbg !3120
  %8 = bitcast double* %6 to <2 x i64>*, !dbg !3121
  %9 = load <2 x i64>* %8, align 8, !dbg !3121, !tbaa !3114
  %10 = getelementptr inbounds [3 x double]* %IPoint, i64 0, i64 1, !dbg !3122
  %11 = bitcast double* %10 to i64*, !dbg !3123
  %12 = bitcast [3 x double]* %IPoint to <2 x i64>*, !dbg !3120
  store <2 x i64> %9, <2 x i64>* %12, align 16, !dbg !3120, !tbaa !3114
  %13 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 1, i64 2, !dbg !3124
  %14 = bitcast double* %13 to i64*, !dbg !3124
  %15 = load i64* %14, align 8, !dbg !3124, !tbaa !3114
  %16 = getelementptr inbounds [3 x double]* %IPoint, i64 0, i64 2, !dbg !3125
  %17 = bitcast double* %16 to i64*, !dbg !3126
  store i64 %15, i64* %17, align 16, !dbg !3126, !tbaa !3114
  %18 = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !3127, !tbaa !2676
  %19 = add nsw i64 %18, 1, !dbg !3127
  store i64 %19, i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !3127, !tbaa !2676
  %20 = load i64* @_ZN3pov17MaxLightPoolDepthE, align 8, !dbg !3128, !tbaa !2676
  %21 = icmp slt i64 %19, %20, !dbg !3130
  br i1 %21, label %24, label %22, !dbg !3131

; <label>:22                                      ; preds = %0
  %23 = shl nsw i64 %20, 1, !dbg !3132
  tail call void @_ZN3pov22ResizeLightMallocPoolsEl(i64 %23) #6, !dbg !3134
  %.pre = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !3135, !tbaa !2676
  br label %24, !dbg !3136

; <label>:24                                      ; preds = %0, %22
  %25 = phi i64 [ %19, %0 ], [ %.pre, %22 ]
  %26 = load %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !3137, !tbaa !2657
  %27 = getelementptr inbounds %"struct.pov::Light_Tested_Struct"** %26, i64 %25, !dbg !3137
  %28 = bitcast %"struct.pov::Light_Tested_Struct"** %27 to i64*, !dbg !3137
  %29 = load i64* %28, align 8, !dbg !3137, !tbaa !2657
  store i64 %29, i64* bitcast (%"struct.pov::Light_Tested_Struct"** @_ZN3pov10Light_ListE to i64*), align 8, !dbg !3138, !tbaa !2657
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1247, metadata !2666), !dbg !3139
  %30 = load i32* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 3), align 8, !dbg !3140, !tbaa !2671
  %31 = icmp sgt i32 %30, 0, !dbg !3143
  %32 = inttoptr i64 %29 to %"struct.pov::Light_Tested_Struct"*
  br i1 %31, label %.lr.ph4, label %._crit_edge5, !dbg !3144

.lr.ph4:                                          ; preds = %24
  %33 = sext i32 %30 to i64, !dbg !3144
  br label %34, !dbg !3144

; <label>:34                                      ; preds = %.lr.ph4, %34
  %indvars.iv6 = phi i64 [ 0, %.lr.ph4 ], [ %indvars.iv.next7, %34 ]
  %35 = getelementptr inbounds %"struct.pov::Light_Tested_Struct"* %32, i64 %indvars.iv6, i32 0, !dbg !3145
  store i32 0, i32* %35, align 4, !dbg !3147, !tbaa !3148
  %indvars.iv.next7 = add nuw nsw i64 %indvars.iv6, 1, !dbg !3144
  %36 = icmp slt i64 %indvars.iv.next7, %33, !dbg !3143
  br i1 %36, label %34, label %._crit_edge5, !dbg !3144

._crit_edge5:                                     ; preds = %34, %24
  %37 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 5, !dbg !3150
  %38 = load %"struct.pov::Object_Struct"** %37, align 8, !dbg !3150, !tbaa !3151
  %39 = getelementptr inbounds %"struct.pov::Object_Struct"* %38, i64 0, i32 0, !dbg !3150
  %40 = load %"struct.pov::Method_Struct"** %39, align 8, !dbg !3150, !tbaa !3152
  %41 = getelementptr inbounds %"struct.pov::Method_Struct"* %40, i64 0, i32 2, !dbg !3150
  %42 = load void (double*, %"struct.pov::Object_Struct"*, %"struct.pov::istk_entry"*)** %41, align 8, !dbg !3150, !tbaa !3156
  %43 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 0, !dbg !3150
  call void %42(double* %43, %"struct.pov::Object_Struct"* %38, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3150
  %44 = load %"struct.pov::Object_Struct"** %37, align 8, !dbg !3158, !tbaa !3151
  %45 = getelementptr inbounds %"struct.pov::Object_Struct"* %44, i64 0, i32 13, !dbg !3158
  %46 = load i32* %45, align 4, !dbg !3158, !tbaa !3160
  %47 = and i32 %46, 4, !dbg !3158
  %48 = icmp eq i32 %47, 0, !dbg !3158
  %.pre9 = load double* %43, align 16, !dbg !3161, !tbaa !3114
  br i1 %48, label %._crit_edge8, label %51, !dbg !3163

._crit_edge8:                                     ; preds = %._crit_edge5
  %.phi.trans.insert = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 1
  %.phi.trans.insert11 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 2
  %49 = bitcast double* %.phi.trans.insert to <2 x double>*, !dbg !3164
  %50 = load <2 x double>* %49, align 8, !dbg !3164, !tbaa !3114
  br label %59, !dbg !3163

; <label>:51                                      ; preds = %._crit_edge5
  %52 = fsub double -0.000000e+00, %.pre9, !dbg !3165
  store double %52, double* %43, align 16, !dbg !3167, !tbaa !3114
  %53 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 1, !dbg !3168
  %54 = getelementptr inbounds [3 x double]* %Raw_Normal, i64 0, i64 2, !dbg !3169
  %55 = bitcast double* %53 to <2 x double>*, !dbg !3168
  %56 = load <2 x double>* %55, align 8, !dbg !3168, !tbaa !3114
  %57 = fsub <2 x double> <double -0.000000e+00, double -0.000000e+00>, %56, !dbg !3170
  %58 = bitcast double* %53 to <2 x double>*, !dbg !3171
  store <2 x double> %57, <2 x double>* %58, align 8, !dbg !3171, !tbaa !3114
  br label %59, !dbg !3172

; <label>:59                                      ; preds = %._crit_edge8, %51
  %.pre-phi16 = phi double* [ %.phi.trans.insert11, %._crit_edge8 ], [ %54, %51 ], !dbg !3173
  %.pre-phi = phi double* [ %.phi.trans.insert, %._crit_edge8 ], [ %53, %51 ], !dbg !3164
  %60 = phi double [ %.pre9, %._crit_edge8 ], [ %52, %51 ]
  %61 = phi <2 x double> [ %50, %._crit_edge8 ], [ %57, %51 ]
  %62 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !3174
  tail call void @llvm.dbg.value(metadata double* %43, i64 0, metadata !1358, metadata !2666), !dbg !3175
  tail call void @llvm.dbg.value(metadata double* %62, i64 0, metadata !1359, metadata !2666), !dbg !3176
  %63 = load double* %62, align 8, !dbg !3177, !tbaa !3114
  %64 = fmul double %60, %63, !dbg !3178
  %65 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !3179
  %66 = load double* %65, align 8, !dbg !3179, !tbaa !3114
  %67 = extractelement <2 x double> %61, i32 0, !dbg !3180
  %68 = fmul double %67, %66, !dbg !3180
  %69 = fadd double %64, %68, !dbg !3181
  %70 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !3182
  %71 = load double* %70, align 8, !dbg !3182, !tbaa !3114
  %72 = extractelement <2 x double> %61, i32 1, !dbg !3183
  %73 = fmul double %72, %71, !dbg !3183
  %74 = fadd double %69, %73, !dbg !3184
  call void @llvm.dbg.value(metadata double %74, i64 0, metadata !1357, metadata !2666), !dbg !3185
  call void @llvm.dbg.value(metadata double %74, i64 0, metadata !1250, metadata !2666), !dbg !3186
  call void @llvm.dbg.value(metadata double %74, i64 0, metadata !1250, metadata !2666), !dbg !3186
  call void @llvm.dbg.value(metadata double %74, i64 0, metadata !1250, metadata !2666), !dbg !3186
  %75 = fcmp ogt double %74, 0.000000e+00, !dbg !3187
  br i1 %75, label %76, label %85, !dbg !3189

; <label>:76                                      ; preds = %59
  tail call void @llvm.dbg.value(metadata double* %43, i64 0, metadata !1364, metadata !2666), !dbg !3190
  tail call void @llvm.dbg.value(metadata double -1.000000e+00, i64 0, metadata !1365, metadata !2666), !dbg !3193
  %77 = fsub double -0.000000e+00, %60, !dbg !3194
  store double %77, double* %43, align 16, !dbg !3194, !tbaa !3114
  %78 = load double* %.pre-phi, align 8, !dbg !3195, !tbaa !3114
  %79 = load double* %.pre-phi16, align 16, !dbg !3196, !tbaa !3114
  %80 = insertelement <2 x double> undef, double %78, i32 0, !dbg !3195
  %81 = insertelement <2 x double> %80, double %79, i32 1, !dbg !3195
  %82 = fsub <2 x double> <double -0.000000e+00, double -0.000000e+00>, %81, !dbg !3195
  %83 = extractelement <2 x double> %82, i32 0, !dbg !3195
  store double %83, double* %.pre-phi, align 8, !dbg !3195, !tbaa !3114
  %84 = extractelement <2 x double> %82, i32 1, !dbg !3196
  store double %84, double* %.pre-phi16, align 16, !dbg !3196, !tbaa !3114
  br label %85, !dbg !3197

; <label>:85                                      ; preds = %76, %59
  %.in18 = phi double [ %77, %76 ], [ %60, %59 ]
  %86 = phi <2 x double> [ %82, %76 ], [ %61, %59 ]
  %87 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 2, i64 0, !dbg !3198
  tail call void @llvm.dbg.value(metadata double* %87, i64 0, metadata !1348, metadata !2666), !dbg !3199
  tail call void @llvm.dbg.value(metadata double* %43, i64 0, metadata !1349, metadata !2666), !dbg !3201
  store double %.in18, double* %87, align 8, !dbg !3202, !tbaa !3114
  %88 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 2, i64 1, !dbg !3203
  %89 = bitcast double* %88 to <2 x double>*, !dbg !3204
  store <2 x double> %86, <2 x double>* %89, align 8, !dbg !3204, !tbaa !3114
  %90 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 3, i64 0, !dbg !3205
  tail call void @llvm.dbg.value(metadata double* %90, i64 0, metadata !1348, metadata !2666), !dbg !3206
  tail call void @llvm.dbg.value(metadata double* %43, i64 0, metadata !1349, metadata !2666), !dbg !3208
  store double %.in18, double* %90, align 8, !dbg !3209, !tbaa !3114
  %91 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 3, i64 1, !dbg !3210
  %92 = bitcast double* %91 to <2 x double>*, !dbg !3211
  store <2 x double> %86, <2 x double>* %92, align 8, !dbg !3211, !tbaa !3114
  %93 = and i32 %46, 8192, !dbg !3212
  %94 = icmp eq i32 %93, 0, !dbg !3212
  br i1 %94, label %110, label %95, !dbg !3214

; <label>:95                                      ; preds = %85
  %96 = getelementptr inbounds %"struct.pov::Object_Struct"* %44, i64 0, i32 0, !dbg !3215
  %97 = load %"struct.pov::Method_Struct"** %96, align 8, !dbg !3215, !tbaa !3152
  %98 = getelementptr inbounds %"struct.pov::Method_Struct"* %97, i64 0, i32 3, !dbg !3215
  %99 = load void (double*, %"struct.pov::Object_Struct"*, %"struct.pov::istk_entry"*)** %98, align 8, !dbg !3215, !tbaa !3217
  %100 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 0, !dbg !3215
  call void %99(double* %100, %"struct.pov::Object_Struct"* %44, %"struct.pov::istk_entry"* %Ray_Intersection) #6, !dbg !3215
  %101 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 4, i64 0, !dbg !3218
  tail call void @llvm.dbg.value(metadata double* %101, i64 0, metadata !1368, metadata !2666), !dbg !3219
  tail call void @llvm.dbg.value(metadata double* %100, i64 0, metadata !1369, metadata !2666), !dbg !3221
  %102 = bitcast [2 x double]* %UV_Coords to i64*, !dbg !3222
  %103 = load i64* %102, align 16, !dbg !3222, !tbaa !3114
  %104 = bitcast double* %101 to i64*, !dbg !3223
  store i64 %103, i64* %104, align 8, !dbg !3223, !tbaa !3114
  %105 = getelementptr inbounds [2 x double]* %UV_Coords, i64 0, i64 1, !dbg !3224
  %106 = bitcast double* %105 to i64*, !dbg !3224
  %107 = load i64* %106, align 8, !dbg !3224, !tbaa !3114
  %108 = getelementptr inbounds %"struct.pov::istk_entry"* %Ray_Intersection, i64 0, i32 4, i64 1, !dbg !3225
  %109 = bitcast double* %108 to i64*, !dbg !3226
  store i64 %107, i64* %109, align 8, !dbg !3226, !tbaa !3114
  %.pre13 = load %"struct.pov::Object_Struct"** %37, align 8, !dbg !3227, !tbaa !3151
  %.phi.trans.insert14 = getelementptr inbounds %"struct.pov::Object_Struct"* %.pre13, i64 0, i32 13
  %.pre15 = load i32* %.phi.trans.insert14, align 4, !dbg !3227, !tbaa !3160
  br label %110, !dbg !3229

; <label>:110                                     ; preds = %85, %95
  %111 = phi i64 [ undef, %85 ], [ %107, %95 ]
  %112 = phi i64 [ undef, %85 ], [ %103, %95 ]
  %113 = phi i32 [ %46, %85 ], [ %.pre15, %95 ]
  %114 = and i32 %113, 8192, !dbg !3227
  %115 = icmp eq i32 %114, 0, !dbg !3227
  br i1 %115, label %117, label %116, !dbg !3230

; <label>:116                                     ; preds = %110
  store i64 %112, i64* %7, align 16, !dbg !3231, !tbaa !3114
  store i64 %111, i64* %11, align 8, !dbg !3233, !tbaa !3114
  store double 0.000000e+00, double* %16, align 16, !dbg !3234, !tbaa !3114
  br label %117, !dbg !3235

; <label>:117                                     ; preds = %110, %116
  %118 = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !3236, !tbaa !2676
  %119 = load double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !3237, !tbaa !2657
  %120 = getelementptr inbounds double** %119, i64 %118, !dbg !3237
  %121 = bitcast double** %120 to i64*, !dbg !3237
  %122 = load i64* %121, align 8, !dbg !3237, !tbaa !2657
  store i64 %122, i64* bitcast (double** @_ZN3pov11Weight_ListE to i64*), align 8, !dbg !3238, !tbaa !2657
  %123 = load %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !3239, !tbaa !2657
  %124 = getelementptr inbounds %"struct.pov::Texture_Struct"*** %123, i64 %118, !dbg !3239
  %125 = bitcast %"struct.pov::Texture_Struct"*** %124 to i64*, !dbg !3239
  %126 = load i64* %125, align 8, !dbg !3239, !tbaa !2657
  store i64 %126, i64* bitcast (%"struct.pov::Texture_Struct"*** @_ZN3pov12Texture_ListE to i64*), align 8, !dbg !3240, !tbaa !2657
  %127 = call fastcc i32 @_ZN3povL19create_texture_listEPNS_10istk_entryEd(%"struct.pov::istk_entry"* %Ray_Intersection, double %74) #6, !dbg !3241
  call void @llvm.dbg.value(metadata i32 %127, i64 0, metadata !1248, metadata !2666), !dbg !3242
  store i32 -1, i32* @_ZN3pov22photonsAlreadyGatheredE, align 4, !dbg !3243, !tbaa !2664
  call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1247, metadata !2666), !dbg !3139
  %128 = icmp sgt i32 %127, 0, !dbg !3244
  br i1 %128, label %.lr.ph, label %._crit_edge, !dbg !3247

.lr.ph:                                           ; preds = %117
  %129 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 0, !dbg !3248
  %130 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 1, !dbg !3252
  %131 = getelementptr inbounds float* %Colour, i64 1, !dbg !3253
  %132 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 2, !dbg !3254
  %133 = getelementptr inbounds float* %Colour, i64 2, !dbg !3255
  %134 = getelementptr inbounds [5 x float]* %C1, i64 0, i64 4, !dbg !3256
  %135 = getelementptr inbounds float* %Colour, i64 4, !dbg !3257
  %136 = add i32 %127, -1, !dbg !3247
  br label %137, !dbg !3247

; <label>:137                                     ; preds = %194, %.lr.ph
  %indvars.iv = phi i64 [ 0, %.lr.ph ], [ %indvars.iv.next, %194 ]
  %138 = load double** @_ZN3pov11Weight_ListE, align 8, !dbg !3258, !tbaa !2657
  %139 = getelementptr inbounds double* %138, i64 %indvars.iv, !dbg !3258
  %140 = load double* %139, align 8, !dbg !3258, !tbaa !3114
  %141 = load double* @_ZN3pov11ADC_BailoutE, align 8, !dbg !3260, !tbaa !3114
  %142 = fcmp olt double %140, %141, !dbg !3261
  br i1 %142, label %194, label %143, !dbg !3262

; <label>:143                                     ; preds = %137
  %144 = load %"struct.pov::Texture_Struct"*** @_ZN3pov12Texture_ListE, align 8, !dbg !3263, !tbaa !2657
  %145 = getelementptr inbounds %"struct.pov::Texture_Struct"** %144, i64 %indvars.iv, !dbg !3263
  %146 = load %"struct.pov::Texture_Struct"** %145, align 8, !dbg !3263, !tbaa !2657
  call void @llvm.dbg.value(metadata %"struct.pov::Texture_Struct"* %146, i64 0, metadata !1256, metadata !2666), !dbg !3264
  %147 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !3265, !tbaa !2664
  %148 = icmp eq i32 %147, 0, !dbg !3265
  br i1 %148, label %162, label %149, !dbg !3266

; <label>:149                                     ; preds = %143
  %150 = load float* %Colour, align 4, !dbg !3267, !tbaa !3269
  %151 = fpext float %150 to double, !dbg !3267
  %152 = fmul double %140, %151, !dbg !3270
  %153 = fptrunc double %152 to float, !dbg !3267
  store float %153, float* %129, align 16, !dbg !3271, !tbaa !3269
  %154 = load float* %131, align 4, !dbg !3272, !tbaa !3269
  %155 = fpext float %154 to double, !dbg !3272
  %156 = fmul double %155, %140, !dbg !3273
  %157 = fptrunc double %156 to float, !dbg !3272
  store float %157, float* %130, align 4, !dbg !3274, !tbaa !3269
  %158 = load float* %133, align 4, !dbg !3275, !tbaa !3269
  %159 = fpext float %158 to double, !dbg !3275
  %160 = fmul double %159, %140, !dbg !3276
  %161 = fptrunc double %160 to float, !dbg !3275
  store float %161, float* %132, align 8, !dbg !3277, !tbaa !3269
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %129, %"struct.pov::Texture_Struct"* %146, double* %5, double* %43, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 0) #6, !dbg !3278
  br label %194, !dbg !3279

; <label>:162                                     ; preds = %143
  call fastcc void @_ZN3povL14do_texture_mapEPfPNS_14Texture_StructEPdS3_PNS_10Ray_StructEdPNS_10istk_entryEi(float* %129, %"struct.pov::Texture_Struct"* %146, double* %5, double* %43, %"struct.pov::Ray_Struct"* %Ray, double %Weight, %"struct.pov::istk_entry"* %Ray_Intersection, i32 0) #6, !dbg !3280
  %163 = load double** @_ZN3pov11Weight_ListE, align 8, !dbg !3281, !tbaa !2657
  %164 = getelementptr inbounds double* %163, i64 %indvars.iv, !dbg !3281
  %165 = load double* %164, align 8, !dbg !3281, !tbaa !3114
  %166 = load float* %129, align 16, !dbg !3282, !tbaa !3269
  %167 = fpext float %166 to double, !dbg !3282
  %168 = fmul double %165, %167, !dbg !3283
  %169 = load float* %Colour, align 4, !dbg !3284, !tbaa !3269
  %170 = fpext float %169 to double, !dbg !3284
  %171 = fadd double %170, %168, !dbg !3284
  %172 = fptrunc double %171 to float, !dbg !3284
  store float %172, float* %Colour, align 4, !dbg !3284, !tbaa !3269
  %173 = load float* %130, align 4, !dbg !3252, !tbaa !3269
  %174 = fpext float %173 to double, !dbg !3252
  %175 = fmul double %165, %174, !dbg !3285
  %176 = load float* %131, align 4, !dbg !3286, !tbaa !3269
  %177 = fpext float %176 to double, !dbg !3286
  %178 = fadd double %177, %175, !dbg !3286
  %179 = fptrunc double %178 to float, !dbg !3286
  store float %179, float* %131, align 4, !dbg !3286, !tbaa !3269
  %180 = load float* %132, align 8, !dbg !3254, !tbaa !3269
  %181 = fpext float %180 to double, !dbg !3254
  %182 = fmul double %165, %181, !dbg !3287
  %183 = load float* %133, align 4, !dbg !3288, !tbaa !3269
  %184 = fpext float %183 to double, !dbg !3288
  %185 = fadd double %184, %182, !dbg !3288
  %186 = fptrunc double %185 to float, !dbg !3288
  store float %186, float* %133, align 4, !dbg !3288, !tbaa !3269
  %187 = load float* %134, align 16, !dbg !3256, !tbaa !3269
  %188 = fpext float %187 to double, !dbg !3256
  %189 = fmul double %165, %188, !dbg !3289
  %190 = load float* %135, align 4, !dbg !3290, !tbaa !3269
  %191 = fpext float %190 to double, !dbg !3290
  %192 = fadd double %191, %189, !dbg !3290
  %193 = fptrunc double %192 to float, !dbg !3290
  store float %193, float* %135, align 4, !dbg !3290, !tbaa !3269
  br label %194

; <label>:194                                     ; preds = %149, %162, %137
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1, !dbg !3247
  %lftr.wideiv = trunc i64 %indvars.iv to i32, !dbg !3247
  %exitcond = icmp eq i32 %lftr.wideiv, %136, !dbg !3247
  br i1 %exitcond, label %._crit_edge, label %137, !dbg !3247

._crit_edge:                                      ; preds = %194, %117
  %195 = load i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !3291, !tbaa !2676
  %196 = add nsw i64 %195, -1, !dbg !3291
  store i64 %196, i64* @_ZN3pov17LightingPoolIndexE, align 8, !dbg !3291, !tbaa !2676
  %197 = load %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !3292, !tbaa !2657
  %198 = getelementptr inbounds %"struct.pov::Light_Tested_Struct"** %197, i64 %196, !dbg !3292
  %199 = bitcast %"struct.pov::Light_Tested_Struct"** %198 to i64*, !dbg !3292
  %200 = load i64* %199, align 8, !dbg !3292, !tbaa !2657
  store i64 %200, i64* bitcast (%"struct.pov::Light_Tested_Struct"** @_ZN3pov10Light_ListE to i64*), align 8, !dbg !3293, !tbaa !2657
  %201 = load double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !3294, !tbaa !2657
  %202 = getelementptr inbounds double** %201, i64 %196, !dbg !3294
  %203 = bitcast double** %202 to i64*, !dbg !3294
  %204 = load i64* %203, align 8, !dbg !3294, !tbaa !2657
  store i64 %204, i64* bitcast (double** @_ZN3pov11Weight_ListE to i64*), align 8, !dbg !3295, !tbaa !2657
  %205 = load %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !3296, !tbaa !2657
  %206 = getelementptr inbounds %"struct.pov::Texture_Struct"*** %205, i64 %196, !dbg !3296
  %207 = bitcast %"struct.pov::Texture_Struct"*** %206 to i64*, !dbg !3296
  %208 = load i64* %207, align 8, !dbg !3296, !tbaa !2657
  store i64 %208, i64* bitcast (%"struct.pov::Texture_Struct"*** @_ZN3pov12Texture_ListE to i64*), align 8, !dbg !3297, !tbaa !2657
  %209 = load double* %1, align 8, !dbg !3298, !tbaa !3111
  %210 = load double* @_ZN3pov11Total_DepthE, align 8, !dbg !3299, !tbaa !3114
  %211 = fsub double %210, %209, !dbg !3299
  store double %211, double* @_ZN3pov11Total_DepthE, align 8, !dbg !3299, !tbaa !3114
  ret void, !dbg !3300
}
