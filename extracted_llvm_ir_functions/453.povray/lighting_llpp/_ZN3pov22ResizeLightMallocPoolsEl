define void @_ZN3pov22ResizeLightMallocPoolsEl(i64 %newSize) #0 {
entry:
  tail call void @llvm.dbg.value(metadata !{i64 %newSize}, i64 0, metadata !1091), !dbg !2656
  %0 = load i32* @_ZN3pov30Number_Of_Textures_And_WeightsE, align 4, !dbg !2657, !tbaa !2301
  %conv = sext i32 %0 to i64, !dbg !2657
  %mul = shl nsw i64 %conv, 3, !dbg !2657
  tail call void @llvm.dbg.value(metadata !{i64 %mul}, i64 0, metadata !1093), !dbg !2657
  tail call void @llvm.dbg.value(metadata !{i64 %mul}, i64 0, metadata !1094), !dbg !2658
  %1 = load double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !2659, !tbaa !2295
  %2 = bitcast double** %1 to i8*, !dbg !2659
  %mul3 = shl i64 %newSize, 3, !dbg !2659
  %call = tail call i8* @_ZN3pov11pov_reallocEPvmPKciS2_(i8* %2, i64 %mul3, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 6182, i8* getelementptr inbounds ([18 x i8]* @.str7, i64 0, i64 0)) #7, !dbg !2659
  %3 = bitcast i8* %call to double**, !dbg !2659
  store double** %3, double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !2659, !tbaa !2295
  %4 = load %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !2660, !tbaa !2295
  %5 = bitcast %"struct.pov::Texture_Struct"*** %4 to i8*, !dbg !2660
  %call5 = tail call i8* @_ZN3pov11pov_reallocEPvmPKciS2_(i8* %5, i64 %mul3, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 6183, i8* getelementptr inbounds ([18 x i8]* @.str7, i64 0, i64 0)) #7, !dbg !2660
  %6 = bitcast i8* %call5 to %"struct.pov::Texture_Struct"***, !dbg !2660
  store %"struct.pov::Texture_Struct"*** %6, %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !2660, !tbaa !2295
  %7 = load %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !2661, !tbaa !2295
  %8 = bitcast %"struct.pov::Light_Tested_Struct"** %7 to i8*, !dbg !2661
  %call7 = tail call i8* @_ZN3pov11pov_reallocEPvmPKciS2_(i8* %8, i64 %mul3, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 6184, i8* getelementptr inbounds ([18 x i8]* @.str7, i64 0, i64 0)) #7, !dbg !2661
  %9 = bitcast i8* %call7 to %"struct.pov::Light_Tested_Struct"**, !dbg !2661
  store %"struct.pov::Light_Tested_Struct"** %9, %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !2661, !tbaa !2295
  %10 = load i64* @_ZN3pov17MaxLightPoolDepthE, align 8, !dbg !2662, !tbaa !2311
  %sext = shl i64 %10, 32, !dbg !2662
  %conv948 = ashr exact i64 %sext, 32, !dbg !2662
  %cmp1049 = icmp slt i64 %conv948, %newSize, !dbg !2662
  br i1 %cmp1049, label %for.body.lr.ph, label %for.end, !dbg !2662

for.body.lr.ph:                                   ; preds = %entry
  %add = shl nsw i64 %conv, 4, !dbg !2664
  %sext52 = shl i64 %10, 32
  %11 = ashr exact i64 %sext52, 32
  br label %for.body, !dbg !2662

for.body:                                         ; preds = %for.body, %for.body.lr.ph
  %indvars.iv = phi i64 [ %11, %for.body.lr.ph ], [ %indvars.iv.next, %for.body ]
  %call11 = tail call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 6188, i8* getelementptr inbounds ([18 x i8]* @.str7, i64 0, i64 0)) #7, !dbg !2666
  %12 = bitcast i8* %call11 to double*, !dbg !2666
  %13 = load double*** @_ZN3pov14WeightListPoolE, align 8, !dbg !2666, !tbaa !2295
  %arrayidx = getelementptr inbounds double** %13, i64 %indvars.iv, !dbg !2666
  store double* %12, double** %arrayidx, align 8, !dbg !2666, !tbaa !2295
  %call12 = tail call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 6189, i8* getelementptr inbounds ([18 x i8]* @.str7, i64 0, i64 0)) #7, !dbg !2667
  %14 = bitcast i8* %call12 to %"struct.pov::Texture_Struct"**, !dbg !2667
  %15 = load %"struct.pov::Texture_Struct"**** @_ZN3pov15TextureListPoolE, align 8, !dbg !2667, !tbaa !2295
  %arrayidx14 = getelementptr inbounds %"struct.pov::Texture_Struct"*** %15, i64 %indvars.iv, !dbg !2667
  store %"struct.pov::Texture_Struct"** %14, %"struct.pov::Texture_Struct"*** %arrayidx14, align 8, !dbg !2667, !tbaa !2295
  tail call void @llvm.dbg.value(metadata !2354, i64 0, metadata !2668), !dbg !2670
  tail call void @llvm.dbg.value(metadata !2358, i64 0, metadata !2671), !dbg !2670
  %16 = load i32* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 3), align 8, !dbg !2672, !tbaa !2301
  %cmp.i = icmp sgt i32 %16, 1, !dbg !2672
  %17 = sext i32 %16 to i64, !dbg !2669
  %.op = mul i64 %17, 24, !dbg !2669
  %mul17 = select i1 %cmp.i, i64 %.op, i64 24, !dbg !2669
  %call18 = tail call i8* @_ZN3pov10pov_mallocEmPKciS1_(i64 %mul17, i8* getelementptr inbounds ([57 x i8]* @.str, i64 0, i64 0), i32 6190, i8* getelementptr inbounds ([18 x i8]* @.str7, i64 0, i64 0)) #7, !dbg !2669
  %18 = bitcast i8* %call18 to %"struct.pov::Light_Tested_Struct"*, !dbg !2669
  %19 = load %"struct.pov::Light_Tested_Struct"*** @_ZN3pov13LightListPoolE, align 8, !dbg !2669, !tbaa !2295
  %arrayidx20 = getelementptr inbounds %"struct.pov::Light_Tested_Struct"** %19, i64 %indvars.iv, !dbg !2669
  store %"struct.pov::Light_Tested_Struct"* %18, %"struct.pov::Light_Tested_Struct"** %arrayidx20, align 8, !dbg !2669, !tbaa !2295
  tail call void @llvm.dbg.value(metadata !2354, i64 0, metadata !2673), !dbg !2675
  tail call void @llvm.dbg.value(metadata !2358, i64 0, metadata !2676), !dbg !2675
  %20 = load i32* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 3), align 8, !dbg !2677, !tbaa !2301
  %cmp.i41 = icmp sgt i32 %20, 1, !dbg !2677
  %21 = sext i32 %20 to i64, !dbg !2674
  %.op47 = mul i64 %21, 24, !dbg !2674
  %mul26 = select i1 %cmp.i41, i64 %.op47, i64 24, !dbg !2674
  %22 = load i64* @_ZN3pov19TotalMallocPoolSizeE, align 8, !dbg !2674, !tbaa !2311
  %add22 = add i64 %22, %add, !dbg !2664
  %add27 = add i64 %add22, %mul26, !dbg !2674
  %add28 = add i64 %add27, %add, !dbg !2674
  store i64 %add28, i64* @_ZN3pov19TotalMallocPoolSizeE, align 8, !dbg !2674, !tbaa !2311
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !2662
  %exitcond = icmp eq i64 %indvars.iv.next, %newSize, !dbg !2662
  br i1 %exitcond, label %for.end, label %for.body, !dbg !2662

for.end:                                          ; preds = %for.body, %entry
  store i64 %newSize, i64* @_ZN3pov17MaxLightPoolDepthE, align 8, !dbg !2678, !tbaa !2311
  ret void, !dbg !2679
}
