define internal fastcc i32 @_ZN3povL12Refract_GutsEPfdPdS1_S1_dPNS_10Ray_StructES3_dS1_(float* %Colour, double %ior, double* nocapture %IPoint, double* nocapture %Normal, double* nocapture %Local_Normal, double %n, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::Ray_Struct"* %NRay, double %Weight, double* nocapture %Raw_Normal) #0 {
entry:
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1586), !dbg !6302
  tail call void @llvm.dbg.value(metadata !{double %ior}, i64 0, metadata !1587), !dbg !6303
  tail call void @llvm.dbg.value(metadata !{double* %IPoint}, i64 0, metadata !1588), !dbg !6304
  tail call void @llvm.dbg.value(metadata !{double* %Normal}, i64 0, metadata !1589), !dbg !6305
  tail call void @llvm.dbg.value(metadata !{double* %Local_Normal}, i64 0, metadata !1590), !dbg !6305
  tail call void @llvm.dbg.value(metadata !{double %n}, i64 0, metadata !1591), !dbg !6306
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1592), !dbg !6307
  tail call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %NRay}, i64 0, metadata !1593), !dbg !6307
  tail call void @llvm.dbg.value(metadata !{double %Weight}, i64 0, metadata !1594), !dbg !6308
  tail call void @llvm.dbg.value(metadata !{double* %Raw_Normal}, i64 0, metadata !1595), !dbg !6309
  tail call void @llvm.dbg.value(metadata !{double %ior}, i64 0, metadata !6310), !dbg !6312
  %mul.i = fmul double %ior, %ior, !dbg !6313
  tail call void @llvm.dbg.value(metadata !{double %n}, i64 0, metadata !6314), !dbg !6316
  %mul.i18 = fmul double %n, %n, !dbg !6317
  %sub = fadd double %mul.i18, -1.000000e+00, !dbg !6315
  %mul = fmul double %mul.i, %sub, !dbg !6315
  %add = fadd double %mul, 1.000000e+00, !dbg !6315
  tail call void @llvm.dbg.value(metadata !{double %add}, i64 0, metadata !1596), !dbg !6315
  %cmp = fcmp olt double %add, 0.000000e+00, !dbg !6318
  br i1 %cmp, label %if.then, label %if.end, !dbg !6318

if.then:                                          ; preds = %entry
  tail call void @llvm.dbg.value(metadata !6319, i64 0, metadata !6320), !dbg !6323
  %0 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 104), align 8, !dbg !6324, !tbaa !2311
  %inc.i19 = add nsw i64 %0, 1, !dbg !6324
  store i64 %inc.i19, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 104), align 8, !dbg !6324, !tbaa !2311
  tail call fastcc void @_ZN3povL7ReflectEPdPNS_10Ray_StructES0_S0_Pfd(double* %IPoint, %"struct.pov::Ray_Struct"* %Ray, double* %Normal, double* %Raw_Normal, float* %Colour, double %Weight) #7, !dbg !6325
  br label %return, !dbg !6326

if.end:                                           ; preds = %entry
  %mul2 = fmul double %ior, %n, !dbg !6327
  %call3 = tail call double @sqrt(double %add) #8, !dbg !6327
  %sub4 = fsub double %mul2, %call3, !dbg !6327
  tail call void @llvm.dbg.value(metadata !{double %sub4}, i64 0, metadata !1596), !dbg !6327
  %arraydecay = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 1, i64 0, !dbg !6328
  %arraydecay6 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !6328
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay}, i64 0, metadata !6329), !dbg !6330
  tail call void @llvm.dbg.value(metadata !{double %ior}, i64 0, metadata !6331), !dbg !6330
  tail call void @llvm.dbg.value(metadata !{double* %arraydecay6}, i64 0, metadata !6332), !dbg !6330
  tail call void @llvm.dbg.value(metadata !{double %sub4}, i64 0, metadata !6333), !dbg !6330
  tail call void @llvm.dbg.value(metadata !{double* %Local_Normal}, i64 0, metadata !6334), !dbg !6330
  %1 = load double* %arraydecay6, align 8, !dbg !6335, !tbaa !2552
  %mul.i17 = fmul double %1, %ior, !dbg !6335
  %2 = load double* %Local_Normal, align 8, !dbg !6335, !tbaa !2552
  %mul2.i = fmul double %sub4, %2, !dbg !6335
  %add.i = fadd double %mul.i17, %mul2.i, !dbg !6335
  store double %add.i, double* %arraydecay, align 8, !dbg !6335, !tbaa !2552
  %arrayidx4.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !6336
  %3 = load double* %arrayidx4.i, align 8, !dbg !6336, !tbaa !2552
  %mul5.i = fmul double %3, %ior, !dbg !6336
  %arrayidx6.i = getelementptr inbounds double* %Local_Normal, i64 1, !dbg !6336
  %4 = load double* %arrayidx6.i, align 8, !dbg !6336, !tbaa !2552
  %mul7.i = fmul double %sub4, %4, !dbg !6336
  %add8.i = fadd double %mul5.i, %mul7.i, !dbg !6336
  %arrayidx9.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 1, i64 1, !dbg !6336
  store double %add8.i, double* %arrayidx9.i, align 8, !dbg !6336, !tbaa !2552
  %arrayidx10.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !6337
  %5 = load double* %arrayidx10.i, align 8, !dbg !6337, !tbaa !2552
  %mul11.i = fmul double %5, %ior, !dbg !6337
  %arrayidx12.i = getelementptr inbounds double* %Local_Normal, i64 2, !dbg !6337
  %6 = load double* %arrayidx12.i, align 8, !dbg !6337, !tbaa !2552
  %mul13.i = fmul double %sub4, %6, !dbg !6337
  %add14.i = fadd double %mul11.i, %mul13.i, !dbg !6337
  %arrayidx15.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %NRay, i64 0, i32 1, i64 2, !dbg !6337
  store double %add14.i, double* %arrayidx15.i, align 8, !dbg !6337, !tbaa !2552
  tail call void @llvm.dbg.value(metadata !6338, i64 0, metadata !6339), !dbg !6341
  %7 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 102), align 8, !dbg !6342, !tbaa !2311
  %inc.i = add nsw i64 %7, 1, !dbg !6342
  store i64 %inc.i, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 102), align 8, !dbg !6342, !tbaa !2311
  %8 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !6343, !tbaa !2301
  %inc = add nsw i32 %8, 1, !dbg !6343
  store i32 %inc, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !6343, !tbaa !2301
  %call7 = tail call double @_ZN3pov5TraceEPNS_10Ray_StructEPfd(%"struct.pov::Ray_Struct"* %NRay, float* %Colour, double %Weight) #7, !dbg !6344
  %9 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !6345, !tbaa !2301
  %dec = add nsw i32 %9, -1, !dbg !6345
  store i32 %dec, i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !6345, !tbaa !2301
  br label %return, !dbg !6346

return:                                           ; preds = %if.end, %if.then
  %retval.0 = phi i32 [ 1, %if.then ], [ 0, %if.end ]
  ret i32 %retval.0, !dbg !6346
}
