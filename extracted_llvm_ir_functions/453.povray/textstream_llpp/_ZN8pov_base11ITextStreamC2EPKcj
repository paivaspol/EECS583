define void @_ZN8pov_base11ITextStreamC2EPKcj(%"class.pov_base::ITextStream"* %this, i8* %sname, i32 %stype) unnamed_addr #0 align 2 {
entry:
  tail call void @llvm.dbg.value(metadata !{%"class.pov_base::ITextStream"* %this}, i64 0, metadata !348), !dbg !580
  tail call void @llvm.dbg.value(metadata !{i8* %sname}, i64 0, metadata !351), !dbg !580
  tail call void @llvm.dbg.value(metadata !{i32 %stype}, i64 0, metadata !352), !dbg !580
  %0 = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 0, !dbg !581
  store i32 (...)** bitcast (i8** getelementptr inbounds ([4 x i8*]* @_ZTVN8pov_base11ITextStreamE, i64 0, i64 2) to i32 (...)**), i32 (...)*** %0, align 8, !dbg !581, !tbaa !582
  %cmp = icmp eq i8* %sname, null, !dbg !584
  br i1 %cmp, label %if.then, label %if.end, !dbg !584

if.then:                                          ; preds = %entry
  %exception = tail call i8* @__cxa_allocate_exception(i64 4) #7, !dbg !586
  %1 = bitcast i8* %exception to i32*, !dbg !586
  store i32 -1, i32* %1, align 4, !dbg !586, !tbaa !587
  tail call void @__cxa_throw(i8* %exception, i8* bitcast (i8** @_ZTIi to i8*), i8* null) #8, !dbg !586
  unreachable, !dbg !586

if.end:                                           ; preds = %entry
  %call = tail call %"class.pov_base::IStream"* @_ZN8pov_base11New_IStreamEPKcj(i8* %sname, i32 %stype) #9, !dbg !589
  %stream = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 1, !dbg !589
  store %"class.pov_base::IStream"* %call, %"class.pov_base::IStream"** %stream, align 8, !dbg !589, !tbaa !590
  %cmp3 = icmp eq %"class.pov_base::IStream"* %call, null, !dbg !591
  br i1 %cmp3, label %if.then4, label %if.end6, !dbg !591

if.then4:                                         ; preds = %if.end
  %exception5 = tail call i8* @__cxa_allocate_exception(i64 4) #7, !dbg !592
  %2 = bitcast i8* %exception5 to i32*, !dbg !592
  store i32 -8, i32* %2, align 4, !dbg !592, !tbaa !587
  tail call void @__cxa_throw(i8* %exception5, i8* bitcast (i8** @_ZTIi to i8*), i8* null) #8, !dbg !592
  unreachable, !dbg !592

if.end6:                                          ; preds = %if.end
  %call7 = tail call i64 @strlen(i8* %sname) #10, !dbg !593
  %add = add i64 %call7, 1, !dbg !593
  %call8 = tail call noalias i8* @_Znam(i64 %add) #9, !dbg !593
  %filename = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 7, !dbg !593
  store i8* %call8, i8** %filename, align 8, !dbg !593, !tbaa !590
  %call10 = tail call i8* @strcpy(i8* %call8, i8* %sname) #11, !dbg !594
  %lineno = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 8, !dbg !595
  store i32 1, i32* %lineno, align 4, !dbg !595, !tbaa !587
  %bufferoffset = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 3, !dbg !596
  %filelength = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 5, !dbg !597
  %ungetbuffer = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 9, !dbg !598
  %3 = bitcast i64* %bufferoffset to i8*, !dbg !598
  call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 24, i32 8, i1 false), !dbg !599
  store i32 -1, i32* %ungetbuffer, align 4, !dbg !598, !tbaa !587
  %curpos = getelementptr inbounds %"class.pov_base::ITextStream"* %this, i64 0, i32 6, !dbg !600
  store i64 0, i64* %curpos, align 8, !dbg !600, !tbaa !601
  %4 = load %"class.pov_base::IStream"** %stream, align 8, !dbg !602, !tbaa !590
  %5 = getelementptr inbounds %"class.pov_base::IStream"* %4, i64 0, i32 0, !dbg !602
  %call12 = tail call %"class.pov_base::IOBase"* @_ZN8pov_base6IOBase5seekgEmj(%"class.pov_base::IOBase"* %5, i64 0, i32 2) #9, !dbg !602
  %6 = load %"class.pov_base::IStream"** %stream, align 8, !dbg !603, !tbaa !590
  %f.i = getelementptr inbounds %"class.pov_base::IStream"* %6, i64 0, i32 0, i32 2, !dbg !604
  %7 = load %struct._IO_FILE** %f.i, align 8, !dbg !604, !tbaa !590
  %cmp.i = icmp eq %struct._IO_FILE* %7, null, !dbg !604
  br i1 %cmp.i, label %_ZN8pov_base6IOBase5tellgEv.exit, label %cond.false.i, !dbg !604

cond.false.i:                                     ; preds = %if.end6
  %call.i = tail call i64 @ftell(%struct._IO_FILE* %7) #11, !dbg !604
  %.pre = load %"class.pov_base::IStream"** %stream, align 8, !dbg !605, !tbaa !590
  br label %_ZN8pov_base6IOBase5tellgEv.exit, !dbg !604

_ZN8pov_base6IOBase5tellgEv.exit:                 ; preds = %if.end6, %cond.false.i
  %8 = phi %"class.pov_base::IStream"* [ %.pre, %cond.false.i ], [ %6, %if.end6 ]
  %cond.i = phi i64 [ %call.i, %cond.false.i ], [ -1, %if.end6 ], !dbg !604
  store i64 %cond.i, i64* %filelength, align 8, !dbg !603, !tbaa !601
  %9 = getelementptr inbounds %"class.pov_base::IStream"* %8, i64 0, i32 0, !dbg !605
  %call17 = tail call %"class.pov_base::IOBase"* @_ZN8pov_base6IOBase5seekgEmj(%"class.pov_base::IOBase"* %9, i64 0, i32 0) #9, !dbg !605
  tail call void @_ZN8pov_base11ITextStream12RefillBufferEv(%"class.pov_base::ITextStream"* %this) #9, !dbg !606
  ret void, !dbg !607
}
