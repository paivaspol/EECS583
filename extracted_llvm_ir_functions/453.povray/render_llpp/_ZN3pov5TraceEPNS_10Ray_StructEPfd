define double @_ZN3pov5TraceEPNS_10Ray_StructEPfd(%"struct.pov::Ray_Struct"* %Ray, float* %Colour, double %Weight) #0 {
  %Object = alloca %"struct.pov::Object_Struct"*, align 8
  %Best_Intersection = alloca %"struct.pov::istk_entry", align 8
  %New_Intersection = alloca %"struct.pov::istk_entry", align 8
  tail call void @llvm.dbg.value(metadata %"struct.pov::Ray_Struct"* %Ray, i64 0, metadata !1195, metadata !2153), !dbg !4057
  tail call void @llvm.dbg.value(metadata float* %Colour, i64 0, metadata !1196, metadata !2153), !dbg !4058
  tail call void @llvm.dbg.value(metadata double %Weight, i64 0, metadata !1197, metadata !2153), !dbg !4059
  %1 = bitcast %"struct.pov::istk_entry"* %Best_Intersection to i8*, !dbg !4060
  call void @llvm.lifetime.start(i64 200, i8* %1) #4, !dbg !4060
  %2 = bitcast %"struct.pov::istk_entry"* %New_Intersection to i8*, !dbg !4060
  call void @llvm.lifetime.start(i64 200, i8* %2) #4, !dbg !4060
  tail call void @_ZN3pov12Do_CooperateEi(i32 1) #7, !dbg !4061
  tail call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 3), i64 0, metadata !1301, metadata !2153), !dbg !4062
  %3 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 3), align 8, !dbg !4064, !tbaa !2670
  %4 = add nsw i64 %3, 1, !dbg !4064
  store i64 %4, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 3), align 8, !dbg !4064, !tbaa !2670
  %5 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !4065, !tbaa !2144
  %6 = icmp eq i32 %5, 0, !dbg !4065
  br i1 %6, label %7, label %9, !dbg !4067

; <label>:7                                       ; preds = %0
  tail call void @llvm.dbg.value(metadata float* %Colour, i64 0, metadata !1226, metadata !2153), !dbg !4068
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1227, metadata !2153), !dbg !4071
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1228, metadata !2153), !dbg !4072
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1229, metadata !2153), !dbg !4073
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1230, metadata !2153), !dbg !4074
  tail call void @llvm.dbg.value(metadata float 0.000000e+00, i64 0, metadata !1231, metadata !2153), !dbg !4075
  %8 = bitcast float* %Colour to i8*, !dbg !4076
  call void @llvm.memset.p0i8.i64(i8* %8, i8 0, i64 20, i32 4, i1 false), !dbg !4077
  br label %9, !dbg !4076

; <label>:9                                       ; preds = %0, %7
  %10 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4078, !tbaa !2144
  %11 = load i32* @_ZN3pov15Max_Trace_LevelE, align 4, !dbg !4080, !tbaa !2144
  %12 = icmp sgt i32 %10, %11, !dbg !4081
  %13 = load double* @_ZN3pov11ADC_BailoutE, align 8
  %14 = fcmp ogt double %13, %Weight, !dbg !4082
  %or.cond5 = or i1 %12, %14, !dbg !4083
  br i1 %or.cond5, label %15, label %19, !dbg !4083

; <label>:15                                      ; preds = %9
  br i1 %14, label %16, label %120, !dbg !4084

; <label>:16                                      ; preds = %15
  tail call void @llvm.dbg.value(metadata i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 6), i64 0, metadata !1301, metadata !2153), !dbg !4086
  %17 = load i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 6), align 8, !dbg !4090, !tbaa !2670
  %18 = add nsw i64 %17, 1, !dbg !4090
  store i64 %18, i64* getelementptr inbounds ([126 x i64]* @_ZN3pov5statsE, i64 0, i64 6), align 8, !dbg !4090, !tbaa !2670
  br label %120, !dbg !4091

; <label>:19                                      ; preds = %9
  %20 = load i32* @_ZN3pov19Highest_Trace_LevelE, align 4, !dbg !4092, !tbaa !2144
  %21 = icmp sgt i32 %10, %20, !dbg !4094
  br i1 %21, label %22, label %23, !dbg !4095

; <label>:22                                      ; preds = %19
  store i32 %10, i32* @_ZN3pov19Highest_Trace_LevelE, align 4, !dbg !4096, !tbaa !2144
  br label %23, !dbg !4098

; <label>:23                                      ; preds = %22, %19
  tail call void @llvm.dbg.value(metadata i32 0, i64 0, metadata !1199, metadata !2153), !dbg !4099
  %24 = getelementptr inbounds %"struct.pov::istk_entry"* %Best_Intersection, i64 0, i32 0, !dbg !4100
  store double 2.000000e+10, double* %24, align 8, !dbg !4101, !tbaa !4102
  %25 = getelementptr inbounds %"struct.pov::istk_entry"* %Best_Intersection, i64 0, i32 5, !dbg !4104
  store %"struct.pov::Object_Struct"* null, %"struct.pov::Object_Struct"** %25, align 8, !dbg !4105, !tbaa !4106
  %26 = load i8* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 29), align 4, !dbg !4107, !tbaa !4109, !range !2239
  %27 = icmp eq i8 %26, 0, !dbg !4107
  br i1 %27, label %28, label %64, !dbg !4110

; <label>:28                                      ; preds = %23
  %29 = load i64* bitcast (%"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 5) to i64*), align 8, !dbg !4111, !tbaa !4114
  %30 = bitcast %"struct.pov::Object_Struct"** %Object to i64*, !dbg !4115
  store i64 %29, i64* %30, align 8, !dbg !4116, !tbaa !2157
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  %31 = icmp eq i64 %29, 0, !dbg !4119
  br i1 %31, label %.loopexit11.thread, label %.lr.ph16, !dbg !4120

.lr.ph16:                                         ; preds = %28
  %32 = getelementptr inbounds %"struct.pov::istk_entry"* %New_Intersection, i64 0, i32 0, !dbg !4121
  br label %33, !dbg !4120

; <label>:33                                      ; preds = %._crit_edge, %.lr.ph16
  %.in18 = phi i64 [ %29, %.lr.ph16 ], [ %62, %._crit_edge ]
  %.pr = phi i32 [ %5, %.lr.ph16 ], [ %.pre, %._crit_edge ], !dbg !4128
  %Intersection_Found.013 = phi i32 [ 0, %.lr.ph16 ], [ %Intersection_Found.1, %._crit_edge ]
  %34 = inttoptr i64 %.in18 to %"struct.pov::Object_Struct"*
  %35 = icmp eq i32 %.pr, 0, !dbg !4128
  br i1 %35, label %36, label %.thread, !dbg !4128

; <label>:36                                      ; preds = %33
  %37 = inttoptr i64 %.in18 to %"struct.pov::Object_Struct"*
  %38 = getelementptr inbounds %"struct.pov::Object_Struct"* %37, i64 0, i32 13, !dbg !4128
  %39 = load i32* %38, align 4, !dbg !4128, !tbaa !4129
  %40 = and i32 %39, 32768, !dbg !4128
  %41 = icmp ne i32 %40, 0, !dbg !4128
  %42 = load i8* @_ZN3pov17In_Reflection_RayE, align 1
  %43 = icmp eq i8 %42, 0, !dbg !4128
  %or.cond7 = and i1 %41, %43, !dbg !4128
  br i1 %or.cond7, label %58, label %44, !dbg !4128

; <label>:44                                      ; preds = %36
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  %45 = and i32 %39, 65536, !dbg !4128
  %46 = icmp eq i32 %45, 0, !dbg !4128
  %or.cond9 = or i1 %46, %43, !dbg !4128
  br i1 %or.cond9, label %51, label %58, !dbg !4128

.thread:                                          ; preds = %33
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  %47 = getelementptr inbounds %"struct.pov::Object_Struct"* %34, i64 0, i32 13, !dbg !4128
  %48 = load i32* %47, align 4, !dbg !4128, !tbaa !4129
  %49 = and i32 %48, 1, !dbg !4128
  %50 = icmp eq i32 %49, 0, !dbg !4128
  br i1 %50, label %51, label %58, !dbg !4132

; <label>:51                                      ; preds = %.thread, %44
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %New_Intersection, i64 0, metadata !1203, metadata !2153), !dbg !4133
  %52 = call zeroext i1 @_ZN3pov12IntersectionEPNS_10istk_entryEPNS_13Object_StructEPNS_10Ray_StructE(%"struct.pov::istk_entry"* %New_Intersection, %"struct.pov::Object_Struct"* %34, %"struct.pov::Ray_Struct"* %Ray) #7, !dbg !4134
  br i1 %52, label %53, label %58, !dbg !4135

; <label>:53                                      ; preds = %51
  %54 = load double* %32, align 8, !dbg !4121, !tbaa !4102
  %55 = load double* %24, align 8, !dbg !4136, !tbaa !4102
  %56 = fcmp olt double %54, %55, !dbg !4137
  br i1 %56, label %57, label %58, !dbg !4138

; <label>:57                                      ; preds = %53
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %1, i8* %2, i64 200, i32 8, i1 false), !dbg !4139, !tbaa.struct !4141
  call void @llvm.dbg.value(metadata i32 1, i64 0, metadata !1199, metadata !2153), !dbg !4099
  br label %58, !dbg !4142

; <label>:58                                      ; preds = %36, %44, %.thread, %53, %57, %51
  %Intersection_Found.1 = phi i32 [ %Intersection_Found.013, %.thread ], [ 1, %57 ], [ %Intersection_Found.013, %53 ], [ %Intersection_Found.013, %51 ], [ %Intersection_Found.013, %44 ], [ %Intersection_Found.013, %36 ]
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  %59 = load %"struct.pov::Object_Struct"** %Object, align 8, !dbg !4143, !tbaa !2157
  %60 = getelementptr inbounds %"struct.pov::Object_Struct"* %59, i64 0, i32 2, !dbg !4144
  %61 = bitcast %"struct.pov::Object_Struct"** %60 to i64*, !dbg !4144
  %62 = load i64* %61, align 8, !dbg !4144, !tbaa !4145
  store i64 %62, i64* %30, align 8, !dbg !4116, !tbaa !2157
  call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  %63 = icmp eq i64 %62, 0, !dbg !4119
  br i1 %63, label %.loopexit11, label %._crit_edge, !dbg !4120

._crit_edge:                                      ; preds = %58
  %.pre = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !4128, !tbaa !2144
  br label %33, !dbg !4120

; <label>:64                                      ; preds = %23
  %65 = load %"struct.pov::BBox_Tree_Struct"** @_ZN3pov11Root_ObjectE, align 8, !dbg !4146, !tbaa !2157
  tail call void @llvm.dbg.value(metadata %"struct.pov::Object_Struct"** %Object, i64 0, metadata !1201, metadata !2153), !dbg !4118
  tail call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Best_Intersection, i64 0, metadata !1202, metadata !2153), !dbg !4148
  %66 = call zeroext i1 @_ZN3pov19Intersect_BBox_TreeEPNS_16BBox_Tree_StructEPNS_10Ray_StructEPNS_10istk_entryEPPNS_13Object_StructEb(%"struct.pov::BBox_Tree_Struct"* %65, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Best_Intersection, %"struct.pov::Object_Struct"** %Object, i1 zeroext false) #7, !dbg !4149
  %67 = zext i1 %66 to i32, !dbg !4149
  call void @llvm.dbg.value(metadata i32 %67, i64 0, metadata !1199, metadata !2153), !dbg !4099
  br label %.loopexit11

.loopexit11:                                      ; preds = %58, %64
  %Intersection_Found.2 = phi i32 [ %67, %64 ], [ %Intersection_Found.1, %58 ]
  %68 = icmp eq i32 %Intersection_Found.2, 0, !dbg !4150
  br i1 %68, label %.loopexit11.thread, label %69, !dbg !4152

; <label>:69                                      ; preds = %.loopexit11
  %70 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4153, !tbaa !4155
  call void @llvm.dbg.value(metadata i32 %70, i64 0, metadata !1204, metadata !2153), !dbg !4158
  %71 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4159, !tbaa !4160
  store i32 %71, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4161, !tbaa !4155
  %72 = load i32* @_ZN3pov13backtraceFlagE, align 4, !dbg !4162, !tbaa !2144
  %73 = icmp ne i32 %72, 0, !dbg !4162
  %74 = load %"struct.pov::Object_Struct"** getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 18), align 8
  %75 = icmp ne %"struct.pov::Object_Struct"* %74, null, !dbg !4164
  %or.cond = and i1 %73, %75, !dbg !4165
  br i1 %or.cond, label %76, label %101, !dbg !4165

; <label>:76                                      ; preds = %69
  store i32 0, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4166, !tbaa !4160
  %77 = load i32* @_ZN3pov11Trace_LevelE, align 4, !dbg !4168, !tbaa !2144
  %78 = icmp eq i32 %77, 1, !dbg !4170
  %79 = icmp ne i32 %71, 0, !dbg !4171
  %or.cond3 = or i1 %78, %79, !dbg !4172
  br i1 %or.cond3, label %80, label %100, !dbg !4172

; <label>:80                                      ; preds = %76
  %81 = load %"struct.pov::Object_Struct"** %25, align 8, !dbg !4173, !tbaa !4106
  %82 = getelementptr inbounds %"struct.pov::Object_Struct"* %81, i64 0, i32 13, !dbg !4173
  %83 = load i32* %82, align 4, !dbg !4173, !tbaa !4129
  %84 = zext i32 %83 to i64, !dbg !4173
  %85 = and i64 %84, 524288, !dbg !4173
  %86 = icmp eq i64 %85, 0, !dbg !4173
  br i1 %86, label %95, label %87, !dbg !4176

; <label>:87                                      ; preds = %80
  %88 = call fastcc i32 @_ZN3povL13IsObjectInCSGEPNS_13Object_StructES1_(%"struct.pov::Object_Struct"* %81, %"struct.pov::Object_Struct"* %74) #7, !dbg !4177
  %89 = icmp eq i32 %88, 0, !dbg !4177
  br i1 %89, label %90, label %100, !dbg !4180

; <label>:90                                      ; preds = %87
  %91 = and i32 %83, 1048576, !dbg !4181
  %92 = icmp eq i32 %91, 0, !dbg !4181
  br i1 %92, label %94, label %93, !dbg !4184

; <label>:93                                      ; preds = %90
  store i32 1, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4185, !tbaa !4160
  br label %100, !dbg !4186

; <label>:94                                      ; preds = %90
  store i32 %71, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4187, !tbaa !4160
  store i32 %70, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4189, !tbaa !4155
  br label %120, !dbg !4190

; <label>:95                                      ; preds = %80
  %96 = and i64 %84, 1048576, !dbg !4191
  %97 = icmp eq i64 %96, 0, !dbg !4191
  br i1 %97, label %99, label %98, !dbg !4196

; <label>:98                                      ; preds = %95
  store i32 1, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4197, !tbaa !4160
  br label %100, !dbg !4198

; <label>:99                                      ; preds = %95
  store i32 %71, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4199, !tbaa !4160
  store i32 %70, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4201, !tbaa !4155
  br label %120, !dbg !4202

; <label>:100                                     ; preds = %87, %93, %98, %76
  store i32 1, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 15), align 8, !dbg !4203, !tbaa !4204
  br label %101, !dbg !4205

; <label>:101                                     ; preds = %100, %69
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Best_Intersection, i64 0, metadata !1202, metadata !2153), !dbg !4148
  call void @_ZN3pov25Determine_Apparent_ColourEPNS_10istk_entryEPfPNS_10Ray_StructEd(%"struct.pov::istk_entry"* %Best_Intersection, float* %Colour, %"struct.pov::Ray_Struct"* %Ray, double %Weight) #7, !dbg !4206
  %102 = load i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4207, !tbaa !4155
  store i32 %102, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 23), align 8, !dbg !4208, !tbaa !4160
  store i32 %70, i32* getelementptr inbounds (%"struct.pov::photon_options_struct"* @_ZN3pov13photonOptionsE, i64 0, i32 24), align 4, !dbg !4209, !tbaa !4155
  br label %103, !dbg !4210

.loopexit11.thread:                               ; preds = %28, %.loopexit11
  store double 1.000000e+07, double* %24, align 8, !dbg !4211, !tbaa !4102
  store %"struct.pov::Object_Struct"* null, %"struct.pov::Object_Struct"** %25, align 8, !dbg !4213, !tbaa !4106
  call void @_ZN3pov22Do_Infinite_AtmosphereEPNS_10Ray_StructEPf(%"struct.pov::Ray_Struct"* %Ray, float* %Colour) #7, !dbg !4214
  br label %103

; <label>:103                                     ; preds = %.loopexit11.thread, %101
  call void @llvm.dbg.value(metadata i32 1, i64 0, metadata !1200, metadata !2153), !dbg !4215
  %104 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 2, !dbg !4216
  %105 = load i32* %104, align 4, !dbg !4216, !tbaa !4218
  %106 = icmp sgt i32 %105, -1, !dbg !4220
  br i1 %106, label %.lr.ph, label %.critedge, !dbg !4221

; <label>:107                                     ; preds = %.lr.ph
  %indvars.iv.next = add nuw i64 %indvars.iv, 1, !dbg !4222
  %108 = sext i32 %105 to i64, !dbg !4225
  %109 = icmp slt i64 %indvars.iv, %108, !dbg !4225
  br i1 %109, label %.lr.ph, label %.critedge, !dbg !4222

.lr.ph:                                           ; preds = %103, %107
  %indvars.iv = phi i64 [ %indvars.iv.next, %107 ], [ 0, %103 ]
  %110 = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 4, i64 %indvars.iv, !dbg !4227
  %111 = load %"struct.pov::Interior_Struct"** %110, align 8, !dbg !4227, !tbaa !2157
  %112 = getelementptr inbounds %"struct.pov::Interior_Struct"* %111, i64 0, i32 1, !dbg !4230
  %113 = load i32* %112, align 4, !dbg !4230, !tbaa !4231
  %114 = icmp eq i32 %113, 0, !dbg !4227
  br i1 %114, label %.loopexit, label %107, !dbg !4233

.critedge:                                        ; preds = %107, %103
  %115 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 13), align 8, !dbg !4234, !tbaa !4236
  %116 = and i32 %115, 128, !dbg !4237
  %117 = icmp eq i32 %116, 0, !dbg !4237
  br i1 %117, label %.loopexit, label %118, !dbg !4238

; <label>:118                                     ; preds = %.critedge
  call void @llvm.dbg.value(metadata %"struct.pov::istk_entry"* %Best_Intersection, i64 0, metadata !1202, metadata !2153), !dbg !4148
  call void @_ZN3pov20Do_Finite_AtmosphereEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Best_Intersection, float* %Colour, i32 0) #7, !dbg !4239
  br label %.loopexit, !dbg !4241

.loopexit:                                        ; preds = %.lr.ph, %.critedge, %118
  %119 = load double* %24, align 8, !dbg !4242, !tbaa !4102
  br label %120, !dbg !4243

; <label>:120                                     ; preds = %15, %16, %.loopexit, %99, %94
  %.0 = phi double [ %119, %.loopexit ], [ 2.000000e+10, %94 ], [ 2.000000e+10, %99 ], [ 2.000000e+10, %16 ], [ 2.000000e+10, %15 ]
  call void @llvm.lifetime.end(i64 200, i8* %2) #4, !dbg !4244
  call void @llvm.lifetime.end(i64 200, i8* %1) #4, !dbg !4244
  ret double %.0, !dbg !4244
}
