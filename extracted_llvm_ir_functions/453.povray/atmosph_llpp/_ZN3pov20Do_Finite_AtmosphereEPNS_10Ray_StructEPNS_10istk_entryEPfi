define void @_ZN3pov20Do_Finite_AtmosphereEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Intersection, float* %Colour, i32 %Light_Ray_Flag) #1 {
entry:
  %Temp.i = alloca [3 x double], align 16
  %Cr.i = alloca [5 x float], align 16
  %Media_List = alloca [2 x %"struct.pov::Media_Struct"*], align 16
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !795), !dbg !1340
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersection}, i64 0, metadata !796), !dbg !1340
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !797), !dbg !1340
  call void @llvm.dbg.value(metadata !{i32 %Light_Ray_Flag}, i64 0, metadata !798), !dbg !1340
  call void @llvm.dbg.declare(metadata !{[2 x %"struct.pov::Media_Struct"*]* %Media_List}, metadata !799), !dbg !1341
  %tobool = icmp eq i32 %Light_Ray_Flag, 0, !dbg !1342
  br i1 %tobool, label %if.then, label %if.end, !dbg !1342

if.then:                                          ; preds = %entry
  %0 = bitcast [3 x double]* %Temp.i to i8*, !dbg !1343
  call void @llvm.lifetime.start(i64 24, i8* %0), !dbg !1343
  %1 = bitcast [5 x float]* %Cr.i to i8*, !dbg !1343
  call void @llvm.lifetime.start(i64 20, i8* %1), !dbg !1343
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1346), !dbg !1343
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersection}, i64 0, metadata !1347), !dbg !1343
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1348), !dbg !1343
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Temp.i}, metadata !1029), !dbg !1349
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Cr.i}, metadata !1030), !dbg !1350
  call void @llvm.dbg.declare(metadata !1270, metadata !1031), !dbg !1350
  %2 = load %"struct.pov::Rainbow_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 14), align 8, !dbg !1351, !tbaa !1274
  %cmp.i = icmp eq %"struct.pov::Rainbow_Struct"* %2, null, !dbg !1351
  br i1 %cmp.i, label %if.end, label %for.body.lr.ph.i, !dbg !1351

for.body.lr.ph.i:                                 ; preds = %if.then
  %arraydecay7.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !1352
  %arrayidx2.i231.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !1356
  %arrayidx5.i235.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !1356
  %arraydecay42.i = getelementptr inbounds [3 x double]* %Temp.i, i64 0, i64 0, !dbg !1357
  %arrayidx1.i215.i = getelementptr inbounds [3 x double]* %Temp.i, i64 0, i64 1, !dbg !1361
  %arraydecay43.i = getelementptr inbounds [5 x float]* %Cr.i, i64 0, i64 0, !dbg !1363
  %Depth.i = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 0, !dbg !1364
  %arrayidx.i = getelementptr inbounds [5 x float]* %Cr.i, i64 0, i64 4, !dbg !1365
  %arrayidx72.i = getelementptr inbounds [5 x float]* %Cr.i, i64 0, i64 3, !dbg !1366
  %arrayidx92.i = getelementptr inbounds float* %Colour, i64 1, !dbg !1367
  %arrayidx96.i = getelementptr inbounds [5 x float]* %Cr.i, i64 0, i64 1, !dbg !1367
  %arrayidx109.i = getelementptr inbounds float* %Colour, i64 2, !dbg !1368
  %arrayidx113.i = getelementptr inbounds [5 x float]* %Cr.i, i64 0, i64 2, !dbg !1368
  %3 = bitcast double* %arrayidx1.i215.i to i8*, !dbg !1363
  br label %for.body.i, !dbg !1369

for.body.i:                                       ; preds = %for.inc.i, %for.body.lr.ph.i
  %Rainbow.0271.i = phi %"struct.pov::Rainbow_Struct"* [ %2, %for.body.lr.ph.i ], [ %Rainbow.0.i, %for.inc.i ]
  %n.0270.i = phi i32 [ 0, %for.body.lr.ph.i ], [ %n.1.i, %for.inc.i ]
  %Ct.sroa.0.0.load240253269.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %Ct.sroa.0.0.load240252.i, %for.inc.i ]
  %Ct.sroa.1.4.load241255268.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %Ct.sroa.1.4.load241254.i, %for.inc.i ]
  %Ct.sroa.2.8.load242257267.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %Ct.sroa.2.8.load242256.i, %for.inc.i ]
  %Ct.sroa.3.12.load243259266.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %Ct.sroa.3.12.load243258.i, %for.inc.i ]
  %Ct.sroa.4.16.load244261265.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %Ct.sroa.4.16.load244260.i, %for.inc.i ]
  %Pigment.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 10, !dbg !1370
  %4 = load %"struct.pov::Pigment_Struct"** %Pigment.i, align 8, !dbg !1370, !tbaa !1274
  %cmp2.i = icmp eq %"struct.pov::Pigment_Struct"* %4, null, !dbg !1370
  br i1 %cmp2.i, label %for.inc.i, label %land.lhs.true.i, !dbg !1370

land.lhs.true.i:                                  ; preds = %for.body.i
  %Distance.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 0, !dbg !1370
  %5 = load double* %Distance.i, align 8, !dbg !1370, !tbaa !1309
  %cmp3.i = fcmp une double %5, 0.000000e+00, !dbg !1370
  br i1 %cmp3.i, label %land.lhs.true4.i, label %for.inc.i, !dbg !1370

land.lhs.true4.i:                                 ; preds = %land.lhs.true.i
  %Width.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 3, !dbg !1370
  %6 = load double* %Width.i, align 8, !dbg !1370, !tbaa !1309
  %cmp5.i = fcmp une double %6, 0.000000e+00, !dbg !1370
  br i1 %cmp5.i, label %if.then6.i, label %for.inc.i, !dbg !1370

if.then6.i:                                       ; preds = %land.lhs.true4.i
  %arraydecay8.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 9, i64 0, !dbg !1352
  call void @llvm.dbg.value(metadata !{double* %arraydecay7.i}, i64 0, metadata !1371), !dbg !1372
  call void @llvm.dbg.value(metadata !{double* %arraydecay8.i}, i64 0, metadata !1373), !dbg !1372
  %7 = load double* %arraydecay7.i, align 8, !dbg !1356, !tbaa !1309
  %8 = load double* %arraydecay8.i, align 8, !dbg !1356, !tbaa !1309
  %mul.i230.i = fmul double %7, %8, !dbg !1356
  %9 = load double* %arrayidx2.i231.i, align 8, !dbg !1356, !tbaa !1309
  %arrayidx3.i232.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 9, i64 1, !dbg !1356
  %10 = load double* %arrayidx3.i232.i, align 8, !dbg !1356, !tbaa !1309
  %mul4.i233.i = fmul double %9, %10, !dbg !1356
  %add.i234.i = fadd double %mul.i230.i, %mul4.i233.i, !dbg !1356
  %11 = load double* %arrayidx5.i235.i, align 8, !dbg !1356, !tbaa !1309
  %arrayidx6.i236.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 9, i64 2, !dbg !1356
  %12 = load double* %arrayidx6.i236.i, align 8, !dbg !1356, !tbaa !1309
  %mul7.i237.i = fmul double %11, %12, !dbg !1356
  %add8.i238.i = fadd double %add.i234.i, %mul7.i237.i, !dbg !1356
  call void @llvm.dbg.value(metadata !{double %add8.i238.i}, i64 0, metadata !1374), !dbg !1356
  call void @llvm.dbg.value(metadata !{double %add8.i238.i}, i64 0, metadata !1375), !dbg !1372
  call void @llvm.dbg.value(metadata !{double %add8.i238.i}, i64 0, metadata !1376), !dbg !1377
  %arraydecay11.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 8, i64 0, !dbg !1378
  call void @llvm.dbg.value(metadata !{double* %arraydecay7.i}, i64 0, metadata !1379), !dbg !1380
  call void @llvm.dbg.value(metadata !{double* %arraydecay11.i}, i64 0, metadata !1381), !dbg !1380
  %13 = load double* %arraydecay11.i, align 8, !dbg !1382, !tbaa !1309
  %mul.i221.i = fmul double %7, %13, !dbg !1382
  %arrayidx3.i223.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 8, i64 1, !dbg !1382
  %14 = load double* %arrayidx3.i223.i, align 8, !dbg !1382, !tbaa !1309
  %mul4.i224.i = fmul double %9, %14, !dbg !1382
  %add.i225.i = fadd double %mul.i221.i, %mul4.i224.i, !dbg !1382
  %arrayidx6.i227.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 8, i64 2, !dbg !1382
  %15 = load double* %arrayidx6.i227.i, align 8, !dbg !1382, !tbaa !1309
  %mul7.i228.i = fmul double %11, %15, !dbg !1382
  %add8.i229.i = fadd double %add.i225.i, %mul7.i228.i, !dbg !1382
  call void @llvm.dbg.value(metadata !{double %add8.i229.i}, i64 0, metadata !1383), !dbg !1382
  call void @llvm.dbg.value(metadata !{double %add8.i229.i}, i64 0, metadata !1384), !dbg !1380
  call void @llvm.dbg.value(metadata !{double %add8.i229.i}, i64 0, metadata !1385), !dbg !1386
  call void @llvm.dbg.value(metadata !{double %add8.i229.i}, i64 0, metadata !1385), !dbg !1387
  call void @llvm.dbg.value(metadata !{double %add8.i229.i}, i64 0, metadata !1385), !dbg !1389
  call void @llvm.dbg.value(metadata !{double %add8.i238.i}, i64 0, metadata !1390), !dbg !1391
  %mul.i220.i = fmul double %add8.i238.i, %add8.i238.i, !dbg !1392
  call void @llvm.dbg.value(metadata !{double %add8.i229.i}, i64 0, metadata !1394), !dbg !1395
  %mul.i219.i = fmul double %add8.i229.i, %add8.i229.i, !dbg !1396
  %add.i = fadd double %mul.i220.i, %mul.i219.i, !dbg !1386
  call void @llvm.dbg.value(metadata !{double %add.i}, i64 0, metadata !1397), !dbg !1386
  %cmp13.i = fcmp ogt double %add.i, 0.000000e+00, !dbg !1398
  br i1 %cmp13.i, label %if.then14.i, label %if.end16.i, !dbg !1398

if.then14.i:                                      ; preds = %if.then6.i
  %call15.i = call double @sqrt(double %add.i) #8, !dbg !1399
  call void @llvm.dbg.value(metadata !{double %call15.i}, i64 0, metadata !1397), !dbg !1399
  %div.i = fdiv double %add8.i229.i, %call15.i, !dbg !1387
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1385), !dbg !1387
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1384), !dbg !1380
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1385), !dbg !1386
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1385), !dbg !1387
  call void @llvm.dbg.value(metadata !{double %div.i}, i64 0, metadata !1385), !dbg !1389
  br label %if.end16.i, !dbg !1400

if.end16.i:                                       ; preds = %if.then14.i, %if.then6.i
  %add8.i229262.i = phi double [ %div.i, %if.then14.i ], [ %add8.i229.i, %if.then6.i ]
  %call17.i = call double @acos(double %add8.i229262.i) #8, !dbg !1389
  %call18.i = call double @fabs(double %call17.i) #9, !dbg !1389
  call void @llvm.dbg.value(metadata !{double %call18.i}, i64 0, metadata !1401), !dbg !1389
  %Arc_Angle.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 4, !dbg !1402
  %16 = load double* %Arc_Angle.i, align 8, !dbg !1402, !tbaa !1309
  %cmp19.i = fcmp ugt double %call18.i, %16, !dbg !1402
  br i1 %cmp19.i, label %for.inc.i, label %if.then20.i, !dbg !1402

if.then20.i:                                      ; preds = %if.end16.i
  %arraydecay23.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 7, i64 0, !dbg !1403
  call void @llvm.dbg.value(metadata !{double* %arraydecay7.i}, i64 0, metadata !1404), !dbg !1405
  call void @llvm.dbg.value(metadata !{double* %arraydecay23.i}, i64 0, metadata !1406), !dbg !1405
  %17 = load double* %arraydecay7.i, align 8, !dbg !1407, !tbaa !1309
  %18 = load double* %arraydecay23.i, align 8, !dbg !1407, !tbaa !1309
  %mul.i.i = fmul double %17, %18, !dbg !1407
  %19 = load double* %arrayidx2.i231.i, align 8, !dbg !1407, !tbaa !1309
  %arrayidx3.i218.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 7, i64 1, !dbg !1407
  %20 = load double* %arrayidx3.i218.i, align 8, !dbg !1407, !tbaa !1309
  %mul4.i.i = fmul double %19, %20, !dbg !1407
  %add.i.i = fadd double %mul.i.i, %mul4.i.i, !dbg !1407
  %21 = load double* %arrayidx5.i235.i, align 8, !dbg !1407, !tbaa !1309
  %arrayidx6.i.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 7, i64 2, !dbg !1407
  %22 = load double* %arrayidx6.i.i, align 8, !dbg !1407, !tbaa !1309
  %mul7.i.i = fmul double %21, %22, !dbg !1407
  %add8.i.i = fadd double %add.i.i, %mul7.i.i, !dbg !1407
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !1408), !dbg !1407
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !1409), !dbg !1405
  call void @llvm.dbg.value(metadata !{double %add8.i.i}, i64 0, metadata !1410), !dbg !1411
  %cmp24.i = fcmp ult double %add8.i.i, 0.000000e+00, !dbg !1411
  br i1 %cmp24.i, label %for.inc.i, label %if.then25.i, !dbg !1411

if.then25.i:                                      ; preds = %if.then20.i
  %call26.i = call double @acos(double %add8.i.i) #8, !dbg !1412
  %Angle.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 2, !dbg !1412
  %23 = load double* %Angle.i, align 8, !dbg !1412, !tbaa !1309
  %sub.i = fsub double %call26.i, %23, !dbg !1412
  %24 = load double* %Width.i, align 8, !dbg !1412, !tbaa !1309
  %div28.i = fdiv double %sub.i, %24, !dbg !1412
  call void @llvm.dbg.value(metadata !{double %div28.i}, i64 0, metadata !1413), !dbg !1412
  %Jitter.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 1, !dbg !1414
  %25 = load double* %Jitter.i, align 8, !dbg !1414, !tbaa !1309
  %cmp29.i = fcmp ogt double %25, 0.000000e+00, !dbg !1414
  br i1 %cmp29.i, label %if.then30.i, label %if.end37.i, !dbg !1414

if.then30.i:                                      ; preds = %if.then25.i
  %call31.i = call i32 @_ZN3pov8POV_RANDEv() #7, !dbg !1415
  %conv.i = sitofp i32 %call31.i to double, !dbg !1415
  %mul.i = fmul double %conv.i, 0x3F0000200040021E, !dbg !1415
  %mul32.i = fmul double %mul.i, 2.000000e+00, !dbg !1415
  %sub33.i = fadd double %mul32.i, -1.000000e+00, !dbg !1415
  %26 = load double* %Jitter.i, align 8, !dbg !1415, !tbaa !1309
  %mul35.i = fmul double %26, %sub33.i, !dbg !1415
  %add36.i = fadd double %div28.i, %mul35.i, !dbg !1415
  call void @llvm.dbg.value(metadata !{double %add36.i}, i64 0, metadata !1413), !dbg !1415
  br label %if.end37.i, !dbg !1417

if.end37.i:                                       ; preds = %if.then30.i, %if.then25.i
  %index.0.i = phi double [ %add36.i, %if.then30.i ], [ %div28.i, %if.then25.i ]
  %cmp38.i = fcmp oge double %index.0.i, 0.000000e+00, !dbg !1418
  %cmp40.i = fcmp ole double %index.0.i, 9.999999e-01, !dbg !1418
  %or.cond.i = and i1 %cmp38.i, %cmp40.i, !dbg !1418
  br i1 %or.cond.i, label %if.then41.i, label %for.inc.i, !dbg !1418

if.then41.i:                                      ; preds = %if.end37.i
  call void @llvm.dbg.value(metadata !{double* %arraydecay42.i}, i64 0, metadata !1419), !dbg !1420
  call void @llvm.dbg.value(metadata !{double %index.0.i}, i64 0, metadata !1421), !dbg !1420
  call void @llvm.dbg.value(metadata !1422, i64 0, metadata !1423), !dbg !1420
  call void @llvm.dbg.value(metadata !1422, i64 0, metadata !1424), !dbg !1420
  store double %index.0.i, double* %arraydecay42.i, align 16, !dbg !1425, !tbaa !1309
  call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 16, i32 8, i1 false), !dbg !1426
  %27 = load %"struct.pov::Pigment_Struct"** %Pigment.i, align 8, !dbg !1363, !tbaa !1274
  %call46.i = call i32 @_ZN3pov15Compute_PigmentEPfPNS_14Pigment_StructEPdPNS_10istk_entryE(float* %arraydecay43.i, %"struct.pov::Pigment_Struct"* %27, double* %arraydecay42.i, %"struct.pov::istk_entry"* %Intersection) #7, !dbg !1363
  %Falloff_Width.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 6, !dbg !1427
  %28 = load double* %Falloff_Width.i, align 8, !dbg !1427, !tbaa !1309
  %cmp47.i = fcmp ogt double %28, 0.000000e+00, !dbg !1427
  br i1 %cmp47.i, label %land.lhs.true48.i, label %if.end59.i, !dbg !1427

land.lhs.true48.i:                                ; preds = %if.then41.i
  %Falloff_Angle.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 5, !dbg !1427
  %29 = load double* %Falloff_Angle.i, align 8, !dbg !1427, !tbaa !1309
  %cmp49.i = fcmp ogt double %call18.i, %29, !dbg !1427
  br i1 %cmp49.i, label %if.then50.i, label %if.end59.i, !dbg !1427

if.then50.i:                                      ; preds = %land.lhs.true48.i
  %sub52.i = fsub double %call18.i, %29, !dbg !1428
  %div54.i = fdiv double %sub52.i, %28, !dbg !1428
  call void @llvm.dbg.value(metadata !{double %div54.i}, i64 0, metadata !1430), !dbg !1428
  %mul55.i = fmul double %div54.i, 2.000000e+00, !dbg !1431
  %sub56.i = fsub double 3.000000e+00, %mul55.i, !dbg !1431
  %mul57.i = fmul double %div54.i, %sub56.i, !dbg !1431
  %mul58.i = fmul double %div54.i, %mul57.i, !dbg !1431
  call void @llvm.dbg.value(metadata !{double %mul58.i}, i64 0, metadata !1430), !dbg !1431
  br label %if.end59.i, !dbg !1432

if.end59.i:                                       ; preds = %if.then50.i, %land.lhs.true48.i, %if.then41.i
  %fade.0.i = phi double [ %mul58.i, %if.then50.i ], [ 0.000000e+00, %land.lhs.true48.i ], [ 0.000000e+00, %if.then41.i ]
  %30 = load double* %Depth.i, align 8, !dbg !1364, !tbaa !1309
  %sub60.i = fsub double -0.000000e+00, %30, !dbg !1364
  %31 = load double* %Distance.i, align 8, !dbg !1364, !tbaa !1309
  %div62.i = fdiv double %sub60.i, %31, !dbg !1364
  %call63.i = call double @exp(double %div62.i) #8, !dbg !1364
  call void @llvm.dbg.value(metadata !{double %call63.i}, i64 0, metadata !1433), !dbg !1364
  call void @llvm.dbg.value(metadata !{double %call63.i}, i64 0, metadata !1434), !dbg !1435
  call void @llvm.dbg.value(metadata !{double %call63.i}, i64 0, metadata !1433), !dbg !1367
  call void @llvm.dbg.value(metadata !{double %call63.i}, i64 0, metadata !1433), !dbg !1368
  call void @llvm.dbg.value(metadata !{double %call63.i}, i64 0, metadata !1433), !dbg !1436
  call void @llvm.dbg.value(metadata !{double %call63.i}, i64 0, metadata !1433), !dbg !1437
  %32 = load float* %arrayidx.i, align 16, !dbg !1365, !tbaa !1250
  %conv64.i = fpext float %32 to double, !dbg !1365
  %sub65.i = fsub double 1.000000e+00, %conv64.i, !dbg !1365
  %mul66.i = fmul double %fade.0.i, %sub65.i, !dbg !1365
  %add69.i = fadd double %conv64.i, %mul66.i, !dbg !1365
  call void @llvm.dbg.value(metadata !{double %add69.i}, i64 0, metadata !1438), !dbg !1435
  %cmp.i.i = fcmp olt double %call63.i, %add69.i, !dbg !1439
  %.sroa.speculated.i = select i1 %cmp.i.i, double %add69.i, double %call63.i, !dbg !1365
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated.i}, i64 0, metadata !1433), !dbg !1365
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated.i}, i64 0, metadata !1434), !dbg !1435
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated.i}, i64 0, metadata !1433), !dbg !1367
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated.i}, i64 0, metadata !1433), !dbg !1368
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated.i}, i64 0, metadata !1433), !dbg !1436
  call void @llvm.dbg.value(metadata !{double %.sroa.speculated.i}, i64 0, metadata !1433), !dbg !1437
  %sub71.i = fsub double 1.000000e+00, %.sroa.speculated.i, !dbg !1442
  call void @llvm.dbg.value(metadata !{double %sub71.i}, i64 0, metadata !1443), !dbg !1442
  %33 = load float* %arrayidx72.i, align 4, !dbg !1366, !tbaa !1250
  %conv73.i = fpext float %33 to double, !dbg !1366
  %mul74.i = fmul double %conv73.i, %sub71.i, !dbg !1366
  call void @llvm.dbg.value(metadata !{double %mul74.i}, i64 0, metadata !1444), !dbg !1366
  %34 = load float* %Colour, align 4, !dbg !1445, !tbaa !1250
  %conv76.i = fpext float %34 to double, !dbg !1445
  %mul77.i = fmul double %conv76.i, %.sroa.speculated.i, !dbg !1445
  %sub78.i = fsub double 1.000000e+00, %mul74.i, !dbg !1445
  %35 = load float* %arraydecay43.i, align 16, !dbg !1445, !tbaa !1250
  %conv80.i = fpext float %35 to double, !dbg !1445
  %mul81.i = fmul double %conv80.i, %mul74.i, !dbg !1445
  %add82.i = fadd double %sub78.i, %mul81.i, !dbg !1445
  %mul83.i = fmul double %mul77.i, %add82.i, !dbg !1445
  %mul86.i = fmul double %conv80.i, %sub71.i, !dbg !1445
  %add87.i = fadd double %mul86.i, %mul83.i, !dbg !1445
  %conv89.i = fpext float %Ct.sroa.0.0.load240253269.i to double, !dbg !1445
  %add90.i = fadd double %conv89.i, %add87.i, !dbg !1445
  %conv91.i = fptrunc double %add90.i to float, !dbg !1445
  %36 = load float* %arrayidx92.i, align 4, !dbg !1367, !tbaa !1250
  %conv93.i = fpext float %36 to double, !dbg !1367
  %mul94.i = fmul double %conv93.i, %.sroa.speculated.i, !dbg !1367
  %37 = load float* %arrayidx96.i, align 4, !dbg !1367, !tbaa !1250
  %conv97.i = fpext float %37 to double, !dbg !1367
  %mul98.i = fmul double %conv97.i, %mul74.i, !dbg !1367
  %add99.i = fadd double %sub78.i, %mul98.i, !dbg !1367
  %mul100.i = fmul double %mul94.i, %add99.i, !dbg !1367
  %mul103.i = fmul double %conv97.i, %sub71.i, !dbg !1367
  %add104.i = fadd double %mul103.i, %mul100.i, !dbg !1367
  %conv106.i = fpext float %Ct.sroa.1.4.load241255268.i to double, !dbg !1367
  %add107.i = fadd double %conv106.i, %add104.i, !dbg !1367
  %conv108.i = fptrunc double %add107.i to float, !dbg !1367
  %38 = load float* %arrayidx109.i, align 4, !dbg !1368, !tbaa !1250
  %conv110.i = fpext float %38 to double, !dbg !1368
  %mul111.i = fmul double %.sroa.speculated.i, %conv110.i, !dbg !1368
  %39 = load float* %arrayidx113.i, align 8, !dbg !1368, !tbaa !1250
  %conv114.i = fpext float %39 to double, !dbg !1368
  %mul115.i = fmul double %mul74.i, %conv114.i, !dbg !1368
  %add116.i = fadd double %sub78.i, %mul115.i, !dbg !1368
  %mul117.i = fmul double %mul111.i, %add116.i, !dbg !1368
  %mul120.i = fmul double %sub71.i, %conv114.i, !dbg !1368
  %add121.i = fadd double %mul120.i, %mul117.i, !dbg !1368
  %conv123.i = fpext float %Ct.sroa.2.8.load242257267.i to double, !dbg !1368
  %add124.i = fadd double %conv123.i, %add121.i, !dbg !1368
  %conv125.i = fptrunc double %add124.i to float, !dbg !1368
  %mul128.i = fmul double %conv73.i, %.sroa.speculated.i, !dbg !1436
  %conv130.i = fpext float %Ct.sroa.3.12.load243259266.i to double, !dbg !1436
  %mul131.i = fmul double %conv130.i, %mul128.i, !dbg !1436
  %conv132.i = fptrunc double %mul131.i to float, !dbg !1436
  %mul135.i = fmul double %conv64.i, %.sroa.speculated.i, !dbg !1437
  %conv137.i = fpext float %Ct.sroa.4.16.load244261265.i to double, !dbg !1437
  %mul138.i = fmul double %conv137.i, %mul135.i, !dbg !1437
  %conv139.i = fptrunc double %mul138.i to float, !dbg !1437
  %inc.i = add nsw i32 %n.0270.i, 1, !dbg !1446
  call void @llvm.dbg.value(metadata !{i32 %inc.i}, i64 0, metadata !1447), !dbg !1446
  br label %for.inc.i, !dbg !1448

for.inc.i:                                        ; preds = %if.end59.i, %if.end37.i, %if.then20.i, %if.end16.i, %land.lhs.true4.i, %land.lhs.true.i, %for.body.i
  %Ct.sroa.4.16.load244260.i = phi float [ %conv139.i, %if.end59.i ], [ %Ct.sroa.4.16.load244261265.i, %if.end37.i ], [ %Ct.sroa.4.16.load244261265.i, %if.then20.i ], [ %Ct.sroa.4.16.load244261265.i, %if.end16.i ], [ %Ct.sroa.4.16.load244261265.i, %land.lhs.true4.i ], [ %Ct.sroa.4.16.load244261265.i, %land.lhs.true.i ], [ %Ct.sroa.4.16.load244261265.i, %for.body.i ]
  %Ct.sroa.3.12.load243258.i = phi float [ %conv132.i, %if.end59.i ], [ %Ct.sroa.3.12.load243259266.i, %if.end37.i ], [ %Ct.sroa.3.12.load243259266.i, %if.then20.i ], [ %Ct.sroa.3.12.load243259266.i, %if.end16.i ], [ %Ct.sroa.3.12.load243259266.i, %land.lhs.true4.i ], [ %Ct.sroa.3.12.load243259266.i, %land.lhs.true.i ], [ %Ct.sroa.3.12.load243259266.i, %for.body.i ]
  %Ct.sroa.2.8.load242256.i = phi float [ %conv125.i, %if.end59.i ], [ %Ct.sroa.2.8.load242257267.i, %if.end37.i ], [ %Ct.sroa.2.8.load242257267.i, %if.then20.i ], [ %Ct.sroa.2.8.load242257267.i, %if.end16.i ], [ %Ct.sroa.2.8.load242257267.i, %land.lhs.true4.i ], [ %Ct.sroa.2.8.load242257267.i, %land.lhs.true.i ], [ %Ct.sroa.2.8.load242257267.i, %for.body.i ]
  %Ct.sroa.1.4.load241254.i = phi float [ %conv108.i, %if.end59.i ], [ %Ct.sroa.1.4.load241255268.i, %if.end37.i ], [ %Ct.sroa.1.4.load241255268.i, %if.then20.i ], [ %Ct.sroa.1.4.load241255268.i, %if.end16.i ], [ %Ct.sroa.1.4.load241255268.i, %land.lhs.true4.i ], [ %Ct.sroa.1.4.load241255268.i, %land.lhs.true.i ], [ %Ct.sroa.1.4.load241255268.i, %for.body.i ]
  %Ct.sroa.0.0.load240252.i = phi float [ %conv91.i, %if.end59.i ], [ %Ct.sroa.0.0.load240253269.i, %if.end37.i ], [ %Ct.sroa.0.0.load240253269.i, %if.then20.i ], [ %Ct.sroa.0.0.load240253269.i, %if.end16.i ], [ %Ct.sroa.0.0.load240253269.i, %land.lhs.true4.i ], [ %Ct.sroa.0.0.load240253269.i, %land.lhs.true.i ], [ %Ct.sroa.0.0.load240253269.i, %for.body.i ]
  %n.1.i = phi i32 [ %inc.i, %if.end59.i ], [ %n.0270.i, %if.end37.i ], [ %n.0270.i, %if.then20.i ], [ %n.0270.i, %if.end16.i ], [ %n.0270.i, %land.lhs.true4.i ], [ %n.0270.i, %land.lhs.true.i ], [ %n.0270.i, %for.body.i ]
  %Next.i = getelementptr inbounds %"struct.pov::Rainbow_Struct"* %Rainbow.0271.i, i64 0, i32 11, !dbg !1369
  %Rainbow.0.i = load %"struct.pov::Rainbow_Struct"** %Next.i, align 8, !dbg !1369
  %cmp1.i = icmp eq %"struct.pov::Rainbow_Struct"* %Rainbow.0.i, null, !dbg !1369
  br i1 %cmp1.i, label %for.end.i, label %for.body.i, !dbg !1369

for.end.i:                                        ; preds = %for.inc.i
  %cmp144.i = icmp sgt i32 %n.1.i, 0, !dbg !1449
  br i1 %cmp144.i, label %if.then145.i, label %if.end, !dbg !1449

if.then145.i:                                     ; preds = %for.end.i
  %conv146.i = sitofp i32 %n.1.i to double, !dbg !1450
  %div147.i = fdiv double 1.000000e+00, %conv146.i, !dbg !1450
  %conv148.i = fptrunc double %div147.i to float, !dbg !1450
  call void @llvm.dbg.value(metadata !{float %conv148.i}, i64 0, metadata !1451), !dbg !1450
  %mul150.i = fmul float %Ct.sroa.0.0.load240252.i, %conv148.i, !dbg !1452
  store float %mul150.i, float* %Colour, align 4, !dbg !1452, !tbaa !1250
  %mul153.i = fmul float %Ct.sroa.1.4.load241254.i, %conv148.i, !dbg !1453
  store float %mul153.i, float* %arrayidx92.i, align 4, !dbg !1453, !tbaa !1250
  %mul156.i = fmul float %Ct.sroa.2.8.load242256.i, %conv148.i, !dbg !1454
  store float %mul156.i, float* %arrayidx109.i, align 4, !dbg !1454, !tbaa !1250
  %arrayidx159.i = getelementptr inbounds float* %Colour, i64 3, !dbg !1455
  %40 = load float* %arrayidx159.i, align 4, !dbg !1455, !tbaa !1250
  %mul160.i = fmul float %Ct.sroa.3.12.load243258.i, %40, !dbg !1455
  store float %mul160.i, float* %arrayidx159.i, align 4, !dbg !1455, !tbaa !1250
  %arrayidx162.i = getelementptr inbounds float* %Colour, i64 4, !dbg !1456
  %41 = load float* %arrayidx162.i, align 4, !dbg !1456, !tbaa !1250
  %mul163.i = fmul float %Ct.sroa.4.16.load244260.i, %41, !dbg !1456
  store float %mul163.i, float* %arrayidx162.i, align 4, !dbg !1456, !tbaa !1250
  br label %if.end, !dbg !1457

if.end:                                           ; preds = %if.then145.i, %for.end.i, %if.then, %entry
  %42 = load %"struct.pov::Media_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 12), align 8, !dbg !1458, !tbaa !1274
  %arrayidx = getelementptr inbounds [2 x %"struct.pov::Media_Struct"*]* %Media_List, i64 0, i64 0, !dbg !1458
  store %"struct.pov::Media_Struct"* %42, %"struct.pov::Media_Struct"** %arrayidx, align 16, !dbg !1458, !tbaa !1274
  %arrayidx1 = getelementptr inbounds [2 x %"struct.pov::Media_Struct"*]* %Media_List, i64 0, i64 1, !dbg !1459
  store %"struct.pov::Media_Struct"* null, %"struct.pov::Media_Struct"** %arrayidx1, align 8, !dbg !1459, !tbaa !1274
  call void @_ZN3pov14Simulate_MediaEPPNS_12Media_StructEPNS_10Ray_StructEPNS_10istk_entryEPfi(%"struct.pov::Media_Struct"** %arrayidx, %"struct.pov::Ray_Struct"* %Ray, %"struct.pov::istk_entry"* %Intersection, float* %Colour, i32 %Light_Ray_Flag) #7, !dbg !1460
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1461), !dbg !1463
  call void @llvm.dbg.value(metadata !{%"struct.pov::istk_entry"* %Intersection}, i64 0, metadata !1464), !dbg !1463
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1465), !dbg !1463
  call void @llvm.dbg.value(metadata !{i32 %Light_Ray_Flag}, i64 0, metadata !1466), !dbg !1463
  call void @llvm.dbg.declare(metadata !1270, metadata !1075), !dbg !1467
  call void @llvm.dbg.declare(metadata !1270, metadata !1076), !dbg !1468
  call void @llvm.dbg.declare(metadata !1270, metadata !1077), !dbg !1469
  %43 = load %"struct.pov::Fog_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 13), align 8, !dbg !1470, !tbaa !1274
  %cmp.i10 = icmp eq %"struct.pov::Fog_Struct"* %43, null, !dbg !1470
  br i1 %cmp.i10, label %_ZN3povL6do_fogEPNS_10Ray_StructEPNS_10istk_entryEPfi.exit, label %for.body.lr.ph.i12, !dbg !1470

for.body.lr.ph.i12:                               ; preds = %if.end
  %Depth.i11 = getelementptr inbounds %"struct.pov::istk_entry"* %Intersection, i64 0, i32 0, !dbg !1471
  %44 = bitcast [3 x double]* %Temp.i to i8*, !dbg !1475
  %arraydecay1.i129.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 0, !dbg !1478
  %arraydecay2.i130.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !1478
  %arrayidx3.i.i133.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 1, !dbg !1479
  %arrayidx4.i.i134.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !1479
  %arrayidx8.i.i137.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 0, i64 2, !dbg !1480
  %arrayidx9.i.i138.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !1480
  %arraydecay45.i.i = getelementptr inbounds [3 x double]* %Temp.i, i64 0, i64 0, !dbg !1481
  %arrayidx7.i15.i.i = getelementptr inbounds [3 x double]* %Temp.i, i64 0, i64 1, !dbg !1483
  %arrayidx12.i18.i.i = getelementptr inbounds [3 x double]* %Temp.i, i64 0, i64 2, !dbg !1485
  br label %for.body.i15, !dbg !1486

for.body.i15:                                     ; preds = %for.inc.i29, %for.body.lr.ph.i12
  %Fog.0216.i = phi %"struct.pov::Fog_Struct"* [ %43, %for.body.lr.ph.i12 ], [ %Fog.0.i, %for.inc.i29 ]
  %sum_col.sroa.0.0.load169186215.i = phi float [ 0.000000e+00, %for.body.lr.ph.i12 ], [ %sum_col.sroa.0.0.load169185.i, %for.inc.i29 ]
  %sum_col.sroa.1.4.load170188214.i = phi float [ 0.000000e+00, %for.body.lr.ph.i12 ], [ %sum_col.sroa.1.4.load170187.i, %for.inc.i29 ]
  %sum_col.sroa.2.8.load171190213.i = phi float [ 0.000000e+00, %for.body.lr.ph.i12 ], [ %sum_col.sroa.2.8.load171189.i, %for.inc.i29 ]
  %sum_att.sroa.0.0.load173192212.i = phi float [ 1.000000e+00, %for.body.lr.ph.i12 ], [ %sum_att.sroa.0.0.load173191.i, %for.inc.i29 ]
  %sum_att.sroa.1.4.load175194211.i = phi float [ 1.000000e+00, %for.body.lr.ph.i12 ], [ %sum_att.sroa.1.4.load175193.i, %for.inc.i29 ]
  %sum_att.sroa.2.8.load177196210.i = phi float [ 1.000000e+00, %for.body.lr.ph.i12 ], [ %sum_att.sroa.2.8.load177195.i, %for.inc.i29 ]
  %Distance.i13 = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 1, !dbg !1487
  %45 = load double* %Distance.i13, align 8, !dbg !1487, !tbaa !1309
  %call.i = call double @fabs(double %45) #9, !dbg !1487
  %cmp3.i14 = fcmp ogt double %call.i, 1.000000e-07, !dbg !1487
  br i1 %cmp3.i14, label %if.then4.i, label %for.inc.i29, !dbg !1487

if.then4.i:                                       ; preds = %for.body.i15
  %46 = load double* %Depth.i11, align 8, !dbg !1471, !tbaa !1309
  call void @llvm.dbg.value(metadata !{double %46}, i64 0, metadata !1488), !dbg !1471
  %Type.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 0, !dbg !1489
  %47 = load i32* %Type.i, align 4, !dbg !1489, !tbaa !1242
  %cond.i = icmp eq i32 %47, 2, !dbg !1489
  call void @llvm.lifetime.start(i64 24, i8* %44), !dbg !1475
  br i1 %cond.i, label %sw.bb.i, label %sw.default.i, !dbg !1489

sw.bb.i:                                          ; preds = %if.then4.i
  call void @llvm.dbg.value(metadata !1422, i64 0, metadata !1490), !dbg !1475
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Temp.i}, metadata !1123), !dbg !1491
  call void @llvm.dbg.declare(metadata !1492, metadata !1124), !dbg !1491
  call void @llvm.dbg.declare(metadata !1492, metadata !1125), !dbg !1491
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1494), !dbg !1495
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i129.i}, i64 0, metadata !1496), !dbg !1495
  call void @llvm.dbg.value(metadata !1422, i64 0, metadata !1497), !dbg !1495
  call void @llvm.dbg.value(metadata !{double* %arraydecay2.i130.i}, i64 0, metadata !1498), !dbg !1495
  %48 = load double* %arraydecay1.i129.i, align 8, !dbg !1499, !tbaa !1309
  %49 = load double* %arraydecay2.i130.i, align 8, !dbg !1499, !tbaa !1309
  %mul.i.i131.i = fmul double %49, 0.000000e+00, !dbg !1499
  %add.i.i132.i = fadd double %48, %mul.i.i131.i, !dbg !1499
  %50 = load double* %arrayidx3.i.i133.i, align 8, !dbg !1479, !tbaa !1309
  %51 = load double* %arrayidx4.i.i134.i, align 8, !dbg !1479, !tbaa !1309
  %mul5.i.i135.i = fmul double %51, 0.000000e+00, !dbg !1479
  %add6.i.i136.i = fadd double %50, %mul5.i.i135.i, !dbg !1479
  %52 = load double* %arrayidx8.i.i137.i, align 8, !dbg !1480, !tbaa !1309
  %53 = load double* %arrayidx9.i.i138.i, align 8, !dbg !1480, !tbaa !1309
  %mul10.i.i139.i = fmul double %53, 0.000000e+00, !dbg !1480
  %add11.i.i140.i = fadd double %52, %mul10.i.i139.i, !dbg !1480
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1500), !dbg !1502
  call void @llvm.dbg.value(metadata !1295, i64 0, metadata !1503), !dbg !1502
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1504), !dbg !1502
  call void @llvm.dbg.value(metadata !{double %46}, i64 0, metadata !1505), !dbg !1502
  call void @llvm.dbg.value(metadata !{double* %arraydecay2.i130.i}, i64 0, metadata !1506), !dbg !1502
  %mul2.i.i.i = fmul double %46, %49, !dbg !1507
  %add.i37.i.i = fadd double %mul2.i.i.i, %add.i.i132.i, !dbg !1507
  %mul7.i40.i.i = fmul double %46, %51, !dbg !1508
  %add8.i41.i.i = fadd double %mul7.i40.i.i, %add6.i.i136.i, !dbg !1508
  %mul13.i.i.i = fmul double %46, %53, !dbg !1509
  %add14.i.i.i = fadd double %mul13.i.i.i, %add11.i.i140.i, !dbg !1509
  %arraydecay8.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 5, i64 0, !dbg !1510
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1511), !dbg !1512
  call void @llvm.dbg.value(metadata !{double* %arraydecay8.i.i}, i64 0, metadata !1513), !dbg !1512
  %54 = load double* %arraydecay8.i.i, align 8, !dbg !1514, !tbaa !1309
  %mul.i28.i.i = fmul double %add.i.i132.i, %54, !dbg !1514
  %arrayidx3.i30.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 5, i64 1, !dbg !1514
  %55 = load double* %arrayidx3.i30.i.i, align 8, !dbg !1514, !tbaa !1309
  %mul4.i31.i.i = fmul double %add6.i.i136.i, %55, !dbg !1514
  %add.i32.i.i = fadd double %mul.i28.i.i, %mul4.i31.i.i, !dbg !1514
  %arrayidx6.i34.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 5, i64 2, !dbg !1514
  %56 = load double* %arrayidx6.i34.i.i, align 8, !dbg !1514, !tbaa !1309
  %mul7.i35.i.i = fmul double %add11.i.i140.i, %56, !dbg !1514
  %add8.i36.i.i = fadd double %add.i32.i.i, %mul7.i35.i.i, !dbg !1514
  call void @llvm.dbg.value(metadata !{double %add8.i36.i.i}, i64 0, metadata !1515), !dbg !1514
  call void @llvm.dbg.value(metadata !{double %add8.i36.i.i}, i64 0, metadata !1516), !dbg !1512
  call void @llvm.dbg.value(metadata !{double %add8.i36.i.i}, i64 0, metadata !1517), !dbg !1518
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1519), !dbg !1521
  call void @llvm.dbg.value(metadata !{double* %arraydecay8.i.i}, i64 0, metadata !1522), !dbg !1521
  %mul.i20.i.i = fmul double %add.i37.i.i, %54, !dbg !1523
  %mul4.i23.i.i = fmul double %add8.i41.i.i, %55, !dbg !1523
  %add.i24.i.i = fadd double %mul.i20.i.i, %mul4.i23.i.i, !dbg !1523
  %mul7.i27.i.i = fmul double %add14.i.i.i, %56, !dbg !1523
  %add8.i.i.i = fadd double %add.i24.i.i, %mul7.i27.i.i, !dbg !1523
  call void @llvm.dbg.value(metadata !{double %add8.i.i.i}, i64 0, metadata !1524), !dbg !1523
  call void @llvm.dbg.value(metadata !{double %add8.i.i.i}, i64 0, metadata !1525), !dbg !1521
  call void @llvm.dbg.value(metadata !{double %add8.i.i.i}, i64 0, metadata !1526), !dbg !1527
  %Offset.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 3, !dbg !1518
  %57 = load double* %Offset.i.i, align 8, !dbg !1518, !tbaa !1309
  %sub.i141.i = fsub double %add8.i36.i.i, %57, !dbg !1518
  %Alt.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 2, !dbg !1518
  %58 = load double* %Alt.i.i, align 8, !dbg !1518, !tbaa !1309
  %div.i142.i = fdiv double %sub.i141.i, %58, !dbg !1518
  call void @llvm.dbg.value(metadata !{double %div.i142.i}, i64 0, metadata !1528), !dbg !1518
  %sub13.i143.i = fsub double %add8.i.i.i, %57, !dbg !1527
  %div15.i.i = fdiv double %sub13.i143.i, %58, !dbg !1527
  call void @llvm.dbg.value(metadata !{double %div15.i.i}, i64 0, metadata !1529), !dbg !1527
  %cmp.i144.i = fcmp ugt double %div.i142.i, 0.000000e+00, !dbg !1530
  %cmp16.i.i = fcmp ole double %div15.i.i, 0.000000e+00, !dbg !1531
  br i1 %cmp.i144.i, label %if.else21.i.i, label %if.then.i145.i, !dbg !1530

if.then.i145.i:                                   ; preds = %sw.bb.i
  br i1 %cmp16.i.i, label %if.end42.i.i, label %if.else.i.i, !dbg !1531

if.else.i.i:                                      ; preds = %if.then.i145.i
  %call.i146.i = call double @atan(double %div15.i.i) #8, !dbg !1533
  %sub18.i.i = fsub double %call.i146.i, %div.i142.i, !dbg !1533
  %sub19.i.i = fsub double %div15.i.i, %div.i142.i, !dbg !1533
  %div20.i.i = fdiv double %sub18.i.i, %sub19.i.i, !dbg !1533
  call void @llvm.dbg.value(metadata !{double %div20.i.i}, i64 0, metadata !1535), !dbg !1533
  br label %if.end42.i.i

if.else21.i.i:                                    ; preds = %sw.bb.i
  br i1 %cmp16.i.i, label %if.then23.i.i, label %if.else28.i.i, !dbg !1536

if.then23.i.i:                                    ; preds = %if.else21.i.i
  %call24.i.i = call double @atan(double %div.i142.i) #8, !dbg !1538
  %sub25.i.i = fsub double %call24.i.i, %div15.i.i, !dbg !1538
  %sub26.i.i = fsub double %div.i142.i, %div15.i.i, !dbg !1538
  %div27.i.i = fdiv double %sub25.i.i, %sub26.i.i, !dbg !1538
  call void @llvm.dbg.value(metadata !{double %div27.i.i}, i64 0, metadata !1535), !dbg !1538
  br label %if.end42.i.i, !dbg !1540

if.else28.i.i:                                    ; preds = %if.else21.i.i
  %sub29.i.i = fsub double %div.i142.i, %div15.i.i, !dbg !1541
  call void @llvm.dbg.value(metadata !{double %sub29.i.i}, i64 0, metadata !1543), !dbg !1541
  %call30.i.i = call double @fabs(double %sub29.i.i) #9, !dbg !1544
  %cmp31.i.i = fcmp ogt double %call30.i.i, 1.000000e-07, !dbg !1544
  br i1 %cmp31.i.i, label %if.then32.i.i, label %if.else37.i.i, !dbg !1544

if.then32.i.i:                                    ; preds = %if.else28.i.i
  %call33.i.i = call double @atan(double %div.i142.i) #8, !dbg !1545
  %call34.i.i = call double @atan(double %div15.i.i) #8, !dbg !1545
  %sub35.i.i = fsub double %call33.i.i, %call34.i.i, !dbg !1545
  %div36.i.i = fdiv double %sub35.i.i, %sub29.i.i, !dbg !1545
  call void @llvm.dbg.value(metadata !{double %div36.i.i}, i64 0, metadata !1535), !dbg !1545
  br label %if.end42.i.i, !dbg !1547

if.else37.i.i:                                    ; preds = %if.else28.i.i
  call void @llvm.dbg.value(metadata !{double %div.i142.i}, i64 0, metadata !1548), !dbg !1551
  %mul.i19.i.i = fmul double %div.i142.i, %div.i142.i, !dbg !1552
  %add.i147.i = fadd double %mul.i19.i.i, 1.000000e+00, !dbg !1549
  %div39.i.i = fdiv double 1.000000e+00, %add.i147.i, !dbg !1549
  call void @llvm.dbg.value(metadata !{double %div39.i.i}, i64 0, metadata !1535), !dbg !1549
  br label %if.end42.i.i

if.end42.i.i:                                     ; preds = %if.else37.i.i, %if.then32.i.i, %if.then23.i.i, %if.else.i.i, %if.then.i145.i
  %fog_density.0.i.i = phi double [ %div20.i.i, %if.else.i.i ], [ %div27.i.i, %if.then23.i.i ], [ %div36.i.i, %if.then32.i.i ], [ %div39.i.i, %if.else37.i.i ], [ 1.000000e+00, %if.then.i145.i ]
  %Turb.i148.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 6, !dbg !1553
  %59 = load %"struct.pov::Turb_Struct"** %Turb.i148.i, align 8, !dbg !1553, !tbaa !1274
  %cmp43.i.i = icmp eq %"struct.pov::Turb_Struct"* %59, null, !dbg !1553
  br i1 %cmp43.i.i, label %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i, label %if.then44.i.i, !dbg !1553

if.then44.i.i:                                    ; preds = %if.end42.i.i
  call void @llvm.dbg.value(metadata !{double* %arraydecay45.i.i}, i64 0, metadata !1554), !dbg !1555
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1556), !dbg !1555
  call void @llvm.dbg.value(metadata !1493, i64 0, metadata !1557), !dbg !1555
  %add.i11.i.i = fadd double %add.i.i132.i, %add.i37.i.i, !dbg !1558
  %mul.i12.i.i = fmul double %add.i11.i.i, 5.000000e-01, !dbg !1558
  store double %mul.i12.i.i, double* %arraydecay45.i.i, align 16, !dbg !1558, !tbaa !1309
  %add5.i.i.i = fadd double %add6.i.i136.i, %add8.i41.i.i, !dbg !1483
  %mul6.i.i.i = fmul double %add5.i.i.i, 5.000000e-01, !dbg !1483
  store double %mul6.i.i.i, double* %arrayidx7.i15.i.i, align 8, !dbg !1483, !tbaa !1309
  %add10.i.i.i = fadd double %add11.i.i140.i, %add14.i.i.i, !dbg !1485
  %mul11.i.i.i = fmul double %add10.i.i.i, 5.000000e-01, !dbg !1485
  store double %mul11.i.i.i, double* %arrayidx12.i18.i.i, align 16, !dbg !1485, !tbaa !1309
  %arraydecay50.i.i = getelementptr inbounds %"struct.pov::Turb_Struct"* %59, i64 0, i32 3, i64 0, !dbg !1559
  call void @llvm.dbg.value(metadata !{double* %arraydecay45.i.i}, i64 0, metadata !1560), !dbg !1561
  call void @llvm.dbg.value(metadata !{double* %arraydecay50.i.i}, i64 0, metadata !1562), !dbg !1561
  %60 = load double* %arraydecay50.i.i, align 8, !dbg !1563, !tbaa !1309
  %mul.i6.i149.i = fmul double %mul.i12.i.i, %60, !dbg !1563
  store double %mul.i6.i149.i, double* %arraydecay45.i.i, align 16, !dbg !1563, !tbaa !1309
  %arrayidx2.i7.i150.i = getelementptr inbounds %"struct.pov::Turb_Struct"* %59, i64 0, i32 3, i64 1, !dbg !1565
  %61 = load double* %arrayidx2.i7.i150.i, align 8, !dbg !1565, !tbaa !1309
  %mul4.i.i151.i = fmul double %mul6.i.i.i, %61, !dbg !1565
  store double %mul4.i.i151.i, double* %arrayidx7.i15.i.i, align 8, !dbg !1565, !tbaa !1309
  %arrayidx5.i9.i152.i = getelementptr inbounds %"struct.pov::Turb_Struct"* %59, i64 0, i32 3, i64 2, !dbg !1566
  %62 = load double* %arrayidx5.i9.i152.i, align 8, !dbg !1566, !tbaa !1309
  %mul7.i.i153.i = fmul double %mul11.i.i.i, %62, !dbg !1566
  store double %mul7.i.i153.i, double* %arrayidx12.i18.i.i, align 16, !dbg !1566, !tbaa !1309
  %sub51.i.i = fsub double -0.000000e+00, %46, !dbg !1567
  %63 = load double* %Distance.i13, align 8, !dbg !1567, !tbaa !1309
  %div52.i.i = fdiv double %sub51.i.i, %63, !dbg !1567
  %call53.i.i = call double @exp(double %div52.i.i) #8, !dbg !1567
  call void @llvm.dbg.value(metadata !{double %call53.i.i}, i64 0, metadata !1568), !dbg !1567
  call void @llvm.dbg.value(metadata !1295, i64 0, metadata !1569), !dbg !1571
  %64 = load %"struct.pov::Turb_Struct"** %Turb.i148.i, align 8, !dbg !1570, !tbaa !1274
  %call56.i.i = call double @_ZN3pov10TurbulenceEPdPNS_11Turb_StructEPNS_14Pattern_StructE(double* %arraydecay45.i.i, %"struct.pov::Turb_Struct"* %64, %"struct.pov::Pattern_Struct"* null) #7, !dbg !1570
  %Turb_Depth.i155.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 7, !dbg !1570
  %65 = load float* %Turb_Depth.i155.i, align 4, !dbg !1570, !tbaa !1250
  %conv.i156.i = fpext float %65 to double, !dbg !1570
  %mul.i157.i = fmul double %call56.i.i, %conv.i156.i, !dbg !1570
  call void @llvm.dbg.value(metadata !{double %mul.i157.i}, i64 0, metadata !1572), !dbg !1571
  %cmp.i.i158.i = fcmp olt double %mul.i157.i, 1.000000e+00, !dbg !1573
  %.sroa.speculated.i159.i = select i1 %cmp.i.i158.i, double %mul.i157.i, double 1.000000e+00, !dbg !1570
  %mul59.i.i = fmul double %call53.i.i, %.sroa.speculated.i159.i, !dbg !1570
  %sub60.i.i = fsub double 1.000000e+00, %mul59.i.i, !dbg !1570
  %mul61.i.i = fmul double %46, %sub60.i.i, !dbg !1570
  call void @llvm.dbg.value(metadata !{double %mul61.i.i}, i64 0, metadata !1575), !dbg !1570
  br label %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i, !dbg !1576

_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i: ; preds = %if.end42.i.i, %if.then44.i.i
  %Width.addr.0.i160.i = phi double [ %mul61.i.i, %if.then44.i.i ], [ %46, %if.end42.i.i ]
  %arraydecay64.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 0, !dbg !1577
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1578), !dbg !1579
  call void @llvm.dbg.value(metadata !{float* %arraydecay64.i.i}, i64 0, metadata !1580), !dbg !1579
  %66 = load float* %arraydecay64.i.i, align 4, !dbg !1581, !tbaa !1250
  %arrayidx2.i.i161.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 1, !dbg !1582
  %67 = load float* %arrayidx2.i.i161.i, align 4, !dbg !1582, !tbaa !1250
  %arrayidx4.i2.i163.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 2, !dbg !1583
  %68 = load float* %arrayidx4.i2.i163.i, align 4, !dbg !1583, !tbaa !1250
  %arrayidx6.i.i165.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 3, !dbg !1584
  %69 = load float* %arrayidx6.i.i165.i, align 4, !dbg !1584, !tbaa !1250
  %arrayidx8.i4.i167.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 4, !dbg !1585
  %70 = load float* %arrayidx8.i4.i167.i, align 4, !dbg !1585, !tbaa !1250
  %71 = fmul double %fog_density.0.i.i, %Width.addr.0.i160.i, !dbg !1586
  %mul66.i.i = fsub double -0.000000e+00, %71, !dbg !1586
  %72 = load double* %Distance.i13, align 8, !dbg !1586, !tbaa !1309
  %div68.i.i = fdiv double %mul66.i.i, %72, !dbg !1586
  %call69.i.i = call double @exp(double %div68.i.i) #8, !dbg !1586
  call void @llvm.lifetime.end(i64 24, i8* %44), !dbg !1586
  call void @llvm.dbg.value(metadata !{double %call69.i.i}, i64 0, metadata !1587), !dbg !1476
  br label %sw.epilog.i, !dbg !1588

sw.default.i:                                     ; preds = %if.then4.i
  call void @llvm.dbg.value(metadata !1422, i64 0, metadata !1589), !dbg !1591
  call void @llvm.dbg.declare(metadata !{[3 x double]* %Temp.i}, metadata !1089), !dbg !1592
  %Turb.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 6, !dbg !1593
  %73 = load %"struct.pov::Turb_Struct"** %Turb.i.i, align 8, !dbg !1593, !tbaa !1274
  %cmp.i.i16 = icmp eq %"struct.pov::Turb_Struct"* %73, null, !dbg !1593
  br i1 %cmp.i.i16, label %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i, label %if.then.i.i, !dbg !1593

if.then.i.i:                                      ; preds = %sw.default.i
  %div.i.i = fmul double %46, 5.000000e-01, !dbg !1594
  %add.i122.i = fadd double %div.i.i, 0.000000e+00, !dbg !1594
  call void @llvm.dbg.value(metadata !{double %add.i122.i}, i64 0, metadata !1589), !dbg !1594
  call void @llvm.dbg.value(metadata !{double* %arraydecay45.i.i}, i64 0, metadata !1596), !dbg !1598
  call void @llvm.dbg.value(metadata !{double* %arraydecay1.i129.i}, i64 0, metadata !1599), !dbg !1598
  call void @llvm.dbg.value(metadata !{double %add.i122.i}, i64 0, metadata !1600), !dbg !1598
  call void @llvm.dbg.value(metadata !{double* %arraydecay2.i130.i}, i64 0, metadata !1601), !dbg !1598
  %74 = load double* %arraydecay1.i129.i, align 8, !dbg !1602, !tbaa !1309
  %75 = load double* %arraydecay2.i130.i, align 8, !dbg !1602, !tbaa !1309
  %mul.i.i.i = fmul double %add.i122.i, %75, !dbg !1602
  %add.i.i.i = fadd double %74, %mul.i.i.i, !dbg !1602
  store double %add.i.i.i, double* %arraydecay45.i.i, align 16, !dbg !1602, !tbaa !1309
  %76 = load double* %arrayidx3.i.i133.i, align 8, !dbg !1603, !tbaa !1309
  %77 = load double* %arrayidx4.i.i134.i, align 8, !dbg !1603, !tbaa !1309
  %mul5.i.i.i = fmul double %add.i122.i, %77, !dbg !1603
  %add6.i.i.i = fadd double %76, %mul5.i.i.i, !dbg !1603
  store double %add6.i.i.i, double* %arrayidx7.i15.i.i, align 8, !dbg !1603, !tbaa !1309
  %78 = load double* %arrayidx8.i.i137.i, align 8, !dbg !1604, !tbaa !1309
  %79 = load double* %arrayidx9.i.i138.i, align 8, !dbg !1604, !tbaa !1309
  %mul10.i.i.i = fmul double %add.i122.i, %79, !dbg !1604
  %add11.i.i.i = fadd double %78, %mul10.i.i.i, !dbg !1604
  store double %add11.i.i.i, double* %arrayidx12.i18.i.i, align 16, !dbg !1604, !tbaa !1309
  %arraydecay5.i.i = getelementptr inbounds %"struct.pov::Turb_Struct"* %73, i64 0, i32 3, i64 0, !dbg !1605
  call void @llvm.dbg.value(metadata !{double* %arraydecay45.i.i}, i64 0, metadata !1606), !dbg !1607
  call void @llvm.dbg.value(metadata !{double* %arraydecay5.i.i}, i64 0, metadata !1608), !dbg !1607
  %80 = load double* %arraydecay5.i.i, align 8, !dbg !1609, !tbaa !1309
  %mul.i6.i.i = fmul double %add.i.i.i, %80, !dbg !1609
  store double %mul.i6.i.i, double* %arraydecay45.i.i, align 16, !dbg !1609, !tbaa !1309
  %arrayidx2.i7.i.i = getelementptr inbounds %"struct.pov::Turb_Struct"* %73, i64 0, i32 3, i64 1, !dbg !1610
  %81 = load double* %arrayidx2.i7.i.i, align 8, !dbg !1610, !tbaa !1309
  %mul4.i.i.i = fmul double %add6.i.i.i, %81, !dbg !1610
  store double %mul4.i.i.i, double* %arrayidx7.i15.i.i, align 8, !dbg !1610, !tbaa !1309
  %arrayidx5.i9.i.i = getelementptr inbounds %"struct.pov::Turb_Struct"* %73, i64 0, i32 3, i64 2, !dbg !1611
  %82 = load double* %arrayidx5.i9.i.i, align 8, !dbg !1611, !tbaa !1309
  %mul7.i.i.i = fmul double %add11.i.i.i, %82, !dbg !1611
  store double %mul7.i.i.i, double* %arrayidx12.i18.i.i, align 16, !dbg !1611, !tbaa !1309
  %sub.i.i = fsub double -0.000000e+00, %46, !dbg !1612
  %83 = load double* %Distance.i13, align 8, !dbg !1612, !tbaa !1309
  %div6.i.i = fdiv double %sub.i.i, %83, !dbg !1612
  %call.i.i = call double @exp(double %div6.i.i) #8, !dbg !1612
  call void @llvm.dbg.value(metadata !{double %call.i.i}, i64 0, metadata !1613), !dbg !1612
  call void @llvm.dbg.value(metadata !1295, i64 0, metadata !1614), !dbg !1616
  %84 = load %"struct.pov::Turb_Struct"** %Turb.i.i, align 8, !dbg !1615, !tbaa !1274
  %call9.i.i = call double @_ZN3pov10TurbulenceEPdPNS_11Turb_StructEPNS_14Pattern_StructE(double* %arraydecay45.i.i, %"struct.pov::Turb_Struct"* %84, %"struct.pov::Pattern_Struct"* null) #7, !dbg !1615
  %Turb_Depth.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 7, !dbg !1615
  %85 = load float* %Turb_Depth.i.i, align 4, !dbg !1615, !tbaa !1250
  %conv.i.i = fpext float %85 to double, !dbg !1615
  %mul.i123.i = fmul double %call9.i.i, %conv.i.i, !dbg !1615
  call void @llvm.dbg.value(metadata !{double %mul.i123.i}, i64 0, metadata !1617), !dbg !1616
  %cmp.i.i.i = fcmp olt double %mul.i123.i, 1.000000e+00, !dbg !1618
  %.sroa.speculated.i.i = select i1 %cmp.i.i.i, double %mul.i123.i, double 1.000000e+00, !dbg !1615
  %mul12.i.i = fmul double %call.i.i, %.sroa.speculated.i.i, !dbg !1615
  %sub13.i.i = fsub double 1.000000e+00, %mul12.i.i, !dbg !1615
  %mul14.i.i = fmul double %46, %sub13.i.i, !dbg !1615
  call void @llvm.dbg.value(metadata !{double %mul14.i.i}, i64 0, metadata !1619), !dbg !1615
  %.pre.i = load double* %Distance.i13, align 8, !dbg !1620, !tbaa !1309
  br label %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i, !dbg !1621

_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i: ; preds = %if.then.i.i, %sw.default.i
  %86 = phi double [ %.pre.i, %if.then.i.i ], [ %45, %sw.default.i ]
  %Width.addr.0.i.i = phi double [ %mul14.i.i, %if.then.i.i ], [ %46, %sw.default.i ]
  %arraydecay16.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 0, !dbg !1622
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1623), !dbg !1624
  call void @llvm.dbg.value(metadata !{float* %arraydecay16.i.i}, i64 0, metadata !1625), !dbg !1624
  %87 = load float* %arraydecay16.i.i, align 4, !dbg !1626, !tbaa !1250
  %arrayidx2.i.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 1, !dbg !1627
  %88 = load float* %arrayidx2.i.i.i, align 4, !dbg !1627, !tbaa !1250
  %arrayidx4.i2.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 2, !dbg !1628
  %89 = load float* %arrayidx4.i2.i.i, align 4, !dbg !1628, !tbaa !1250
  %arrayidx6.i.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 3, !dbg !1629
  %90 = load float* %arrayidx6.i.i.i, align 4, !dbg !1629, !tbaa !1250
  %arrayidx8.i4.i.i = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 4, i64 4, !dbg !1630
  %91 = load float* %arrayidx8.i4.i.i, align 4, !dbg !1630, !tbaa !1250
  %sub17.i.i = fsub double -0.000000e+00, %Width.addr.0.i.i, !dbg !1620
  %div19.i.i = fdiv double %sub17.i.i, %86, !dbg !1620
  %call20.i.i = call double @exp(double %div19.i.i) #8, !dbg !1620
  call void @llvm.lifetime.end(i64 24, i8* %44), !dbg !1620
  call void @llvm.dbg.value(metadata !{double %call20.i.i}, i64 0, metadata !1587), !dbg !1590
  br label %sw.epilog.i, !dbg !1631

sw.epilog.i:                                      ; preds = %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i
  %Col_Fog.sroa.4.16.load184205.i = phi float [ %70, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ], [ %91, %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ]
  %Col_Fog.sroa.3.12.load183204.i = phi float [ %69, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ], [ %90, %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ]
  %Col_Fog.sroa.2.8.load180203.i = phi float [ %68, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ], [ %89, %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ]
  %Col_Fog.sroa.1.4.load179202.i = phi float [ %67, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ], [ %88, %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ]
  %Col_Fog.sroa.0.0.load178201.i = phi float [ %66, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ], [ %87, %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ]
  %att.0.i = phi double [ %call69.i.i, %_ZN3povL10ground_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ], [ %call20.i.i, %_ZN3povL12constant_fogEPNS_10Ray_StructEddPNS_10Fog_StructEPf.exit.i ]
  %conv.i17 = fpext float %Col_Fog.sroa.4.16.load184205.i to double, !dbg !1632
  %cmp9.i = fcmp olt double %att.0.i, %conv.i17, !dbg !1632
  call void @llvm.dbg.value(metadata !{double %conv.i17}, i64 0, metadata !1587), !dbg !1633
  %att.1.i = select i1 %cmp9.i, double %conv.i17, double %att.0.i, !dbg !1632
  %conv15.i = fpext float %Col_Fog.sroa.3.12.load183204.i to double, !dbg !1635
  %sub.i18 = fsub double 1.000000e+00, %conv15.i, !dbg !1635
  %mul.i19 = fmul float %Col_Fog.sroa.3.12.load183204.i, %Col_Fog.sroa.0.0.load178201.i, !dbg !1635
  %conv18.i = fpext float %mul.i19 to double, !dbg !1635
  %add.i20 = fadd double %sub.i18, %conv18.i, !dbg !1635
  %mul19.i = fmul double %att.1.i, %add.i20, !dbg !1635
  %conv21.i = fpext float %sum_att.sroa.0.0.load173192212.i to double, !dbg !1635
  %mul22.i = fmul double %conv21.i, %mul19.i, !dbg !1635
  %conv23.i = fptrunc double %mul22.i to float, !dbg !1635
  %mul29.i = fmul float %Col_Fog.sroa.3.12.load183204.i, %Col_Fog.sroa.1.4.load179202.i, !dbg !1636
  %conv30.i = fpext float %mul29.i to double, !dbg !1636
  %add31.i = fadd double %sub.i18, %conv30.i, !dbg !1636
  %mul32.i21 = fmul double %add31.i, %att.1.i, !dbg !1636
  %conv34.i = fpext float %sum_att.sroa.1.4.load175194211.i to double, !dbg !1636
  %mul35.i22 = fmul double %conv34.i, %mul32.i21, !dbg !1636
  %conv36.i = fptrunc double %mul35.i22 to float, !dbg !1636
  %mul42.i = fmul float %Col_Fog.sroa.3.12.load183204.i, %Col_Fog.sroa.2.8.load180203.i, !dbg !1637
  %conv43.i = fpext float %mul42.i to double, !dbg !1637
  %add44.i = fadd double %sub.i18, %conv43.i, !dbg !1637
  %mul45.i = fmul double %add44.i, %att.1.i, !dbg !1637
  %conv47.i = fpext float %sum_att.sroa.2.8.load177196210.i to double, !dbg !1637
  %mul48.i = fmul double %conv47.i, %mul45.i, !dbg !1637
  %conv49.i = fptrunc double %mul48.i to float, !dbg !1637
  br i1 %tobool, label %if.then64.i, label %for.inc.i29, !dbg !1638

if.then64.i:                                      ; preds = %sw.epilog.i
  %sub65.i23 = fsub double 1.000000e+00, %att.1.i, !dbg !1639
  call void @llvm.dbg.value(metadata !{double %sub65.i23}, i64 0, metadata !1641), !dbg !1639
  %conv67.i = fptrunc double %sub65.i23 to float, !dbg !1642
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1643), !dbg !1644
  call void @llvm.dbg.value(metadata !{float %conv67.i}, i64 0, metadata !1645), !dbg !1644
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1646), !dbg !1644
  %mul.i.i24 = fmul float %Col_Fog.sroa.0.0.load178201.i, %conv67.i, !dbg !1647
  %add.i.i25 = fadd float %sum_col.sroa.0.0.load169186215.i, %mul.i.i24, !dbg !1647
  %mul3.i.i = fmul float %Col_Fog.sroa.1.4.load179202.i, %conv67.i, !dbg !1648
  %add5.i.i = fadd float %sum_col.sroa.1.4.load170188214.i, %mul3.i.i, !dbg !1648
  %mul7.i.i26 = fmul float %Col_Fog.sroa.2.8.load180203.i, %conv67.i, !dbg !1649
  %add9.i.i = fadd float %sum_col.sroa.2.8.load171190213.i, %mul7.i.i26, !dbg !1649
  br label %for.inc.i29, !dbg !1650

for.inc.i29:                                      ; preds = %if.then64.i, %sw.epilog.i, %for.body.i15
  %sum_att.sroa.2.8.load177195.i = phi float [ %conv49.i, %sw.epilog.i ], [ %sum_att.sroa.2.8.load177196210.i, %for.body.i15 ], [ %conv49.i, %if.then64.i ]
  %sum_att.sroa.1.4.load175193.i = phi float [ %conv36.i, %sw.epilog.i ], [ %sum_att.sroa.1.4.load175194211.i, %for.body.i15 ], [ %conv36.i, %if.then64.i ]
  %sum_att.sroa.0.0.load173191.i = phi float [ %conv23.i, %sw.epilog.i ], [ %sum_att.sroa.0.0.load173192212.i, %for.body.i15 ], [ %conv23.i, %if.then64.i ]
  %sum_col.sroa.2.8.load171189.i = phi float [ %sum_col.sroa.2.8.load171190213.i, %sw.epilog.i ], [ %sum_col.sroa.2.8.load171190213.i, %for.body.i15 ], [ %add9.i.i, %if.then64.i ]
  %sum_col.sroa.1.4.load170187.i = phi float [ %sum_col.sroa.1.4.load170188214.i, %sw.epilog.i ], [ %sum_col.sroa.1.4.load170188214.i, %for.body.i15 ], [ %add5.i.i, %if.then64.i ]
  %sum_col.sroa.0.0.load169185.i = phi float [ %sum_col.sroa.0.0.load169186215.i, %sw.epilog.i ], [ %sum_col.sroa.0.0.load169186215.i, %for.body.i15 ], [ %add.i.i25, %if.then64.i ]
  %Next.i27 = getelementptr inbounds %"struct.pov::Fog_Struct"* %Fog.0216.i, i64 0, i32 8, !dbg !1486
  %Fog.0.i = load %"struct.pov::Fog_Struct"** %Next.i27, align 8, !dbg !1486
  %cmp2.i28 = icmp eq %"struct.pov::Fog_Struct"* %Fog.0.i, null, !dbg !1486
  br i1 %cmp2.i28, label %for.end.i38, label %for.body.i15, !dbg !1486

for.end.i38:                                      ; preds = %for.inc.i29
  %92 = load float* %Colour, align 4, !dbg !1651, !tbaa !1250
  %mul74.i30 = fmul float %sum_att.sroa.0.0.load173191.i, %92, !dbg !1651
  %add75.i = fadd float %sum_col.sroa.0.0.load169185.i, %mul74.i30, !dbg !1651
  store float %add75.i, float* %Colour, align 4, !dbg !1651, !tbaa !1250
  %arrayidx79.i = getelementptr inbounds float* %Colour, i64 1, !dbg !1652
  %93 = load float* %arrayidx79.i, align 4, !dbg !1652, !tbaa !1250
  %mul80.i = fmul float %sum_att.sroa.1.4.load175193.i, %93, !dbg !1652
  %add81.i = fadd float %sum_col.sroa.1.4.load170187.i, %mul80.i, !dbg !1652
  store float %add81.i, float* %arrayidx79.i, align 4, !dbg !1652, !tbaa !1250
  %arrayidx85.i = getelementptr inbounds float* %Colour, i64 2, !dbg !1653
  %94 = load float* %arrayidx85.i, align 4, !dbg !1653, !tbaa !1250
  %mul86.i31 = fmul float %sum_att.sroa.2.8.load177195.i, %94, !dbg !1653
  %add87.i32 = fadd float %sum_col.sroa.2.8.load171189.i, %mul86.i31, !dbg !1653
  store float %add87.i32, float* %arrayidx85.i, align 4, !dbg !1653, !tbaa !1250
  %conv90.i = fpext float %sum_att.sroa.0.0.load173191.i to double, !dbg !1654
  %mul91.i = fmul double %conv90.i, 2.970000e-01, !dbg !1654
  %conv93.i33 = fpext float %sum_att.sroa.1.4.load175193.i to double, !dbg !1654
  %mul94.i34 = fmul double %conv93.i33, 5.890000e-01, !dbg !1654
  %add95.i = fadd double %mul94.i34, %mul91.i, !dbg !1654
  %conv97.i35 = fpext float %sum_att.sroa.2.8.load177195.i to double, !dbg !1654
  %mul98.i36 = fmul double %conv97.i35, 1.140000e-01, !dbg !1654
  %add99.i37 = fadd double %mul98.i36, %add95.i, !dbg !1654
  %arrayidx100.i = getelementptr inbounds float* %Colour, i64 4, !dbg !1654
  %95 = load float* %arrayidx100.i, align 4, !dbg !1654, !tbaa !1250
  %conv101.i = fpext float %95 to double, !dbg !1654
  %mul102.i = fmul double %add99.i37, %conv101.i, !dbg !1654
  %conv103.i = fptrunc double %mul102.i to float, !dbg !1654
  store float %conv103.i, float* %arrayidx100.i, align 4, !dbg !1654, !tbaa !1250
  br label %_ZN3povL6do_fogEPNS_10Ray_StructEPNS_10istk_entryEPfi.exit, !dbg !1654

_ZN3povL6do_fogEPNS_10Ray_StructEPNS_10istk_entryEPfi.exit: ; preds = %if.end, %for.end.i38
  ret void, !dbg !1655
}
