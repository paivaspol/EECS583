define void @_ZN3pov22Do_Infinite_AtmosphereEPNS_10Ray_StructEPf(%"struct.pov::Ray_Struct"* %Ray, float* nocapture %Colour) #1 {
entry:
  %Col_Temp.i = alloca [5 x float], align 16
  %P.i = alloca [3 x double], align 16
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !788), !dbg !1240
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !790), !dbg !1240
  %0 = load i32* getelementptr inbounds (%"struct.pov::OPTIONS_STRUCT"* @_ZN3pov4optsE, i64 0, i32 0), align 8, !dbg !1241, !tbaa !1242
  %and = and i32 %0, 65536, !dbg !1241
  %tobool = icmp eq i32 %and, 0, !dbg !1241
  br i1 %tobool, label %if.else, label %land.lhs.true, !dbg !1241

land.lhs.true:                                    ; preds = %entry
  %1 = load i8* @_ZN3pov17In_Reflection_RayE, align 1, !dbg !1241, !tbaa !1245, !range !1246
  %tobool1 = icmp ne i8 %1, 0, !dbg !1241
  %2 = load i32* @_ZN3pov21Radiosity_Trace_LevelE, align 4, !dbg !1241, !tbaa !1242
  %cmp = icmp sgt i32 %2, 1, !dbg !1241
  %or.cond = or i1 %tobool1, %cmp, !dbg !1241
  br i1 %or.cond, label %if.else, label %if.then, !dbg !1241

if.then:                                          ; preds = %land.lhs.true
  %arrayidx5 = getelementptr inbounds float* %Colour, i64 4, !dbg !1247
  %3 = bitcast float* %Colour to i8*, !dbg !1247
  call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 16, i32 4, i1 false), !dbg !1249
  store float 1.000000e+00, float* %arrayidx5, align 4, !dbg !1247, !tbaa !1250
  br label %if.end, !dbg !1251

if.else:                                          ; preds = %entry, %land.lhs.true
  tail call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1252), !dbg !1255
  tail call void @llvm.dbg.value(metadata !1256, i64 0, metadata !1257), !dbg !1255
  %4 = load float* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 9, i64 0), align 8, !dbg !1258, !tbaa !1250
  store float %4, float* %Colour, align 4, !dbg !1258, !tbaa !1250
  %5 = load float* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 9, i64 1), align 4, !dbg !1260, !tbaa !1250
  %arrayidx3.i = getelementptr inbounds float* %Colour, i64 1, !dbg !1260
  store float %5, float* %arrayidx3.i, align 4, !dbg !1260, !tbaa !1250
  %6 = load float* getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 9, i64 2), align 8, !dbg !1261, !tbaa !1250
  %arrayidx5.i = getelementptr inbounds float* %Colour, i64 2, !dbg !1261
  store float %6, float* %arrayidx5.i, align 4, !dbg !1261, !tbaa !1250
  %arrayidx7.i = getelementptr inbounds float* %Colour, i64 3, !dbg !1262
  %arrayidx9.i = getelementptr inbounds float* %Colour, i64 4, !dbg !1263
  store float 0.000000e+00, float* %arrayidx7.i, align 4, !dbg !1264, !tbaa !1250
  store float 1.000000e+00, float* %arrayidx9.i, align 4, !dbg !1265, !tbaa !1250
  %7 = bitcast [5 x float]* %Col_Temp.i to i8*, !dbg !1266
  call void @llvm.lifetime.start(i64 20, i8* %7), !dbg !1266
  %8 = bitcast [3 x double]* %P.i to i8*, !dbg !1266
  call void @llvm.lifetime.start(i64 24, i8* %8), !dbg !1266
  call void @llvm.dbg.value(metadata !{%"struct.pov::Ray_Struct"* %Ray}, i64 0, metadata !1268), !dbg !1266
  call void @llvm.dbg.value(metadata !{float* %Colour}, i64 0, metadata !1269), !dbg !1266
  call void @llvm.dbg.declare(metadata !1270, metadata !979), !dbg !1271
  call void @llvm.dbg.declare(metadata !{[5 x float]* %Col_Temp.i}, metadata !980), !dbg !1271
  call void @llvm.dbg.declare(metadata !1270, metadata !981), !dbg !1271
  call void @llvm.dbg.declare(metadata !{[3 x double]* %P.i}, metadata !982), !dbg !1272
  %9 = load %"struct.pov::Skysphere_Struct"** getelementptr inbounds (%"struct.pov::Frame_Struct"* @_ZN3pov5FrameE, i64 0, i32 15), align 8, !dbg !1273, !tbaa !1274
  %cmp.i = icmp eq %"struct.pov::Skysphere_Struct"* %9, null, !dbg !1273
  br i1 %cmp.i, label %if.end, label %land.lhs.true.i, !dbg !1273

land.lhs.true.i:                                  ; preds = %if.else
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1276), !dbg !1278
  call void @llvm.dbg.value(metadata !1279, i64 0, metadata !1280), !dbg !1278
  call void @llvm.dbg.value(metadata !1279, i64 0, metadata !1281), !dbg !1278
  call void @llvm.dbg.value(metadata !1279, i64 0, metadata !1282), !dbg !1278
  call void @llvm.dbg.value(metadata !{%"struct.pov::Skysphere_Struct"* %9}, i64 0, metadata !1283), !dbg !1284
  %Pigments.i = getelementptr inbounds %"struct.pov::Skysphere_Struct"* %9, i64 0, i32 1, !dbg !1284
  %10 = load %"struct.pov::Pigment_Struct"*** %Pigments.i, align 8, !dbg !1284, !tbaa !1274
  %cmp2.i = icmp eq %"struct.pov::Pigment_Struct"** %10, null, !dbg !1284
  br i1 %cmp2.i, label %if.end, label %if.then3.i, !dbg !1284

if.then3.i:                                       ; preds = %land.lhs.true.i
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1285), !dbg !1288
  call void @llvm.dbg.value(metadata !1289, i64 0, metadata !1290), !dbg !1288
  call void @llvm.dbg.value(metadata !1289, i64 0, metadata !1291), !dbg !1288
  call void @llvm.dbg.value(metadata !1289, i64 0, metadata !1292), !dbg !1288
  call void @llvm.dbg.value(metadata !1289, i64 0, metadata !1293), !dbg !1288
  call void @llvm.dbg.value(metadata !1289, i64 0, metadata !1294), !dbg !1288
  call void @llvm.dbg.value(metadata !1295, i64 0, metadata !1296), !dbg !1297
  %Trans.i = getelementptr inbounds %"struct.pov::Skysphere_Struct"* %9, i64 0, i32 2, !dbg !1298
  %11 = load %"struct.pov::Transform_Struct"** %Trans.i, align 8, !dbg !1298, !tbaa !1274
  %cmp5.i = icmp eq %"struct.pov::Transform_Struct"* %11, null, !dbg !1298
  %arraydecay7.i = getelementptr inbounds [3 x double]* %P.i, i64 0, i64 0, !dbg !1299
  %arraydecay8.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 0, !dbg !1299
  br i1 %cmp5.i, label %if.else.i, label %if.then6.i, !dbg !1298

if.then6.i:                                       ; preds = %if.then3.i
  call void @_ZN3pov14MInvTransPointEPdS0_PNS_16Transform_StructE(double* %arraydecay7.i, double* %arraydecay8.i, %"struct.pov::Transform_Struct"* %11) #7, !dbg !1299
  br label %if.end13.i, !dbg !1301

if.else.i:                                        ; preds = %if.then3.i
  call void @llvm.dbg.value(metadata !{double* %arraydecay7.i}, i64 0, metadata !1302), !dbg !1305
  call void @llvm.dbg.value(metadata !{double* %arraydecay8.i}, i64 0, metadata !1306), !dbg !1305
  %12 = load double* %arraydecay8.i, align 8, !dbg !1307, !tbaa !1309
  store double %12, double* %arraydecay7.i, align 16, !dbg !1307, !tbaa !1309
  %arrayidx2.i104.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 1, !dbg !1310
  %13 = load double* %arrayidx2.i104.i, align 8, !dbg !1310, !tbaa !1309
  %arrayidx3.i105.i = getelementptr inbounds [3 x double]* %P.i, i64 0, i64 1, !dbg !1310
  store double %13, double* %arrayidx3.i105.i, align 8, !dbg !1310, !tbaa !1309
  %arrayidx4.i106.i = getelementptr inbounds %"struct.pov::Ray_Struct"* %Ray, i64 0, i32 1, i64 2, !dbg !1311
  %14 = load double* %arrayidx4.i106.i, align 8, !dbg !1311, !tbaa !1309
  %arrayidx5.i.i = getelementptr inbounds [3 x double]* %P.i, i64 0, i64 2, !dbg !1311
  store double %14, double* %arrayidx5.i.i, align 16, !dbg !1311, !tbaa !1309
  br label %if.end13.i

if.end13.i:                                       ; preds = %if.else.i, %if.then6.i
  %Count.i = getelementptr inbounds %"struct.pov::Skysphere_Struct"* %9, i64 0, i32 0, !dbg !1312
  %15 = load i32* %Count.i, align 4, !dbg !1312, !tbaa !1242
  %cmp14135.i = icmp sgt i32 %15, 0, !dbg !1312
  br i1 %cmp14135.i, label %for.body.lr.ph.i, label %for.end.i, !dbg !1312

for.body.lr.ph.i:                                 ; preds = %if.end13.i
  %arraydecay15.i = getelementptr inbounds [5 x float]* %Col_Temp.i, i64 0, i64 0, !dbg !1314
  %arrayidx18.i = getelementptr inbounds [5 x float]* %Col_Temp.i, i64 0, i64 3, !dbg !1316
  %arrayidx20.i = getelementptr inbounds [5 x float]* %Col_Temp.i, i64 0, i64 4, !dbg !1316
  %arrayidx2.i102.i = getelementptr inbounds [5 x float]* %Col_Temp.i, i64 0, i64 1, !dbg !1317
  %arrayidx6.i.i = getelementptr inbounds [5 x float]* %Col_Temp.i, i64 0, i64 2, !dbg !1320
  %16 = sext i32 %15 to i64
  br label %for.body.i, !dbg !1312

for.body.i:                                       ; preds = %for.body.for.body_crit_edge.i, %for.body.lr.ph.i
  %indvars.iv.i = phi i64 [ %16, %for.body.lr.ph.i ], [ %indvars.iv.next.i, %for.body.for.body_crit_edge.i ]
  %trans.0144.i = phi double [ 1.000000e+00, %for.body.lr.ph.i ], [ %add.i, %for.body.for.body_crit_edge.i ]
  %Filter.sroa.0.0.load111126143.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %mul28.i, %for.body.for.body_crit_edge.i ]
  %Filter.sroa.1.4.load112127142.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %mul31.i, %for.body.for.body_crit_edge.i ]
  %Filter.sroa.2.8.load113128141.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %mul34.i, %for.body.for.body_crit_edge.i ]
  %Filter.sroa.3.12.load118129140.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %mul37.i, %for.body.for.body_crit_edge.i ]
  %Filter.sroa.4.16.load122130139.i = phi float [ 1.000000e+00, %for.body.lr.ph.i ], [ %mul40.i, %for.body.for.body_crit_edge.i ]
  %Col.sroa.0.0.load123131138.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %add.i.i, %for.body.for.body_crit_edge.i ]
  %Col.sroa.1.4.load124132137.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %add5.i.i, %for.body.for.body_crit_edge.i ]
  %Col.sroa.2.8.load125133136.i = phi float [ 0.000000e+00, %for.body.lr.ph.i ], [ %add9.i.i, %for.body.for.body_crit_edge.i ]
  %indvars.iv.next.i = add i64 %indvars.iv.i, -1, !dbg !1312
  %17 = load %"struct.pov::Pigment_Struct"*** %Pigments.i, align 8, !dbg !1314, !tbaa !1274
  %arrayidx.i = getelementptr inbounds %"struct.pov::Pigment_Struct"** %17, i64 %indvars.iv.next.i, !dbg !1314
  %18 = load %"struct.pov::Pigment_Struct"** %arrayidx.i, align 8, !dbg !1314, !tbaa !1274
  %call.i = call i32 @_ZN3pov15Compute_PigmentEPfPNS_14Pigment_StructEPdPNS_10istk_entryE(float* %arraydecay15.i, %"struct.pov::Pigment_Struct"* %18, double* %arraydecay7.i, %"struct.pov::istk_entry"* null) #7, !dbg !1314
  %19 = load float* %arrayidx18.i, align 4, !dbg !1316, !tbaa !1250
  %conv.i = fpext float %19 to double, !dbg !1316
  %sub19.i = fsub double 1.000000e+00, %conv.i, !dbg !1316
  %20 = load float* %arrayidx20.i, align 16, !dbg !1316, !tbaa !1250
  %conv21.i = fpext float %20 to double, !dbg !1316
  %sub22.i = fsub double %sub19.i, %conv21.i, !dbg !1316
  %mul.i = fmul double %trans.0144.i, %sub22.i, !dbg !1316
  call void @llvm.dbg.value(metadata !{double %mul.i}, i64 0, metadata !1321), !dbg !1316
  %conv24.i = fptrunc double %mul.i to float, !dbg !1319
  call void @llvm.dbg.value(metadata !1275, i64 0, metadata !1322), !dbg !1323
  call void @llvm.dbg.value(metadata !{float %conv24.i}, i64 0, metadata !1324), !dbg !1323
  call void @llvm.dbg.value(metadata !{float* %arraydecay15.i}, i64 0, metadata !1325), !dbg !1323
  %21 = load float* %arraydecay15.i, align 16, !dbg !1326, !tbaa !1250
  %mul.i.i = fmul float %21, %conv24.i, !dbg !1326
  %add.i.i = fadd float %Col.sroa.0.0.load123131138.i, %mul.i.i, !dbg !1326
  %22 = load float* %arrayidx2.i102.i, align 4, !dbg !1317, !tbaa !1250
  %mul3.i.i = fmul float %22, %conv24.i, !dbg !1317
  %add5.i.i = fadd float %Col.sroa.1.4.load124132137.i, %mul3.i.i, !dbg !1317
  %23 = load float* %arrayidx6.i.i, align 8, !dbg !1320, !tbaa !1250
  %mul7.i.i = fmul float %23, %conv24.i, !dbg !1320
  %add9.i.i = fadd float %Col.sroa.2.8.load125133136.i, %mul7.i.i, !dbg !1320
  %mul28.i = fmul float %Filter.sroa.0.0.load111126143.i, %21, !dbg !1327
  %mul31.i = fmul float %Filter.sroa.1.4.load112127142.i, %22, !dbg !1328
  %mul34.i = fmul float %Filter.sroa.2.8.load113128141.i, %23, !dbg !1329
  %mul37.i = fmul float %Filter.sroa.3.12.load118129140.i, %19, !dbg !1330
  %mul40.i = fmul float %Filter.sroa.4.16.load122130139.i, %20, !dbg !1331
  %24 = trunc i64 %indvars.iv.next.i to i32, !dbg !1312
  %cmp14.i = icmp sgt i32 %24, 0, !dbg !1312
  br i1 %cmp14.i, label %for.body.for.body_crit_edge.i, label %for.end.i, !dbg !1312

for.body.for.body_crit_edge.i:                    ; preds = %for.body.i
  %fabsf101.i = call float @fabsf(float %mul40.i) #5, !dbg !1332
  %fabsf.i = call float @fabsf(float %mul37.i) #5, !dbg !1332
  %25 = fpext float %fabsf101.i to double, !dbg !1332
  %26 = fpext float %fabsf.i to double, !dbg !1332
  %add.i = fadd double %25, %26, !dbg !1332
  br label %for.body.i, !dbg !1312

for.end.i:                                        ; preds = %for.body.i, %if.end13.i
  %Filter.sroa.0.0.load111126.lcssa.i = phi float [ 1.000000e+00, %if.end13.i ], [ %mul28.i, %for.body.i ]
  %Filter.sroa.1.4.load112127.lcssa.i = phi float [ 1.000000e+00, %if.end13.i ], [ %mul31.i, %for.body.i ]
  %Filter.sroa.2.8.load113128.lcssa.i = phi float [ 1.000000e+00, %if.end13.i ], [ %mul34.i, %for.body.i ]
  %Filter.sroa.3.12.load118129.lcssa.i = phi float [ 1.000000e+00, %if.end13.i ], [ %mul37.i, %for.body.i ]
  %Filter.sroa.4.16.load122130.lcssa.i = phi float [ 1.000000e+00, %if.end13.i ], [ %mul40.i, %for.body.i ]
  %Col.sroa.0.0.load123131.lcssa.i = phi float [ 0.000000e+00, %if.end13.i ], [ %add.i.i, %for.body.i ]
  %Col.sroa.1.4.load124132.lcssa.i = phi float [ 0.000000e+00, %if.end13.i ], [ %add5.i.i, %for.body.i ]
  %Col.sroa.2.8.load125133.lcssa.i = phi float [ 0.000000e+00, %if.end13.i ], [ %add9.i.i, %for.body.i ]
  %27 = load float* %Colour, align 4, !dbg !1333, !tbaa !1250
  %mul51.i = fmul float %Filter.sroa.0.0.load111126.lcssa.i, %Filter.sroa.3.12.load118129.lcssa.i, !dbg !1333
  %add53.i = fadd float %Filter.sroa.4.16.load122130.lcssa.i, %mul51.i, !dbg !1333
  %mul54.i = fmul float %add53.i, %27, !dbg !1333
  %add55.i = fadd float %Col.sroa.0.0.load123131.lcssa.i, %mul54.i, !dbg !1333
  store float %add55.i, float* %Colour, align 4, !dbg !1333, !tbaa !1250
  %28 = load float* %arrayidx3.i, align 4, !dbg !1334, !tbaa !1250
  %mul61.i = fmul float %Filter.sroa.1.4.load112127.lcssa.i, %Filter.sroa.3.12.load118129.lcssa.i, !dbg !1334
  %add63.i = fadd float %Filter.sroa.4.16.load122130.lcssa.i, %mul61.i, !dbg !1334
  %mul64.i = fmul float %add63.i, %28, !dbg !1334
  %add65.i = fadd float %Col.sroa.1.4.load124132.lcssa.i, %mul64.i, !dbg !1334
  store float %add65.i, float* %arrayidx3.i, align 4, !dbg !1334, !tbaa !1250
  %29 = load float* %arrayidx5.i, align 4, !dbg !1335, !tbaa !1250
  %mul71.i = fmul float %Filter.sroa.2.8.load113128.lcssa.i, %Filter.sroa.3.12.load118129.lcssa.i, !dbg !1335
  %add73.i = fadd float %Filter.sroa.4.16.load122130.lcssa.i, %mul71.i, !dbg !1335
  %mul74.i = fmul float %add73.i, %29, !dbg !1335
  %add75.i = fadd float %Col.sroa.2.8.load125133.lcssa.i, %mul74.i, !dbg !1335
  store float %add75.i, float* %arrayidx5.i, align 4, !dbg !1335, !tbaa !1250
  %30 = load float* %arrayidx7.i, align 4, !dbg !1336, !tbaa !1250
  %mul79.i = fmul float %Filter.sroa.3.12.load118129.lcssa.i, %30, !dbg !1336
  store float %mul79.i, float* %arrayidx7.i, align 4, !dbg !1336, !tbaa !1250
  %31 = load float* %arrayidx9.i, align 4, !dbg !1337, !tbaa !1250
  %mul83.i = fmul float %Filter.sroa.4.16.load122130.lcssa.i, %31, !dbg !1337
  store float %mul83.i, float* %arrayidx9.i, align 4, !dbg !1337, !tbaa !1250
  br label %if.end, !dbg !1338

if.end:                                           ; preds = %for.end.i, %land.lhs.true.i, %if.else, %if.then
  ret void, !dbg !1339
}
