define i32 @CCTKi_CoordRegisterSystem(i32 %dim, i8* %thorn, i8* %systemname) #1 {
  %new_system = alloca %struct.Coordsystem*, align 8
  %1 = load %struct.cHandledData** @CoordSystems, align 8, !tbaa !2
  %2 = bitcast %struct.Coordsystem** %new_system to i8**
  %3 = call i32 @Util_GetHandle(%struct.cHandledData* %1, i8* %systemname, i8** %2) #5
  %4 = load %struct.Coordsystem** %new_system, align 8, !tbaa !2
  %5 = icmp eq %struct.Coordsystem* %4, null
  br i1 %5, label %6, label %31

; <label>:6                                       ; preds = %0
  %7 = call i8* @malloc(i64 32) #5
  store i8* %7, i8** %2, align 8, !tbaa !2
  %8 = icmp eq i8* %7, null
  br i1 %8, label %39, label %9

; <label>:9                                       ; preds = %6
  %10 = icmp sgt i32 %dim, 0
  br i1 %10, label %11, label %29

; <label>:11                                      ; preds = %9
  %12 = getelementptr inbounds i8* %7, i64 8
  %13 = bitcast i8* %12 to i32*
  store i32 %dim, i32* %13, align 4, !tbaa !6
  %14 = call i8* @CCTK_ThornImplementation(i8* %thorn) #5
  %15 = load %struct.Coordsystem** %new_system, align 8, !tbaa !2
  %16 = getelementptr inbounds %struct.Coordsystem* %15, i64 0, i32 0
  store i8* %14, i8** %16, align 8, !tbaa !9
  %17 = call i8* @strdup(i8* %systemname) #5
  %18 = load %struct.Coordsystem** %new_system, align 8, !tbaa !2
  %19 = getelementptr inbounds %struct.Coordsystem* %18, i64 0, i32 2
  store i8* %17, i8** %19, align 8, !tbaa !10
  %20 = sext i32 %dim to i64
  %21 = call i8* @calloc(i64 %20, i64 32) #5
  %22 = load %struct.Coordsystem** %new_system, align 8, !tbaa !2
  %23 = getelementptr inbounds %struct.Coordsystem* %22, i64 0, i32 3
  %24 = bitcast %struct.Coordprops** %23 to i8**
  store i8* %21, i8** %24, align 8, !tbaa !11
  %25 = load i8** %2, align 8, !tbaa !2
  %26 = call i32 @Util_NewHandle(%struct.cHandledData** @CoordSystems, i8* %systemname, i8* %25) #5
  %27 = load i32* @num_systems, align 4, !tbaa !12
  %28 = add nsw i32 %27, 1
  store i32 %28, i32* @num_systems, align 4, !tbaa !12
  br label %39

; <label>:29                                      ; preds = %9
  %30 = call i32 (i32, i32, i8*, i8*, i8*, ...)* @CCTK_VWarn(i32 1, i32 192, i8* getelementptr inbounds ([74 x i8]* @.str, i64 0, i64 0), i8* getelementptr inbounds ([7 x i8]* @.str1, i64 0, i64 0), i8* getelementptr inbounds ([49 x i8]* @.str2, i64 0, i64 0), i32 %dim) #5
  br label %39

; <label>:31                                      ; preds = %0
  %32 = getelementptr inbounds %struct.Coordsystem* %4, i64 0, i32 1
  %33 = load i32* %32, align 4, !tbaa !6
  %34 = icmp eq i32 %33, %dim
  br i1 %34, label %35, label %37

; <label>:35                                      ; preds = %31
  %36 = call i32 (i32, i32, i8*, i8*, i8*, ...)* @CCTK_VWarn(i32 4, i32 203, i8* getelementptr inbounds ([74 x i8]* @.str, i64 0, i64 0), i8* getelementptr inbounds ([7 x i8]* @.str1, i64 0, i64 0), i8* getelementptr inbounds ([57 x i8]* @.str3, i64 0, i64 0), i8* %systemname) #5
  br label %39

; <label>:37                                      ; preds = %31
  %38 = call i32 (i32, i32, i8*, i8*, i8*, ...)* @CCTK_VWarn(i32 1, i32 210, i8* getelementptr inbounds ([74 x i8]* @.str, i64 0, i64 0), i8* getelementptr inbounds ([7 x i8]* @.str1, i64 0, i64 0), i8* getelementptr inbounds ([82 x i8]* @.str4, i64 0, i64 0), i8* %systemname) #5
  br label %39

; <label>:39                                      ; preds = %6, %35, %37, %29, %11
  %retval.0 = phi i32 [ 0, %35 ], [ -1, %37 ], [ %26, %11 ], [ -2, %29 ], [ -1, %6 ]
  ret i32 %retval.0
}
