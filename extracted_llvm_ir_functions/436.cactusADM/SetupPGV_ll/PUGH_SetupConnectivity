define %struct.PConnectivity* @PUGH_SetupConnectivity(i32 %dim, i32 %total_procs, i32* nocapture %nprocs, i32* nocapture %perme) #1 {
entry:
  tail call void @llvm.dbg.value(metadata !{i32 %dim}, i64 0, metadata !76), !dbg !748
  tail call void @llvm.dbg.value(metadata !{i32 %total_procs}, i64 0, metadata !77), !dbg !749
  tail call void @llvm.dbg.value(metadata !{i32* %nprocs}, i64 0, metadata !78), !dbg !750
  tail call void @llvm.dbg.value(metadata !{i32* %perme}, i64 0, metadata !79), !dbg !751
  %call = tail call noalias i8* @malloc(i64 32) #7, !dbg !752
  %0 = bitcast i8* %call to %struct.PConnectivity*, !dbg !752
  tail call void @llvm.dbg.value(metadata !{%struct.PConnectivity* %0}, i64 0, metadata !80), !dbg !752
  %cond = icmp eq i8* %call, null, !dbg !753
  br i1 %cond, label %if.end73, label %if.then, !dbg !753

if.then:                                          ; preds = %entry
  %conv = sext i32 %dim to i64, !dbg !754
  %mul = shl nsw i64 %conv, 2, !dbg !754
  %call1 = tail call noalias i8* @malloc(i64 %mul) #7, !dbg !754
  %1 = bitcast i8* %call1 to i32*, !dbg !754
  %nprocs2 = getelementptr inbounds i8* %call, i64 8, !dbg !754
  %2 = bitcast i8* %nprocs2 to i32**, !dbg !754
  store i32* %1, i32** %2, align 8, !dbg !754, !tbaa !397
  %call5 = tail call noalias i8* @malloc(i64 %mul) #7, !dbg !756
  %3 = bitcast i8* %call5 to i32*, !dbg !756
  %perme6 = getelementptr inbounds i8* %call, i64 24, !dbg !756
  %4 = bitcast i8* %perme6 to i32**, !dbg !756
  store i32* %3, i32** %4, align 8, !dbg !756, !tbaa !397
  %conv7 = sext i32 %total_procs to i64, !dbg !757
  %mul8 = shl nsw i64 %conv7, 3, !dbg !757
  %call9 = tail call noalias i8* @malloc(i64 %mul8) #7, !dbg !757
  %5 = bitcast i8* %call9 to i32**, !dbg !757
  %neighbours = getelementptr inbounds i8* %call, i64 16, !dbg !757
  %6 = bitcast i8* %neighbours to i32***, !dbg !757
  store i32** %5, i32*** %6, align 8, !dbg !757, !tbaa !397
  %tobool11 = icmp eq i8* %call9, null, !dbg !758
  br i1 %tobool11, label %if.else, label %if.then12, !dbg !758

if.then12:                                        ; preds = %if.then
  %mul13 = shl i32 %dim, 1, !dbg !759
  %mul14 = mul i32 %mul13, %total_procs, !dbg !759
  %conv15 = sext i32 %mul14 to i64, !dbg !759
  %mul16 = shl nsw i64 %conv15, 2, !dbg !759
  %call17 = tail call noalias i8* @malloc(i64 %mul16) #7, !dbg !759
  %7 = bitcast i8* %call17 to i32*, !dbg !759
  store i32* %7, i32** %5, align 8, !dbg !759, !tbaa !397
  br label %if.end, !dbg !761

if.else:                                          ; preds = %if.then
  store i32** null, i32*** %6, align 8, !dbg !762, !tbaa !397
  br label %if.end

if.end:                                           ; preds = %if.else, %if.then12
  %8 = phi i32** [ null, %if.else ], [ %5, %if.then12 ]
  %tobool22 = icmp eq i8* %call1, null, !dbg !764
  %tobool24 = icmp eq i8* %call5, null, !dbg !764
  %or.cond = or i1 %tobool22, %tobool24, !dbg !764
  %tobool30 = icmp eq i32** %8, null, !dbg !765
  br i1 %or.cond, label %if.then28, label %lor.lhs.false25, !dbg !764

lor.lhs.false25:                                  ; preds = %if.end
  br i1 %tobool30, label %if.end39.thread, label %if.then41, !dbg !764

if.then28:                                        ; preds = %if.end
  br i1 %tobool30, label %if.end39.thread, label %if.then31, !dbg !765

if.then31:                                        ; preds = %if.then28
  %9 = load i32** %8, align 8, !dbg !767, !tbaa !397
  %10 = bitcast i32* %9 to i8*, !dbg !767
  tail call void @free(i8* %10) #7, !dbg !767
  br label %if.end39.thread, !dbg !769

if.end39.thread:                                  ; preds = %if.then31, %if.then28, %lor.lhs.false25
  %11 = phi i32** [ %8, %if.then31 ], [ null, %if.then28 ], [ null, %lor.lhs.false25 ]
  %12 = bitcast i32** %11 to i8*, !dbg !770
  tail call void @free(i8* %12) #7, !dbg !770
  %13 = load i32** %4, align 8, !dbg !771, !tbaa !397
  %14 = bitcast i32* %13 to i8*, !dbg !771
  tail call void @free(i8* %14) #7, !dbg !771
  %15 = load i32** %2, align 8, !dbg !772, !tbaa !397
  %16 = bitcast i32* %15 to i8*, !dbg !772
  tail call void @free(i8* %16) #7, !dbg !772
  tail call void @free(i8* %call) #7, !dbg !773
  tail call void @llvm.dbg.value(metadata !774, i64 0, metadata !80), !dbg !775
  br label %if.end73, !dbg !776

if.then41:                                        ; preds = %lor.lhs.false25
  %dim42 = bitcast i8* %call to i32*, !dbg !777
  store i32 %dim, i32* %dim42, align 4, !dbg !777, !tbaa !381
  tail call void @llvm.dbg.value(metadata !2, i64 0, metadata !81), !dbg !779
  %cmp126 = icmp sgt i32 %dim, 0, !dbg !779
  br i1 %cmp126, label %for.body, label %for.cond53.preheader, !dbg !779

for.cond53.preheader:                             ; preds = %for.body, %if.then41
  %cmp54124 = icmp sgt i32 %total_procs, 1, !dbg !781
  br i1 %cmp54124, label %for.body56.lr.ph, label %for.end66, !dbg !781

for.body56.lr.ph:                                 ; preds = %for.cond53.preheader
  %mul59 = shl i32 %dim, 1, !dbg !783
  br label %for.body56, !dbg !781

for.body:                                         ; preds = %if.then41, %for.body
  %indvars.iv128 = phi i64 [ %indvars.iv.next129, %for.body ], [ 0, %if.then41 ]
  %arrayidx44 = getelementptr inbounds i32* %nprocs, i64 %indvars.iv128, !dbg !785
  %17 = load i32* %arrayidx44, align 4, !dbg !785, !tbaa !381
  %arrayidx47 = getelementptr inbounds i32* %1, i64 %indvars.iv128, !dbg !785
  store i32 %17, i32* %arrayidx47, align 4, !dbg !785, !tbaa !381
  %arrayidx49 = getelementptr inbounds i32* %perme, i64 %indvars.iv128, !dbg !787
  %18 = load i32* %arrayidx49, align 4, !dbg !787, !tbaa !381
  %arrayidx52 = getelementptr inbounds i32* %3, i64 %indvars.iv128, !dbg !787
  store i32 %18, i32* %arrayidx52, align 4, !dbg !787, !tbaa !381
  %indvars.iv.next129 = add i64 %indvars.iv128, 1, !dbg !779
  %lftr.wideiv130 = trunc i64 %indvars.iv.next129 to i32, !dbg !779
  %exitcond131 = icmp eq i32 %lftr.wideiv130, %dim, !dbg !779
  br i1 %exitcond131, label %for.cond53.preheader, label %for.body, !dbg !779

for.body56:                                       ; preds = %for.body56, %for.body56.lr.ph
  %indvars.iv = phi i64 [ 1, %for.body56.lr.ph ], [ %indvars.iv.next, %for.body56 ]
  %19 = load i32** %8, align 8, !dbg !783, !tbaa !397
  %20 = trunc i64 %indvars.iv to i32, !dbg !783
  %mul60 = mul nsw i32 %mul59, %20, !dbg !783
  %idx.ext = sext i32 %mul60 to i64, !dbg !783
  %add.ptr = getelementptr inbounds i32* %19, i64 %idx.ext, !dbg !783
  %arrayidx63 = getelementptr inbounds i32** %8, i64 %indvars.iv, !dbg !783
  store i32* %add.ptr, i32** %arrayidx63, align 8, !dbg !783, !tbaa !397
  %indvars.iv.next = add i64 %indvars.iv, 1, !dbg !781
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32, !dbg !781
  %exitcond = icmp eq i32 %lftr.wideiv, %total_procs, !dbg !781
  br i1 %exitcond, label %for.end66, label %for.body56, !dbg !781

for.end66:                                        ; preds = %for.body56, %for.cond53.preheader
  %call68 = tail call i32 @PUGH_GenerateTopology(i32 %dim, i32 %total_procs, i32* %1) #8, !dbg !788
  %call72 = tail call i32 @PUGH_GenerateNeighbours(i32 %dim, i32 %total_procs, i32* %1, i32** %8, i32* %3) #8, !dbg !789
  br label %if.end73, !dbg !790

if.end73:                                         ; preds = %entry, %if.end39.thread, %for.end66
  %this.0123 = phi %struct.PConnectivity* [ null, %if.end39.thread ], [ %0, %for.end66 ], [ null, %entry ]
  ret %struct.PConnectivity* %this.0123, !dbg !791
}
